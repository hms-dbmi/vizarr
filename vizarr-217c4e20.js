var RB=Object.defineProperty;var PB=(t,e,n)=>e in t?RB(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var Tg=(t,e,n)=>(PB(t,typeof e!="symbol"?e+"":e,n),n),RE=(t,e,n)=>{if(!e.has(t))throw TypeError("Cannot "+n)};var PE=(t,e,n)=>(RE(t,e,"read from private field"),n?n.call(t):e.get(t)),LE=(t,e,n)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,n)},ME=(t,e,n,r)=>(RE(t,e,"write to private field"),r?r.call(t,n):e.set(t,n),n);function LB(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(t,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}const MB="modulepreload",NB=function(t,e){return new URL(t,e).href},NE={},fn=function(e,n,r){if(!n||n.length===0)return e();const i=document.getElementsByTagName("link");return Promise.all(n.map(s=>{if(s=NB(s,r),s in NE)return;NE[s]=!0;const o=s.endsWith(".css"),a=o?'[rel="stylesheet"]':"";if(!!r)for(let u=i.length-1;u>=0;u--){const f=i[u];if(f.href===s&&(!o||f.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${s}"]${a}`))return;const c=document.createElement("link");if(c.rel=o?"stylesheet":MB,o||(c.as="script",c.crossOrigin=""),c.href=s,document.head.appendChild(c),o)return new Promise((u,f)=>{c.addEventListener("load",u),c.addEventListener("error",()=>f(new Error(`Unable to preload CSS for ${s}`)))})})).then(()=>e()).catch(s=>{const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=s,window.dispatchEvent(o),!o.defaultPrevented)throw s})};function Fc(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var $I={exports:{}},mh={},KI={exports:{}},Le={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Uc=Symbol.for("react.element"),OB=Symbol.for("react.portal"),DB=Symbol.for("react.fragment"),kB=Symbol.for("react.strict_mode"),QB=Symbol.for("react.profiler"),FB=Symbol.for("react.provider"),UB=Symbol.for("react.context"),GB=Symbol.for("react.forward_ref"),zB=Symbol.for("react.suspense"),VB=Symbol.for("react.memo"),jB=Symbol.for("react.lazy"),OE=Symbol.iterator;function HB(t){return t===null||typeof t!="object"?null:(t=OE&&t[OE]||t["@@iterator"],typeof t=="function"?t:null)}var qI={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},XI=Object.assign,ZI={};function za(t,e,n){this.props=t,this.context=e,this.refs=ZI,this.updater=n||qI}za.prototype.isReactComponent={};za.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};za.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function JI(){}JI.prototype=za.prototype;function Gm(t,e,n){this.props=t,this.context=e,this.refs=ZI,this.updater=n||qI}var zm=Gm.prototype=new JI;zm.constructor=Gm;XI(zm,za.prototype);zm.isPureReactComponent=!0;var DE=Array.isArray,ew=Object.prototype.hasOwnProperty,Vm={current:null},tw={key:!0,ref:!0,__self:!0,__source:!0};function nw(t,e,n){var r,i={},s=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)ew.call(e,r)&&!tw.hasOwnProperty(r)&&(i[r]=e[r]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];i.children=l}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:Uc,type:t,key:s,ref:o,props:i,_owner:Vm.current}}function WB(t,e){return{$$typeof:Uc,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function jm(t){return typeof t=="object"&&t!==null&&t.$$typeof===Uc}function YB(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var kE=/\/+/g;function Bg(t,e){return typeof t=="object"&&t!==null&&t.key!=null?YB(""+t.key):e.toString(36)}function Rf(t,e,n,r,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Uc:case OB:o=!0}}if(o)return o=t,i=i(o),t=r===""?"."+Bg(o,0):r,DE(i)?(n="",t!=null&&(n=t.replace(kE,"$&/")+"/"),Rf(i,e,n,"",function(c){return c})):i!=null&&(jm(i)&&(i=WB(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(kE,"$&/")+"/")+t)),e.push(i)),1;if(o=0,r=r===""?".":r+":",DE(t))for(var a=0;a<t.length;a++){s=t[a];var l=r+Bg(s,a);o+=Rf(s,e,n,l,i)}else if(l=HB(t),typeof l=="function")for(t=l.call(t),a=0;!(s=t.next()).done;)s=s.value,l=r+Bg(s,a++),o+=Rf(s,e,n,l,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Su(t,e,n){if(t==null)return t;var r=[],i=0;return Rf(t,r,"","",function(s){return e.call(n,s,i++)}),r}function $B(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var dn={current:null},Pf={transition:null},KB={ReactCurrentDispatcher:dn,ReactCurrentBatchConfig:Pf,ReactCurrentOwner:Vm};Le.Children={map:Su,forEach:function(t,e,n){Su(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Su(t,function(){e++}),e},toArray:function(t){return Su(t,function(e){return e})||[]},only:function(t){if(!jm(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Le.Component=za;Le.Fragment=DB;Le.Profiler=QB;Le.PureComponent=Gm;Le.StrictMode=kB;Le.Suspense=zB;Le.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=KB;Le.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=XI({},t.props),i=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=Vm.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)ew.call(e,l)&&!tw.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];r.children=a}return{$$typeof:Uc,type:t.type,key:i,ref:s,props:r,_owner:o}};Le.createContext=function(t){return t={$$typeof:UB,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:FB,_context:t},t.Consumer=t};Le.createElement=nw;Le.createFactory=function(t){var e=nw.bind(null,t);return e.type=t,e};Le.createRef=function(){return{current:null}};Le.forwardRef=function(t){return{$$typeof:GB,render:t}};Le.isValidElement=jm;Le.lazy=function(t){return{$$typeof:jB,_payload:{_status:-1,_result:t},_init:$B}};Le.memo=function(t,e){return{$$typeof:VB,type:t,compare:e===void 0?null:e}};Le.startTransition=function(t){var e=Pf.transition;Pf.transition={};try{t()}finally{Pf.transition=e}};Le.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};Le.useCallback=function(t,e){return dn.current.useCallback(t,e)};Le.useContext=function(t){return dn.current.useContext(t)};Le.useDebugValue=function(){};Le.useDeferredValue=function(t){return dn.current.useDeferredValue(t)};Le.useEffect=function(t,e){return dn.current.useEffect(t,e)};Le.useId=function(){return dn.current.useId()};Le.useImperativeHandle=function(t,e,n){return dn.current.useImperativeHandle(t,e,n)};Le.useInsertionEffect=function(t,e){return dn.current.useInsertionEffect(t,e)};Le.useLayoutEffect=function(t,e){return dn.current.useLayoutEffect(t,e)};Le.useMemo=function(t,e){return dn.current.useMemo(t,e)};Le.useReducer=function(t,e,n){return dn.current.useReducer(t,e,n)};Le.useRef=function(t){return dn.current.useRef(t)};Le.useState=function(t){return dn.current.useState(t)};Le.useSyncExternalStore=function(t,e,n){return dn.current.useSyncExternalStore(t,e,n)};Le.useTransition=function(){return dn.current.useTransition()};Le.version="18.2.0";KI.exports=Le;var S=KI.exports;const qe=Fc(S);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var qB=S,XB=Symbol.for("react.element"),ZB=Symbol.for("react.fragment"),JB=Object.prototype.hasOwnProperty,eR=qB.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,tR={key:!0,ref:!0,__self:!0,__source:!0};function rw(t,e,n){var r,i={},s=null,o=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)JB.call(e,r)&&!tR.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:XB,type:t,key:s,ref:o,props:i,_owner:eR.current}}mh.Fragment=ZB;mh.jsx=rw;mh.jsxs=rw;$I.exports=mh;var Hm=$I.exports;const xs=Hm.Fragment,H=Hm.jsx,Xe=Hm.jsxs;var pp={},iw={exports:{}},On={},sw={exports:{}},ow={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(D,X){var P=D.length;D.push(X);e:for(;0<P;){var L=P-1>>>1,O=D[L];if(0<i(O,X))D[L]=X,D[P]=O,P=L;else break e}}function n(D){return D.length===0?null:D[0]}function r(D){if(D.length===0)return null;var X=D[0],P=D.pop();if(P!==X){D[0]=P;e:for(var L=0,O=D.length,z=O>>>1;L<z;){var F=2*(L+1)-1,V=D[F],Q=F+1,j=D[Q];if(0>i(V,P))Q<O&&0>i(j,V)?(D[L]=j,D[Q]=P,L=Q):(D[L]=V,D[F]=P,L=F);else if(Q<O&&0>i(j,P))D[L]=j,D[Q]=P,L=Q;else break e}}return X}function i(D,X){var P=D.sortIndex-X.sortIndex;return P!==0?P:D.id-X.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],c=[],u=1,f=null,d=3,h=!1,g=!1,A=!1,E=typeof setTimeout=="function"?setTimeout:null,p=typeof clearTimeout=="function"?clearTimeout:null,m=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function y(D){for(var X=n(c);X!==null;){if(X.callback===null)r(c);else if(X.startTime<=D)r(c),X.sortIndex=X.expirationTime,e(l,X);else break;X=n(c)}}function _(D){if(A=!1,y(D),!g)if(n(l)!==null)g=!0,ue(I);else{var X=n(c);X!==null&&Ee(_,X.startTime-D)}}function I(D,X){g=!1,A&&(A=!1,p(B),B=-1),h=!0;var P=d;try{for(y(X),f=n(l);f!==null&&(!(f.expirationTime>X)||D&&!U());){var L=f.callback;if(typeof L=="function"){f.callback=null,d=f.priorityLevel;var O=L(f.expirationTime<=X);X=t.unstable_now(),typeof O=="function"?f.callback=O:f===n(l)&&r(l),y(X)}else r(l);f=n(l)}if(f!==null)var z=!0;else{var F=n(c);F!==null&&Ee(_,F.startTime-X),z=!1}return z}finally{f=null,d=P,h=!1}}var C=!1,b=null,B=-1,R=5,M=-1;function U(){return!(t.unstable_now()-M<R)}function G(){if(b!==null){var D=t.unstable_now();M=D;var X=!0;try{X=b(!0,D)}finally{X?Y():(C=!1,b=null)}}else C=!1}var Y;if(typeof m=="function")Y=function(){m(G)};else if(typeof MessageChannel<"u"){var Z=new MessageChannel,oe=Z.port2;Z.port1.onmessage=G,Y=function(){oe.postMessage(null)}}else Y=function(){E(G,0)};function ue(D){b=D,C||(C=!0,Y())}function Ee(D,X){B=E(function(){D(t.unstable_now())},X)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(D){D.callback=null},t.unstable_continueExecution=function(){g||h||(g=!0,ue(I))},t.unstable_forceFrameRate=function(D){0>D||125<D?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<D?Math.floor(1e3/D):5},t.unstable_getCurrentPriorityLevel=function(){return d},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(D){switch(d){case 1:case 2:case 3:var X=3;break;default:X=d}var P=d;d=X;try{return D()}finally{d=P}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(D,X){switch(D){case 1:case 2:case 3:case 4:case 5:break;default:D=3}var P=d;d=D;try{return X()}finally{d=P}},t.unstable_scheduleCallback=function(D,X,P){var L=t.unstable_now();switch(typeof P=="object"&&P!==null?(P=P.delay,P=typeof P=="number"&&0<P?L+P:L):P=L,D){case 1:var O=-1;break;case 2:O=250;break;case 5:O=1073741823;break;case 4:O=1e4;break;default:O=5e3}return O=P+O,D={id:u++,callback:X,priorityLevel:D,startTime:P,expirationTime:O,sortIndex:-1},P>L?(D.sortIndex=P,e(c,D),n(l)===null&&D===n(c)&&(A?(p(B),B=-1):A=!0,Ee(_,P-L))):(D.sortIndex=O,e(l,D),g||h||(g=!0,ue(I))),D},t.unstable_shouldYield=U,t.unstable_wrapCallback=function(D){var X=d;return function(){var P=d;d=X;try{return D.apply(this,arguments)}finally{d=P}}}})(ow);sw.exports=ow;var nR=sw.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var aw=S,Nn=nR;function K(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var lw=new Set,sc={};function Eo(t,e){Ca(t,e),Ca(t+"Capture",e)}function Ca(t,e){for(sc[t]=e,t=0;t<e.length;t++)lw.add(e[t])}var di=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),mp=Object.prototype.hasOwnProperty,rR=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,QE={},FE={};function iR(t){return mp.call(FE,t)?!0:mp.call(QE,t)?!1:rR.test(t)?FE[t]=!0:(QE[t]=!0,!1)}function sR(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function oR(t,e,n,r){if(e===null||typeof e>"u"||sR(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function hn(t,e,n,r,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var zt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){zt[t]=new hn(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];zt[e]=new hn(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){zt[t]=new hn(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){zt[t]=new hn(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){zt[t]=new hn(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){zt[t]=new hn(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){zt[t]=new hn(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){zt[t]=new hn(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){zt[t]=new hn(t,5,!1,t.toLowerCase(),null,!1,!1)});var Wm=/[\-:]([a-z])/g;function Ym(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Wm,Ym);zt[e]=new hn(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Wm,Ym);zt[e]=new hn(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Wm,Ym);zt[e]=new hn(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){zt[t]=new hn(t,1,!1,t.toLowerCase(),null,!1,!1)});zt.xlinkHref=new hn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){zt[t]=new hn(t,1,!1,t.toLowerCase(),null,!0,!0)});function $m(t,e,n,r){var i=zt.hasOwnProperty(e)?zt[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(oR(e,n,i,r)&&(n=null),r||i===null?iR(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Ii=aw.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,bu=Symbol.for("react.element"),Yo=Symbol.for("react.portal"),$o=Symbol.for("react.fragment"),Km=Symbol.for("react.strict_mode"),vp=Symbol.for("react.profiler"),cw=Symbol.for("react.provider"),uw=Symbol.for("react.context"),qm=Symbol.for("react.forward_ref"),yp=Symbol.for("react.suspense"),Ep=Symbol.for("react.suspense_list"),Xm=Symbol.for("react.memo"),ji=Symbol.for("react.lazy"),fw=Symbol.for("react.offscreen"),UE=Symbol.iterator;function cl(t){return t===null||typeof t!="object"?null:(t=UE&&t[UE]||t["@@iterator"],typeof t=="function"?t:null)}var dt=Object.assign,Rg;function Tl(t){if(Rg===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Rg=e&&e[1]||""}return`
`+Rg+t}var Pg=!1;function Lg(t,e){if(!t||Pg)return"";Pg=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var r=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){r=c}t.call(e.prototype)}else{try{throw Error()}catch(c){r=c}t()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var i=c.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==s[a]){var l=`
`+i[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{Pg=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Tl(t):""}function aR(t){switch(t.tag){case 5:return Tl(t.type);case 16:return Tl("Lazy");case 13:return Tl("Suspense");case 19:return Tl("SuspenseList");case 0:case 2:case 15:return t=Lg(t.type,!1),t;case 11:return t=Lg(t.type.render,!1),t;case 1:return t=Lg(t.type,!0),t;default:return""}}function _p(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case $o:return"Fragment";case Yo:return"Portal";case vp:return"Profiler";case Km:return"StrictMode";case yp:return"Suspense";case Ep:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case uw:return(t.displayName||"Context")+".Consumer";case cw:return(t._context.displayName||"Context")+".Provider";case qm:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Xm:return e=t.displayName||null,e!==null?e:_p(t.type)||"Memo";case ji:e=t._payload,t=t._init;try{return _p(t(e))}catch{}}return null}function lR(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return _p(e);case 8:return e===Km?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function fs(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function dw(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function cR(t){var e=dw(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Tu(t){t._valueTracker||(t._valueTracker=cR(t))}function hw(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=dw(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function od(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function xp(t,e){var n=e.checked;return dt({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function GE(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=fs(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function gw(t,e){e=e.checked,e!=null&&$m(t,"checked",e,!1)}function Cp(t,e){gw(t,e);var n=fs(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Ip(t,e.type,n):e.hasOwnProperty("defaultValue")&&Ip(t,e.type,fs(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function zE(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Ip(t,e,n){(e!=="number"||od(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Bl=Array.isArray;function da(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+fs(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function wp(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(K(91));return dt({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function VE(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(K(92));if(Bl(n)){if(1<n.length)throw Error(K(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:fs(n)}}function Aw(t,e){var n=fs(e.value),r=fs(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function jE(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function pw(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Sp(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?pw(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Bu,mw=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Bu=Bu||document.createElement("div"),Bu.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Bu.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function oc(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Ql={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},uR=["Webkit","ms","Moz","O"];Object.keys(Ql).forEach(function(t){uR.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Ql[e]=Ql[t]})});function vw(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Ql.hasOwnProperty(t)&&Ql[t]?(""+e).trim():e+"px"}function yw(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=vw(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var fR=dt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function bp(t,e){if(e){if(fR[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(K(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(K(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(K(61))}if(e.style!=null&&typeof e.style!="object")throw Error(K(62))}}function Tp(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Bp=null;function Zm(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Rp=null,ha=null,ga=null;function HE(t){if(t=Vc(t)){if(typeof Rp!="function")throw Error(K(280));var e=t.stateNode;e&&(e=xh(e),Rp(t.stateNode,t.type,e))}}function Ew(t){ha?ga?ga.push(t):ga=[t]:ha=t}function _w(){if(ha){var t=ha,e=ga;if(ga=ha=null,HE(t),e)for(t=0;t<e.length;t++)HE(e[t])}}function xw(t,e){return t(e)}function Cw(){}var Mg=!1;function Iw(t,e,n){if(Mg)return t(e,n);Mg=!0;try{return xw(t,e,n)}finally{Mg=!1,(ha!==null||ga!==null)&&(Cw(),_w())}}function ac(t,e){var n=t.stateNode;if(n===null)return null;var r=xh(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(K(231,e,typeof n));return n}var Pp=!1;if(di)try{var ul={};Object.defineProperty(ul,"passive",{get:function(){Pp=!0}}),window.addEventListener("test",ul,ul),window.removeEventListener("test",ul,ul)}catch{Pp=!1}function dR(t,e,n,r,i,s,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(u){this.onError(u)}}var Fl=!1,ad=null,ld=!1,Lp=null,hR={onError:function(t){Fl=!0,ad=t}};function gR(t,e,n,r,i,s,o,a,l){Fl=!1,ad=null,dR.apply(hR,arguments)}function AR(t,e,n,r,i,s,o,a,l){if(gR.apply(this,arguments),Fl){if(Fl){var c=ad;Fl=!1,ad=null}else throw Error(K(198));ld||(ld=!0,Lp=c)}}function _o(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function ww(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function WE(t){if(_o(t)!==t)throw Error(K(188))}function pR(t){var e=t.alternate;if(!e){if(e=_o(t),e===null)throw Error(K(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return WE(i),t;if(s===r)return WE(i),e;s=s.sibling}throw Error(K(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o)throw Error(K(189))}}if(n.alternate!==r)throw Error(K(190))}if(n.tag!==3)throw Error(K(188));return n.stateNode.current===n?t:e}function Sw(t){return t=pR(t),t!==null?bw(t):null}function bw(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=bw(t);if(e!==null)return e;t=t.sibling}return null}var Tw=Nn.unstable_scheduleCallback,YE=Nn.unstable_cancelCallback,mR=Nn.unstable_shouldYield,vR=Nn.unstable_requestPaint,Et=Nn.unstable_now,yR=Nn.unstable_getCurrentPriorityLevel,Jm=Nn.unstable_ImmediatePriority,Bw=Nn.unstable_UserBlockingPriority,cd=Nn.unstable_NormalPriority,ER=Nn.unstable_LowPriority,Rw=Nn.unstable_IdlePriority,vh=null,Fr=null;function _R(t){if(Fr&&typeof Fr.onCommitFiberRoot=="function")try{Fr.onCommitFiberRoot(vh,t,void 0,(t.current.flags&128)===128)}catch{}}var vr=Math.clz32?Math.clz32:IR,xR=Math.log,CR=Math.LN2;function IR(t){return t>>>=0,t===0?32:31-(xR(t)/CR|0)|0}var Ru=64,Pu=4194304;function Rl(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function ud(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,s=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~i;a!==0?r=Rl(a):(s&=o,s!==0&&(r=Rl(s)))}else o=n&~i,o!==0?r=Rl(o):s!==0&&(r=Rl(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-vr(e),i=1<<n,r|=t[n],e&=~i;return r}function wR(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function SR(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-vr(s),a=1<<o,l=i[o];l===-1?(!(a&n)||a&r)&&(i[o]=wR(a,e)):l<=e&&(t.expiredLanes|=a),s&=~a}}function Mp(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Pw(){var t=Ru;return Ru<<=1,!(Ru&4194240)&&(Ru=64),t}function Ng(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Gc(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-vr(e),t[e]=n}function bR(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-vr(n),s=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~s}}function ev(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-vr(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var Ue=0;function Lw(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var Mw,tv,Nw,Ow,Dw,Np=!1,Lu=[],Ji=null,es=null,ts=null,lc=new Map,cc=new Map,Wi=[],TR="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function $E(t,e){switch(t){case"focusin":case"focusout":Ji=null;break;case"dragenter":case"dragleave":es=null;break;case"mouseover":case"mouseout":ts=null;break;case"pointerover":case"pointerout":lc.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":cc.delete(e.pointerId)}}function fl(t,e,n,r,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=Vc(e),e!==null&&tv(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function BR(t,e,n,r,i){switch(e){case"focusin":return Ji=fl(Ji,t,e,n,r,i),!0;case"dragenter":return es=fl(es,t,e,n,r,i),!0;case"mouseover":return ts=fl(ts,t,e,n,r,i),!0;case"pointerover":var s=i.pointerId;return lc.set(s,fl(lc.get(s)||null,t,e,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,cc.set(s,fl(cc.get(s)||null,t,e,n,r,i)),!0}return!1}function kw(t){var e=js(t.target);if(e!==null){var n=_o(e);if(n!==null){if(e=n.tag,e===13){if(e=ww(n),e!==null){t.blockedOn=e,Dw(t.priority,function(){Nw(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Lf(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Op(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Bp=r,n.target.dispatchEvent(r),Bp=null}else return e=Vc(n),e!==null&&tv(e),t.blockedOn=n,!1;e.shift()}return!0}function KE(t,e,n){Lf(t)&&n.delete(e)}function RR(){Np=!1,Ji!==null&&Lf(Ji)&&(Ji=null),es!==null&&Lf(es)&&(es=null),ts!==null&&Lf(ts)&&(ts=null),lc.forEach(KE),cc.forEach(KE)}function dl(t,e){t.blockedOn===e&&(t.blockedOn=null,Np||(Np=!0,Nn.unstable_scheduleCallback(Nn.unstable_NormalPriority,RR)))}function uc(t){function e(i){return dl(i,t)}if(0<Lu.length){dl(Lu[0],t);for(var n=1;n<Lu.length;n++){var r=Lu[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Ji!==null&&dl(Ji,t),es!==null&&dl(es,t),ts!==null&&dl(ts,t),lc.forEach(e),cc.forEach(e),n=0;n<Wi.length;n++)r=Wi[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Wi.length&&(n=Wi[0],n.blockedOn===null);)kw(n),n.blockedOn===null&&Wi.shift()}var Aa=Ii.ReactCurrentBatchConfig,fd=!0;function PR(t,e,n,r){var i=Ue,s=Aa.transition;Aa.transition=null;try{Ue=1,nv(t,e,n,r)}finally{Ue=i,Aa.transition=s}}function LR(t,e,n,r){var i=Ue,s=Aa.transition;Aa.transition=null;try{Ue=4,nv(t,e,n,r)}finally{Ue=i,Aa.transition=s}}function nv(t,e,n,r){if(fd){var i=Op(t,e,n,r);if(i===null)jg(t,e,r,dd,n),$E(t,r);else if(BR(i,t,e,n,r))r.stopPropagation();else if($E(t,r),e&4&&-1<TR.indexOf(t)){for(;i!==null;){var s=Vc(i);if(s!==null&&Mw(s),s=Op(t,e,n,r),s===null&&jg(t,e,r,dd,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else jg(t,e,r,null,n)}}var dd=null;function Op(t,e,n,r){if(dd=null,t=Zm(r),t=js(t),t!==null)if(e=_o(t),e===null)t=null;else if(n=e.tag,n===13){if(t=ww(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return dd=t,null}function Qw(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(yR()){case Jm:return 1;case Bw:return 4;case cd:case ER:return 16;case Rw:return 536870912;default:return 16}default:return 16}}var $i=null,rv=null,Mf=null;function Fw(){if(Mf)return Mf;var t,e=rv,n=e.length,r,i="value"in $i?$i.value:$i.textContent,s=i.length;for(t=0;t<n&&e[t]===i[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===i[s-r];r++);return Mf=i.slice(t,1<r?1-r:void 0)}function Nf(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Mu(){return!0}function qE(){return!1}function Dn(t){function e(n,r,i,s,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?Mu:qE,this.isPropagationStopped=qE,this}return dt(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Mu)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Mu)},persist:function(){},isPersistent:Mu}),e}var Va={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},iv=Dn(Va),zc=dt({},Va,{view:0,detail:0}),MR=Dn(zc),Og,Dg,hl,yh=dt({},zc,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:sv,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==hl&&(hl&&t.type==="mousemove"?(Og=t.screenX-hl.screenX,Dg=t.screenY-hl.screenY):Dg=Og=0,hl=t),Og)},movementY:function(t){return"movementY"in t?t.movementY:Dg}}),XE=Dn(yh),NR=dt({},yh,{dataTransfer:0}),OR=Dn(NR),DR=dt({},zc,{relatedTarget:0}),kg=Dn(DR),kR=dt({},Va,{animationName:0,elapsedTime:0,pseudoElement:0}),QR=Dn(kR),FR=dt({},Va,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),UR=Dn(FR),GR=dt({},Va,{data:0}),ZE=Dn(GR),zR={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},VR={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},jR={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function HR(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=jR[t])?!!e[t]:!1}function sv(){return HR}var WR=dt({},zc,{key:function(t){if(t.key){var e=zR[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Nf(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?VR[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:sv,charCode:function(t){return t.type==="keypress"?Nf(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Nf(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),YR=Dn(WR),$R=dt({},yh,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),JE=Dn($R),KR=dt({},zc,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:sv}),qR=Dn(KR),XR=dt({},Va,{propertyName:0,elapsedTime:0,pseudoElement:0}),ZR=Dn(XR),JR=dt({},yh,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),e4=Dn(JR),t4=[9,13,27,32],ov=di&&"CompositionEvent"in window,Ul=null;di&&"documentMode"in document&&(Ul=document.documentMode);var n4=di&&"TextEvent"in window&&!Ul,Uw=di&&(!ov||Ul&&8<Ul&&11>=Ul),e1=String.fromCharCode(32),t1=!1;function Gw(t,e){switch(t){case"keyup":return t4.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function zw(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Ko=!1;function r4(t,e){switch(t){case"compositionend":return zw(e);case"keypress":return e.which!==32?null:(t1=!0,e1);case"textInput":return t=e.data,t===e1&&t1?null:t;default:return null}}function i4(t,e){if(Ko)return t==="compositionend"||!ov&&Gw(t,e)?(t=Fw(),Mf=rv=$i=null,Ko=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Uw&&e.locale!=="ko"?null:e.data;default:return null}}var s4={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function n1(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!s4[t.type]:e==="textarea"}function Vw(t,e,n,r){Ew(r),e=hd(e,"onChange"),0<e.length&&(n=new iv("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Gl=null,fc=null;function o4(t){e2(t,0)}function Eh(t){var e=Zo(t);if(hw(e))return t}function a4(t,e){if(t==="change")return e}var jw=!1;if(di){var Qg;if(di){var Fg="oninput"in document;if(!Fg){var r1=document.createElement("div");r1.setAttribute("oninput","return;"),Fg=typeof r1.oninput=="function"}Qg=Fg}else Qg=!1;jw=Qg&&(!document.documentMode||9<document.documentMode)}function i1(){Gl&&(Gl.detachEvent("onpropertychange",Hw),fc=Gl=null)}function Hw(t){if(t.propertyName==="value"&&Eh(fc)){var e=[];Vw(e,fc,t,Zm(t)),Iw(o4,e)}}function l4(t,e,n){t==="focusin"?(i1(),Gl=e,fc=n,Gl.attachEvent("onpropertychange",Hw)):t==="focusout"&&i1()}function c4(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Eh(fc)}function u4(t,e){if(t==="click")return Eh(e)}function f4(t,e){if(t==="input"||t==="change")return Eh(e)}function d4(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var xr=typeof Object.is=="function"?Object.is:d4;function dc(t,e){if(xr(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!mp.call(e,i)||!xr(t[i],e[i]))return!1}return!0}function s1(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function o1(t,e){var n=s1(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=s1(n)}}function Ww(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?Ww(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function Yw(){for(var t=window,e=od();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=od(t.document)}return e}function av(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function h4(t){var e=Yw(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&Ww(n.ownerDocument.documentElement,n)){if(r!==null&&av(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!t.extend&&s>r&&(i=r,r=s,s=i),i=o1(n,s);var o=o1(n,r);i&&o&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var g4=di&&"documentMode"in document&&11>=document.documentMode,qo=null,Dp=null,zl=null,kp=!1;function a1(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;kp||qo==null||qo!==od(r)||(r=qo,"selectionStart"in r&&av(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),zl&&dc(zl,r)||(zl=r,r=hd(Dp,"onSelect"),0<r.length&&(e=new iv("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=qo)))}function Nu(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Xo={animationend:Nu("Animation","AnimationEnd"),animationiteration:Nu("Animation","AnimationIteration"),animationstart:Nu("Animation","AnimationStart"),transitionend:Nu("Transition","TransitionEnd")},Ug={},$w={};di&&($w=document.createElement("div").style,"AnimationEvent"in window||(delete Xo.animationend.animation,delete Xo.animationiteration.animation,delete Xo.animationstart.animation),"TransitionEvent"in window||delete Xo.transitionend.transition);function _h(t){if(Ug[t])return Ug[t];if(!Xo[t])return t;var e=Xo[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in $w)return Ug[t]=e[n];return t}var Kw=_h("animationend"),qw=_h("animationiteration"),Xw=_h("animationstart"),Zw=_h("transitionend"),Jw=new Map,l1="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Cs(t,e){Jw.set(t,e),Eo(e,[t])}for(var Gg=0;Gg<l1.length;Gg++){var zg=l1[Gg],A4=zg.toLowerCase(),p4=zg[0].toUpperCase()+zg.slice(1);Cs(A4,"on"+p4)}Cs(Kw,"onAnimationEnd");Cs(qw,"onAnimationIteration");Cs(Xw,"onAnimationStart");Cs("dblclick","onDoubleClick");Cs("focusin","onFocus");Cs("focusout","onBlur");Cs(Zw,"onTransitionEnd");Ca("onMouseEnter",["mouseout","mouseover"]);Ca("onMouseLeave",["mouseout","mouseover"]);Ca("onPointerEnter",["pointerout","pointerover"]);Ca("onPointerLeave",["pointerout","pointerover"]);Eo("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Eo("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Eo("onBeforeInput",["compositionend","keypress","textInput","paste"]);Eo("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Eo("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Eo("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Pl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),m4=new Set("cancel close invalid load scroll toggle".split(" ").concat(Pl));function c1(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,AR(r,e,void 0,t),t.currentTarget=null}function e2(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==s&&i.isPropagationStopped())break e;c1(i,a,c),s=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,c=a.currentTarget,a=a.listener,l!==s&&i.isPropagationStopped())break e;c1(i,a,c),s=l}}}if(ld)throw t=Lp,ld=!1,Lp=null,t}function tt(t,e){var n=e[zp];n===void 0&&(n=e[zp]=new Set);var r=t+"__bubble";n.has(r)||(t2(e,t,2,!1),n.add(r))}function Vg(t,e,n){var r=0;e&&(r|=4),t2(n,t,r,e)}var Ou="_reactListening"+Math.random().toString(36).slice(2);function hc(t){if(!t[Ou]){t[Ou]=!0,lw.forEach(function(n){n!=="selectionchange"&&(m4.has(n)||Vg(n,!1,t),Vg(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Ou]||(e[Ou]=!0,Vg("selectionchange",!1,e))}}function t2(t,e,n,r){switch(Qw(e)){case 1:var i=PR;break;case 4:i=LR;break;default:i=nv}n=i.bind(null,e,n,t),i=void 0,!Pp||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function jg(t,e,n,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;o=o.return}for(;a!==null;){if(o=js(a),o===null)return;if(l=o.tag,l===5||l===6){r=s=o;continue e}a=a.parentNode}}r=r.return}Iw(function(){var c=s,u=Zm(n),f=[];e:{var d=Jw.get(t);if(d!==void 0){var h=iv,g=t;switch(t){case"keypress":if(Nf(n)===0)break e;case"keydown":case"keyup":h=YR;break;case"focusin":g="focus",h=kg;break;case"focusout":g="blur",h=kg;break;case"beforeblur":case"afterblur":h=kg;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":h=XE;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":h=OR;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":h=qR;break;case Kw:case qw:case Xw:h=QR;break;case Zw:h=ZR;break;case"scroll":h=MR;break;case"wheel":h=e4;break;case"copy":case"cut":case"paste":h=UR;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":h=JE}var A=(e&4)!==0,E=!A&&t==="scroll",p=A?d!==null?d+"Capture":null:d;A=[];for(var m=c,y;m!==null;){y=m;var _=y.stateNode;if(y.tag===5&&_!==null&&(y=_,p!==null&&(_=ac(m,p),_!=null&&A.push(gc(m,_,y)))),E)break;m=m.return}0<A.length&&(d=new h(d,g,null,n,u),f.push({event:d,listeners:A}))}}if(!(e&7)){e:{if(d=t==="mouseover"||t==="pointerover",h=t==="mouseout"||t==="pointerout",d&&n!==Bp&&(g=n.relatedTarget||n.fromElement)&&(js(g)||g[hi]))break e;if((h||d)&&(d=u.window===u?u:(d=u.ownerDocument)?d.defaultView||d.parentWindow:window,h?(g=n.relatedTarget||n.toElement,h=c,g=g?js(g):null,g!==null&&(E=_o(g),g!==E||g.tag!==5&&g.tag!==6)&&(g=null)):(h=null,g=c),h!==g)){if(A=XE,_="onMouseLeave",p="onMouseEnter",m="mouse",(t==="pointerout"||t==="pointerover")&&(A=JE,_="onPointerLeave",p="onPointerEnter",m="pointer"),E=h==null?d:Zo(h),y=g==null?d:Zo(g),d=new A(_,m+"leave",h,n,u),d.target=E,d.relatedTarget=y,_=null,js(u)===c&&(A=new A(p,m+"enter",g,n,u),A.target=y,A.relatedTarget=E,_=A),E=_,h&&g)t:{for(A=h,p=g,m=0,y=A;y;y=Po(y))m++;for(y=0,_=p;_;_=Po(_))y++;for(;0<m-y;)A=Po(A),m--;for(;0<y-m;)p=Po(p),y--;for(;m--;){if(A===p||p!==null&&A===p.alternate)break t;A=Po(A),p=Po(p)}A=null}else A=null;h!==null&&u1(f,d,h,A,!1),g!==null&&E!==null&&u1(f,E,g,A,!0)}}e:{if(d=c?Zo(c):window,h=d.nodeName&&d.nodeName.toLowerCase(),h==="select"||h==="input"&&d.type==="file")var I=a4;else if(n1(d))if(jw)I=f4;else{I=c4;var C=l4}else(h=d.nodeName)&&h.toLowerCase()==="input"&&(d.type==="checkbox"||d.type==="radio")&&(I=u4);if(I&&(I=I(t,c))){Vw(f,I,n,u);break e}C&&C(t,d,c),t==="focusout"&&(C=d._wrapperState)&&C.controlled&&d.type==="number"&&Ip(d,"number",d.value)}switch(C=c?Zo(c):window,t){case"focusin":(n1(C)||C.contentEditable==="true")&&(qo=C,Dp=c,zl=null);break;case"focusout":zl=Dp=qo=null;break;case"mousedown":kp=!0;break;case"contextmenu":case"mouseup":case"dragend":kp=!1,a1(f,n,u);break;case"selectionchange":if(g4)break;case"keydown":case"keyup":a1(f,n,u)}var b;if(ov)e:{switch(t){case"compositionstart":var B="onCompositionStart";break e;case"compositionend":B="onCompositionEnd";break e;case"compositionupdate":B="onCompositionUpdate";break e}B=void 0}else Ko?Gw(t,n)&&(B="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(B="onCompositionStart");B&&(Uw&&n.locale!=="ko"&&(Ko||B!=="onCompositionStart"?B==="onCompositionEnd"&&Ko&&(b=Fw()):($i=u,rv="value"in $i?$i.value:$i.textContent,Ko=!0)),C=hd(c,B),0<C.length&&(B=new ZE(B,t,null,n,u),f.push({event:B,listeners:C}),b?B.data=b:(b=zw(n),b!==null&&(B.data=b)))),(b=n4?r4(t,n):i4(t,n))&&(c=hd(c,"onBeforeInput"),0<c.length&&(u=new ZE("onBeforeInput","beforeinput",null,n,u),f.push({event:u,listeners:c}),u.data=b))}e2(f,e)})}function gc(t,e,n){return{instance:t,listener:e,currentTarget:n}}function hd(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=ac(t,n),s!=null&&r.unshift(gc(t,s,i)),s=ac(t,e),s!=null&&r.push(gc(t,s,i))),t=t.return}return r}function Po(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function u1(t,e,n,r,i){for(var s=e._reactName,o=[];n!==null&&n!==r;){var a=n,l=a.alternate,c=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&c!==null&&(a=c,i?(l=ac(n,s),l!=null&&o.unshift(gc(n,l,a))):i||(l=ac(n,s),l!=null&&o.push(gc(n,l,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var v4=/\r\n?/g,y4=/\u0000|\uFFFD/g;function f1(t){return(typeof t=="string"?t:""+t).replace(v4,`
`).replace(y4,"")}function Du(t,e,n){if(e=f1(e),f1(t)!==e&&n)throw Error(K(425))}function gd(){}var Qp=null,Fp=null;function Up(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Gp=typeof setTimeout=="function"?setTimeout:void 0,E4=typeof clearTimeout=="function"?clearTimeout:void 0,d1=typeof Promise=="function"?Promise:void 0,_4=typeof queueMicrotask=="function"?queueMicrotask:typeof d1<"u"?function(t){return d1.resolve(null).then(t).catch(x4)}:Gp;function x4(t){setTimeout(function(){throw t})}function Hg(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),uc(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);uc(e)}function ns(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function h1(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var ja=Math.random().toString(36).slice(2),Nr="__reactFiber$"+ja,Ac="__reactProps$"+ja,hi="__reactContainer$"+ja,zp="__reactEvents$"+ja,C4="__reactListeners$"+ja,I4="__reactHandles$"+ja;function js(t){var e=t[Nr];if(e)return e;for(var n=t.parentNode;n;){if(e=n[hi]||n[Nr]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=h1(t);t!==null;){if(n=t[Nr])return n;t=h1(t)}return e}t=n,n=t.parentNode}return null}function Vc(t){return t=t[Nr]||t[hi],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Zo(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(K(33))}function xh(t){return t[Ac]||null}var Vp=[],Jo=-1;function Is(t){return{current:t}}function nt(t){0>Jo||(t.current=Vp[Jo],Vp[Jo]=null,Jo--)}function Ke(t,e){Jo++,Vp[Jo]=t.current,t.current=e}var ds={},en=Is(ds),vn=Is(!1),no=ds;function Ia(t,e){var n=t.type.contextTypes;if(!n)return ds;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function yn(t){return t=t.childContextTypes,t!=null}function Ad(){nt(vn),nt(en)}function g1(t,e,n){if(en.current!==ds)throw Error(K(168));Ke(en,e),Ke(vn,n)}function n2(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(K(108,lR(t)||"Unknown",i));return dt({},n,r)}function pd(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||ds,no=en.current,Ke(en,t),Ke(vn,vn.current),!0}function A1(t,e,n){var r=t.stateNode;if(!r)throw Error(K(169));n?(t=n2(t,e,no),r.__reactInternalMemoizedMergedChildContext=t,nt(vn),nt(en),Ke(en,t)):nt(vn),Ke(vn,n)}var ti=null,Ch=!1,Wg=!1;function r2(t){ti===null?ti=[t]:ti.push(t)}function w4(t){Ch=!0,r2(t)}function ws(){if(!Wg&&ti!==null){Wg=!0;var t=0,e=Ue;try{var n=ti;for(Ue=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}ti=null,Ch=!1}catch(i){throw ti!==null&&(ti=ti.slice(t+1)),Tw(Jm,ws),i}finally{Ue=e,Wg=!1}}return null}var ea=[],ta=0,md=null,vd=0,jn=[],Hn=0,ro=null,ii=1,si="";function Ds(t,e){ea[ta++]=vd,ea[ta++]=md,md=t,vd=e}function i2(t,e,n){jn[Hn++]=ii,jn[Hn++]=si,jn[Hn++]=ro,ro=t;var r=ii;t=si;var i=32-vr(r)-1;r&=~(1<<i),n+=1;var s=32-vr(e)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,ii=1<<32-vr(e)+i|n<<i|r,si=s+t}else ii=1<<s|n<<i|r,si=t}function lv(t){t.return!==null&&(Ds(t,1),i2(t,1,0))}function cv(t){for(;t===md;)md=ea[--ta],ea[ta]=null,vd=ea[--ta],ea[ta]=null;for(;t===ro;)ro=jn[--Hn],jn[Hn]=null,si=jn[--Hn],jn[Hn]=null,ii=jn[--Hn],jn[Hn]=null}var Pn=null,Rn=null,at=!1,ur=null;function s2(t,e){var n=Wn(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function p1(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Pn=t,Rn=ns(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Pn=t,Rn=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=ro!==null?{id:ii,overflow:si}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Wn(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Pn=t,Rn=null,!0):!1;default:return!1}}function jp(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Hp(t){if(at){var e=Rn;if(e){var n=e;if(!p1(t,e)){if(jp(t))throw Error(K(418));e=ns(n.nextSibling);var r=Pn;e&&p1(t,e)?s2(r,n):(t.flags=t.flags&-4097|2,at=!1,Pn=t)}}else{if(jp(t))throw Error(K(418));t.flags=t.flags&-4097|2,at=!1,Pn=t}}}function m1(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Pn=t}function ku(t){if(t!==Pn)return!1;if(!at)return m1(t),at=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Up(t.type,t.memoizedProps)),e&&(e=Rn)){if(jp(t))throw o2(),Error(K(418));for(;e;)s2(t,e),e=ns(e.nextSibling)}if(m1(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(K(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Rn=ns(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Rn=null}}else Rn=Pn?ns(t.stateNode.nextSibling):null;return!0}function o2(){for(var t=Rn;t;)t=ns(t.nextSibling)}function wa(){Rn=Pn=null,at=!1}function uv(t){ur===null?ur=[t]:ur.push(t)}var S4=Ii.ReactCurrentBatchConfig;function lr(t,e){if(t&&t.defaultProps){e=dt({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}var yd=Is(null),Ed=null,na=null,fv=null;function dv(){fv=na=Ed=null}function hv(t){var e=yd.current;nt(yd),t._currentValue=e}function Wp(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function pa(t,e){Ed=t,fv=na=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(mn=!0),t.firstContext=null)}function Xn(t){var e=t._currentValue;if(fv!==t)if(t={context:t,memoizedValue:e,next:null},na===null){if(Ed===null)throw Error(K(308));na=t,Ed.dependencies={lanes:0,firstContext:t}}else na=na.next=t;return e}var Hs=null;function gv(t){Hs===null?Hs=[t]:Hs.push(t)}function a2(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,gv(e)):(n.next=i.next,i.next=n),e.interleaved=n,gi(t,r)}function gi(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Hi=!1;function Av(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function l2(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function li(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function rs(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,Ne&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,gi(t,n)}return i=r.interleaved,i===null?(e.next=e,gv(r)):(e.next=i.next,i.next=e),r.interleaved=e,gi(t,n)}function Of(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,ev(t,n)}}function v1(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?i=s=e:s=s.next=e}else i=s=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function _d(t,e,n,r){var i=t.updateQueue;Hi=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var l=a,c=l.next;l.next=null,o===null?s=c:o.next=c,o=l;var u=t.alternate;u!==null&&(u=u.updateQueue,a=u.lastBaseUpdate,a!==o&&(a===null?u.firstBaseUpdate=c:a.next=c,u.lastBaseUpdate=l))}if(s!==null){var f=i.baseState;o=0,u=c=l=null,a=s;do{var d=a.lane,h=a.eventTime;if((r&d)===d){u!==null&&(u=u.next={eventTime:h,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var g=t,A=a;switch(d=e,h=n,A.tag){case 1:if(g=A.payload,typeof g=="function"){f=g.call(h,f,d);break e}f=g;break e;case 3:g.flags=g.flags&-65537|128;case 0:if(g=A.payload,d=typeof g=="function"?g.call(h,f,d):g,d==null)break e;f=dt({},f,d);break e;case 2:Hi=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,d=i.effects,d===null?i.effects=[a]:d.push(a))}else h={eventTime:h,lane:d,tag:a.tag,payload:a.payload,callback:a.callback,next:null},u===null?(c=u=h,l=f):u=u.next=h,o|=d;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;d=a,a=d.next,d.next=null,i.lastBaseUpdate=d,i.shared.pending=null}}while(1);if(u===null&&(l=f),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=u,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);so|=o,t.lanes=o,t.memoizedState=f}}function y1(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(K(191,i));i.call(r)}}}var c2=new aw.Component().refs;function Yp(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:dt({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Ih={isMounted:function(t){return(t=t._reactInternals)?_o(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=ln(),i=ss(t),s=li(r,i);s.payload=e,n!=null&&(s.callback=n),e=rs(t,s,i),e!==null&&(yr(e,t,i,r),Of(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=ln(),i=ss(t),s=li(r,i);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=rs(t,s,i),e!==null&&(yr(e,t,i,r),Of(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=ln(),r=ss(t),i=li(n,r);i.tag=2,e!=null&&(i.callback=e),e=rs(t,i,r),e!==null&&(yr(e,t,r,n),Of(e,t,r))}};function E1(t,e,n,r,i,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,o):e.prototype&&e.prototype.isPureReactComponent?!dc(n,r)||!dc(i,s):!0}function u2(t,e,n){var r=!1,i=ds,s=e.contextType;return typeof s=="object"&&s!==null?s=Xn(s):(i=yn(e)?no:en.current,r=e.contextTypes,s=(r=r!=null)?Ia(t,i):ds),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Ih,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function _1(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Ih.enqueueReplaceState(e,e.state,null)}function $p(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs=c2,Av(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=Xn(s):(s=yn(e)?no:en.current,i.context=Ia(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(Yp(t,e,s,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&Ih.enqueueReplaceState(i,i.state,null),_d(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function gl(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(K(309));var r=n.stateNode}if(!r)throw Error(K(147,t));var i=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=i.refs;a===c2&&(a=i.refs={}),o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(K(284));if(!n._owner)throw Error(K(290,t))}return t}function Qu(t,e){throw t=Object.prototype.toString.call(e),Error(K(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function x1(t){var e=t._init;return e(t._payload)}function f2(t){function e(p,m){if(t){var y=p.deletions;y===null?(p.deletions=[m],p.flags|=16):y.push(m)}}function n(p,m){if(!t)return null;for(;m!==null;)e(p,m),m=m.sibling;return null}function r(p,m){for(p=new Map;m!==null;)m.key!==null?p.set(m.key,m):p.set(m.index,m),m=m.sibling;return p}function i(p,m){return p=os(p,m),p.index=0,p.sibling=null,p}function s(p,m,y){return p.index=y,t?(y=p.alternate,y!==null?(y=y.index,y<m?(p.flags|=2,m):y):(p.flags|=2,m)):(p.flags|=1048576,m)}function o(p){return t&&p.alternate===null&&(p.flags|=2),p}function a(p,m,y,_){return m===null||m.tag!==6?(m=Jg(y,p.mode,_),m.return=p,m):(m=i(m,y),m.return=p,m)}function l(p,m,y,_){var I=y.type;return I===$o?u(p,m,y.props.children,_,y.key):m!==null&&(m.elementType===I||typeof I=="object"&&I!==null&&I.$$typeof===ji&&x1(I)===m.type)?(_=i(m,y.props),_.ref=gl(p,m,y),_.return=p,_):(_=Gf(y.type,y.key,y.props,null,p.mode,_),_.ref=gl(p,m,y),_.return=p,_)}function c(p,m,y,_){return m===null||m.tag!==4||m.stateNode.containerInfo!==y.containerInfo||m.stateNode.implementation!==y.implementation?(m=eA(y,p.mode,_),m.return=p,m):(m=i(m,y.children||[]),m.return=p,m)}function u(p,m,y,_,I){return m===null||m.tag!==7?(m=Zs(y,p.mode,_,I),m.return=p,m):(m=i(m,y),m.return=p,m)}function f(p,m,y){if(typeof m=="string"&&m!==""||typeof m=="number")return m=Jg(""+m,p.mode,y),m.return=p,m;if(typeof m=="object"&&m!==null){switch(m.$$typeof){case bu:return y=Gf(m.type,m.key,m.props,null,p.mode,y),y.ref=gl(p,null,m),y.return=p,y;case Yo:return m=eA(m,p.mode,y),m.return=p,m;case ji:var _=m._init;return f(p,_(m._payload),y)}if(Bl(m)||cl(m))return m=Zs(m,p.mode,y,null),m.return=p,m;Qu(p,m)}return null}function d(p,m,y,_){var I=m!==null?m.key:null;if(typeof y=="string"&&y!==""||typeof y=="number")return I!==null?null:a(p,m,""+y,_);if(typeof y=="object"&&y!==null){switch(y.$$typeof){case bu:return y.key===I?l(p,m,y,_):null;case Yo:return y.key===I?c(p,m,y,_):null;case ji:return I=y._init,d(p,m,I(y._payload),_)}if(Bl(y)||cl(y))return I!==null?null:u(p,m,y,_,null);Qu(p,y)}return null}function h(p,m,y,_,I){if(typeof _=="string"&&_!==""||typeof _=="number")return p=p.get(y)||null,a(m,p,""+_,I);if(typeof _=="object"&&_!==null){switch(_.$$typeof){case bu:return p=p.get(_.key===null?y:_.key)||null,l(m,p,_,I);case Yo:return p=p.get(_.key===null?y:_.key)||null,c(m,p,_,I);case ji:var C=_._init;return h(p,m,y,C(_._payload),I)}if(Bl(_)||cl(_))return p=p.get(y)||null,u(m,p,_,I,null);Qu(m,_)}return null}function g(p,m,y,_){for(var I=null,C=null,b=m,B=m=0,R=null;b!==null&&B<y.length;B++){b.index>B?(R=b,b=null):R=b.sibling;var M=d(p,b,y[B],_);if(M===null){b===null&&(b=R);break}t&&b&&M.alternate===null&&e(p,b),m=s(M,m,B),C===null?I=M:C.sibling=M,C=M,b=R}if(B===y.length)return n(p,b),at&&Ds(p,B),I;if(b===null){for(;B<y.length;B++)b=f(p,y[B],_),b!==null&&(m=s(b,m,B),C===null?I=b:C.sibling=b,C=b);return at&&Ds(p,B),I}for(b=r(p,b);B<y.length;B++)R=h(b,p,B,y[B],_),R!==null&&(t&&R.alternate!==null&&b.delete(R.key===null?B:R.key),m=s(R,m,B),C===null?I=R:C.sibling=R,C=R);return t&&b.forEach(function(U){return e(p,U)}),at&&Ds(p,B),I}function A(p,m,y,_){var I=cl(y);if(typeof I!="function")throw Error(K(150));if(y=I.call(y),y==null)throw Error(K(151));for(var C=I=null,b=m,B=m=0,R=null,M=y.next();b!==null&&!M.done;B++,M=y.next()){b.index>B?(R=b,b=null):R=b.sibling;var U=d(p,b,M.value,_);if(U===null){b===null&&(b=R);break}t&&b&&U.alternate===null&&e(p,b),m=s(U,m,B),C===null?I=U:C.sibling=U,C=U,b=R}if(M.done)return n(p,b),at&&Ds(p,B),I;if(b===null){for(;!M.done;B++,M=y.next())M=f(p,M.value,_),M!==null&&(m=s(M,m,B),C===null?I=M:C.sibling=M,C=M);return at&&Ds(p,B),I}for(b=r(p,b);!M.done;B++,M=y.next())M=h(b,p,B,M.value,_),M!==null&&(t&&M.alternate!==null&&b.delete(M.key===null?B:M.key),m=s(M,m,B),C===null?I=M:C.sibling=M,C=M);return t&&b.forEach(function(G){return e(p,G)}),at&&Ds(p,B),I}function E(p,m,y,_){if(typeof y=="object"&&y!==null&&y.type===$o&&y.key===null&&(y=y.props.children),typeof y=="object"&&y!==null){switch(y.$$typeof){case bu:e:{for(var I=y.key,C=m;C!==null;){if(C.key===I){if(I=y.type,I===$o){if(C.tag===7){n(p,C.sibling),m=i(C,y.props.children),m.return=p,p=m;break e}}else if(C.elementType===I||typeof I=="object"&&I!==null&&I.$$typeof===ji&&x1(I)===C.type){n(p,C.sibling),m=i(C,y.props),m.ref=gl(p,C,y),m.return=p,p=m;break e}n(p,C);break}else e(p,C);C=C.sibling}y.type===$o?(m=Zs(y.props.children,p.mode,_,y.key),m.return=p,p=m):(_=Gf(y.type,y.key,y.props,null,p.mode,_),_.ref=gl(p,m,y),_.return=p,p=_)}return o(p);case Yo:e:{for(C=y.key;m!==null;){if(m.key===C)if(m.tag===4&&m.stateNode.containerInfo===y.containerInfo&&m.stateNode.implementation===y.implementation){n(p,m.sibling),m=i(m,y.children||[]),m.return=p,p=m;break e}else{n(p,m);break}else e(p,m);m=m.sibling}m=eA(y,p.mode,_),m.return=p,p=m}return o(p);case ji:return C=y._init,E(p,m,C(y._payload),_)}if(Bl(y))return g(p,m,y,_);if(cl(y))return A(p,m,y,_);Qu(p,y)}return typeof y=="string"&&y!==""||typeof y=="number"?(y=""+y,m!==null&&m.tag===6?(n(p,m.sibling),m=i(m,y),m.return=p,p=m):(n(p,m),m=Jg(y,p.mode,_),m.return=p,p=m),o(p)):n(p,m)}return E}var Sa=f2(!0),d2=f2(!1),jc={},Ur=Is(jc),pc=Is(jc),mc=Is(jc);function Ws(t){if(t===jc)throw Error(K(174));return t}function pv(t,e){switch(Ke(mc,e),Ke(pc,t),Ke(Ur,jc),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Sp(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Sp(e,t)}nt(Ur),Ke(Ur,e)}function ba(){nt(Ur),nt(pc),nt(mc)}function h2(t){Ws(mc.current);var e=Ws(Ur.current),n=Sp(e,t.type);e!==n&&(Ke(pc,t),Ke(Ur,n))}function mv(t){pc.current===t&&(nt(Ur),nt(pc))}var ct=Is(0);function xd(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Yg=[];function vv(){for(var t=0;t<Yg.length;t++)Yg[t]._workInProgressVersionPrimary=null;Yg.length=0}var Df=Ii.ReactCurrentDispatcher,$g=Ii.ReactCurrentBatchConfig,io=0,ft=null,wt=null,Bt=null,Cd=!1,Vl=!1,vc=0,b4=0;function Ht(){throw Error(K(321))}function yv(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!xr(t[n],e[n]))return!1;return!0}function Ev(t,e,n,r,i,s){if(io=s,ft=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Df.current=t===null||t.memoizedState===null?P4:L4,t=n(r,i),Vl){s=0;do{if(Vl=!1,vc=0,25<=s)throw Error(K(301));s+=1,Bt=wt=null,e.updateQueue=null,Df.current=M4,t=n(r,i)}while(Vl)}if(Df.current=Id,e=wt!==null&&wt.next!==null,io=0,Bt=wt=ft=null,Cd=!1,e)throw Error(K(300));return t}function _v(){var t=vc!==0;return vc=0,t}function Mr(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Bt===null?ft.memoizedState=Bt=t:Bt=Bt.next=t,Bt}function Zn(){if(wt===null){var t=ft.alternate;t=t!==null?t.memoizedState:null}else t=wt.next;var e=Bt===null?ft.memoizedState:Bt.next;if(e!==null)Bt=e,wt=t;else{if(t===null)throw Error(K(310));wt=t,t={memoizedState:wt.memoizedState,baseState:wt.baseState,baseQueue:wt.baseQueue,queue:wt.queue,next:null},Bt===null?ft.memoizedState=Bt=t:Bt=Bt.next=t}return Bt}function yc(t,e){return typeof e=="function"?e(t):e}function Kg(t){var e=Zn(),n=e.queue;if(n===null)throw Error(K(311));n.lastRenderedReducer=t;var r=wt,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var a=o=null,l=null,c=s;do{var u=c.lane;if((io&u)===u)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:t(r,c.action);else{var f={lane:u,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(a=l=f,o=r):l=l.next=f,ft.lanes|=u,so|=u}c=c.next}while(c!==null&&c!==s);l===null?o=r:l.next=a,xr(r,e.memoizedState)||(mn=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=l,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do s=i.lane,ft.lanes|=s,so|=s,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function qg(t){var e=Zn(),n=e.queue;if(n===null)throw Error(K(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,s=e.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do s=t(s,o.action),o=o.next;while(o!==i);xr(s,e.memoizedState)||(mn=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function g2(){}function A2(t,e){var n=ft,r=Zn(),i=e(),s=!xr(r.memoizedState,i);if(s&&(r.memoizedState=i,mn=!0),r=r.queue,xv(v2.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||Bt!==null&&Bt.memoizedState.tag&1){if(n.flags|=2048,Ec(9,m2.bind(null,n,r,i,e),void 0,null),Lt===null)throw Error(K(349));io&30||p2(n,e,i)}return i}function p2(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=ft.updateQueue,e===null?(e={lastEffect:null,stores:null},ft.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function m2(t,e,n,r){e.value=n,e.getSnapshot=r,y2(e)&&E2(t)}function v2(t,e,n){return n(function(){y2(e)&&E2(t)})}function y2(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!xr(t,n)}catch{return!0}}function E2(t){var e=gi(t,1);e!==null&&yr(e,t,1,-1)}function C1(t){var e=Mr();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:yc,lastRenderedState:t},e.queue=t,t=t.dispatch=R4.bind(null,ft,t),[e.memoizedState,t]}function Ec(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=ft.updateQueue,e===null?(e={lastEffect:null,stores:null},ft.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function _2(){return Zn().memoizedState}function kf(t,e,n,r){var i=Mr();ft.flags|=t,i.memoizedState=Ec(1|e,n,void 0,r===void 0?null:r)}function wh(t,e,n,r){var i=Zn();r=r===void 0?null:r;var s=void 0;if(wt!==null){var o=wt.memoizedState;if(s=o.destroy,r!==null&&yv(r,o.deps)){i.memoizedState=Ec(e,n,s,r);return}}ft.flags|=t,i.memoizedState=Ec(1|e,n,s,r)}function I1(t,e){return kf(8390656,8,t,e)}function xv(t,e){return wh(2048,8,t,e)}function x2(t,e){return wh(4,2,t,e)}function C2(t,e){return wh(4,4,t,e)}function I2(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function w2(t,e,n){return n=n!=null?n.concat([t]):null,wh(4,4,I2.bind(null,e,t),n)}function Cv(){}function S2(t,e){var n=Zn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&yv(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function b2(t,e){var n=Zn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&yv(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function T2(t,e,n){return io&21?(xr(n,e)||(n=Pw(),ft.lanes|=n,so|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,mn=!0),t.memoizedState=n)}function T4(t,e){var n=Ue;Ue=n!==0&&4>n?n:4,t(!0);var r=$g.transition;$g.transition={};try{t(!1),e()}finally{Ue=n,$g.transition=r}}function B2(){return Zn().memoizedState}function B4(t,e,n){var r=ss(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},R2(t))P2(e,n);else if(n=a2(t,e,n,r),n!==null){var i=ln();yr(n,t,r,i),L2(n,e,r)}}function R4(t,e,n){var r=ss(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(R2(t))P2(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,n);if(i.hasEagerState=!0,i.eagerState=a,xr(a,o)){var l=e.interleaved;l===null?(i.next=i,gv(e)):(i.next=l.next,l.next=i),e.interleaved=i;return}}catch{}finally{}n=a2(t,e,i,r),n!==null&&(i=ln(),yr(n,t,r,i),L2(n,e,r))}}function R2(t){var e=t.alternate;return t===ft||e!==null&&e===ft}function P2(t,e){Vl=Cd=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function L2(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,ev(t,n)}}var Id={readContext:Xn,useCallback:Ht,useContext:Ht,useEffect:Ht,useImperativeHandle:Ht,useInsertionEffect:Ht,useLayoutEffect:Ht,useMemo:Ht,useReducer:Ht,useRef:Ht,useState:Ht,useDebugValue:Ht,useDeferredValue:Ht,useTransition:Ht,useMutableSource:Ht,useSyncExternalStore:Ht,useId:Ht,unstable_isNewReconciler:!1},P4={readContext:Xn,useCallback:function(t,e){return Mr().memoizedState=[t,e===void 0?null:e],t},useContext:Xn,useEffect:I1,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,kf(4194308,4,I2.bind(null,e,t),n)},useLayoutEffect:function(t,e){return kf(4194308,4,t,e)},useInsertionEffect:function(t,e){return kf(4,2,t,e)},useMemo:function(t,e){var n=Mr();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Mr();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=B4.bind(null,ft,t),[r.memoizedState,t]},useRef:function(t){var e=Mr();return t={current:t},e.memoizedState=t},useState:C1,useDebugValue:Cv,useDeferredValue:function(t){return Mr().memoizedState=t},useTransition:function(){var t=C1(!1),e=t[0];return t=T4.bind(null,t[1]),Mr().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=ft,i=Mr();if(at){if(n===void 0)throw Error(K(407));n=n()}else{if(n=e(),Lt===null)throw Error(K(349));io&30||p2(r,e,n)}i.memoizedState=n;var s={value:n,getSnapshot:e};return i.queue=s,I1(v2.bind(null,r,s,t),[t]),r.flags|=2048,Ec(9,m2.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=Mr(),e=Lt.identifierPrefix;if(at){var n=si,r=ii;n=(r&~(1<<32-vr(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=vc++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=b4++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},L4={readContext:Xn,useCallback:S2,useContext:Xn,useEffect:xv,useImperativeHandle:w2,useInsertionEffect:x2,useLayoutEffect:C2,useMemo:b2,useReducer:Kg,useRef:_2,useState:function(){return Kg(yc)},useDebugValue:Cv,useDeferredValue:function(t){var e=Zn();return T2(e,wt.memoizedState,t)},useTransition:function(){var t=Kg(yc)[0],e=Zn().memoizedState;return[t,e]},useMutableSource:g2,useSyncExternalStore:A2,useId:B2,unstable_isNewReconciler:!1},M4={readContext:Xn,useCallback:S2,useContext:Xn,useEffect:xv,useImperativeHandle:w2,useInsertionEffect:x2,useLayoutEffect:C2,useMemo:b2,useReducer:qg,useRef:_2,useState:function(){return qg(yc)},useDebugValue:Cv,useDeferredValue:function(t){var e=Zn();return wt===null?e.memoizedState=t:T2(e,wt.memoizedState,t)},useTransition:function(){var t=qg(yc)[0],e=Zn().memoizedState;return[t,e]},useMutableSource:g2,useSyncExternalStore:A2,useId:B2,unstable_isNewReconciler:!1};function Ta(t,e){try{var n="",r=e;do n+=aR(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function Xg(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Kp(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var N4=typeof WeakMap=="function"?WeakMap:Map;function M2(t,e,n){n=li(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Sd||(Sd=!0,s0=r),Kp(t,e)},n}function N2(t,e,n){n=li(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){Kp(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){Kp(t,e),typeof r!="function"&&(is===null?is=new Set([this]):is.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function w1(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new N4;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=$4.bind(null,t,e,n),e.then(t,t))}function S1(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function b1(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=li(-1,1),e.tag=2,rs(n,e,1))),n.lanes|=1),t)}var O4=Ii.ReactCurrentOwner,mn=!1;function rn(t,e,n,r){e.child=t===null?d2(e,null,n,r):Sa(e,t.child,n,r)}function T1(t,e,n,r,i){n=n.render;var s=e.ref;return pa(e,i),r=Ev(t,e,n,r,s,i),n=_v(),t!==null&&!mn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Ai(t,e,i)):(at&&n&&lv(e),e.flags|=1,rn(t,e,r,i),e.child)}function B1(t,e,n,r,i){if(t===null){var s=n.type;return typeof s=="function"&&!Pv(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,O2(t,e,s,r,i)):(t=Gf(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:dc,n(o,r)&&t.ref===e.ref)return Ai(t,e,i)}return e.flags|=1,t=os(s,r),t.ref=e.ref,t.return=e,e.child=t}function O2(t,e,n,r,i){if(t!==null){var s=t.memoizedProps;if(dc(s,r)&&t.ref===e.ref)if(mn=!1,e.pendingProps=r=s,(t.lanes&i)!==0)t.flags&131072&&(mn=!0);else return e.lanes=t.lanes,Ai(t,e,i)}return qp(t,e,n,r,i)}function D2(t,e,n){var r=e.pendingProps,i=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ke(ia,Sn),Sn|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Ke(ia,Sn),Sn|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,Ke(ia,Sn),Sn|=r}else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,Ke(ia,Sn),Sn|=r;return rn(t,e,i,n),e.child}function k2(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function qp(t,e,n,r,i){var s=yn(n)?no:en.current;return s=Ia(e,s),pa(e,i),n=Ev(t,e,n,r,s,i),r=_v(),t!==null&&!mn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Ai(t,e,i)):(at&&r&&lv(e),e.flags|=1,rn(t,e,n,i),e.child)}function R1(t,e,n,r,i){if(yn(n)){var s=!0;pd(e)}else s=!1;if(pa(e,i),e.stateNode===null)Qf(t,e),u2(e,n,r),$p(e,n,r,i),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,c=n.contextType;typeof c=="object"&&c!==null?c=Xn(c):(c=yn(n)?no:en.current,c=Ia(e,c));var u=n.getDerivedStateFromProps,f=typeof u=="function"||typeof o.getSnapshotBeforeUpdate=="function";f||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==c)&&_1(e,o,r,c),Hi=!1;var d=e.memoizedState;o.state=d,_d(e,r,o,i),l=e.memoizedState,a!==r||d!==l||vn.current||Hi?(typeof u=="function"&&(Yp(e,n,u,r),l=e.memoizedState),(a=Hi||E1(e,n,a,r,d,l,c))?(f||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),o.props=r,o.state=l,o.context=c,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,l2(t,e),a=e.memoizedProps,c=e.type===e.elementType?a:lr(e.type,a),o.props=c,f=e.pendingProps,d=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=Xn(l):(l=yn(n)?no:en.current,l=Ia(e,l));var h=n.getDerivedStateFromProps;(u=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==f||d!==l)&&_1(e,o,r,l),Hi=!1,d=e.memoizedState,o.state=d,_d(e,r,o,i);var g=e.memoizedState;a!==f||d!==g||vn.current||Hi?(typeof h=="function"&&(Yp(e,n,h,r),g=e.memoizedState),(c=Hi||E1(e,n,c,r,d,g,l)||!1)?(u||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,g,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,g,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&d===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&d===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=g),o.props=r,o.state=g,o.context=l,r=c):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&d===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&d===t.memoizedState||(e.flags|=1024),r=!1)}return Xp(t,e,n,r,s,i)}function Xp(t,e,n,r,i,s){k2(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&A1(e,n,!1),Ai(t,e,s);r=e.stateNode,O4.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=Sa(e,t.child,null,s),e.child=Sa(e,null,a,s)):rn(t,e,a,s),e.memoizedState=r.state,i&&A1(e,n,!0),e.child}function Q2(t){var e=t.stateNode;e.pendingContext?g1(t,e.pendingContext,e.pendingContext!==e.context):e.context&&g1(t,e.context,!1),pv(t,e.containerInfo)}function P1(t,e,n,r,i){return wa(),uv(i),e.flags|=256,rn(t,e,n,r),e.child}var Zp={dehydrated:null,treeContext:null,retryLane:0};function Jp(t){return{baseLanes:t,cachePool:null,transitions:null}}function F2(t,e,n){var r=e.pendingProps,i=ct.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(i&2)!==0),a?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),Ke(ct,i&1),t===null)return Hp(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,s?(r=e.mode,s=e.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=Th(o,r,0,null),t=Zs(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=Jp(n),e.memoizedState=Zp,t):Iv(e,o));if(i=t.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return D4(t,e,o,r,a,i,n);if(s){s=r.fallback,o=e.mode,i=t.child,a=i.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=os(i,l),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?s=os(a,s):(s=Zs(s,o,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,o=t.child.memoizedState,o=o===null?Jp(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~n,e.memoizedState=Zp,r}return s=t.child,t=s.sibling,r=os(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function Iv(t,e){return e=Th({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Fu(t,e,n,r){return r!==null&&uv(r),Sa(e,t.child,null,n),t=Iv(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function D4(t,e,n,r,i,s,o){if(n)return e.flags&256?(e.flags&=-257,r=Xg(Error(K(422))),Fu(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=Th({mode:"visible",children:r.children},i,0,null),s=Zs(s,i,o,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&Sa(e,t.child,null,o),e.child.memoizedState=Jp(o),e.memoizedState=Zp,s);if(!(e.mode&1))return Fu(t,e,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,s=Error(K(419)),r=Xg(s,r,void 0),Fu(t,e,o,r)}if(a=(o&t.childLanes)!==0,mn||a){if(r=Lt,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,gi(t,i),yr(r,t,i,-1))}return Rv(),r=Xg(Error(K(421))),Fu(t,e,o,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=K4.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,Rn=ns(i.nextSibling),Pn=e,at=!0,ur=null,t!==null&&(jn[Hn++]=ii,jn[Hn++]=si,jn[Hn++]=ro,ii=t.id,si=t.overflow,ro=e),e=Iv(e,r.children),e.flags|=4096,e)}function L1(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Wp(t.return,e,n)}function Zg(t,e,n,r,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function U2(t,e,n){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(rn(t,e,r.children,n),r=ct.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&L1(t,n,e);else if(t.tag===19)L1(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Ke(ct,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&xd(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),Zg(e,!1,i,n,s);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&xd(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}Zg(e,!0,n,null,s);break;case"together":Zg(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Qf(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Ai(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),so|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(K(153));if(e.child!==null){for(t=e.child,n=os(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=os(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function k4(t,e,n){switch(e.tag){case 3:Q2(e),wa();break;case 5:h2(e);break;case 1:yn(e.type)&&pd(e);break;case 4:pv(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;Ke(yd,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Ke(ct,ct.current&1),e.flags|=128,null):n&e.child.childLanes?F2(t,e,n):(Ke(ct,ct.current&1),t=Ai(t,e,n),t!==null?t.sibling:null);Ke(ct,ct.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return U2(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Ke(ct,ct.current),r)break;return null;case 22:case 23:return e.lanes=0,D2(t,e,n)}return Ai(t,e,n)}var G2,e0,z2,V2;G2=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};e0=function(){};z2=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,Ws(Ur.current);var s=null;switch(n){case"input":i=xp(t,i),r=xp(t,r),s=[];break;case"select":i=dt({},i,{value:void 0}),r=dt({},r,{value:void 0}),s=[];break;case"textarea":i=wp(t,i),r=wp(t,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=gd)}bp(n,r);var o;n=null;for(c in i)if(!r.hasOwnProperty(c)&&i.hasOwnProperty(c)&&i[c]!=null)if(c==="style"){var a=i[c];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(sc.hasOwnProperty(c)?s||(s=[]):(s=s||[]).push(c,null));for(c in r){var l=r[c];if(a=i!=null?i[c]:void 0,r.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(s||(s=[]),s.push(c,n)),n=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(sc.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&tt("scroll",t),s||a===l||(s=[])):(s=s||[]).push(c,l))}n&&(s=s||[]).push("style",n);var c=s;(e.updateQueue=c)&&(e.flags|=4)}};V2=function(t,e,n,r){n!==r&&(e.flags|=4)};function Al(t,e){if(!at)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Wt(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function Q4(t,e,n){var r=e.pendingProps;switch(cv(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Wt(e),null;case 1:return yn(e.type)&&Ad(),Wt(e),null;case 3:return r=e.stateNode,ba(),nt(vn),nt(en),vv(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(ku(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,ur!==null&&(l0(ur),ur=null))),e0(t,e),Wt(e),null;case 5:mv(e);var i=Ws(mc.current);if(n=e.type,t!==null&&e.stateNode!=null)z2(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(K(166));return Wt(e),null}if(t=Ws(Ur.current),ku(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[Nr]=e,r[Ac]=s,t=(e.mode&1)!==0,n){case"dialog":tt("cancel",r),tt("close",r);break;case"iframe":case"object":case"embed":tt("load",r);break;case"video":case"audio":for(i=0;i<Pl.length;i++)tt(Pl[i],r);break;case"source":tt("error",r);break;case"img":case"image":case"link":tt("error",r),tt("load",r);break;case"details":tt("toggle",r);break;case"input":GE(r,s),tt("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},tt("invalid",r);break;case"textarea":VE(r,s),tt("invalid",r)}bp(n,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?r.textContent!==a&&(s.suppressHydrationWarning!==!0&&Du(r.textContent,a,t),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&Du(r.textContent,a,t),i=["children",""+a]):sc.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&tt("scroll",r)}switch(n){case"input":Tu(r),zE(r,s,!0);break;case"textarea":Tu(r),jE(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=gd)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=pw(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[Nr]=e,t[Ac]=r,G2(t,e,!1,!1),e.stateNode=t;e:{switch(o=Tp(n,r),n){case"dialog":tt("cancel",t),tt("close",t),i=r;break;case"iframe":case"object":case"embed":tt("load",t),i=r;break;case"video":case"audio":for(i=0;i<Pl.length;i++)tt(Pl[i],t);i=r;break;case"source":tt("error",t),i=r;break;case"img":case"image":case"link":tt("error",t),tt("load",t),i=r;break;case"details":tt("toggle",t),i=r;break;case"input":GE(t,r),i=xp(t,r),tt("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=dt({},r,{value:void 0}),tt("invalid",t);break;case"textarea":VE(t,r),i=wp(t,r),tt("invalid",t);break;default:i=r}bp(n,i),a=i;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?yw(t,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&mw(t,l)):s==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&oc(t,l):typeof l=="number"&&oc(t,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(sc.hasOwnProperty(s)?l!=null&&s==="onScroll"&&tt("scroll",t):l!=null&&$m(t,s,l,o))}switch(n){case"input":Tu(t),zE(t,r,!1);break;case"textarea":Tu(t),jE(t);break;case"option":r.value!=null&&t.setAttribute("value",""+fs(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?da(t,!!r.multiple,s,!1):r.defaultValue!=null&&da(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=gd)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Wt(e),null;case 6:if(t&&e.stateNode!=null)V2(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(K(166));if(n=Ws(mc.current),Ws(Ur.current),ku(e)){if(r=e.stateNode,n=e.memoizedProps,r[Nr]=e,(s=r.nodeValue!==n)&&(t=Pn,t!==null))switch(t.tag){case 3:Du(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Du(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Nr]=e,e.stateNode=r}return Wt(e),null;case 13:if(nt(ct),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(at&&Rn!==null&&e.mode&1&&!(e.flags&128))o2(),wa(),e.flags|=98560,s=!1;else if(s=ku(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error(K(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(K(317));s[Nr]=e}else wa(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Wt(e),s=!1}else ur!==null&&(l0(ur),ur=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||ct.current&1?St===0&&(St=3):Rv())),e.updateQueue!==null&&(e.flags|=4),Wt(e),null);case 4:return ba(),e0(t,e),t===null&&hc(e.stateNode.containerInfo),Wt(e),null;case 10:return hv(e.type._context),Wt(e),null;case 17:return yn(e.type)&&Ad(),Wt(e),null;case 19:if(nt(ct),s=e.memoizedState,s===null)return Wt(e),null;if(r=(e.flags&128)!==0,o=s.rendering,o===null)if(r)Al(s,!1);else{if(St!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=xd(t),o!==null){for(e.flags|=128,Al(s,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Ke(ct,ct.current&1|2),e.child}t=t.sibling}s.tail!==null&&Et()>Ba&&(e.flags|=128,r=!0,Al(s,!1),e.lanes=4194304)}else{if(!r)if(t=xd(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Al(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!at)return Wt(e),null}else 2*Et()-s.renderingStartTime>Ba&&n!==1073741824&&(e.flags|=128,r=!0,Al(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(n=s.last,n!==null?n.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=Et(),e.sibling=null,n=ct.current,Ke(ct,r?n&1|2:n&1),e):(Wt(e),null);case 22:case 23:return Bv(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Sn&1073741824&&(Wt(e),e.subtreeFlags&6&&(e.flags|=8192)):Wt(e),null;case 24:return null;case 25:return null}throw Error(K(156,e.tag))}function F4(t,e){switch(cv(e),e.tag){case 1:return yn(e.type)&&Ad(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return ba(),nt(vn),nt(en),vv(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return mv(e),null;case 13:if(nt(ct),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(K(340));wa()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return nt(ct),null;case 4:return ba(),null;case 10:return hv(e.type._context),null;case 22:case 23:return Bv(),null;case 24:return null;default:return null}}var Uu=!1,Zt=!1,U4=typeof WeakSet=="function"?WeakSet:Set,ie=null;function ra(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){mt(t,e,r)}else n.current=null}function t0(t,e,n){try{n()}catch(r){mt(t,e,r)}}var M1=!1;function G4(t,e){if(Qp=fd,t=Yw(),av(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,c=0,u=0,f=t,d=null;t:for(;;){for(var h;f!==n||i!==0&&f.nodeType!==3||(a=o+i),f!==s||r!==0&&f.nodeType!==3||(l=o+r),f.nodeType===3&&(o+=f.nodeValue.length),(h=f.firstChild)!==null;)d=f,f=h;for(;;){if(f===t)break t;if(d===n&&++c===i&&(a=o),d===s&&++u===r&&(l=o),(h=f.nextSibling)!==null)break;f=d,d=f.parentNode}f=h}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(Fp={focusedElem:t,selectionRange:n},fd=!1,ie=e;ie!==null;)if(e=ie,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,ie=t;else for(;ie!==null;){e=ie;try{var g=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(g!==null){var A=g.memoizedProps,E=g.memoizedState,p=e.stateNode,m=p.getSnapshotBeforeUpdate(e.elementType===e.type?A:lr(e.type,A),E);p.__reactInternalSnapshotBeforeUpdate=m}break;case 3:var y=e.stateNode.containerInfo;y.nodeType===1?y.textContent="":y.nodeType===9&&y.documentElement&&y.removeChild(y.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(K(163))}}catch(_){mt(e,e.return,_)}if(t=e.sibling,t!==null){t.return=e.return,ie=t;break}ie=e.return}return g=M1,M1=!1,g}function jl(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&t0(e,n,s)}i=i.next}while(i!==r)}}function Sh(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function n0(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function j2(t){var e=t.alternate;e!==null&&(t.alternate=null,j2(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Nr],delete e[Ac],delete e[zp],delete e[C4],delete e[I4])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function H2(t){return t.tag===5||t.tag===3||t.tag===4}function N1(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||H2(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function r0(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=gd));else if(r!==4&&(t=t.child,t!==null))for(r0(t,e,n),t=t.sibling;t!==null;)r0(t,e,n),t=t.sibling}function i0(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(i0(t,e,n),t=t.sibling;t!==null;)i0(t,e,n),t=t.sibling}var Qt=null,cr=!1;function Oi(t,e,n){for(n=n.child;n!==null;)W2(t,e,n),n=n.sibling}function W2(t,e,n){if(Fr&&typeof Fr.onCommitFiberUnmount=="function")try{Fr.onCommitFiberUnmount(vh,n)}catch{}switch(n.tag){case 5:Zt||ra(n,e);case 6:var r=Qt,i=cr;Qt=null,Oi(t,e,n),Qt=r,cr=i,Qt!==null&&(cr?(t=Qt,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Qt.removeChild(n.stateNode));break;case 18:Qt!==null&&(cr?(t=Qt,n=n.stateNode,t.nodeType===8?Hg(t.parentNode,n):t.nodeType===1&&Hg(t,n),uc(t)):Hg(Qt,n.stateNode));break;case 4:r=Qt,i=cr,Qt=n.stateNode.containerInfo,cr=!0,Oi(t,e,n),Qt=r,cr=i;break;case 0:case 11:case 14:case 15:if(!Zt&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&t0(n,e,o),i=i.next}while(i!==r)}Oi(t,e,n);break;case 1:if(!Zt&&(ra(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){mt(n,e,a)}Oi(t,e,n);break;case 21:Oi(t,e,n);break;case 22:n.mode&1?(Zt=(r=Zt)||n.memoizedState!==null,Oi(t,e,n),Zt=r):Oi(t,e,n);break;default:Oi(t,e,n)}}function O1(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new U4),e.forEach(function(r){var i=q4.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function ar(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:Qt=a.stateNode,cr=!1;break e;case 3:Qt=a.stateNode.containerInfo,cr=!0;break e;case 4:Qt=a.stateNode.containerInfo,cr=!0;break e}a=a.return}if(Qt===null)throw Error(K(160));W2(s,o,i),Qt=null,cr=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(c){mt(i,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)Y2(e,t),e=e.sibling}function Y2(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(ar(e,t),Tr(t),r&4){try{jl(3,t,t.return),Sh(3,t)}catch(A){mt(t,t.return,A)}try{jl(5,t,t.return)}catch(A){mt(t,t.return,A)}}break;case 1:ar(e,t),Tr(t),r&512&&n!==null&&ra(n,n.return);break;case 5:if(ar(e,t),Tr(t),r&512&&n!==null&&ra(n,n.return),t.flags&32){var i=t.stateNode;try{oc(i,"")}catch(A){mt(t,t.return,A)}}if(r&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,o=n!==null?n.memoizedProps:s,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&gw(i,s),Tp(a,o);var c=Tp(a,s);for(o=0;o<l.length;o+=2){var u=l[o],f=l[o+1];u==="style"?yw(i,f):u==="dangerouslySetInnerHTML"?mw(i,f):u==="children"?oc(i,f):$m(i,u,f,c)}switch(a){case"input":Cp(i,s);break;case"textarea":Aw(i,s);break;case"select":var d=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var h=s.value;h!=null?da(i,!!s.multiple,h,!1):d!==!!s.multiple&&(s.defaultValue!=null?da(i,!!s.multiple,s.defaultValue,!0):da(i,!!s.multiple,s.multiple?[]:"",!1))}i[Ac]=s}catch(A){mt(t,t.return,A)}}break;case 6:if(ar(e,t),Tr(t),r&4){if(t.stateNode===null)throw Error(K(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(A){mt(t,t.return,A)}}break;case 3:if(ar(e,t),Tr(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{uc(e.containerInfo)}catch(A){mt(t,t.return,A)}break;case 4:ar(e,t),Tr(t);break;case 13:ar(e,t),Tr(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(bv=Et())),r&4&&O1(t);break;case 22:if(u=n!==null&&n.memoizedState!==null,t.mode&1?(Zt=(c=Zt)||u,ar(e,t),Zt=c):ar(e,t),Tr(t),r&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!u&&t.mode&1)for(ie=t,u=t.child;u!==null;){for(f=ie=u;ie!==null;){switch(d=ie,h=d.child,d.tag){case 0:case 11:case 14:case 15:jl(4,d,d.return);break;case 1:ra(d,d.return);var g=d.stateNode;if(typeof g.componentWillUnmount=="function"){r=d,n=d.return;try{e=r,g.props=e.memoizedProps,g.state=e.memoizedState,g.componentWillUnmount()}catch(A){mt(r,n,A)}}break;case 5:ra(d,d.return);break;case 22:if(d.memoizedState!==null){k1(f);continue}}h!==null?(h.return=d,ie=h):k1(f)}u=u.sibling}e:for(u=null,f=t;;){if(f.tag===5){if(u===null){u=f;try{i=f.stateNode,c?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=f.stateNode,l=f.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=vw("display",o))}catch(A){mt(t,t.return,A)}}}else if(f.tag===6){if(u===null)try{f.stateNode.nodeValue=c?"":f.memoizedProps}catch(A){mt(t,t.return,A)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===t)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===t)break e;for(;f.sibling===null;){if(f.return===null||f.return===t)break e;u===f&&(u=null),f=f.return}u===f&&(u=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:ar(e,t),Tr(t),r&4&&O1(t);break;case 21:break;default:ar(e,t),Tr(t)}}function Tr(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(H2(n)){var r=n;break e}n=n.return}throw Error(K(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(oc(i,""),r.flags&=-33);var s=N1(t);i0(t,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,a=N1(t);r0(t,a,o);break;default:throw Error(K(161))}}catch(l){mt(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function z4(t,e,n){ie=t,$2(t)}function $2(t,e,n){for(var r=(t.mode&1)!==0;ie!==null;){var i=ie,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||Uu;if(!o){var a=i.alternate,l=a!==null&&a.memoizedState!==null||Zt;a=Uu;var c=Zt;if(Uu=o,(Zt=l)&&!c)for(ie=i;ie!==null;)o=ie,l=o.child,o.tag===22&&o.memoizedState!==null?Q1(i):l!==null?(l.return=o,ie=l):Q1(i);for(;s!==null;)ie=s,$2(s),s=s.sibling;ie=i,Uu=a,Zt=c}D1(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,ie=s):D1(t)}}function D1(t){for(;ie!==null;){var e=ie;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Zt||Sh(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Zt)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:lr(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&y1(e,s,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}y1(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var u=c.memoizedState;if(u!==null){var f=u.dehydrated;f!==null&&uc(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(K(163))}Zt||e.flags&512&&n0(e)}catch(d){mt(e,e.return,d)}}if(e===t){ie=null;break}if(n=e.sibling,n!==null){n.return=e.return,ie=n;break}ie=e.return}}function k1(t){for(;ie!==null;){var e=ie;if(e===t){ie=null;break}var n=e.sibling;if(n!==null){n.return=e.return,ie=n;break}ie=e.return}}function Q1(t){for(;ie!==null;){var e=ie;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Sh(4,e)}catch(l){mt(e,n,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(l){mt(e,i,l)}}var s=e.return;try{n0(e)}catch(l){mt(e,s,l)}break;case 5:var o=e.return;try{n0(e)}catch(l){mt(e,o,l)}}}catch(l){mt(e,e.return,l)}if(e===t){ie=null;break}var a=e.sibling;if(a!==null){a.return=e.return,ie=a;break}ie=e.return}}var V4=Math.ceil,wd=Ii.ReactCurrentDispatcher,wv=Ii.ReactCurrentOwner,Yn=Ii.ReactCurrentBatchConfig,Ne=0,Lt=null,xt=null,Gt=0,Sn=0,ia=Is(0),St=0,_c=null,so=0,bh=0,Sv=0,Hl=null,pn=null,bv=0,Ba=1/0,ei=null,Sd=!1,s0=null,is=null,Gu=!1,Ki=null,bd=0,Wl=0,o0=null,Ff=-1,Uf=0;function ln(){return Ne&6?Et():Ff!==-1?Ff:Ff=Et()}function ss(t){return t.mode&1?Ne&2&&Gt!==0?Gt&-Gt:S4.transition!==null?(Uf===0&&(Uf=Pw()),Uf):(t=Ue,t!==0||(t=window.event,t=t===void 0?16:Qw(t.type)),t):1}function yr(t,e,n,r){if(50<Wl)throw Wl=0,o0=null,Error(K(185));Gc(t,n,r),(!(Ne&2)||t!==Lt)&&(t===Lt&&(!(Ne&2)&&(bh|=n),St===4&&Yi(t,Gt)),En(t,r),n===1&&Ne===0&&!(e.mode&1)&&(Ba=Et()+500,Ch&&ws()))}function En(t,e){var n=t.callbackNode;SR(t,e);var r=ud(t,t===Lt?Gt:0);if(r===0)n!==null&&YE(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&YE(n),e===1)t.tag===0?w4(F1.bind(null,t)):r2(F1.bind(null,t)),_4(function(){!(Ne&6)&&ws()}),n=null;else{switch(Lw(r)){case 1:n=Jm;break;case 4:n=Bw;break;case 16:n=cd;break;case 536870912:n=Rw;break;default:n=cd}n=nS(n,K2.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function K2(t,e){if(Ff=-1,Uf=0,Ne&6)throw Error(K(327));var n=t.callbackNode;if(ma()&&t.callbackNode!==n)return null;var r=ud(t,t===Lt?Gt:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Td(t,r);else{e=r;var i=Ne;Ne|=2;var s=X2();(Lt!==t||Gt!==e)&&(ei=null,Ba=Et()+500,Xs(t,e));do try{W4();break}catch(a){q2(t,a)}while(1);dv(),wd.current=s,Ne=i,xt!==null?e=0:(Lt=null,Gt=0,e=St)}if(e!==0){if(e===2&&(i=Mp(t),i!==0&&(r=i,e=a0(t,i))),e===1)throw n=_c,Xs(t,0),Yi(t,r),En(t,Et()),n;if(e===6)Yi(t,r);else{if(i=t.current.alternate,!(r&30)&&!j4(i)&&(e=Td(t,r),e===2&&(s=Mp(t),s!==0&&(r=s,e=a0(t,s))),e===1))throw n=_c,Xs(t,0),Yi(t,r),En(t,Et()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(K(345));case 2:ks(t,pn,ei);break;case 3:if(Yi(t,r),(r&130023424)===r&&(e=bv+500-Et(),10<e)){if(ud(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){ln(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=Gp(ks.bind(null,t,pn,ei),e);break}ks(t,pn,ei);break;case 4:if(Yi(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var o=31-vr(r);s=1<<o,o=e[o],o>i&&(i=o),r&=~s}if(r=i,r=Et()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*V4(r/1960))-r,10<r){t.timeoutHandle=Gp(ks.bind(null,t,pn,ei),r);break}ks(t,pn,ei);break;case 5:ks(t,pn,ei);break;default:throw Error(K(329))}}}return En(t,Et()),t.callbackNode===n?K2.bind(null,t):null}function a0(t,e){var n=Hl;return t.current.memoizedState.isDehydrated&&(Xs(t,e).flags|=256),t=Td(t,e),t!==2&&(e=pn,pn=n,e!==null&&l0(e)),t}function l0(t){pn===null?pn=t:pn.push.apply(pn,t)}function j4(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!xr(s(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Yi(t,e){for(e&=~Sv,e&=~bh,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-vr(e),r=1<<n;t[n]=-1,e&=~r}}function F1(t){if(Ne&6)throw Error(K(327));ma();var e=ud(t,0);if(!(e&1))return En(t,Et()),null;var n=Td(t,e);if(t.tag!==0&&n===2){var r=Mp(t);r!==0&&(e=r,n=a0(t,r))}if(n===1)throw n=_c,Xs(t,0),Yi(t,e),En(t,Et()),n;if(n===6)throw Error(K(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,ks(t,pn,ei),En(t,Et()),null}function Tv(t,e){var n=Ne;Ne|=1;try{return t(e)}finally{Ne=n,Ne===0&&(Ba=Et()+500,Ch&&ws())}}function oo(t){Ki!==null&&Ki.tag===0&&!(Ne&6)&&ma();var e=Ne;Ne|=1;var n=Yn.transition,r=Ue;try{if(Yn.transition=null,Ue=1,t)return t()}finally{Ue=r,Yn.transition=n,Ne=e,!(Ne&6)&&ws()}}function Bv(){Sn=ia.current,nt(ia)}function Xs(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,E4(n)),xt!==null)for(n=xt.return;n!==null;){var r=n;switch(cv(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Ad();break;case 3:ba(),nt(vn),nt(en),vv();break;case 5:mv(r);break;case 4:ba();break;case 13:nt(ct);break;case 19:nt(ct);break;case 10:hv(r.type._context);break;case 22:case 23:Bv()}n=n.return}if(Lt=t,xt=t=os(t.current,null),Gt=Sn=e,St=0,_c=null,Sv=bh=so=0,pn=Hl=null,Hs!==null){for(e=0;e<Hs.length;e++)if(n=Hs[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}n.pending=r}Hs=null}return t}function q2(t,e){do{var n=xt;try{if(dv(),Df.current=Id,Cd){for(var r=ft.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}Cd=!1}if(io=0,Bt=wt=ft=null,Vl=!1,vc=0,wv.current=null,n===null||n.return===null){St=1,_c=e,xt=null;break}e:{var s=t,o=n.return,a=n,l=e;if(e=Gt,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,u=a,f=u.tag;if(!(u.mode&1)&&(f===0||f===11||f===15)){var d=u.alternate;d?(u.updateQueue=d.updateQueue,u.memoizedState=d.memoizedState,u.lanes=d.lanes):(u.updateQueue=null,u.memoizedState=null)}var h=S1(o);if(h!==null){h.flags&=-257,b1(h,o,a,s,e),h.mode&1&&w1(s,c,e),e=h,l=c;var g=e.updateQueue;if(g===null){var A=new Set;A.add(l),e.updateQueue=A}else g.add(l);break e}else{if(!(e&1)){w1(s,c,e),Rv();break e}l=Error(K(426))}}else if(at&&a.mode&1){var E=S1(o);if(E!==null){!(E.flags&65536)&&(E.flags|=256),b1(E,o,a,s,e),uv(Ta(l,a));break e}}s=l=Ta(l,a),St!==4&&(St=2),Hl===null?Hl=[s]:Hl.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var p=M2(s,l,e);v1(s,p);break e;case 1:a=l;var m=s.type,y=s.stateNode;if(!(s.flags&128)&&(typeof m.getDerivedStateFromError=="function"||y!==null&&typeof y.componentDidCatch=="function"&&(is===null||!is.has(y)))){s.flags|=65536,e&=-e,s.lanes|=e;var _=N2(s,a,e);v1(s,_);break e}}s=s.return}while(s!==null)}J2(n)}catch(I){e=I,xt===n&&n!==null&&(xt=n=n.return);continue}break}while(1)}function X2(){var t=wd.current;return wd.current=Id,t===null?Id:t}function Rv(){(St===0||St===3||St===2)&&(St=4),Lt===null||!(so&268435455)&&!(bh&268435455)||Yi(Lt,Gt)}function Td(t,e){var n=Ne;Ne|=2;var r=X2();(Lt!==t||Gt!==e)&&(ei=null,Xs(t,e));do try{H4();break}catch(i){q2(t,i)}while(1);if(dv(),Ne=n,wd.current=r,xt!==null)throw Error(K(261));return Lt=null,Gt=0,St}function H4(){for(;xt!==null;)Z2(xt)}function W4(){for(;xt!==null&&!mR();)Z2(xt)}function Z2(t){var e=tS(t.alternate,t,Sn);t.memoizedProps=t.pendingProps,e===null?J2(t):xt=e,wv.current=null}function J2(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=F4(n,e),n!==null){n.flags&=32767,xt=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{St=6,xt=null;return}}else if(n=Q4(n,e,Sn),n!==null){xt=n;return}if(e=e.sibling,e!==null){xt=e;return}xt=e=t}while(e!==null);St===0&&(St=5)}function ks(t,e,n){var r=Ue,i=Yn.transition;try{Yn.transition=null,Ue=1,Y4(t,e,n,r)}finally{Yn.transition=i,Ue=r}return null}function Y4(t,e,n,r){do ma();while(Ki!==null);if(Ne&6)throw Error(K(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(K(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(bR(t,s),t===Lt&&(xt=Lt=null,Gt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Gu||(Gu=!0,nS(cd,function(){return ma(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=Yn.transition,Yn.transition=null;var o=Ue;Ue=1;var a=Ne;Ne|=4,wv.current=null,G4(t,n),Y2(n,t),h4(Fp),fd=!!Qp,Fp=Qp=null,t.current=n,z4(n),vR(),Ne=a,Ue=o,Yn.transition=s}else t.current=n;if(Gu&&(Gu=!1,Ki=t,bd=i),s=t.pendingLanes,s===0&&(is=null),_R(n.stateNode),En(t,Et()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Sd)throw Sd=!1,t=s0,s0=null,t;return bd&1&&t.tag!==0&&ma(),s=t.pendingLanes,s&1?t===o0?Wl++:(Wl=0,o0=t):Wl=0,ws(),null}function ma(){if(Ki!==null){var t=Lw(bd),e=Yn.transition,n=Ue;try{if(Yn.transition=null,Ue=16>t?16:t,Ki===null)var r=!1;else{if(t=Ki,Ki=null,bd=0,Ne&6)throw Error(K(331));var i=Ne;for(Ne|=4,ie=t.current;ie!==null;){var s=ie,o=s.child;if(ie.flags&16){var a=s.deletions;if(a!==null){for(var l=0;l<a.length;l++){var c=a[l];for(ie=c;ie!==null;){var u=ie;switch(u.tag){case 0:case 11:case 15:jl(8,u,s)}var f=u.child;if(f!==null)f.return=u,ie=f;else for(;ie!==null;){u=ie;var d=u.sibling,h=u.return;if(j2(u),u===c){ie=null;break}if(d!==null){d.return=h,ie=d;break}ie=h}}}var g=s.alternate;if(g!==null){var A=g.child;if(A!==null){g.child=null;do{var E=A.sibling;A.sibling=null,A=E}while(A!==null)}}ie=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,ie=o;else e:for(;ie!==null;){if(s=ie,s.flags&2048)switch(s.tag){case 0:case 11:case 15:jl(9,s,s.return)}var p=s.sibling;if(p!==null){p.return=s.return,ie=p;break e}ie=s.return}}var m=t.current;for(ie=m;ie!==null;){o=ie;var y=o.child;if(o.subtreeFlags&2064&&y!==null)y.return=o,ie=y;else e:for(o=m;ie!==null;){if(a=ie,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:Sh(9,a)}}catch(I){mt(a,a.return,I)}if(a===o){ie=null;break e}var _=a.sibling;if(_!==null){_.return=a.return,ie=_;break e}ie=a.return}}if(Ne=i,ws(),Fr&&typeof Fr.onPostCommitFiberRoot=="function")try{Fr.onPostCommitFiberRoot(vh,t)}catch{}r=!0}return r}finally{Ue=n,Yn.transition=e}}return!1}function U1(t,e,n){e=Ta(n,e),e=M2(t,e,1),t=rs(t,e,1),e=ln(),t!==null&&(Gc(t,1,e),En(t,e))}function mt(t,e,n){if(t.tag===3)U1(t,t,n);else for(;e!==null;){if(e.tag===3){U1(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(is===null||!is.has(r))){t=Ta(n,t),t=N2(e,t,1),e=rs(e,t,1),t=ln(),e!==null&&(Gc(e,1,t),En(e,t));break}}e=e.return}}function $4(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=ln(),t.pingedLanes|=t.suspendedLanes&n,Lt===t&&(Gt&n)===n&&(St===4||St===3&&(Gt&130023424)===Gt&&500>Et()-bv?Xs(t,0):Sv|=n),En(t,e)}function eS(t,e){e===0&&(t.mode&1?(e=Pu,Pu<<=1,!(Pu&130023424)&&(Pu=4194304)):e=1);var n=ln();t=gi(t,e),t!==null&&(Gc(t,e,n),En(t,n))}function K4(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),eS(t,n)}function q4(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(K(314))}r!==null&&r.delete(e),eS(t,n)}var tS;tS=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||vn.current)mn=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return mn=!1,k4(t,e,n);mn=!!(t.flags&131072)}else mn=!1,at&&e.flags&1048576&&i2(e,vd,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Qf(t,e),t=e.pendingProps;var i=Ia(e,en.current);pa(e,n),i=Ev(null,e,r,t,i,n);var s=_v();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,yn(r)?(s=!0,pd(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,Av(e),i.updater=Ih,e.stateNode=i,i._reactInternals=e,$p(e,r,t,n),e=Xp(null,e,r,!0,s,n)):(e.tag=0,at&&s&&lv(e),rn(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Qf(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=Z4(r),t=lr(r,t),i){case 0:e=qp(null,e,r,t,n);break e;case 1:e=R1(null,e,r,t,n);break e;case 11:e=T1(null,e,r,t,n);break e;case 14:e=B1(null,e,r,lr(r.type,t),n);break e}throw Error(K(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:lr(r,i),qp(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:lr(r,i),R1(t,e,r,i,n);case 3:e:{if(Q2(e),t===null)throw Error(K(387));r=e.pendingProps,s=e.memoizedState,i=s.element,l2(t,e),_d(e,r,null,n);var o=e.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=Ta(Error(K(423)),e),e=P1(t,e,r,n,i);break e}else if(r!==i){i=Ta(Error(K(424)),e),e=P1(t,e,r,n,i);break e}else for(Rn=ns(e.stateNode.containerInfo.firstChild),Pn=e,at=!0,ur=null,n=d2(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(wa(),r===i){e=Ai(t,e,n);break e}rn(t,e,r,n)}e=e.child}return e;case 5:return h2(e),t===null&&Hp(e),r=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,o=i.children,Up(r,i)?o=null:s!==null&&Up(r,s)&&(e.flags|=32),k2(t,e),rn(t,e,o,n),e.child;case 6:return t===null&&Hp(e),null;case 13:return F2(t,e,n);case 4:return pv(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Sa(e,null,r,n):rn(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:lr(r,i),T1(t,e,r,i,n);case 7:return rn(t,e,e.pendingProps,n),e.child;case 8:return rn(t,e,e.pendingProps.children,n),e.child;case 12:return rn(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,Ke(yd,r._currentValue),r._currentValue=o,s!==null)if(xr(s.value,o)){if(s.children===i.children&&!vn.current){e=Ai(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(s.tag===1){l=li(-1,n&-n),l.tag=2;var c=s.updateQueue;if(c!==null){c=c.shared;var u=c.pending;u===null?l.next=l:(l.next=u.next,u.next=l),c.pending=l}}s.lanes|=n,l=s.alternate,l!==null&&(l.lanes|=n),Wp(s.return,n,e),a.lanes|=n;break}l=l.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(K(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),Wp(o,n,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}rn(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,pa(e,n),i=Xn(i),r=r(i),e.flags|=1,rn(t,e,r,n),e.child;case 14:return r=e.type,i=lr(r,e.pendingProps),i=lr(r.type,i),B1(t,e,r,i,n);case 15:return O2(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:lr(r,i),Qf(t,e),e.tag=1,yn(r)?(t=!0,pd(e)):t=!1,pa(e,n),u2(e,r,i),$p(e,r,i,n),Xp(null,e,r,!0,t,n);case 19:return U2(t,e,n);case 22:return D2(t,e,n)}throw Error(K(156,e.tag))};function nS(t,e){return Tw(t,e)}function X4(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Wn(t,e,n,r){return new X4(t,e,n,r)}function Pv(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Z4(t){if(typeof t=="function")return Pv(t)?1:0;if(t!=null){if(t=t.$$typeof,t===qm)return 11;if(t===Xm)return 14}return 2}function os(t,e){var n=t.alternate;return n===null?(n=Wn(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Gf(t,e,n,r,i,s){var o=2;if(r=t,typeof t=="function")Pv(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case $o:return Zs(n.children,i,s,e);case Km:o=8,i|=8;break;case vp:return t=Wn(12,n,e,i|2),t.elementType=vp,t.lanes=s,t;case yp:return t=Wn(13,n,e,i),t.elementType=yp,t.lanes=s,t;case Ep:return t=Wn(19,n,e,i),t.elementType=Ep,t.lanes=s,t;case fw:return Th(n,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case cw:o=10;break e;case uw:o=9;break e;case qm:o=11;break e;case Xm:o=14;break e;case ji:o=16,r=null;break e}throw Error(K(130,t==null?t:typeof t,""))}return e=Wn(o,n,e,i),e.elementType=t,e.type=r,e.lanes=s,e}function Zs(t,e,n,r){return t=Wn(7,t,r,e),t.lanes=n,t}function Th(t,e,n,r){return t=Wn(22,t,r,e),t.elementType=fw,t.lanes=n,t.stateNode={isHidden:!1},t}function Jg(t,e,n){return t=Wn(6,t,null,e),t.lanes=n,t}function eA(t,e,n){return e=Wn(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function J4(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Ng(0),this.expirationTimes=Ng(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ng(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Lv(t,e,n,r,i,s,o,a,l){return t=new J4(t,e,n,a,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=Wn(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Av(s),t}function eP(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Yo,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function rS(t){if(!t)return ds;t=t._reactInternals;e:{if(_o(t)!==t||t.tag!==1)throw Error(K(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(yn(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(K(171))}if(t.tag===1){var n=t.type;if(yn(n))return n2(t,n,e)}return e}function iS(t,e,n,r,i,s,o,a,l){return t=Lv(n,r,!0,t,i,s,o,a,l),t.context=rS(null),n=t.current,r=ln(),i=ss(n),s=li(r,i),s.callback=e??null,rs(n,s,i),t.current.lanes=i,Gc(t,i,r),En(t,r),t}function Bh(t,e,n,r){var i=e.current,s=ln(),o=ss(i);return n=rS(n),e.context===null?e.context=n:e.pendingContext=n,e=li(s,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=rs(i,e,o),t!==null&&(yr(t,i,o,s),Of(t,i,o)),o}function Bd(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function G1(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Mv(t,e){G1(t,e),(t=t.alternate)&&G1(t,e)}function tP(){return null}var sS=typeof reportError=="function"?reportError:function(t){console.error(t)};function Nv(t){this._internalRoot=t}Rh.prototype.render=Nv.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(K(409));Bh(t,e,null,null)};Rh.prototype.unmount=Nv.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;oo(function(){Bh(null,t,null,null)}),e[hi]=null}};function Rh(t){this._internalRoot=t}Rh.prototype.unstable_scheduleHydration=function(t){if(t){var e=Ow();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Wi.length&&e!==0&&e<Wi[n].priority;n++);Wi.splice(n,0,t),n===0&&kw(t)}};function Ov(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Ph(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function z1(){}function nP(t,e,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var c=Bd(o);s.call(c)}}var o=iS(e,r,t,0,null,!1,!1,"",z1);return t._reactRootContainer=o,t[hi]=o.current,hc(t.nodeType===8?t.parentNode:t),oo(),o}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var c=Bd(l);a.call(c)}}var l=Lv(t,0,!1,null,null,!1,!1,"",z1);return t._reactRootContainer=l,t[hi]=l.current,hc(t.nodeType===8?t.parentNode:t),oo(function(){Bh(e,l,n,r)}),l}function Lh(t,e,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var a=i;i=function(){var l=Bd(o);a.call(l)}}Bh(e,o,t,i)}else o=nP(n,e,t,i,r);return Bd(o)}Mw=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Rl(e.pendingLanes);n!==0&&(ev(e,n|1),En(e,Et()),!(Ne&6)&&(Ba=Et()+500,ws()))}break;case 13:oo(function(){var r=gi(t,1);if(r!==null){var i=ln();yr(r,t,1,i)}}),Mv(t,1)}};tv=function(t){if(t.tag===13){var e=gi(t,134217728);if(e!==null){var n=ln();yr(e,t,134217728,n)}Mv(t,134217728)}};Nw=function(t){if(t.tag===13){var e=ss(t),n=gi(t,e);if(n!==null){var r=ln();yr(n,t,e,r)}Mv(t,e)}};Ow=function(){return Ue};Dw=function(t,e){var n=Ue;try{return Ue=t,e()}finally{Ue=n}};Rp=function(t,e,n){switch(e){case"input":if(Cp(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=xh(r);if(!i)throw Error(K(90));hw(r),Cp(r,i)}}}break;case"textarea":Aw(t,n);break;case"select":e=n.value,e!=null&&da(t,!!n.multiple,e,!1)}};xw=Tv;Cw=oo;var rP={usingClientEntryPoint:!1,Events:[Vc,Zo,xh,Ew,_w,Tv]},pl={findFiberByHostInstance:js,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},iP={bundleType:pl.bundleType,version:pl.version,rendererPackageName:pl.rendererPackageName,rendererConfig:pl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Ii.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=Sw(t),t===null?null:t.stateNode},findFiberByHostInstance:pl.findFiberByHostInstance||tP,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var zu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!zu.isDisabled&&zu.supportsFiber)try{vh=zu.inject(iP),Fr=zu}catch{}}On.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=rP;On.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Ov(e))throw Error(K(200));return eP(t,e,null,n)};On.createRoot=function(t,e){if(!Ov(t))throw Error(K(299));var n=!1,r="",i=sS;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=Lv(t,1,!1,null,null,n,!1,r,i),t[hi]=e.current,hc(t.nodeType===8?t.parentNode:t),new Nv(e)};On.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(K(188)):(t=Object.keys(t).join(","),Error(K(268,t)));return t=Sw(e),t=t===null?null:t.stateNode,t};On.flushSync=function(t){return oo(t)};On.hydrate=function(t,e,n){if(!Ph(e))throw Error(K(200));return Lh(null,t,e,!0,n)};On.hydrateRoot=function(t,e,n){if(!Ov(t))throw Error(K(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",o=sS;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=iS(e,null,t,1,n??null,i,!1,s,o),t[hi]=e.current,hc(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new Rh(e)};On.render=function(t,e,n){if(!Ph(e))throw Error(K(200));return Lh(null,t,e,!1,n)};On.unmountComponentAtNode=function(t){if(!Ph(t))throw Error(K(40));return t._reactRootContainer?(oo(function(){Lh(null,null,t,!1,function(){t._reactRootContainer=null,t[hi]=null})}),!0):!1};On.unstable_batchedUpdates=Tv;On.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Ph(n))throw Error(K(200));if(t==null||t._reactInternals===void 0)throw Error(K(38));return Lh(t,e,n,!1,r)};On.version="18.2.0-next-9e3b772b8-20220608";function oS(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(oS)}catch(t){console.error(t)}}oS(),iw.exports=On;var wi=iw.exports;const Vu=Fc(wi);var V1=wi;pp.createRoot=V1.createRoot,pp.hydrateRoot=V1.hydrateRoot;let sP=0;function oP(t,e){const n=`atom${++sP}`,r={toString:()=>n};return typeof t=="function"?r.read=t:(r.init=t,r.read=i=>i(r),r.write=(i,s,o)=>s(r,typeof o=="function"?o(i(r)):o)),e&&(r.write=e),r}const hs=Symbol(),c0=t=>!!t[hs],ju=t=>!t[hs].c,ml=t=>{var e;const{b:n,c:r}=t[hs];r&&(r(),(e=lP.get(n))==null||e())},zf=(t,e)=>{const n=t[hs].o,r=e[hs].o;return n===r||t===r||c0(n)&&zf(n,e)},u0=(t,e)=>{const n={b:t,o:e,c:null},r=new Promise(i=>{n.c=()=>{n.c=null,i()},e.finally(n.c)});return r[hs]=n,r},aP=t=>u0(t[hs].b,t[hs].o),lP=new WeakMap,Hu=t=>"init"in t,f0="r",d0="w",xc="c",h0="s",j1="h",cP="n",uP="l",fP="a",dP="m",hP=t=>{const e=new WeakMap,n=new WeakMap,r=new Map;let i,s;if(({BASE_URL:"./",MODE:"production",DEV:!1,PROD:!0,SSR:!1}&&"production")!=="production"&&(i=new Set,s=new Set),t)for(const[P,L]of t){const O={v:L,r:0,y:!0,d:new Map};({BASE_URL:"./",MODE:"production",DEV:!1,PROD:!0,SSR:!1}&&"production")!=="production"&&(Object.freeze(O),Hu(P)||console.warn("Found initial value for derived atom which can cause unexpected behavior",P)),e.set(P,O)}const o=new WeakMap,a=(P,L,O)=>{let z=o.get(L);z||(z=new Map,o.set(L,z)),O.then(()=>{z.get(P)===O&&(z.delete(P),z.size||o.delete(L))}),z.set(P,O)},l=P=>{const L=new Set,O=o.get(P);return O&&(o.delete(P),O.forEach((z,F)=>{ml(z),L.add(F)})),L},c=new WeakMap,u=P=>{let L=c.get(P);return L||(L=new Map,c.set(P,L)),L},f=(P,L)=>{if(P){const O=u(P);let z=O.get(L);return z||(z=f(P.p,L),z&&"p"in z&&ju(z.p)&&(z=void 0),z&&O.set(L,z)),z}return e.get(L)},d=(P,L,O)=>{if(({BASE_URL:"./",MODE:"production",DEV:!1,PROD:!0,SSR:!1}&&"production")!=="production"&&Object.freeze(O),P)u(P).set(L,O);else{const z=e.get(L);e.set(L,O),r.has(L)||r.set(L,z)}},h=(P,L=new Map,O)=>{if(!O)return L;const z=new Map;let F=!1;return O.forEach(V=>{var Q;const j=((Q=f(P,V))==null?void 0:Q.r)||0;z.set(V,j),L.get(V)!==j&&(F=!0)}),L.size===z.size&&!F?L:z},g=(P,L,O,z,F)=>{const V=f(P,L);if(V){if(F&&(!("p"in V)||!zf(V.p,F)))return V;"p"in V&&ml(V.p)}const Q={v:O,r:(V==null?void 0:V.r)||0,y:!0,d:h(P,V==null?void 0:V.d,z)};let j=!(V!=null&&V.y);return!V||!("v"in V)||!Object.is(V.v,O)?(j=!0,++Q.r,Q.d.has(L)&&(Q.d=new Map(Q.d).set(L,Q.r))):Q.d!==V.d&&(Q.d.size!==V.d.size||!Array.from(Q.d.keys()).every(ge=>V.d.has(ge)))&&(j=!0,Promise.resolve().then(()=>{oe(P)})),V&&!j?V:(d(P,L,Q),Q)},A=(P,L,O,z,F)=>{const V=f(P,L);if(V){if(F&&(!("p"in V)||!zf(V.p,F)))return V;"p"in V&&ml(V.p)}const Q={e:O,r:((V==null?void 0:V.r)||0)+1,y:!0,d:h(P,V==null?void 0:V.d,z)};return d(P,L,Q),Q},E=(P,L,O,z)=>{const F=f(P,L);if(F&&"p"in F){if(zf(F.p,O)&&!ju(F.p))return F.y?F:{...F,y:!0};ml(F.p)}a(P,L,O);const V={p:O,r:((F==null?void 0:F.r)||0)+1,y:!0,d:h(P,F==null?void 0:F.d,z)};return d(P,L,V),V},p=(P,L,O,z)=>{if(O instanceof Promise){const F=u0(O,O.then(V=>{g(P,L,V,z,F)}).catch(V=>{if(V instanceof Promise)return c0(V)?V.then(()=>{y(P,L,!0)}):V;A(P,L,V,z,F)}));return E(P,L,F,z)}return g(P,L,O,z)},m=(P,L)=>{const O=f(P,L);if(O){const z={...O,y:!1};d(P,L,z)}else({BASE_URL:"./",MODE:"production",DEV:!1,PROD:!0,SSR:!1}&&"production")!=="production"&&console.warn("[Bug] could not invalidate non existing atom",L)},y=(P,L,O)=>{if(!O){const F=f(P,L);if(F){if(F.y&&"p"in F&&!ju(F.p))return F;if(F.d.forEach((V,Q)=>{if(Q!==L)if(!n.has(Q))y(P,Q);else{const j=f(P,Q);j&&!j.y&&y(P,Q)}}),Array.from(F.d).every(([V,Q])=>{const j=f(P,V);return j&&!("p"in j)&&j.r===Q}))return F.y?F:{...F,y:!0}}}const z=new Set;try{const F=L.read(V=>{z.add(V);const Q=V===L?f(P,V):y(P,V);if(Q){if("e"in Q)throw Q.e;if("p"in Q)throw Q.p;return Q.v}if(Hu(V))return V.init;throw new Error("no atom init")});return p(P,L,F,z)}catch(F){if(F instanceof Promise){const V=c0(F)&&ju(F)?aP(F):u0(F,F);return E(P,L,V,z)}return A(P,L,F,z)}},_=(P,L)=>y(L,P),I=(P,L)=>{let O=n.get(L);return O||(O=G(P,L)),O},C=(P,L)=>!L.l.size&&(!L.t.size||L.t.size===1&&L.t.has(P)),b=(P,L)=>{const O=n.get(L);O&&C(L,O)&&Y(P,L)},B=(P,L)=>{const O=n.get(L);O==null||O.t.forEach(z=>{z!==L&&(m(P,z),B(P,z))})},R=(P,L,O)=>{let z=!0;const F=(j,ge)=>{const ae=y(P,j);if("e"in ae)throw ae.e;if("p"in ae){if(ge!=null&&ge.unstable_promise)return ae.p.then(()=>{const ve=f(P,j);return ve&&"p"in ve&&ve.p===ae.p?new Promise(fe=>setTimeout(fe)).then(()=>F(j,ge)):F(j,ge)});throw({BASE_URL:"./",MODE:"production",DEV:!1,PROD:!0,SSR:!1}&&"production")!=="production"&&console.info("Reading pending atom state in write operation. We throw a promise for now.",j),ae.p}if("v"in ae)return ae.v;throw({BASE_URL:"./",MODE:"production",DEV:!1,PROD:!0,SSR:!1}&&"production")!=="production"&&console.warn("[Bug] no value found while reading atom in write operation. This is probably a bug.",j),new Error("no value found")},V=(j,ge)=>{let ae;if(j===L){if(!Hu(j))throw new Error("atom not writable");l(j).forEach(Se=>{Se!==P&&p(Se,j,ge)});const fe=f(P,j),Ie=p(P,j,ge);fe!==Ie&&B(P,j)}else ae=R(P,j,ge);return z||oe(P),ae},Q=L.write(F,V,O);return z=!1,Q},M=(P,L,O)=>{const z=R(O,P,L);return oe(O),z},U=P=>!!P.write,G=(P,L,O)=>{const z={t:new Set(O&&[O]),l:new Set};if(n.set(L,z),({BASE_URL:"./",MODE:"production",DEV:!1,PROD:!0,SSR:!1}&&"production")!=="production"&&s.add(L),y(void 0,L).d.forEach((V,Q)=>{const j=n.get(Q);j?j.t.add(L):Q!==L&&G(P,Q,L)}),U(L)&&L.onMount){const V=j=>M(L,j,P),Q=L.onMount(V);P=void 0,Q&&(z.u=Q)}return z},Y=(P,L)=>{var O;const z=(O=n.get(L))==null?void 0:O.u;z&&z(),n.delete(L),({BASE_URL:"./",MODE:"production",DEV:!1,PROD:!0,SSR:!1}&&"production")!=="production"&&s.delete(L);const F=f(P,L);F?("p"in F&&ml(F.p),F.d.forEach((V,Q)=>{if(Q!==L){const j=n.get(Q);j&&(j.t.delete(L),C(Q,j)&&Y(P,Q))}})):({BASE_URL:"./",MODE:"production",DEV:!1,PROD:!0,SSR:!1}&&"production")!=="production"&&console.warn("[Bug] could not find atom state to unmount",L)},Z=(P,L,O,z)=>{const F=new Set(O.d.keys());z==null||z.forEach((V,Q)=>{if(F.has(Q)){F.delete(Q);return}const j=n.get(Q);j&&(j.t.delete(L),C(Q,j)&&Y(P,Q))}),F.forEach(V=>{const Q=n.get(V);Q?Q.t.add(L):n.has(L)&&G(P,V,L)})},oe=P=>{if(P){u(P).forEach((O,z)=>{const F=e.get(z);if(O!==F){const V=n.get(z);V==null||V.l.forEach(Q=>Q(P))}});return}for(;r.size;){const L=Array.from(r);r.clear(),L.forEach(([O,z])=>{const F=f(void 0,O);if(F&&F.d!==(z==null?void 0:z.d)&&Z(void 0,O,F,z==null?void 0:z.d),z&&!z.y&&(F!=null&&F.y))return;const V=n.get(O);V==null||V.l.forEach(Q=>Q())})}({BASE_URL:"./",MODE:"production",DEV:!1,PROD:!0,SSR:!1}&&"production")!=="production"&&i.forEach(L=>L())},ue=P=>{u(P).forEach((O,z)=>{const F=e.get(z);(!F||O.r>F.r||O.y!==F.y||O.r===F.r&&O.d!==F.d)&&(e.set(z,O),O.d!==(F==null?void 0:F.d)&&Z(P,z,O,F==null?void 0:F.d))})},Ee=(P,L)=>{L&&ue(L),oe(void 0)},D=(P,L,O)=>{const F=I(O,P).l;return F.add(L),()=>{F.delete(L),b(O,P)}},X=(P,L)=>{for(const[O,z]of P)Hu(O)&&(p(L,O,z),B(L,O));oe(L)};return({BASE_URL:"./",MODE:"production",DEV:!1,PROD:!0,SSR:!1}&&"production")!=="production"?{[f0]:_,[d0]:M,[xc]:Ee,[h0]:D,[j1]:X,[cP]:P=>(i.add(P),()=>{i.delete(P)}),[uP]:()=>s.values(),[fP]:P=>e.get(P),[dP]:P=>n.get(P)}:{[f0]:_,[d0]:M,[xc]:Ee,[h0]:D,[j1]:X}},aS=(t,e)=>({s:e?e(t).SECRET_INTERNAL_store:hP(t)}),tA=new Map,Dv=t=>(tA.has(t)||tA.set(t,S.createContext(aS())),tA.get(t)),gP=({children:t,initialValues:e,scope:n,unstable_createStore:r,unstable_enableVersionedWrite:i})=>{const[s,o]=S.useState({});S.useEffect(()=>{const c=a.current;c.w&&(c.s[xc](null,s),delete s.p,c.v=s)},[s]);const a=S.useRef();if(!a.current){const c=aS(e,r);if(i){let u=0;c.w=f=>{o(d=>{const h=u?d:{p:d};return f(h),h})},c.v=s,c.r=f=>{++u,f(),--u}}a.current=c}const l=Dv(n);return S.createElement(l.Provider,{value:a.current},t)};function Bn(t,e){return oP(t,e)}function kn(t,e){const n=Dv(e),r=S.useContext(n),{s:i,v:s}=r,o=d=>{const h=i[f0](t,d);if(({BASE_URL:"./",MODE:"production",DEV:!1,PROD:!0,SSR:!1}&&"production")!=="production"&&!h.y)throw new Error("should not be invalidated");if("e"in h)throw h.e;if("p"in h)throw h.p;if("v"in h)return h.v;throw new Error("no atom value")},[[a,l,c],u]=S.useReducer((d,h)=>{const g=o(h);return Object.is(d[1],g)&&d[2]===t?d:[h,g,t]},s,d=>{const h=o(d);return[d,h,t]});let f=l;return c!==t&&(u(a),f=o(a)),S.useEffect(()=>{const{v:d}=r;d&&i[xc](t,d);const h=i[h0](t,u,d);return u(d),h},[i,t,r]),S.useEffect(()=>{i[xc](t,a)}),S.useDebugValue(f),f}function g0(t,e){const n=Dv(e),{s:r,w:i}=S.useContext(n);return S.useCallback(o=>{if(({BASE_URL:"./",MODE:"production",DEV:!1,PROD:!0,SSR:!1}&&"production")!=="production"&&!("write"in t))throw new Error("not writable atom");const a=l=>r[d0](t,o,l);return i?i(a):a()},[r,i,t])}function pi(t,e){return"scope"in t&&(console.warn("atom.scope is deprecated. Please do useAtom(atom, scope) instead."),e=t.scope),[kn(t,e),g0(t,e)]}function $(){return $=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},$.apply(this,arguments)}function Ra(t){"@babel/helpers - typeof";return Ra=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ra(t)}function nA(t){return t&&Ra(t)==="object"&&t.constructor===Object}function Pa(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{clone:!0},r=n.clone?$({},t):t;return nA(t)&&nA(e)&&Object.keys(e).forEach(function(i){i!=="__proto__"&&(nA(e[i])&&i in t?r[i]=Pa(t[i],e[i],n):r[i]=e[i])}),r}function AP(t,e){if(Ra(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Ra(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function lS(t){var e=AP(t,"string");return Ra(e)==="symbol"?e:String(e)}function v(t,e,n){return e=lS(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Cc(t){for(var e="https://mui.com/production-error/?code="+t,n=1;n<arguments.length;n+=1)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified Material-UI error #"+t+"; visit "+e+" for the full message."}var Je={};/** @license React v17.0.2
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Mh=60103,Nh=60106,Hc=60107,Wc=60108,Yc=60114,$c=60109,Kc=60110,qc=60112,Xc=60113,kv=60120,Zc=60115,Jc=60116,cS=60121,uS=60122,fS=60117,dS=60129,hS=60131;if(typeof Symbol=="function"&&Symbol.for){var Dt=Symbol.for;Mh=Dt("react.element"),Nh=Dt("react.portal"),Hc=Dt("react.fragment"),Wc=Dt("react.strict_mode"),Yc=Dt("react.profiler"),$c=Dt("react.provider"),Kc=Dt("react.context"),qc=Dt("react.forward_ref"),Xc=Dt("react.suspense"),kv=Dt("react.suspense_list"),Zc=Dt("react.memo"),Jc=Dt("react.lazy"),cS=Dt("react.block"),uS=Dt("react.server.block"),fS=Dt("react.fundamental"),dS=Dt("react.debug_trace_mode"),hS=Dt("react.legacy_hidden")}function wr(t){if(typeof t=="object"&&t!==null){var e=t.$$typeof;switch(e){case Mh:switch(t=t.type,t){case Hc:case Yc:case Wc:case Xc:case kv:return t;default:switch(t=t&&t.$$typeof,t){case Kc:case qc:case Jc:case Zc:case $c:return t;default:return e}}case Nh:return e}}}var pP=$c,mP=Mh,vP=qc,yP=Hc,EP=Jc,_P=Zc,xP=Nh,CP=Yc,IP=Wc,wP=Xc;Je.ContextConsumer=Kc;Je.ContextProvider=pP;Je.Element=mP;Je.ForwardRef=vP;Je.Fragment=yP;Je.Lazy=EP;Je.Memo=_P;Je.Portal=xP;Je.Profiler=CP;Je.StrictMode=IP;Je.Suspense=wP;Je.isAsyncMode=function(){return!1};Je.isConcurrentMode=function(){return!1};Je.isContextConsumer=function(t){return wr(t)===Kc};Je.isContextProvider=function(t){return wr(t)===$c};Je.isElement=function(t){return typeof t=="object"&&t!==null&&t.$$typeof===Mh};Je.isForwardRef=function(t){return wr(t)===qc};Je.isFragment=function(t){return wr(t)===Hc};Je.isLazy=function(t){return wr(t)===Jc};Je.isMemo=function(t){return wr(t)===Zc};Je.isPortal=function(t){return wr(t)===Nh};Je.isProfiler=function(t){return wr(t)===Yc};Je.isStrictMode=function(t){return wr(t)===Wc};Je.isSuspense=function(t){return wr(t)===Xc};Je.isValidElementType=function(t){return typeof t=="string"||typeof t=="function"||t===Hc||t===Yc||t===dS||t===Wc||t===Xc||t===kv||t===hS||typeof t=="object"&&t!==null&&(t.$$typeof===Jc||t.$$typeof===Zc||t.$$typeof===$c||t.$$typeof===Kc||t.$$typeof===qc||t.$$typeof===fS||t.$$typeof===cS||t[0]===uS)};Je.typeOf=wr;var SP=typeof Symbol=="function"&&Symbol.for;const gS=SP?Symbol.for("mui.nested"):"__THEME_NESTED__";var bP=["checked","disabled","error","focused","focusVisible","required","expanded","selected"];function TP(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e=t.disableGlobal,n=e===void 0?!1:e,r=t.productionPrefix,i=r===void 0?"jss":r,s=t.seed,o=s===void 0?"":s,a=o===""?"":"".concat(o,"-"),l=0,c=function(){return l+=1,l};return function(u,f){var d=f.options.name;if(d&&d.indexOf("Mui")===0&&!f.options.link&&!n){if(bP.indexOf(u.key)!==-1)return"Mui-".concat(u.key);var h="".concat(a).concat(d,"-").concat(u.key);return!f.options.theme[gS]||o!==""?h:"".concat(h,"-").concat(c())}return"".concat(a).concat(i).concat(c())}}function AS(t){var e=t.theme,n=t.name,r=t.props;if(!e||!e.props||!e.props[n])return r;var i=e.props[n],s;for(s in i)r[s]===void 0&&(r[s]=i[s]);return r}var H1=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},eu=(typeof window>"u"?"undefined":H1(window))==="object"&&(typeof document>"u"?"undefined":H1(document))==="object"&&document.nodeType===9;function W1(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,lS(r.key),r)}}function Qv(t,e,n){return e&&W1(t.prototype,e),n&&W1(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function A0(t,e){return A0=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},A0(t,e)}function Oh(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,A0(t,e)}function p0(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Dh(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}var BP={}.constructor;function m0(t){if(t==null||typeof t!="object")return t;if(Array.isArray(t))return t.map(m0);if(t.constructor!==BP)return t;var e={};for(var n in t)e[n]=m0(t[n]);return e}function Fv(t,e,n){t===void 0&&(t="unnamed");var r=n.jss,i=m0(e),s=r.plugins.onCreateRule(t,i,n);return s||(t[0],null)}var Y1=function(e,n){for(var r="",i=0;i<e.length&&e[i]!=="!important";i++)r&&(r+=n),r+=e[i];return r},Js=function(e){if(!Array.isArray(e))return e;var n="";if(Array.isArray(e[0]))for(var r=0;r<e.length&&e[r]!=="!important";r++)n&&(n+=", "),n+=Y1(e[r]," ");else n=Y1(e,", ");return e[e.length-1]==="!important"&&(n+=" !important"),n};function Ha(t){return t&&t.format===!1?{linebreak:"",space:""}:{linebreak:`
`,space:" "}}function vl(t,e){for(var n="",r=0;r<e;r++)n+="  ";return n+t}function Ic(t,e,n){n===void 0&&(n={});var r="";if(!e)return r;var i=n,s=i.indent,o=s===void 0?0:s,a=e.fallbacks;n.format===!1&&(o=-1/0);var l=Ha(n),c=l.linebreak,u=l.space;if(t&&o++,a)if(Array.isArray(a))for(var f=0;f<a.length;f++){var d=a[f];for(var h in d){var g=d[h];g!=null&&(r&&(r+=c),r+=vl(h+":"+u+Js(g)+";",o))}}else for(var A in a){var E=a[A];E!=null&&(r&&(r+=c),r+=vl(A+":"+u+Js(E)+";",o))}for(var p in e){var m=e[p];m!=null&&p!=="fallbacks"&&(r&&(r+=c),r+=vl(p+":"+u+Js(m)+";",o))}return!r&&!n.allowEmpty||!t?r:(o--,r&&(r=""+c+r+c),vl(""+t+u+"{"+r,o)+vl("}",o))}var RP=/([[\].#*$><+~=|^:(),"'`\s])/g,$1=typeof CSS<"u"&&CSS.escape,Uv=function(t){return $1?$1(t):t.replace(RP,"\\$1")},pS=function(){function t(n,r,i){this.type="style",this.isProcessed=!1;var s=i.sheet,o=i.Renderer;this.key=n,this.options=i,this.style=r,s?this.renderer=s.renderer:o&&(this.renderer=new o)}var e=t.prototype;return e.prop=function(r,i,s){if(i===void 0)return this.style[r];var o=s?s.force:!1;if(!o&&this.style[r]===i)return this;var a=i;(!s||s.process!==!1)&&(a=this.options.jss.plugins.onChangeValue(i,r,this));var l=a==null||a===!1,c=r in this.style;if(l&&!c&&!o)return this;var u=l&&c;if(u?delete this.style[r]:this.style[r]=a,this.renderable&&this.renderer)return u?this.renderer.removeProperty(this.renderable,r):this.renderer.setProperty(this.renderable,r,a),this;var f=this.options.sheet;return f&&f.attached,this},t}(),v0=function(t){Oh(e,t);function e(r,i,s){var o;o=t.call(this,r,i,s)||this;var a=s.selector,l=s.scoped,c=s.sheet,u=s.generateId;return a?o.selectorText=a:l!==!1&&(o.id=u(p0(p0(o)),c),o.selectorText="."+Uv(o.id)),o}var n=e.prototype;return n.applyTo=function(i){var s=this.renderer;if(s){var o=this.toJSON();for(var a in o)s.setProperty(i,a,o[a])}return this},n.toJSON=function(){var i={};for(var s in this.style){var o=this.style[s];typeof o!="object"?i[s]=o:Array.isArray(o)&&(i[s]=Js(o))}return i},n.toString=function(i){var s=this.options.sheet,o=s?s.options.link:!1,a=o?$({},i,{allowEmpty:!0}):i;return Ic(this.selectorText,this.style,a)},Qv(e,[{key:"selector",set:function(i){if(i!==this.selectorText){this.selectorText=i;var s=this.renderer,o=this.renderable;if(!(!o||!s)){var a=s.setSelector(o,i);a||s.replaceRule(o,this)}}},get:function(){return this.selectorText}}]),e}(pS),PP={onCreateRule:function(e,n,r){return e[0]==="@"||r.parent&&r.parent.type==="keyframes"?null:new v0(e,n,r)}},rA={indent:1,children:!0},LP=/@([\w-]+)/,MP=function(){function t(n,r,i){this.type="conditional",this.isProcessed=!1,this.key=n;var s=n.match(LP);this.at=s?s[1]:"unknown",this.query=i.name||"@"+this.at,this.options=i,this.rules=new kh($({},i,{parent:this}));for(var o in r)this.rules.add(o,r[o]);this.rules.process()}var e=t.prototype;return e.getRule=function(r){return this.rules.get(r)},e.indexOf=function(r){return this.rules.indexOf(r)},e.addRule=function(r,i,s){var o=this.rules.add(r,i,s);return o?(this.options.jss.plugins.onProcessRule(o),o):null},e.replaceRule=function(r,i,s){var o=this.rules.replace(r,i,s);return o&&this.options.jss.plugins.onProcessRule(o),o},e.toString=function(r){r===void 0&&(r=rA);var i=Ha(r),s=i.linebreak;if(r.indent==null&&(r.indent=rA.indent),r.children==null&&(r.children=rA.children),r.children===!1)return this.query+" {}";var o=this.rules.toString(r);return o?this.query+" {"+s+o+s+"}":""},t}(),NP=/@container|@media|@supports\s+/,OP={onCreateRule:function(e,n,r){return NP.test(e)?new MP(e,n,r):null}},iA={indent:1,children:!0},DP=/@keyframes\s+([\w-]+)/,y0=function(){function t(n,r,i){this.type="keyframes",this.at="@keyframes",this.isProcessed=!1;var s=n.match(DP);s&&s[1]?this.name=s[1]:this.name="noname",this.key=this.type+"-"+this.name,this.options=i;var o=i.scoped,a=i.sheet,l=i.generateId;this.id=o===!1?this.name:Uv(l(this,a)),this.rules=new kh($({},i,{parent:this}));for(var c in r)this.rules.add(c,r[c],$({},i,{parent:this}));this.rules.process()}var e=t.prototype;return e.toString=function(r){r===void 0&&(r=iA);var i=Ha(r),s=i.linebreak;if(r.indent==null&&(r.indent=iA.indent),r.children==null&&(r.children=iA.children),r.children===!1)return this.at+" "+this.id+" {}";var o=this.rules.toString(r);return o&&(o=""+s+o+s),this.at+" "+this.id+" {"+o+"}"},t}(),kP=/@keyframes\s+/,QP=/\$([\w-]+)/g,E0=function(e,n){return typeof e=="string"?e.replace(QP,function(r,i){return i in n?n[i]:r}):e},K1=function(e,n,r){var i=e[n],s=E0(i,r);s!==i&&(e[n]=s)},FP={onCreateRule:function(e,n,r){return typeof e=="string"&&kP.test(e)?new y0(e,n,r):null},onProcessStyle:function(e,n,r){return n.type!=="style"||!r||("animation-name"in e&&K1(e,"animation-name",r.keyframes),"animation"in e&&K1(e,"animation",r.keyframes)),e},onChangeValue:function(e,n,r){var i=r.options.sheet;if(!i)return e;switch(n){case"animation":return E0(e,i.keyframes);case"animation-name":return E0(e,i.keyframes);default:return e}}},UP=function(t){Oh(e,t);function e(){return t.apply(this,arguments)||this}var n=e.prototype;return n.toString=function(i){var s=this.options.sheet,o=s?s.options.link:!1,a=o?$({},i,{allowEmpty:!0}):i;return Ic(this.key,this.style,a)},e}(pS),GP={onCreateRule:function(e,n,r){return r.parent&&r.parent.type==="keyframes"?new UP(e,n,r):null}},zP=function(){function t(n,r,i){this.type="font-face",this.at="@font-face",this.isProcessed=!1,this.key=n,this.style=r,this.options=i}var e=t.prototype;return e.toString=function(r){var i=Ha(r),s=i.linebreak;if(Array.isArray(this.style)){for(var o="",a=0;a<this.style.length;a++)o+=Ic(this.at,this.style[a]),this.style[a+1]&&(o+=s);return o}return Ic(this.at,this.style,r)},t}(),VP=/@font-face/,jP={onCreateRule:function(e,n,r){return VP.test(e)?new zP(e,n,r):null}},HP=function(){function t(n,r,i){this.type="viewport",this.at="@viewport",this.isProcessed=!1,this.key=n,this.style=r,this.options=i}var e=t.prototype;return e.toString=function(r){return Ic(this.key,this.style,r)},t}(),WP={onCreateRule:function(e,n,r){return e==="@viewport"||e==="@-ms-viewport"?new HP(e,n,r):null}},YP=function(){function t(n,r,i){this.type="simple",this.isProcessed=!1,this.key=n,this.value=r,this.options=i}var e=t.prototype;return e.toString=function(r){if(Array.isArray(this.value)){for(var i="",s=0;s<this.value.length;s++)i+=this.key+" "+this.value[s]+";",this.value[s+1]&&(i+=`
`);return i}return this.key+" "+this.value+";"},t}(),$P={"@charset":!0,"@import":!0,"@namespace":!0},KP={onCreateRule:function(e,n,r){return e in $P?new YP(e,n,r):null}},q1=[PP,OP,FP,GP,jP,WP,KP],qP={process:!0},X1={force:!0,process:!0},kh=function(){function t(n){this.map={},this.raw={},this.index=[],this.counter=0,this.options=n,this.classes=n.classes,this.keyframes=n.keyframes}var e=t.prototype;return e.add=function(r,i,s){var o=this.options,a=o.parent,l=o.sheet,c=o.jss,u=o.Renderer,f=o.generateId,d=o.scoped,h=$({classes:this.classes,parent:a,sheet:l,jss:c,Renderer:u,generateId:f,scoped:d,name:r,keyframes:this.keyframes,selector:void 0},s),g=r;r in this.raw&&(g=r+"-d"+this.counter++),this.raw[g]=i,g in this.classes&&(h.selector="."+Uv(this.classes[g]));var A=Fv(g,i,h);if(!A)return null;this.register(A);var E=h.index===void 0?this.index.length:h.index;return this.index.splice(E,0,A),A},e.replace=function(r,i,s){var o=this.get(r),a=this.index.indexOf(o);o&&this.remove(o);var l=s;return a!==-1&&(l=$({},s,{index:a})),this.add(r,i,l)},e.get=function(r){return this.map[r]},e.remove=function(r){this.unregister(r),delete this.raw[r.key],this.index.splice(this.index.indexOf(r),1)},e.indexOf=function(r){return this.index.indexOf(r)},e.process=function(){var r=this.options.jss.plugins;this.index.slice(0).forEach(r.onProcessRule,r)},e.register=function(r){this.map[r.key]=r,r instanceof v0?(this.map[r.selector]=r,r.id&&(this.classes[r.key]=r.id)):r instanceof y0&&this.keyframes&&(this.keyframes[r.name]=r.id)},e.unregister=function(r){delete this.map[r.key],r instanceof v0?(delete this.map[r.selector],delete this.classes[r.key]):r instanceof y0&&delete this.keyframes[r.name]},e.update=function(){var r,i,s;if(typeof(arguments.length<=0?void 0:arguments[0])=="string"?(r=arguments.length<=0?void 0:arguments[0],i=arguments.length<=1?void 0:arguments[1],s=arguments.length<=2?void 0:arguments[2]):(i=arguments.length<=0?void 0:arguments[0],s=arguments.length<=1?void 0:arguments[1],r=null),r)this.updateOne(this.get(r),i,s);else for(var o=0;o<this.index.length;o++)this.updateOne(this.index[o],i,s)},e.updateOne=function(r,i,s){s===void 0&&(s=qP);var o=this.options,a=o.jss.plugins,l=o.sheet;if(r.rules instanceof t){r.rules.update(i,s);return}var c=r.style;if(a.onUpdate(i,r,l,s),s.process&&c&&c!==r.style){a.onProcessStyle(r.style,r,l);for(var u in r.style){var f=r.style[u],d=c[u];f!==d&&r.prop(u,f,X1)}for(var h in c){var g=r.style[h],A=c[h];g==null&&g!==A&&r.prop(h,null,X1)}}},e.toString=function(r){for(var i="",s=this.options.sheet,o=s?s.options.link:!1,a=Ha(r),l=a.linebreak,c=0;c<this.index.length;c++){var u=this.index[c],f=u.toString(r);!f&&!o||(i&&(i+=l),i+=f)}return i},t}(),mS=function(){function t(n,r){this.attached=!1,this.deployed=!1,this.classes={},this.keyframes={},this.options=$({},r,{sheet:this,parent:this,classes:this.classes,keyframes:this.keyframes}),r.Renderer&&(this.renderer=new r.Renderer(this)),this.rules=new kh(this.options);for(var i in n)this.rules.add(i,n[i]);this.rules.process()}var e=t.prototype;return e.attach=function(){return this.attached?this:(this.renderer&&this.renderer.attach(),this.attached=!0,this.deployed||this.deploy(),this)},e.detach=function(){return this.attached?(this.renderer&&this.renderer.detach(),this.attached=!1,this):this},e.addRule=function(r,i,s){var o=this.queue;this.attached&&!o&&(this.queue=[]);var a=this.rules.add(r,i,s);return a?(this.options.jss.plugins.onProcessRule(a),this.attached?(this.deployed&&(o?o.push(a):(this.insertRule(a),this.queue&&(this.queue.forEach(this.insertRule,this),this.queue=void 0))),a):(this.deployed=!1,a)):null},e.replaceRule=function(r,i,s){var o=this.rules.get(r);if(!o)return this.addRule(r,i,s);var a=this.rules.replace(r,i,s);return a&&this.options.jss.plugins.onProcessRule(a),this.attached?(this.deployed&&this.renderer&&(a?o.renderable&&this.renderer.replaceRule(o.renderable,a):this.renderer.deleteRule(o)),a):(this.deployed=!1,a)},e.insertRule=function(r){this.renderer&&this.renderer.insertRule(r)},e.addRules=function(r,i){var s=[];for(var o in r){var a=this.addRule(o,r[o],i);a&&s.push(a)}return s},e.getRule=function(r){return this.rules.get(r)},e.deleteRule=function(r){var i=typeof r=="object"?r:this.rules.get(r);return!i||this.attached&&!i.renderable?!1:(this.rules.remove(i),this.attached&&i.renderable&&this.renderer?this.renderer.deleteRule(i.renderable):!0)},e.indexOf=function(r){return this.rules.indexOf(r)},e.deploy=function(){return this.renderer&&this.renderer.deploy(),this.deployed=!0,this},e.update=function(){var r;return(r=this.rules).update.apply(r,arguments),this},e.updateOne=function(r,i,s){return this.rules.updateOne(r,i,s),this},e.toString=function(r){return this.rules.toString(r)},t}(),XP=function(){function t(){this.plugins={internal:[],external:[]},this.registry={}}var e=t.prototype;return e.onCreateRule=function(r,i,s){for(var o=0;o<this.registry.onCreateRule.length;o++){var a=this.registry.onCreateRule[o](r,i,s);if(a)return a}return null},e.onProcessRule=function(r){if(!r.isProcessed){for(var i=r.options.sheet,s=0;s<this.registry.onProcessRule.length;s++)this.registry.onProcessRule[s](r,i);r.style&&this.onProcessStyle(r.style,r,i),r.isProcessed=!0}},e.onProcessStyle=function(r,i,s){for(var o=0;o<this.registry.onProcessStyle.length;o++)i.style=this.registry.onProcessStyle[o](i.style,i,s)},e.onProcessSheet=function(r){for(var i=0;i<this.registry.onProcessSheet.length;i++)this.registry.onProcessSheet[i](r)},e.onUpdate=function(r,i,s,o){for(var a=0;a<this.registry.onUpdate.length;a++)this.registry.onUpdate[a](r,i,s,o)},e.onChangeValue=function(r,i,s){for(var o=r,a=0;a<this.registry.onChangeValue.length;a++)o=this.registry.onChangeValue[a](o,i,s);return o},e.use=function(r,i){i===void 0&&(i={queue:"external"});var s=this.plugins[i.queue];s.indexOf(r)===-1&&(s.push(r),this.registry=[].concat(this.plugins.external,this.plugins.internal).reduce(function(o,a){for(var l in a)l in o&&o[l].push(a[l]);return o},{onCreateRule:[],onProcessRule:[],onProcessStyle:[],onProcessSheet:[],onChangeValue:[],onUpdate:[]}))},t}(),ZP=function(){function t(){this.registry=[]}var e=t.prototype;return e.add=function(r){var i=this.registry,s=r.options.index;if(i.indexOf(r)===-1){if(i.length===0||s>=this.index){i.push(r);return}for(var o=0;o<i.length;o++)if(i[o].options.index>s){i.splice(o,0,r);return}}},e.reset=function(){this.registry=[]},e.remove=function(r){var i=this.registry.indexOf(r);this.registry.splice(i,1)},e.toString=function(r){for(var i=r===void 0?{}:r,s=i.attached,o=Dh(i,["attached"]),a=Ha(o),l=a.linebreak,c="",u=0;u<this.registry.length;u++){var f=this.registry[u];s!=null&&f.attached!==s||(c&&(c+=l),c+=f.toString(o))}return c},Qv(t,[{key:"index",get:function(){return this.registry.length===0?0:this.registry[this.registry.length-1].options.index}}]),t}(),Yl=new ZP,_0=typeof globalThis<"u"?globalThis:typeof window<"u"&&window.Math===Math?window:typeof self<"u"&&self.Math===Math?self:Function("return this")(),x0="2f1acc6c3a606b082e5eef5e54414ffb";_0[x0]==null&&(_0[x0]=0);var Z1=_0[x0]++,J1=function(e){e===void 0&&(e={});var n=0,r=function(s,o){n+=1;var a="",l="";return o&&(o.options.classNamePrefix&&(l=o.options.classNamePrefix),o.options.jss.id!=null&&(a=String(o.options.jss.id))),e.minify?""+(l||"c")+Z1+a+n:l+s.key+"-"+Z1+(a?"-"+a:"")+"-"+n};return r},vS=function(e){var n;return function(){return n||(n=e()),n}},JP=function(e,n){try{return e.attributeStyleMap?e.attributeStyleMap.get(n):e.style.getPropertyValue(n)}catch{return""}},eL=function(e,n,r){try{var i=r;if(Array.isArray(r)&&(i=Js(r)),e.attributeStyleMap)e.attributeStyleMap.set(n,i);else{var s=i?i.indexOf("!important"):-1,o=s>-1?i.substr(0,s-1):i;e.style.setProperty(n,o,s>-1?"important":"")}}catch{return!1}return!0},tL=function(e,n){try{e.attributeStyleMap?e.attributeStyleMap.delete(n):e.style.removeProperty(n)}catch{}},nL=function(e,n){return e.selectorText=n,e.selectorText===n},yS=vS(function(){return document.querySelector("head")});function rL(t,e){for(var n=0;n<t.length;n++){var r=t[n];if(r.attached&&r.options.index>e.index&&r.options.insertionPoint===e.insertionPoint)return r}return null}function iL(t,e){for(var n=t.length-1;n>=0;n--){var r=t[n];if(r.attached&&r.options.insertionPoint===e.insertionPoint)return r}return null}function sL(t){for(var e=yS(),n=0;n<e.childNodes.length;n++){var r=e.childNodes[n];if(r.nodeType===8&&r.nodeValue.trim()===t)return r}return null}function oL(t){var e=Yl.registry;if(e.length>0){var n=rL(e,t);if(n&&n.renderer)return{parent:n.renderer.element.parentNode,node:n.renderer.element};if(n=iL(e,t),n&&n.renderer)return{parent:n.renderer.element.parentNode,node:n.renderer.element.nextSibling}}var r=t.insertionPoint;if(r&&typeof r=="string"){var i=sL(r);if(i)return{parent:i.parentNode,node:i.nextSibling}}return!1}function aL(t,e){var n=e.insertionPoint,r=oL(e);if(r!==!1&&r.parent){r.parent.insertBefore(t,r.node);return}if(n&&typeof n.nodeType=="number"){var i=n,s=i.parentNode;s&&s.insertBefore(t,i.nextSibling);return}yS().appendChild(t)}var lL=vS(function(){var t=document.querySelector('meta[property="csp-nonce"]');return t?t.getAttribute("content"):null}),e_=function(e,n,r){try{"insertRule"in e?e.insertRule(n,r):"appendRule"in e&&e.appendRule(n)}catch{return!1}return e.cssRules[r]},t_=function(e,n){var r=e.cssRules.length;return n===void 0||n>r?r:n},cL=function(){var e=document.createElement("style");return e.textContent=`
`,e},uL=function(){function t(n){this.getPropertyValue=JP,this.setProperty=eL,this.removeProperty=tL,this.setSelector=nL,this.hasInsertedRules=!1,this.cssRules=[],n&&Yl.add(n),this.sheet=n;var r=this.sheet?this.sheet.options:{},i=r.media,s=r.meta,o=r.element;this.element=o||cL(),this.element.setAttribute("data-jss",""),i&&this.element.setAttribute("media",i),s&&this.element.setAttribute("data-meta",s);var a=lL();a&&this.element.setAttribute("nonce",a)}var e=t.prototype;return e.attach=function(){if(!(this.element.parentNode||!this.sheet)){aL(this.element,this.sheet.options);var r=!!(this.sheet&&this.sheet.deployed);this.hasInsertedRules&&r&&(this.hasInsertedRules=!1,this.deploy())}},e.detach=function(){if(this.sheet){var r=this.element.parentNode;r&&r.removeChild(this.element),this.sheet.options.link&&(this.cssRules=[],this.element.textContent=`
`)}},e.deploy=function(){var r=this.sheet;if(r){if(r.options.link){this.insertRules(r.rules);return}this.element.textContent=`
`+r.toString()+`
`}},e.insertRules=function(r,i){for(var s=0;s<r.index.length;s++)this.insertRule(r.index[s],s,i)},e.insertRule=function(r,i,s){if(s===void 0&&(s=this.element.sheet),r.rules){var o=r,a=s;if(r.type==="conditional"||r.type==="keyframes"){var l=t_(s,i);if(a=e_(s,o.toString({children:!1}),l),a===!1)return!1;this.refCssRule(r,l,a)}return this.insertRules(o.rules,a),a}var c=r.toString();if(!c)return!1;var u=t_(s,i),f=e_(s,c,u);return f===!1?!1:(this.hasInsertedRules=!0,this.refCssRule(r,u,f),f)},e.refCssRule=function(r,i,s){r.renderable=s,r.options.parent instanceof mS&&this.cssRules.splice(i,0,s)},e.deleteRule=function(r){var i=this.element.sheet,s=this.indexOf(r);return s===-1?!1:(i.deleteRule(s),this.cssRules.splice(s,1),!0)},e.indexOf=function(r){return this.cssRules.indexOf(r)},e.replaceRule=function(r,i){var s=this.indexOf(r);return s===-1?!1:(this.element.sheet.deleteRule(s),this.cssRules.splice(s,1),this.insertRule(i,s))},e.getRules=function(){return this.element.sheet.cssRules},t}(),fL=0,dL=function(){function t(n){this.id=fL++,this.version="10.10.0",this.plugins=new XP,this.options={id:{minify:!1},createGenerateId:J1,Renderer:eu?uL:null,plugins:[]},this.generateId=J1({minify:!1});for(var r=0;r<q1.length;r++)this.plugins.use(q1[r],{queue:"internal"});this.setup(n)}var e=t.prototype;return e.setup=function(r){return r===void 0&&(r={}),r.createGenerateId&&(this.options.createGenerateId=r.createGenerateId),r.id&&(this.options.id=$({},this.options.id,r.id)),(r.createGenerateId||r.id)&&(this.generateId=this.options.createGenerateId(this.options.id)),r.insertionPoint!=null&&(this.options.insertionPoint=r.insertionPoint),"Renderer"in r&&(this.options.Renderer=r.Renderer),r.plugins&&this.use.apply(this,r.plugins),this},e.createStyleSheet=function(r,i){i===void 0&&(i={});var s=i,o=s.index;typeof o!="number"&&(o=Yl.index===0?0:Yl.index+1);var a=new mS(r,$({},i,{jss:this,generateId:i.generateId||this.generateId,insertionPoint:this.options.insertionPoint,Renderer:this.options.Renderer,index:o}));return this.plugins.onProcessSheet(a),a},e.removeStyleSheet=function(r){return r.detach(),Yl.remove(r),this},e.createRule=function(r,i,s){if(i===void 0&&(i={}),s===void 0&&(s={}),typeof r=="object")return this.createRule(void 0,r,i);var o=$({},s,{name:r,jss:this,Renderer:this.options.Renderer});o.generateId||(o.generateId=this.generateId),o.classes||(o.classes={}),o.keyframes||(o.keyframes={});var a=Fv(r,i,o);return a&&this.plugins.onProcessRule(a),a},e.use=function(){for(var r=this,i=arguments.length,s=new Array(i),o=0;o<i;o++)s[o]=arguments[o];return s.forEach(function(a){r.plugins.use(a)}),this},t}(),ES=function(e){return new dL(e)},Gv=typeof CSS=="object"&&CSS!=null&&"number"in CSS;function _S(t){var e=null;for(var n in t){var r=t[n],i=typeof r;if(i==="function")e||(e={}),e[n]=r;else if(i==="object"&&r!==null&&!Array.isArray(r)){var s=_S(r);s&&(e||(e={}),e[n]=s)}}return e}/**
 * A better abstraction over CSS.
 *
 * @copyright Oleg Isonen (Slobodskoi) / Isonen 2014-present
 * @website https://github.com/cssinjs/jss
 * @license MIT
 */ES();var xS=Date.now(),sA="fnValues"+xS,oA="fnStyle"+ ++xS,hL=function(){return{onCreateRule:function(n,r,i){if(typeof r!="function")return null;var s=Fv(n,{},i);return s[oA]=r,s},onProcessStyle:function(n,r){if(sA in r||oA in r)return n;var i={};for(var s in n){var o=n[s];typeof o=="function"&&(delete n[s],i[s]=o)}return r[sA]=i,n},onUpdate:function(n,r,i,s){var o=r,a=o[oA];a&&(o.style=a(n)||{});var l=o[sA];if(l)for(var c in l)o.prop(c,l[c](n),s)}}};const gL=hL;var as="@global",C0="@global ",AL=function(){function t(n,r,i){this.type="global",this.at=as,this.isProcessed=!1,this.key=n,this.options=i,this.rules=new kh($({},i,{parent:this}));for(var s in r)this.rules.add(s,r[s]);this.rules.process()}var e=t.prototype;return e.getRule=function(r){return this.rules.get(r)},e.addRule=function(r,i,s){var o=this.rules.add(r,i,s);return o&&this.options.jss.plugins.onProcessRule(o),o},e.replaceRule=function(r,i,s){var o=this.rules.replace(r,i,s);return o&&this.options.jss.plugins.onProcessRule(o),o},e.indexOf=function(r){return this.rules.indexOf(r)},e.toString=function(r){return this.rules.toString(r)},t}(),pL=function(){function t(n,r,i){this.type="global",this.at=as,this.isProcessed=!1,this.key=n,this.options=i;var s=n.substr(C0.length);this.rule=i.jss.createRule(s,r,$({},i,{parent:this}))}var e=t.prototype;return e.toString=function(r){return this.rule?this.rule.toString(r):""},t}(),mL=/\s*,\s*/g;function CS(t,e){for(var n=t.split(mL),r="",i=0;i<n.length;i++)r+=e+" "+n[i].trim(),n[i+1]&&(r+=", ");return r}function vL(t,e){var n=t.options,r=t.style,i=r?r[as]:null;if(i){for(var s in i)e.addRule(s,i[s],$({},n,{selector:CS(s,t.selector)}));delete r[as]}}function yL(t,e){var n=t.options,r=t.style;for(var i in r)if(!(i[0]!=="@"||i.substr(0,as.length)!==as)){var s=CS(i.substr(as.length),t.selector);e.addRule(s,r[i],$({},n,{selector:s})),delete r[i]}}function EL(){function t(n,r,i){if(!n)return null;if(n===as)return new AL(n,r,i);if(n[0]==="@"&&n.substr(0,C0.length)===C0)return new pL(n,r,i);var s=i.parent;return s&&(s.type==="global"||s.options.parent&&s.options.parent.type==="global")&&(i.scoped=!1),!i.selector&&i.scoped===!1&&(i.selector=n),null}function e(n,r){n.type!=="style"||!r||(vL(n,r),yL(n,r))}return{onCreateRule:t,onProcessRule:e}}var n_=/\s*,\s*/g,_L=/&/g,xL=/\$([\w-]+)/g;function CL(){function t(i,s){return function(o,a){var l=i.getRule(a)||s&&s.getRule(a);return l?l.selector:a}}function e(i,s){for(var o=s.split(n_),a=i.split(n_),l="",c=0;c<o.length;c++)for(var u=o[c],f=0;f<a.length;f++){var d=a[f];l&&(l+=", "),l+=d.indexOf("&")!==-1?d.replace(_L,u):u+" "+d}return l}function n(i,s,o){if(o)return $({},o,{index:o.index+1});var a=i.options.nestingLevel;a=a===void 0?1:a+1;var l=$({},i.options,{nestingLevel:a,index:s.indexOf(i)+1});return delete l.name,l}function r(i,s,o){if(s.type!=="style")return i;var a=s,l=a.options.parent,c,u;for(var f in i){var d=f.indexOf("&")!==-1,h=f[0]==="@";if(!(!d&&!h)){if(c=n(a,l,c),d){var g=e(f,a.selector);u||(u=t(l,o)),g=g.replace(xL,u);var A=a.key+"-"+f;"replaceRule"in l?l.replaceRule(A,i[f],$({},c,{selector:g})):l.addRule(A,i[f],$({},c,{selector:g}))}else h&&l.addRule(f,{},c).addRule(a.key,i[f],{selector:a.selector});delete i[f]}}return i}return{onProcessStyle:r}}var IL=/[A-Z]/g,wL=/^ms-/,aA={};function SL(t){return"-"+t.toLowerCase()}function IS(t){if(aA.hasOwnProperty(t))return aA[t];var e=t.replace(IL,SL);return aA[t]=wL.test(e)?"-"+e:e}function Rd(t){var e={};for(var n in t){var r=n.indexOf("--")===0?n:IS(n);e[r]=t[n]}return t.fallbacks&&(Array.isArray(t.fallbacks)?e.fallbacks=t.fallbacks.map(Rd):e.fallbacks=Rd(t.fallbacks)),e}function bL(){function t(n){if(Array.isArray(n)){for(var r=0;r<n.length;r++)n[r]=Rd(n[r]);return n}return Rd(n)}function e(n,r,i){if(r.indexOf("--")===0)return n;var s=IS(r);return r===s?n:(i.prop(s,n),null)}return{onProcessStyle:t,onChangeValue:e}}var k=Gv&&CSS?CSS.px:"px",Wu=Gv&&CSS?CSS.ms:"ms",Lo=Gv&&CSS?CSS.percent:"%",TL={"animation-delay":Wu,"animation-duration":Wu,"background-position":k,"background-position-x":k,"background-position-y":k,"background-size":k,border:k,"border-bottom":k,"border-bottom-left-radius":k,"border-bottom-right-radius":k,"border-bottom-width":k,"border-left":k,"border-left-width":k,"border-radius":k,"border-right":k,"border-right-width":k,"border-top":k,"border-top-left-radius":k,"border-top-right-radius":k,"border-top-width":k,"border-width":k,"border-block":k,"border-block-end":k,"border-block-end-width":k,"border-block-start":k,"border-block-start-width":k,"border-block-width":k,"border-inline":k,"border-inline-end":k,"border-inline-end-width":k,"border-inline-start":k,"border-inline-start-width":k,"border-inline-width":k,"border-start-start-radius":k,"border-start-end-radius":k,"border-end-start-radius":k,"border-end-end-radius":k,margin:k,"margin-bottom":k,"margin-left":k,"margin-right":k,"margin-top":k,"margin-block":k,"margin-block-end":k,"margin-block-start":k,"margin-inline":k,"margin-inline-end":k,"margin-inline-start":k,padding:k,"padding-bottom":k,"padding-left":k,"padding-right":k,"padding-top":k,"padding-block":k,"padding-block-end":k,"padding-block-start":k,"padding-inline":k,"padding-inline-end":k,"padding-inline-start":k,"mask-position-x":k,"mask-position-y":k,"mask-size":k,height:k,width:k,"min-height":k,"max-height":k,"min-width":k,"max-width":k,bottom:k,left:k,top:k,right:k,inset:k,"inset-block":k,"inset-block-end":k,"inset-block-start":k,"inset-inline":k,"inset-inline-end":k,"inset-inline-start":k,"box-shadow":k,"text-shadow":k,"column-gap":k,"column-rule":k,"column-rule-width":k,"column-width":k,"font-size":k,"font-size-delta":k,"letter-spacing":k,"text-decoration-thickness":k,"text-indent":k,"text-stroke":k,"text-stroke-width":k,"word-spacing":k,motion:k,"motion-offset":k,outline:k,"outline-offset":k,"outline-width":k,perspective:k,"perspective-origin-x":Lo,"perspective-origin-y":Lo,"transform-origin":Lo,"transform-origin-x":Lo,"transform-origin-y":Lo,"transform-origin-z":Lo,"transition-delay":Wu,"transition-duration":Wu,"vertical-align":k,"flex-basis":k,"shape-margin":k,size:k,gap:k,grid:k,"grid-gap":k,"row-gap":k,"grid-row-gap":k,"grid-column-gap":k,"grid-template-rows":k,"grid-template-columns":k,"grid-auto-rows":k,"grid-auto-columns":k,"box-shadow-x":k,"box-shadow-y":k,"box-shadow-blur":k,"box-shadow-spread":k,"font-line-height":k,"text-shadow-x":k,"text-shadow-y":k,"text-shadow-blur":k};function wS(t){var e=/(-[a-z])/g,n=function(o){return o[1].toUpperCase()},r={};for(var i in t)r[i]=t[i],r[i.replace(e,n)]=t[i];return r}var BL=wS(TL);function $l(t,e,n){if(e==null)return e;if(Array.isArray(e))for(var r=0;r<e.length;r++)e[r]=$l(t,e[r],n);else if(typeof e=="object")if(t==="fallbacks")for(var i in e)e[i]=$l(i,e[i],n);else for(var s in e)e[s]=$l(t+"-"+s,e[s],n);else if(typeof e=="number"&&isNaN(e)===!1){var o=n[t]||BL[t];return o&&!(e===0&&o===k)?typeof o=="function"?o(e).toString():""+e+o:e.toString()}return e}function RL(t){t===void 0&&(t={});var e=wS(t);function n(i,s){if(s.type!=="style")return i;for(var o in i)i[o]=$l(o,i[o],e);return i}function r(i,s){return $l(s,i,e)}return{onProcessStyle:n,onChangeValue:r}}function I0(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function PL(t){if(Array.isArray(t))return I0(t)}function SS(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function zv(t,e){if(t){if(typeof t=="string")return I0(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return I0(t,e)}}function LL(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Qh(t){return PL(t)||SS(t)||zv(t)||LL()}var Ll="",w0="",bS="",TS="",ML=eu&&"ontouchstart"in document.documentElement;if(eu){var lA={Moz:"-moz-",ms:"-ms-",O:"-o-",Webkit:"-webkit-"},NL=document.createElement("p"),cA=NL.style,OL="Transform";for(var uA in lA)if(uA+OL in cA){Ll=uA,w0=lA[uA];break}Ll==="Webkit"&&"msHyphens"in cA&&(Ll="ms",w0=lA.ms,TS="edge"),Ll==="Webkit"&&"-apple-trailing-word"in cA&&(bS="apple")}var _e={js:Ll,css:w0,vendor:bS,browser:TS,isTouch:ML};function DL(t){return t[1]==="-"||_e.js==="ms"?t:"@"+_e.css+"keyframes"+t.substr(10)}var kL={noPrefill:["appearance"],supportedProperty:function(e){return e!=="appearance"?!1:_e.js==="ms"?"-webkit-"+e:_e.css+e}},QL={noPrefill:["color-adjust"],supportedProperty:function(e){return e!=="color-adjust"?!1:_e.js==="Webkit"?_e.css+"print-"+e:e}},FL=/[-\s]+(.)?/g;function UL(t,e){return e?e.toUpperCase():""}function Vv(t){return t.replace(FL,UL)}function gs(t){return Vv("-"+t)}var GL={noPrefill:["mask"],supportedProperty:function(e,n){if(!/^mask/.test(e))return!1;if(_e.js==="Webkit"){var r="mask-image";if(Vv(r)in n)return e;if(_e.js+gs(r)in n)return _e.css+e}return e}},zL={noPrefill:["text-orientation"],supportedProperty:function(e){return e!=="text-orientation"?!1:_e.vendor==="apple"&&!_e.isTouch?_e.css+e:e}},VL={noPrefill:["transform"],supportedProperty:function(e,n,r){return e!=="transform"?!1:r.transform?e:_e.css+e}},jL={noPrefill:["transition"],supportedProperty:function(e,n,r){return e!=="transition"?!1:r.transition?e:_e.css+e}},HL={noPrefill:["writing-mode"],supportedProperty:function(e){return e!=="writing-mode"?!1:_e.js==="Webkit"||_e.js==="ms"&&_e.browser!=="edge"?_e.css+e:e}},WL={noPrefill:["user-select"],supportedProperty:function(e){return e!=="user-select"?!1:_e.js==="Moz"||_e.js==="ms"||_e.vendor==="apple"?_e.css+e:e}},YL={supportedProperty:function(e,n){if(!/^break-/.test(e))return!1;if(_e.js==="Webkit"){var r="WebkitColumn"+gs(e);return r in n?_e.css+"column-"+e:!1}if(_e.js==="Moz"){var i="page"+gs(e);return i in n?"page-"+e:!1}return!1}},$L={supportedProperty:function(e,n){if(!/^(border|margin|padding)-inline/.test(e))return!1;if(_e.js==="Moz")return e;var r=e.replace("-inline","");return _e.js+gs(r)in n?_e.css+r:!1}},KL={supportedProperty:function(e,n){return Vv(e)in n?e:!1}},qL={supportedProperty:function(e,n){var r=gs(e);return e[0]==="-"||e[0]==="-"&&e[1]==="-"?e:_e.js+r in n?_e.css+e:_e.js!=="Webkit"&&"Webkit"+r in n?"-webkit-"+e:!1}},XL={supportedProperty:function(e){return e.substring(0,11)!=="scroll-snap"?!1:_e.js==="ms"?""+_e.css+e:e}},ZL={supportedProperty:function(e){return e!=="overscroll-behavior"?!1:_e.js==="ms"?_e.css+"scroll-chaining":e}},JL={"flex-grow":"flex-positive","flex-shrink":"flex-negative","flex-basis":"flex-preferred-size","justify-content":"flex-pack",order:"flex-order","align-items":"flex-align","align-content":"flex-line-pack"},eM={supportedProperty:function(e,n){var r=JL[e];return r&&_e.js+gs(r)in n?_e.css+r:!1}},BS={flex:"box-flex","flex-grow":"box-flex","flex-direction":["box-orient","box-direction"],order:"box-ordinal-group","align-items":"box-align","flex-flow":["box-orient","box-direction"],"justify-content":"box-pack"},tM=Object.keys(BS),nM=function(e){return _e.css+e},rM={supportedProperty:function(e,n,r){var i=r.multiple;if(tM.indexOf(e)>-1){var s=BS[e];if(!Array.isArray(s))return _e.js+gs(s)in n?_e.css+s:!1;if(!i)return!1;for(var o=0;o<s.length;o++)if(!(_e.js+gs(s[0])in n))return!1;return s.map(nM)}return!1}},RS=[kL,QL,GL,zL,VL,jL,HL,WL,YL,$L,KL,qL,XL,ZL,eM,rM],r_=RS.filter(function(t){return t.supportedProperty}).map(function(t){return t.supportedProperty}),iM=RS.filter(function(t){return t.noPrefill}).reduce(function(t,e){return t.push.apply(t,Qh(e.noPrefill)),t},[]),Ml,Gs={};if(eu){Ml=document.createElement("p");var fA=window.getComputedStyle(document.documentElement,"");for(var dA in fA)isNaN(dA)||(Gs[fA[dA]]=fA[dA]);iM.forEach(function(t){return delete Gs[t]})}function S0(t,e){if(e===void 0&&(e={}),!Ml)return t;if(Gs[t]!=null)return Gs[t];(t==="transition"||t==="transform")&&(e[t]=t in Ml.style);for(var n=0;n<r_.length&&(Gs[t]=r_[n](t,Ml.style,e),!Gs[t]);n++);try{Ml.style[t]=""}catch{return!1}return Gs[t]}var Mo={},sM={transition:1,"transition-property":1,"-webkit-transition":1,"-webkit-transition-property":1},oM=/(^\s*[\w-]+)|, (\s*[\w-]+)(?![^()]*\))/g,Vi;function aM(t,e,n){if(e==="var")return"var";if(e==="all")return"all";if(n==="all")return", all";var r=e?S0(e):", "+S0(n);return r||e||n}eu&&(Vi=document.createElement("p"));function i_(t,e){var n=e;if(!Vi||t==="content")return e;if(typeof n!="string"||!isNaN(parseInt(n,10)))return n;var r=t+n;if(Mo[r]!=null)return Mo[r];try{Vi.style[t]=n}catch{return Mo[r]=!1,!1}if(sM[t])n=n.replace(oM,aM);else if(Vi.style[t]===""&&(n=_e.css+n,n==="-ms-flex"&&(Vi.style[t]="-ms-flexbox"),Vi.style[t]=n,Vi.style[t]===""))return Mo[r]=!1,!1;return Vi.style[t]="",Mo[r]=n,Mo[r]}function lM(){function t(i){if(i.type==="keyframes"){var s=i;s.at=DL(s.at)}}function e(i){for(var s in i){var o=i[s];if(s==="fallbacks"&&Array.isArray(o)){i[s]=o.map(e);continue}var a=!1,l=S0(s);l&&l!==s&&(a=!0);var c=!1,u=i_(l,Js(o));u&&u!==o&&(c=!0),(a||c)&&(a&&delete i[s],i[l||s]=u||o)}return i}function n(i,s){return s.type!=="style"?i:e(i)}function r(i,s){return i_(s,Js(i))||i}return{onProcessRule:t,onProcessStyle:n,onChangeValue:r}}function cM(){var t=function(n,r){return n.length===r.length?n>r?1:-1:n.length-r.length};return{onProcessStyle:function(n,r){if(r.type!=="style")return n;for(var i={},s=Object.keys(n).sort(t),o=0;o<s.length;o++)i[s[o]]=n[s[o]];return i}}}function uM(){return{plugins:[gL(),EL(),CL(),bL(),RL(),typeof window>"u"?null:lM(),cM()]}}function Qe(t,e){if(t==null)return{};var n=Dh(t,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function PS(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e=t.baseClasses,n=t.newClasses;if(t.Component,!n)return e;var r=$({},e);return Object.keys(n).forEach(function(i){n[i]&&(r[i]="".concat(e[i]," ").concat(n[i]))}),r}var fM={set:function(e,n,r,i){var s=e.get(n);s||(s=new Map,e.set(n,s)),s.set(r,i)},get:function(e,n,r){var i=e.get(n);return i?i.get(r):void 0},delete:function(e,n,r){var i=e.get(n);i.delete(r)}};const sa=fM;var dM=qe.createContext(null);const LS=dM;function tu(){var t=qe.useContext(LS);return t}var hM=ES(uM()),gM=TP(),AM=new Map,pM={disableGeneration:!1,generateClassName:gM,jss:hM,sheetsCache:null,sheetsManager:AM,sheetsRegistry:null},mM=qe.createContext(pM),s_=-1e9;function vM(){return s_+=1,s_}var yM={};const EM=yM;function _M(t){var e=typeof t=="function";return{create:function(r,i){var s;try{s=e?t(r):t}catch(l){throw l}if(!i||!r.overrides||!r.overrides[i])return s;var o=r.overrides[i],a=$({},s);return Object.keys(o).forEach(function(l){a[l]=Pa(a[l],o[l])}),a},options:{}}}function xM(t,e,n){var r=t.state,i=t.stylesOptions;if(i.disableGeneration)return e||{};r.cacheClasses||(r.cacheClasses={value:null,lastProp:null,lastJSS:{}});var s=!1;return r.classes!==r.cacheClasses.lastJSS&&(r.cacheClasses.lastJSS=r.classes,s=!0),e!==r.cacheClasses.lastProp&&(r.cacheClasses.lastProp=e,s=!0),s&&(r.cacheClasses.value=PS({baseClasses:r.cacheClasses.lastJSS,newClasses:e,Component:n})),r.cacheClasses.value}function CM(t,e){var n=t.state,r=t.theme,i=t.stylesOptions,s=t.stylesCreator,o=t.name;if(!i.disableGeneration){var a=sa.get(i.sheetsManager,s,r);a||(a={refs:0,staticSheet:null,dynamicStyles:null},sa.set(i.sheetsManager,s,r,a));var l=$({},s.options,i,{theme:r,flip:typeof i.flip=="boolean"?i.flip:r.direction==="rtl"});l.generateId=l.serverGenerateClassName||l.generateClassName;var c=i.sheetsRegistry;if(a.refs===0){var u;i.sheetsCache&&(u=sa.get(i.sheetsCache,s,r));var f=s.create(r,o);u||(u=i.jss.createStyleSheet(f,$({link:!1},l)),u.attach(),i.sheetsCache&&sa.set(i.sheetsCache,s,r,u)),c&&c.add(u),a.staticSheet=u,a.dynamicStyles=_S(f)}if(a.dynamicStyles){var d=i.jss.createStyleSheet(a.dynamicStyles,$({link:!0},l));d.update(e),d.attach(),n.dynamicSheet=d,n.classes=PS({baseClasses:a.staticSheet.classes,newClasses:d.classes}),c&&c.add(d)}else n.classes=a.staticSheet.classes;a.refs+=1}}function IM(t,e){var n=t.state;n.dynamicSheet&&n.dynamicSheet.update(e)}function wM(t){var e=t.state,n=t.theme,r=t.stylesOptions,i=t.stylesCreator;if(!r.disableGeneration){var s=sa.get(r.sheetsManager,i,n);s.refs-=1;var o=r.sheetsRegistry;s.refs===0&&(sa.delete(r.sheetsManager,i,n),r.jss.removeStyleSheet(s.staticSheet),o&&o.remove(s.staticSheet)),e.dynamicSheet&&(r.jss.removeStyleSheet(e.dynamicSheet),o&&o.remove(e.dynamicSheet))}}function SM(t,e){var n=qe.useRef([]),r,i=qe.useMemo(function(){return{}},e);n.current!==i&&(n.current=i,r=t()),qe.useEffect(function(){return function(){r&&r()}},[i])}function jv(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=e.name,r=e.classNamePrefix,i=e.Component,s=e.defaultTheme,o=s===void 0?EM:s,a=Qe(e,["name","classNamePrefix","Component","defaultTheme"]),l=_M(t),c=n||r||"makeStyles";l.options={index:vM(),name:n,meta:c,classNamePrefix:c};var u=function(){var d=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},h=tu()||o,g=$({},qe.useContext(mM),a),A=qe.useRef(),E=qe.useRef();SM(function(){var m={name:n,state:{},stylesCreator:l,stylesOptions:g,theme:h};return CM(m,d),E.current=!1,A.current=m,function(){wM(m)}},[h,l]),qe.useEffect(function(){E.current&&IM(A.current,d),E.current=!0});var p=xM(A.current,d.classes,i);return p};return u}function bM(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function MS(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t))for(e=0;e<t.length;e++)t[e]&&(n=MS(t[e]))&&(r&&(r+=" "),r+=n);else for(e in t)t[e]&&(r&&(r+=" "),r+=e);return r}function ke(){for(var t,e,n=0,r="";n<arguments.length;)(t=arguments[n++])&&(e=MS(t))&&(r&&(r+=" "),r+=e);return r}var NS={exports:{}},Ge={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Mt=typeof Symbol=="function"&&Symbol.for,Hv=Mt?Symbol.for("react.element"):60103,Wv=Mt?Symbol.for("react.portal"):60106,Fh=Mt?Symbol.for("react.fragment"):60107,Uh=Mt?Symbol.for("react.strict_mode"):60108,Gh=Mt?Symbol.for("react.profiler"):60114,zh=Mt?Symbol.for("react.provider"):60109,Vh=Mt?Symbol.for("react.context"):60110,Yv=Mt?Symbol.for("react.async_mode"):60111,jh=Mt?Symbol.for("react.concurrent_mode"):60111,Hh=Mt?Symbol.for("react.forward_ref"):60112,Wh=Mt?Symbol.for("react.suspense"):60113,TM=Mt?Symbol.for("react.suspense_list"):60120,Yh=Mt?Symbol.for("react.memo"):60115,$h=Mt?Symbol.for("react.lazy"):60116,BM=Mt?Symbol.for("react.block"):60121,RM=Mt?Symbol.for("react.fundamental"):60117,PM=Mt?Symbol.for("react.responder"):60118,LM=Mt?Symbol.for("react.scope"):60119;function Qn(t){if(typeof t=="object"&&t!==null){var e=t.$$typeof;switch(e){case Hv:switch(t=t.type,t){case Yv:case jh:case Fh:case Gh:case Uh:case Wh:return t;default:switch(t=t&&t.$$typeof,t){case Vh:case Hh:case $h:case Yh:case zh:return t;default:return e}}case Wv:return e}}}function OS(t){return Qn(t)===jh}Ge.AsyncMode=Yv;Ge.ConcurrentMode=jh;Ge.ContextConsumer=Vh;Ge.ContextProvider=zh;Ge.Element=Hv;Ge.ForwardRef=Hh;Ge.Fragment=Fh;Ge.Lazy=$h;Ge.Memo=Yh;Ge.Portal=Wv;Ge.Profiler=Gh;Ge.StrictMode=Uh;Ge.Suspense=Wh;Ge.isAsyncMode=function(t){return OS(t)||Qn(t)===Yv};Ge.isConcurrentMode=OS;Ge.isContextConsumer=function(t){return Qn(t)===Vh};Ge.isContextProvider=function(t){return Qn(t)===zh};Ge.isElement=function(t){return typeof t=="object"&&t!==null&&t.$$typeof===Hv};Ge.isForwardRef=function(t){return Qn(t)===Hh};Ge.isFragment=function(t){return Qn(t)===Fh};Ge.isLazy=function(t){return Qn(t)===$h};Ge.isMemo=function(t){return Qn(t)===Yh};Ge.isPortal=function(t){return Qn(t)===Wv};Ge.isProfiler=function(t){return Qn(t)===Gh};Ge.isStrictMode=function(t){return Qn(t)===Uh};Ge.isSuspense=function(t){return Qn(t)===Wh};Ge.isValidElementType=function(t){return typeof t=="string"||typeof t=="function"||t===Fh||t===jh||t===Gh||t===Uh||t===Wh||t===TM||typeof t=="object"&&t!==null&&(t.$$typeof===$h||t.$$typeof===Yh||t.$$typeof===zh||t.$$typeof===Vh||t.$$typeof===Hh||t.$$typeof===RM||t.$$typeof===PM||t.$$typeof===LM||t.$$typeof===BM)};Ge.typeOf=Qn;NS.exports=Ge;var MM=NS.exports,$v=MM,NM={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},OM={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},DM={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},DS={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},Kv={};Kv[$v.ForwardRef]=DM;Kv[$v.Memo]=DS;function o_(t){return $v.isMemo(t)?DS:Kv[t.$$typeof]||NM}var kM=Object.defineProperty,QM=Object.getOwnPropertyNames,a_=Object.getOwnPropertySymbols,FM=Object.getOwnPropertyDescriptor,UM=Object.getPrototypeOf,l_=Object.prototype;function kS(t,e,n){if(typeof e!="string"){if(l_){var r=UM(e);r&&r!==l_&&kS(t,r,n)}var i=QM(e);a_&&(i=i.concat(a_(e)));for(var s=o_(t),o=o_(e),a=0;a<i.length;++a){var l=i[a];if(!OM[l]&&!(n&&n[l])&&!(o&&o[l])&&!(s&&s[l])){var c=FM(e,l);try{kM(t,l,c)}catch{}}}}return t}var GM=kS;const zM=Fc(GM);function VM(t,e){if(typeof e=="function"){var n=e(t);return n}return $({},t,e)}function jM(t){var e=t.children,n=t.theme,r=tu(),i=qe.useMemo(function(){var s=r===null?n:VM(r,n);return s!=null&&(s[gS]=r!==null),s},[n,r]);return qe.createElement(LS.Provider,{value:i},e)}var HM=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return function(r){var i=n.defaultTheme,s=n.withTheme,o=s===void 0?!1:s,a=n.name,l=Qe(n,["defaultTheme","withTheme","name"]),c=a,u=jv(e,$({defaultTheme:i,Component:r,name:a||r.displayName,classNamePrefix:c},l)),f=qe.forwardRef(function(h,g){h.classes;var A=h.innerRef,E=Qe(h,["classes","innerRef"]),p=u($({},r.defaultProps,h)),m,y=E;return(typeof a=="string"||o)&&(m=tu()||i,a&&(y=AS({theme:m,name:a,props:E})),o&&!y.theme&&(y.theme=m)),qe.createElement(r,$({ref:A||g,classes:p},y))});return zM(f,r),f}};const Ss=HM;var WM={black:"#000",white:"#fff"};const Pd=WM;var YM={50:"#ffebee",100:"#ffcdd2",200:"#ef9a9a",300:"#e57373",400:"#ef5350",500:"#f44336",600:"#e53935",700:"#d32f2f",800:"#c62828",900:"#b71c1c",A100:"#ff8a80",A200:"#ff5252",A400:"#ff1744",A700:"#d50000"};const hA=YM;var $M={50:"#fce4ec",100:"#f8bbd0",200:"#f48fb1",300:"#f06292",400:"#ec407a",500:"#e91e63",600:"#d81b60",700:"#c2185b",800:"#ad1457",900:"#880e4f",A100:"#ff80ab",A200:"#ff4081",A400:"#f50057",A700:"#c51162"};const gA=$M;var KM={50:"#e8eaf6",100:"#c5cae9",200:"#9fa8da",300:"#7986cb",400:"#5c6bc0",500:"#3f51b5",600:"#3949ab",700:"#303f9f",800:"#283593",900:"#1a237e",A100:"#8c9eff",A200:"#536dfe",A400:"#3d5afe",A700:"#304ffe"};const AA=KM;var qM={50:"#e3f2fd",100:"#bbdefb",200:"#90caf9",300:"#64b5f6",400:"#42a5f5",500:"#2196f3",600:"#1e88e5",700:"#1976d2",800:"#1565c0",900:"#0d47a1",A100:"#82b1ff",A200:"#448aff",A400:"#2979ff",A700:"#2962ff"};const pA=qM;var XM={50:"#e8f5e9",100:"#c8e6c9",200:"#a5d6a7",300:"#81c784",400:"#66bb6a",500:"#4caf50",600:"#43a047",700:"#388e3c",800:"#2e7d32",900:"#1b5e20",A100:"#b9f6ca",A200:"#69f0ae",A400:"#00e676",A700:"#00c853"};const mA=XM;var ZM={50:"#fff3e0",100:"#ffe0b2",200:"#ffcc80",300:"#ffb74d",400:"#ffa726",500:"#ff9800",600:"#fb8c00",700:"#f57c00",800:"#ef6c00",900:"#e65100",A100:"#ffd180",A200:"#ffab40",A400:"#ff9100",A700:"#ff6d00"};const vA=ZM;var JM={50:"#fafafa",100:"#f5f5f5",200:"#eeeeee",300:"#e0e0e0",400:"#bdbdbd",500:"#9e9e9e",600:"#757575",700:"#616161",800:"#424242",900:"#212121",A100:"#d5d5d5",A200:"#aaaaaa",A400:"#303030",A700:"#616161"};const qv=JM;function Xv(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1;return Math.min(Math.max(e,t),n)}function eN(t){t=t.substr(1);var e=new RegExp(".{1,".concat(t.length>=6?2:1,"}"),"g"),n=t.match(e);return n&&n[0].length===1&&(n=n.map(function(r){return r+r})),n?"rgb".concat(n.length===4?"a":"","(").concat(n.map(function(r,i){return i<3?parseInt(r,16):Math.round(parseInt(r,16)/255*1e3)/1e3}).join(", "),")"):""}function tN(t){t=ao(t);var e=t,n=e.values,r=n[0],i=n[1]/100,s=n[2]/100,o=i*Math.min(s,1-s),a=function(f){var d=arguments.length>1&&arguments[1]!==void 0?arguments[1]:(f+r/30)%12;return s-o*Math.max(Math.min(d-3,9-d,1),-1)},l="rgb",c=[Math.round(a(0)*255),Math.round(a(8)*255),Math.round(a(4)*255)];return t.type==="hsla"&&(l+="a",c.push(n[3])),Kh({type:l,values:c})}function ao(t){if(t.type)return t;if(t.charAt(0)==="#")return ao(eN(t));var e=t.indexOf("("),n=t.substring(0,e);if(["rgb","rgba","hsl","hsla"].indexOf(n)===-1)throw new Error(Cc(3,t));var r=t.substring(e+1,t.length-1).split(",");return r=r.map(function(i){return parseFloat(i)}),{type:n,values:r}}function Kh(t){var e=t.type,n=t.values;return e.indexOf("rgb")!==-1?n=n.map(function(r,i){return i<3?parseInt(r,10):r}):e.indexOf("hsl")!==-1&&(n[1]="".concat(n[1],"%"),n[2]="".concat(n[2],"%")),"".concat(e,"(").concat(n.join(", "),")")}function nN(t,e){var n=c_(t),r=c_(e);return(Math.max(n,r)+.05)/(Math.min(n,r)+.05)}function c_(t){t=ao(t);var e=t.type==="hsl"?ao(tN(t)).values:t.values;return e=e.map(function(n){return n/=255,n<=.03928?n/12.92:Math.pow((n+.055)/1.055,2.4)}),Number((.2126*e[0]+.7152*e[1]+.0722*e[2]).toFixed(3))}function qi(t,e){return t=ao(t),e=Xv(e),(t.type==="rgb"||t.type==="hsl")&&(t.type+="a"),t.values[3]=e,Kh(t)}function QS(t,e){if(t=ao(t),e=Xv(e),t.type.indexOf("hsl")!==-1)t.values[2]*=1-e;else if(t.type.indexOf("rgb")!==-1)for(var n=0;n<3;n+=1)t.values[n]*=1-e;return Kh(t)}function FS(t,e){if(t=ao(t),e=Xv(e),t.type.indexOf("hsl")!==-1)t.values[2]+=(100-t.values[2])*e;else if(t.type.indexOf("rgb")!==-1)for(var n=0;n<3;n+=1)t.values[n]+=(255-t.values[n])*e;return Kh(t)}var Di=["xs","sm","md","lg","xl"];function rN(t){var e=t.values,n=e===void 0?{xs:0,sm:600,md:960,lg:1280,xl:1920}:e,r=t.unit,i=r===void 0?"px":r,s=t.step,o=s===void 0?5:s,a=Qe(t,["values","unit","step"]);function l(h){var g=typeof n[h]=="number"?n[h]:h;return"@media (min-width:".concat(g).concat(i,")")}function c(h){var g=Di.indexOf(h)+1,A=n[Di[g]];if(g===Di.length)return l("xs");var E=typeof A=="number"&&g>0?A:h;return"@media (max-width:".concat(E-o/100).concat(i,")")}function u(h,g){var A=Di.indexOf(g);return A===Di.length-1?l(h):"@media (min-width:".concat(typeof n[h]=="number"?n[h]:h).concat(i,") and ")+"(max-width:".concat((A!==-1&&typeof n[Di[A+1]]=="number"?n[Di[A+1]]:g)-o/100).concat(i,")")}function f(h){return u(h,h)}function d(h){return n[h]}return $({keys:Di,values:n,up:l,down:c,between:u,only:f,width:d},a)}function iN(t,e,n){var r;return $({gutters:function(){var s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return console.warn(["Material-UI: theme.mixins.gutters() is deprecated.","You can use the source of the mixin directly:",`
      paddingLeft: theme.spacing(2),
      paddingRight: theme.spacing(2),
      [theme.breakpoints.up('sm')]: {
        paddingLeft: theme.spacing(3),
        paddingRight: theme.spacing(3),
      },
      `].join(`
`)),$({paddingLeft:e(2),paddingRight:e(2)},s,v({},t.up("sm"),$({paddingLeft:e(3),paddingRight:e(3)},s[t.up("sm")])))},toolbar:(r={minHeight:56},v(r,"".concat(t.up("xs")," and (orientation: landscape)"),{minHeight:48}),v(r,t.up("sm"),{minHeight:64}),r)},n)}var u_={text:{primary:"rgba(0, 0, 0, 0.87)",secondary:"rgba(0, 0, 0, 0.54)",disabled:"rgba(0, 0, 0, 0.38)",hint:"rgba(0, 0, 0, 0.38)"},divider:"rgba(0, 0, 0, 0.12)",background:{paper:Pd.white,default:qv[50]},action:{active:"rgba(0, 0, 0, 0.54)",hover:"rgba(0, 0, 0, 0.04)",hoverOpacity:.04,selected:"rgba(0, 0, 0, 0.08)",selectedOpacity:.08,disabled:"rgba(0, 0, 0, 0.26)",disabledBackground:"rgba(0, 0, 0, 0.12)",disabledOpacity:.38,focus:"rgba(0, 0, 0, 0.12)",focusOpacity:.12,activatedOpacity:.12}},yA={text:{primary:Pd.white,secondary:"rgba(255, 255, 255, 0.7)",disabled:"rgba(255, 255, 255, 0.5)",hint:"rgba(255, 255, 255, 0.5)",icon:"rgba(255, 255, 255, 0.5)"},divider:"rgba(255, 255, 255, 0.12)",background:{paper:qv[800],default:"#303030"},action:{active:Pd.white,hover:"rgba(255, 255, 255, 0.08)",hoverOpacity:.08,selected:"rgba(255, 255, 255, 0.16)",selectedOpacity:.16,disabled:"rgba(255, 255, 255, 0.3)",disabledBackground:"rgba(255, 255, 255, 0.12)",disabledOpacity:.38,focus:"rgba(255, 255, 255, 0.12)",focusOpacity:.12,activatedOpacity:.24}};function f_(t,e,n,r){var i=r.light||r,s=r.dark||r*1.5;t[e]||(t.hasOwnProperty(n)?t[e]=t[n]:e==="light"?t.light=FS(t.main,i):e==="dark"&&(t.dark=QS(t.main,s)))}function sN(t){var e=t.primary,n=e===void 0?{light:AA[300],main:AA[500],dark:AA[700]}:e,r=t.secondary,i=r===void 0?{light:gA.A200,main:gA.A400,dark:gA.A700}:r,s=t.error,o=s===void 0?{light:hA[300],main:hA[500],dark:hA[700]}:s,a=t.warning,l=a===void 0?{light:vA[300],main:vA[500],dark:vA[700]}:a,c=t.info,u=c===void 0?{light:pA[300],main:pA[500],dark:pA[700]}:c,f=t.success,d=f===void 0?{light:mA[300],main:mA[500],dark:mA[700]}:f,h=t.type,g=h===void 0?"light":h,A=t.contrastThreshold,E=A===void 0?3:A,p=t.tonalOffset,m=p===void 0?.2:p,y=Qe(t,["primary","secondary","error","warning","info","success","type","contrastThreshold","tonalOffset"]);function _(B){var R=nN(B,yA.text.primary)>=E?yA.text.primary:u_.text.primary;return R}var I=function(R){var M=arguments.length>1&&arguments[1]!==void 0?arguments[1]:500,U=arguments.length>2&&arguments[2]!==void 0?arguments[2]:300,G=arguments.length>3&&arguments[3]!==void 0?arguments[3]:700;if(R=$({},R),!R.main&&R[M]&&(R.main=R[M]),!R.main)throw new Error(Cc(4,M));if(typeof R.main!="string")throw new Error(Cc(5,JSON.stringify(R.main)));return f_(R,"light",U,m),f_(R,"dark",G,m),R.contrastText||(R.contrastText=_(R.main)),R},C={dark:yA,light:u_},b=Pa($({common:Pd,type:g,primary:I(n),secondary:I(i,"A400","A200","A700"),error:I(o),warning:I(l),info:I(u),success:I(d),grey:qv,contrastThreshold:E,getContrastText:_,augmentColor:I,tonalOffset:m},C[g]),y);return b}function US(t){return Math.round(t*1e5)/1e5}function oN(t){return US(t)}var d_={textTransform:"uppercase"},h_='"Roboto", "Helvetica", "Arial", sans-serif';function aN(t,e){var n=typeof e=="function"?e(t):e,r=n.fontFamily,i=r===void 0?h_:r,s=n.fontSize,o=s===void 0?14:s,a=n.fontWeightLight,l=a===void 0?300:a,c=n.fontWeightRegular,u=c===void 0?400:c,f=n.fontWeightMedium,d=f===void 0?500:f,h=n.fontWeightBold,g=h===void 0?700:h,A=n.htmlFontSize,E=A===void 0?16:A,p=n.allVariants,m=n.pxToRem,y=Qe(n,["fontFamily","fontSize","fontWeightLight","fontWeightRegular","fontWeightMedium","fontWeightBold","htmlFontSize","allVariants","pxToRem"]),_=o/14,I=m||function(B){return"".concat(B/E*_,"rem")},C=function(R,M,U,G,Y){return $({fontFamily:i,fontWeight:R,fontSize:I(M),lineHeight:U},i===h_?{letterSpacing:"".concat(US(G/M),"em")}:{},Y,p)},b={h1:C(l,96,1.167,-1.5),h2:C(l,60,1.2,-.5),h3:C(u,48,1.167,0),h4:C(u,34,1.235,.25),h5:C(u,24,1.334,0),h6:C(d,20,1.6,.15),subtitle1:C(u,16,1.75,.15),subtitle2:C(d,14,1.57,.1),body1:C(u,16,1.5,.15),body2:C(u,14,1.43,.15),button:C(d,14,1.75,.4,d_),caption:C(u,12,1.66,.4),overline:C(u,12,2.66,1,d_)};return Pa($({htmlFontSize:E,pxToRem:I,round:oN,fontFamily:i,fontSize:o,fontWeightLight:l,fontWeightRegular:u,fontWeightMedium:d,fontWeightBold:g},b),y,{clone:!1})}var lN=.2,cN=.14,uN=.12;function st(){return["".concat(arguments.length<=0?void 0:arguments[0],"px ").concat(arguments.length<=1?void 0:arguments[1],"px ").concat(arguments.length<=2?void 0:arguments[2],"px ").concat(arguments.length<=3?void 0:arguments[3],"px rgba(0,0,0,").concat(lN,")"),"".concat(arguments.length<=4?void 0:arguments[4],"px ").concat(arguments.length<=5?void 0:arguments[5],"px ").concat(arguments.length<=6?void 0:arguments[6],"px ").concat(arguments.length<=7?void 0:arguments[7],"px rgba(0,0,0,").concat(cN,")"),"".concat(arguments.length<=8?void 0:arguments[8],"px ").concat(arguments.length<=9?void 0:arguments[9],"px ").concat(arguments.length<=10?void 0:arguments[10],"px ").concat(arguments.length<=11?void 0:arguments[11],"px rgba(0,0,0,").concat(uN,")")].join(",")}var fN=["none",st(0,2,1,-1,0,1,1,0,0,1,3,0),st(0,3,1,-2,0,2,2,0,0,1,5,0),st(0,3,3,-2,0,3,4,0,0,1,8,0),st(0,2,4,-1,0,4,5,0,0,1,10,0),st(0,3,5,-1,0,5,8,0,0,1,14,0),st(0,3,5,-1,0,6,10,0,0,1,18,0),st(0,4,5,-2,0,7,10,1,0,2,16,1),st(0,5,5,-3,0,8,10,1,0,3,14,2),st(0,5,6,-3,0,9,12,1,0,3,16,2),st(0,6,6,-3,0,10,14,1,0,4,18,3),st(0,6,7,-4,0,11,15,1,0,4,20,3),st(0,7,8,-4,0,12,17,2,0,5,22,4),st(0,7,8,-4,0,13,19,2,0,5,24,4),st(0,7,9,-4,0,14,21,2,0,5,26,4),st(0,8,9,-5,0,15,22,2,0,6,28,5),st(0,8,10,-5,0,16,24,2,0,6,30,5),st(0,8,11,-5,0,17,26,2,0,6,32,5),st(0,9,11,-5,0,18,28,2,0,7,34,6),st(0,9,12,-6,0,19,29,2,0,7,36,6),st(0,10,13,-6,0,20,31,3,0,8,38,7),st(0,10,13,-6,0,21,33,3,0,8,40,7),st(0,10,14,-6,0,22,35,3,0,8,42,7),st(0,11,14,-7,0,23,36,3,0,9,44,8),st(0,11,15,-7,0,24,38,3,0,9,46,8)];const dN=fN;var hN={borderRadius:4};const gN=hN;function GS(t){if(Array.isArray(t))return t}function AN(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,s,o,a=[],l=!0,c=!1;try{if(s=(n=n.call(t)).next,e===0){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=s.call(n)).done)&&(a.push(r.value),a.length!==e);l=!0);}catch(u){c=!0,i=u}finally{try{if(!l&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(c)throw i}}return a}}function zS(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function qh(t,e){return GS(t)||AN(t,e)||zv(t,e)||zS()}function pN(t){var e=t.spacing||8;return typeof e=="number"?function(n){return e*n}:Array.isArray(e)?function(n){return e[n]}:typeof e=="function"?e:function(){}}function mN(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:8;if(t.mui)return t;var e=pN({spacing:t}),n=function(){for(var i=arguments.length,s=new Array(i),o=0;o<i;o++)s[o]=arguments[o];return s.length===0?e(1):s.length===1?e(s[0]):s.map(function(a){if(typeof a=="string")return a;var l=e(a);return typeof l=="number"?"".concat(l,"px"):l}).join(" ")};return Object.defineProperty(n,"unit",{get:function(){return t}}),n.mui=!0,n}var g_={easeInOut:"cubic-bezier(0.4, 0, 0.2, 1)",easeOut:"cubic-bezier(0.0, 0, 0.2, 1)",easeIn:"cubic-bezier(0.4, 0, 1, 1)",sharp:"cubic-bezier(0.4, 0, 0.6, 1)"},b0={shortest:150,shorter:200,short:250,standard:300,complex:375,enteringScreen:225,leavingScreen:195};function A_(t){return"".concat(Math.round(t),"ms")}const vN={easing:g_,duration:b0,create:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:["all"],n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=n.duration,i=r===void 0?b0.standard:r,s=n.easing,o=s===void 0?g_.easeInOut:s,a=n.delay,l=a===void 0?0:a;return Qe(n,["duration","easing","delay"]),(Array.isArray(e)?e:[e]).map(function(c){return"".concat(c," ").concat(typeof i=="string"?i:A_(i)," ").concat(o," ").concat(typeof l=="string"?l:A_(l))}).join(",")},getAutoHeightDuration:function(e){if(!e)return 0;var n=e/36;return Math.round((4+15*Math.pow(n,.25)+n/5)*10)}};var yN={mobileStepper:1e3,speedDial:1050,appBar:1100,drawer:1200,modal:1300,snackbar:1400,tooltip:1500};const VS=yN;function jS(){for(var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e=t.breakpoints,n=e===void 0?{}:e,r=t.mixins,i=r===void 0?{}:r,s=t.palette,o=s===void 0?{}:s,a=t.spacing,l=t.typography,c=l===void 0?{}:l,u=Qe(t,["breakpoints","mixins","palette","spacing","typography"]),f=sN(o),d=rN(n),h=mN(a),g=Pa({breakpoints:d,direction:"ltr",mixins:iN(d,h,i),overrides:{},palette:f,props:{},shadows:dN,typography:aN(f,c),spacing:h,shape:gN,transitions:vN,zIndex:VS},u),A=arguments.length,E=new Array(A>1?A-1:0),p=1;p<A;p++)E[p-1]=arguments[p];return g=E.reduce(function(m,y){return Pa(m,y)},g),g}var EN=jS();const HS=EN;function Zv(){var t=tu()||HS;return t}function Nt(t,e){return Ss(t,$({defaultTheme:HS},e))}function Er(t){if(typeof t!="string")throw new Error(Cc(7));return t.charAt(0).toUpperCase()+t.slice(1)}function T0(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return e.reduce(function(r,i){return i==null?r:function(){for(var o=arguments.length,a=new Array(o),l=0;l<o;l++)a[l]=arguments[l];r.apply(this,a),i.apply(this,a)}},function(){})}var _N=function(e){return{root:{userSelect:"none",width:"1em",height:"1em",display:"inline-block",fill:"currentColor",flexShrink:0,fontSize:e.typography.pxToRem(24),transition:e.transitions.create("fill",{duration:e.transitions.duration.shorter})},colorPrimary:{color:e.palette.primary.main},colorSecondary:{color:e.palette.secondary.main},colorAction:{color:e.palette.action.active},colorError:{color:e.palette.error.main},colorDisabled:{color:e.palette.action.disabled},fontSizeInherit:{fontSize:"inherit"},fontSizeSmall:{fontSize:e.typography.pxToRem(20)},fontSizeLarge:{fontSize:e.typography.pxToRem(35)}}},WS=S.forwardRef(function(e,n){var r=e.children,i=e.classes,s=e.className,o=e.color,a=o===void 0?"inherit":o,l=e.component,c=l===void 0?"svg":l,u=e.fontSize,f=u===void 0?"medium":u,d=e.htmlColor,h=e.titleAccess,g=e.viewBox,A=g===void 0?"0 0 24 24":g,E=Qe(e,["children","classes","className","color","component","fontSize","htmlColor","titleAccess","viewBox"]);return S.createElement(c,$({className:ke(i.root,s,a!=="inherit"&&i["color".concat(Er(a))],f!=="default"&&f!=="medium"&&i["fontSize".concat(Er(f))]),focusable:"false",viewBox:A,color:d,"aria-hidden":h?void 0:!0,role:h?"img":void 0,ref:n},E),r,h?S.createElement("title",null,h):null)});WS.muiName="SvgIcon";const p_=Nt(_N,{name:"MuiSvgIcon"})(WS);function Si(t,e){var n=function(i,s){return qe.createElement(p_,$({ref:s},i),t)};return n.muiName=p_.muiName,qe.memo(qe.forwardRef(n))}function YS(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:166,n;function r(){for(var i=arguments.length,s=new Array(i),o=0;o<i;o++)s[o]=arguments[o];var a=this,l=function(){t.apply(a,s)};clearTimeout(n),n=setTimeout(l,e)}return r.clear=function(){clearTimeout(n)},r}function dr(t){return t&&t.ownerDocument||document}function $S(t){var e=dr(t);return e.defaultView||window}function Ld(t,e){typeof t=="function"?t(e):t&&(t.current=e)}function KS(t){var e=t.controlled,n=t.default;t.name,t.state;var r=S.useRef(e!==void 0),i=r.current,s=S.useState(n),o=s[0],a=s[1],l=i?e:o,c=S.useCallback(function(u){i||a(u)},[]);return[l,c]}var xN=typeof window<"u"?S.useLayoutEffect:S.useEffect;function $t(t){var e=S.useRef(t);return xN(function(){e.current=t}),S.useCallback(function(){return e.current.apply(void 0,arguments)},[])}function cn(t,e){return S.useMemo(function(){return t==null&&e==null?null:function(n){Ld(t,n),Ld(e,n)}},[t,e])}var Xh=!0,B0=!1,m_=null,CN={text:!0,search:!0,url:!0,tel:!0,email:!0,password:!0,number:!0,date:!0,month:!0,week:!0,time:!0,datetime:!0,"datetime-local":!0};function IN(t){var e=t.type,n=t.tagName;return!!(n==="INPUT"&&CN[e]&&!t.readOnly||n==="TEXTAREA"&&!t.readOnly||t.isContentEditable)}function wN(t){t.metaKey||t.altKey||t.ctrlKey||(Xh=!0)}function EA(){Xh=!1}function SN(){this.visibilityState==="hidden"&&B0&&(Xh=!0)}function bN(t){t.addEventListener("keydown",wN,!0),t.addEventListener("mousedown",EA,!0),t.addEventListener("pointerdown",EA,!0),t.addEventListener("touchstart",EA,!0),t.addEventListener("visibilitychange",SN,!0)}function TN(t){var e=t.target;try{return e.matches(":focus-visible")}catch{}return Xh||IN(e)}function BN(){B0=!0,window.clearTimeout(m_),m_=window.setTimeout(function(){B0=!1},100)}function qS(){var t=S.useCallback(function(e){var n=wi.findDOMNode(e);n!=null&&bN(n.ownerDocument)},[]);return{isFocusVisible:TN,onBlurVisible:BN,ref:t}}function RN(t){return GS(t)||SS(t)||zv(t)||zS()}const v_={disabled:!1},Md=qe.createContext(null);var PN=function(e){return e.scrollTop},Nl="unmounted",Qs="exited",Fs="entering",Vo="entered",R0="exiting",bi=function(t){Oh(e,t);function e(r,i){var s;s=t.call(this,r,i)||this;var o=i,a=o&&!o.isMounting?r.enter:r.appear,l;return s.appearStatus=null,r.in?a?(l=Qs,s.appearStatus=Fs):l=Vo:r.unmountOnExit||r.mountOnEnter?l=Nl:l=Qs,s.state={status:l},s.nextCallback=null,s}e.getDerivedStateFromProps=function(i,s){var o=i.in;return o&&s.status===Nl?{status:Qs}:null};var n=e.prototype;return n.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},n.componentDidUpdate=function(i){var s=null;if(i!==this.props){var o=this.state.status;this.props.in?o!==Fs&&o!==Vo&&(s=Fs):(o===Fs||o===Vo)&&(s=R0)}this.updateStatus(!1,s)},n.componentWillUnmount=function(){this.cancelNextCallback()},n.getTimeouts=function(){var i=this.props.timeout,s,o,a;return s=o=a=i,i!=null&&typeof i!="number"&&(s=i.exit,o=i.enter,a=i.appear!==void 0?i.appear:o),{exit:s,enter:o,appear:a}},n.updateStatus=function(i,s){if(i===void 0&&(i=!1),s!==null)if(this.cancelNextCallback(),s===Fs){if(this.props.unmountOnExit||this.props.mountOnEnter){var o=this.props.nodeRef?this.props.nodeRef.current:Vu.findDOMNode(this);o&&PN(o)}this.performEnter(i)}else this.performExit();else this.props.unmountOnExit&&this.state.status===Qs&&this.setState({status:Nl})},n.performEnter=function(i){var s=this,o=this.props.enter,a=this.context?this.context.isMounting:i,l=this.props.nodeRef?[a]:[Vu.findDOMNode(this),a],c=l[0],u=l[1],f=this.getTimeouts(),d=a?f.appear:f.enter;if(!i&&!o||v_.disabled){this.safeSetState({status:Vo},function(){s.props.onEntered(c)});return}this.props.onEnter(c,u),this.safeSetState({status:Fs},function(){s.props.onEntering(c,u),s.onTransitionEnd(d,function(){s.safeSetState({status:Vo},function(){s.props.onEntered(c,u)})})})},n.performExit=function(){var i=this,s=this.props.exit,o=this.getTimeouts(),a=this.props.nodeRef?void 0:Vu.findDOMNode(this);if(!s||v_.disabled){this.safeSetState({status:Qs},function(){i.props.onExited(a)});return}this.props.onExit(a),this.safeSetState({status:R0},function(){i.props.onExiting(a),i.onTransitionEnd(o.exit,function(){i.safeSetState({status:Qs},function(){i.props.onExited(a)})})})},n.cancelNextCallback=function(){this.nextCallback!==null&&(this.nextCallback.cancel(),this.nextCallback=null)},n.safeSetState=function(i,s){s=this.setNextCallback(s),this.setState(i,s)},n.setNextCallback=function(i){var s=this,o=!0;return this.nextCallback=function(a){o&&(o=!1,s.nextCallback=null,i(a))},this.nextCallback.cancel=function(){o=!1},this.nextCallback},n.onTransitionEnd=function(i,s){this.setNextCallback(s);var o=this.props.nodeRef?this.props.nodeRef.current:Vu.findDOMNode(this),a=i==null&&!this.props.addEndListener;if(!o||a){setTimeout(this.nextCallback,0);return}if(this.props.addEndListener){var l=this.props.nodeRef?[this.nextCallback]:[o,this.nextCallback],c=l[0],u=l[1];this.props.addEndListener(c,u)}i!=null&&setTimeout(this.nextCallback,i)},n.render=function(){var i=this.state.status;if(i===Nl)return null;var s=this.props,o=s.children;s.in,s.mountOnEnter,s.unmountOnExit,s.appear,s.enter,s.exit,s.timeout,s.addEndListener,s.onEnter,s.onEntering,s.onEntered,s.onExit,s.onExiting,s.onExited,s.nodeRef;var a=Dh(s,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]);return qe.createElement(Md.Provider,{value:null},typeof o=="function"?o(i,a):qe.cloneElement(qe.Children.only(o),a))},e}(qe.Component);bi.contextType=Md;bi.propTypes={};function No(){}bi.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:No,onEntering:No,onEntered:No,onExit:No,onExiting:No,onExited:No};bi.UNMOUNTED=Nl;bi.EXITED=Qs;bi.ENTERING=Fs;bi.ENTERED=Vo;bi.EXITING=R0;const XS=bi;function Jv(t,e){var n=function(s){return e&&S.isValidElement(s)?e(s):s},r=Object.create(null);return t&&S.Children.map(t,function(i){return i}).forEach(function(i){r[i.key]=n(i)}),r}function LN(t,e){t=t||{},e=e||{};function n(u){return u in e?e[u]:t[u]}var r=Object.create(null),i=[];for(var s in t)s in e?i.length&&(r[s]=i,i=[]):i.push(s);var o,a={};for(var l in e){if(r[l])for(o=0;o<r[l].length;o++){var c=r[l][o];a[r[l][o]]=n(c)}a[l]=n(l)}for(o=0;o<i.length;o++)a[i[o]]=n(i[o]);return a}function Ys(t,e,n){return n[e]!=null?n[e]:t.props[e]}function MN(t,e){return Jv(t.children,function(n){return S.cloneElement(n,{onExited:e.bind(null,n),in:!0,appear:Ys(n,"appear",t),enter:Ys(n,"enter",t),exit:Ys(n,"exit",t)})})}function NN(t,e,n){var r=Jv(t.children),i=LN(e,r);return Object.keys(i).forEach(function(s){var o=i[s];if(S.isValidElement(o)){var a=s in e,l=s in r,c=e[s],u=S.isValidElement(c)&&!c.props.in;l&&(!a||u)?i[s]=S.cloneElement(o,{onExited:n.bind(null,o),in:!0,exit:Ys(o,"exit",t),enter:Ys(o,"enter",t)}):!l&&a&&!u?i[s]=S.cloneElement(o,{in:!1}):l&&a&&S.isValidElement(c)&&(i[s]=S.cloneElement(o,{onExited:n.bind(null,o),in:c.props.in,exit:Ys(o,"exit",t),enter:Ys(o,"enter",t)}))}}),i}var ON=Object.values||function(t){return Object.keys(t).map(function(e){return t[e]})},DN={component:"div",childFactory:function(e){return e}},ey=function(t){Oh(e,t);function e(r,i){var s;s=t.call(this,r,i)||this;var o=s.handleExited.bind(p0(s));return s.state={contextValue:{isMounting:!0},handleExited:o,firstRender:!0},s}var n=e.prototype;return n.componentDidMount=function(){this.mounted=!0,this.setState({contextValue:{isMounting:!1}})},n.componentWillUnmount=function(){this.mounted=!1},e.getDerivedStateFromProps=function(i,s){var o=s.children,a=s.handleExited,l=s.firstRender;return{children:l?MN(i,a):NN(i,o,a),firstRender:!1}},n.handleExited=function(i,s){var o=Jv(this.props.children);i.key in o||(i.props.onExited&&i.props.onExited(s),this.mounted&&this.setState(function(a){var l=$({},a.children);return delete l[i.key],{children:l}}))},n.render=function(){var i=this.props,s=i.component,o=i.childFactory,a=Dh(i,["component","childFactory"]),l=this.state.contextValue,c=ON(this.state.children).map(o);return delete a.appear,delete a.enter,delete a.exit,s===null?qe.createElement(Md.Provider,{value:l},c):qe.createElement(Md.Provider,{value:l},qe.createElement(s,a,c))},e}(qe.Component);ey.propTypes={};ey.defaultProps=DN;const kN=ey;var QN=function(e){return e.scrollTop};function Nd(t,e){var n=t.timeout,r=t.style,i=r===void 0?{}:r;return{duration:i.transitionDuration||typeof n=="number"?n:n[e.mode]||0,delay:i.transitionDelay}}var FN=function(e){return{root:{height:0,overflow:"hidden",transition:e.transitions.create("height")},entered:{height:"auto",overflow:"visible"},hidden:{visibility:"hidden"},wrapper:{display:"flex"},wrapperInner:{width:"100%"}}},ZS=S.forwardRef(function(e,n){var r=e.children,i=e.classes,s=e.className,o=e.collapsedHeight,a=e.collapsedSize,l=a===void 0?"0px":a,c=e.component,u=c===void 0?"div":c,f=e.disableStrictModeCompat,d=f===void 0?!1:f,h=e.in,g=e.onEnter,A=e.onEntered,E=e.onEntering,p=e.onExit,m=e.onExited,y=e.onExiting,_=e.style,I=e.timeout,C=I===void 0?b0.standard:I,b=e.TransitionComponent,B=b===void 0?XS:b,R=Qe(e,["children","classes","className","collapsedHeight","collapsedSize","component","disableStrictModeCompat","in","onEnter","onEntered","onEntering","onExit","onExited","onExiting","style","timeout","TransitionComponent"]),M=Zv(),U=S.useRef(),G=S.useRef(null),Y=S.useRef(),Z=typeof(o||l)=="number"?"".concat(o||l,"px"):o||l;S.useEffect(function(){return function(){clearTimeout(U.current)}},[]);var oe=M.unstable_strictMode&&!d,ue=S.useRef(null),Ee=cn(n,oe?ue:void 0),D=function(j){return function(ge,ae){if(j){var ve=oe?[ue.current,ge]:[ge,ae],fe=qh(ve,2),Ie=fe[0],Se=fe[1];Se===void 0?j(Ie):j(Ie,Se)}}},X=D(function(Q,j){Q.style.height=Z,g&&g(Q,j)}),P=D(function(Q,j){var ge=G.current?G.current.clientHeight:0,ae=Nd({style:_,timeout:C},{mode:"enter"}),ve=ae.duration;if(C==="auto"){var fe=M.transitions.getAutoHeightDuration(ge);Q.style.transitionDuration="".concat(fe,"ms"),Y.current=fe}else Q.style.transitionDuration=typeof ve=="string"?ve:"".concat(ve,"ms");Q.style.height="".concat(ge,"px"),E&&E(Q,j)}),L=D(function(Q,j){Q.style.height="auto",A&&A(Q,j)}),O=D(function(Q){var j=G.current?G.current.clientHeight:0;Q.style.height="".concat(j,"px"),p&&p(Q)}),z=D(m),F=D(function(Q){var j=G.current?G.current.clientHeight:0,ge=Nd({style:_,timeout:C},{mode:"exit"}),ae=ge.duration;if(C==="auto"){var ve=M.transitions.getAutoHeightDuration(j);Q.style.transitionDuration="".concat(ve,"ms"),Y.current=ve}else Q.style.transitionDuration=typeof ae=="string"?ae:"".concat(ae,"ms");Q.style.height=Z,y&&y(Q)}),V=function(j,ge){var ae=oe?j:ge;C==="auto"&&(U.current=setTimeout(ae,Y.current||0))};return S.createElement(B,$({in:h,onEnter:X,onEntered:L,onEntering:P,onExit:O,onExited:z,onExiting:F,addEndListener:V,nodeRef:oe?ue:void 0,timeout:C==="auto"?null:C},R),function(Q,j){return S.createElement(u,$({className:ke(i.root,i.container,s,{entered:i.entered,exited:!h&&Z==="0px"&&i.hidden}[Q]),style:$({minHeight:Z},_),ref:Ee},j),S.createElement("div",{className:i.wrapper,ref:G},S.createElement("div",{className:i.wrapperInner},r)))})});ZS.muiSupportAuto=!0;const UN=Nt(FN,{name:"MuiCollapse"})(ZS);var GN=function(e){var n={};return e.shadows.forEach(function(r,i){n["elevation".concat(i)]={boxShadow:r}}),$({root:{backgroundColor:e.palette.background.paper,color:e.palette.text.primary,transition:e.transitions.create("box-shadow")},rounded:{borderRadius:e.shape.borderRadius},outlined:{border:"1px solid ".concat(e.palette.divider)}},n)},zN=S.forwardRef(function(e,n){var r=e.classes,i=e.className,s=e.component,o=s===void 0?"div":s,a=e.square,l=a===void 0?!1:a,c=e.elevation,u=c===void 0?1:c,f=e.variant,d=f===void 0?"elevation":f,h=Qe(e,["classes","className","component","square","elevation","variant"]);return S.createElement(o,$({className:ke(r.root,i,d==="outlined"?r.outlined:r["elevation".concat(u)],!l&&r.rounded),ref:n},h))});const nu=Nt(GN,{name:"MuiPaper"})(zN);var VN=S.createContext({});const JS=VN;var jN=function(e){var n={duration:e.transitions.duration.shortest};return{root:{position:"relative",transition:e.transitions.create(["margin"],n),"&:before":{position:"absolute",left:0,top:-1,right:0,height:1,content:'""',opacity:1,backgroundColor:e.palette.divider,transition:e.transitions.create(["opacity","background-color"],n)},"&:first-child":{"&:before":{display:"none"}},"&$expanded":{margin:"16px 0","&:first-child":{marginTop:0},"&:last-child":{marginBottom:0},"&:before":{opacity:0}},"&$expanded + &":{"&:before":{display:"none"}},"&$disabled":{backgroundColor:e.palette.action.disabledBackground}},rounded:{borderRadius:0,"&:first-child":{borderTopLeftRadius:e.shape.borderRadius,borderTopRightRadius:e.shape.borderRadius},"&:last-child":{borderBottomLeftRadius:e.shape.borderRadius,borderBottomRightRadius:e.shape.borderRadius,"@supports (-ms-ime-align: auto)":{borderBottomLeftRadius:0,borderBottomRightRadius:0}}},expanded:{},disabled:{}}},HN=S.forwardRef(function(e,n){var r=e.children,i=e.classes,s=e.className,o=e.defaultExpanded,a=o===void 0?!1:o,l=e.disabled,c=l===void 0?!1:l,u=e.expanded,f=e.onChange,d=e.square,h=d===void 0?!1:d,g=e.TransitionComponent,A=g===void 0?UN:g,E=e.TransitionProps,p=Qe(e,["children","classes","className","defaultExpanded","disabled","expanded","onChange","square","TransitionComponent","TransitionProps"]),m=KS({controlled:u,default:a,name:"Accordion",state:"expanded"}),y=qh(m,2),_=y[0],I=y[1],C=S.useCallback(function(G){I(!_),f&&f(G,!_)},[_,f,I]),b=S.Children.toArray(r),B=RN(b),R=B[0],M=B.slice(1),U=S.useMemo(function(){return{expanded:_,disabled:c,toggle:C}},[_,c,C]);return S.createElement(nu,$({className:ke(i.root,s,_&&i.expanded,c&&i.disabled,!h&&i.rounded),ref:n,square:h},p),S.createElement(JS.Provider,{value:U},R),S.createElement(A,$({in:_,timeout:"auto"},E),S.createElement("div",{"aria-labelledby":R.props.id,id:R.props["aria-controls"],role:"region"},M)))});const WN=Nt(jN,{name:"MuiAccordion"})(HN);var YN=function(e){return{root:{display:"flex",padding:e.spacing(1,2,2)}}},$N=S.forwardRef(function(e,n){var r=e.classes,i=e.className,s=Qe(e,["classes","className"]);return S.createElement("div",$({className:ke(r.root,i),ref:n},s))});const KN=Nt(YN,{name:"MuiAccordionDetails"})($N);var qN=typeof window>"u"?S.useEffect:S.useLayoutEffect;function XN(t){var e=t.classes,n=t.pulsate,r=n===void 0?!1:n,i=t.rippleX,s=t.rippleY,o=t.rippleSize,a=t.in,l=t.onExited,c=l===void 0?function(){}:l,u=t.timeout,f=S.useState(!1),d=f[0],h=f[1],g=ke(e.ripple,e.rippleVisible,r&&e.ripplePulsate),A={width:o,height:o,top:-(o/2)+s,left:-(o/2)+i},E=ke(e.child,d&&e.childLeaving,r&&e.childPulsate),p=$t(c);return qN(function(){if(!a){h(!0);var m=setTimeout(p,u);return function(){clearTimeout(m)}}},[p,a,u]),S.createElement("span",{className:g,style:A},S.createElement("span",{className:E}))}var P0=550,ZN=80,JN=function(e){return{root:{overflow:"hidden",pointerEvents:"none",position:"absolute",zIndex:0,top:0,right:0,bottom:0,left:0,borderRadius:"inherit"},ripple:{opacity:0,position:"absolute"},rippleVisible:{opacity:.3,transform:"scale(1)",animation:"$enter ".concat(P0,"ms ").concat(e.transitions.easing.easeInOut)},ripplePulsate:{animationDuration:"".concat(e.transitions.duration.shorter,"ms")},child:{opacity:1,display:"block",width:"100%",height:"100%",borderRadius:"50%",backgroundColor:"currentColor"},childLeaving:{opacity:0,animation:"$exit ".concat(P0,"ms ").concat(e.transitions.easing.easeInOut)},childPulsate:{position:"absolute",left:0,top:0,animation:"$pulsate 2500ms ".concat(e.transitions.easing.easeInOut," 200ms infinite")},"@keyframes enter":{"0%":{transform:"scale(0)",opacity:.1},"100%":{transform:"scale(1)",opacity:.3}},"@keyframes exit":{"0%":{opacity:1},"100%":{opacity:0}},"@keyframes pulsate":{"0%":{transform:"scale(1)"},"50%":{transform:"scale(0.92)"},"100%":{transform:"scale(1)"}}}},e5=S.forwardRef(function(e,n){var r=e.center,i=r===void 0?!1:r,s=e.classes,o=e.className,a=Qe(e,["center","classes","className"]),l=S.useState([]),c=l[0],u=l[1],f=S.useRef(0),d=S.useRef(null);S.useEffect(function(){d.current&&(d.current(),d.current=null)},[c]);var h=S.useRef(!1),g=S.useRef(null),A=S.useRef(null),E=S.useRef(null);S.useEffect(function(){return function(){clearTimeout(g.current)}},[]);var p=S.useCallback(function(I){var C=I.pulsate,b=I.rippleX,B=I.rippleY,R=I.rippleSize,M=I.cb;u(function(U){return[].concat(Qh(U),[S.createElement(XN,{key:f.current,classes:s,timeout:P0,pulsate:C,rippleX:b,rippleY:B,rippleSize:R})])}),f.current+=1,d.current=M},[s]),m=S.useCallback(function(){var I=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},C=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},b=arguments.length>2?arguments[2]:void 0,B=C.pulsate,R=B===void 0?!1:B,M=C.center,U=M===void 0?i||C.pulsate:M,G=C.fakeElement,Y=G===void 0?!1:G;if(I.type==="mousedown"&&h.current){h.current=!1;return}I.type==="touchstart"&&(h.current=!0);var Z=Y?null:E.current,oe=Z?Z.getBoundingClientRect():{width:0,height:0,left:0,top:0},ue,Ee,D;if(U||I.clientX===0&&I.clientY===0||!I.clientX&&!I.touches)ue=Math.round(oe.width/2),Ee=Math.round(oe.height/2);else{var X=I.touches?I.touches[0]:I,P=X.clientX,L=X.clientY;ue=Math.round(P-oe.left),Ee=Math.round(L-oe.top)}if(U)D=Math.sqrt((2*Math.pow(oe.width,2)+Math.pow(oe.height,2))/3),D%2===0&&(D+=1);else{var O=Math.max(Math.abs((Z?Z.clientWidth:0)-ue),ue)*2+2,z=Math.max(Math.abs((Z?Z.clientHeight:0)-Ee),Ee)*2+2;D=Math.sqrt(Math.pow(O,2)+Math.pow(z,2))}I.touches?A.current===null&&(A.current=function(){p({pulsate:R,rippleX:ue,rippleY:Ee,rippleSize:D,cb:b})},g.current=setTimeout(function(){A.current&&(A.current(),A.current=null)},ZN)):p({pulsate:R,rippleX:ue,rippleY:Ee,rippleSize:D,cb:b})},[i,p]),y=S.useCallback(function(){m({},{pulsate:!0})},[m]),_=S.useCallback(function(I,C){if(clearTimeout(g.current),I.type==="touchend"&&A.current){I.persist(),A.current(),A.current=null,g.current=setTimeout(function(){_(I,C)});return}A.current=null,u(function(b){return b.length>0?b.slice(1):b}),d.current=C},[]);return S.useImperativeHandle(n,function(){return{pulsate:y,start:m,stop:_}},[y,m,_]),S.createElement("span",$({className:ke(s.root,o),ref:E},a),S.createElement(kN,{component:null,exit:!0},c))});const t5=Nt(JN,{flip:!1,name:"MuiTouchRipple"})(S.memo(e5));var n5={root:{display:"inline-flex",alignItems:"center",justifyContent:"center",position:"relative",WebkitTapHighlightColor:"transparent",backgroundColor:"transparent",outline:0,border:0,margin:0,borderRadius:0,padding:0,cursor:"pointer",userSelect:"none",verticalAlign:"middle","-moz-appearance":"none","-webkit-appearance":"none",textDecoration:"none",color:"inherit","&::-moz-focus-inner":{borderStyle:"none"},"&$disabled":{pointerEvents:"none",cursor:"default"},"@media print":{colorAdjust:"exact"}},disabled:{},focusVisible:{}},r5=S.forwardRef(function(e,n){var r=e.action,i=e.buttonRef,s=e.centerRipple,o=s===void 0?!1:s,a=e.children,l=e.classes,c=e.className,u=e.component,f=u===void 0?"button":u,d=e.disabled,h=d===void 0?!1:d,g=e.disableRipple,A=g===void 0?!1:g,E=e.disableTouchRipple,p=E===void 0?!1:E,m=e.focusRipple,y=m===void 0?!1:m,_=e.focusVisibleClassName,I=e.onBlur,C=e.onClick,b=e.onFocus,B=e.onFocusVisible,R=e.onKeyDown,M=e.onKeyUp,U=e.onMouseDown,G=e.onMouseLeave,Y=e.onMouseUp,Z=e.onTouchEnd,oe=e.onTouchMove,ue=e.onTouchStart,Ee=e.onDragLeave,D=e.tabIndex,X=D===void 0?0:D,P=e.TouchRippleProps,L=e.type,O=L===void 0?"button":L,z=Qe(e,["action","buttonRef","centerRipple","children","classes","className","component","disabled","disableRipple","disableTouchRipple","focusRipple","focusVisibleClassName","onBlur","onClick","onFocus","onFocusVisible","onKeyDown","onKeyUp","onMouseDown","onMouseLeave","onMouseUp","onTouchEnd","onTouchMove","onTouchStart","onDragLeave","tabIndex","TouchRippleProps","type"]),F=S.useRef(null);function V(){return wi.findDOMNode(F.current)}var Q=S.useRef(null),j=S.useState(!1),ge=j[0],ae=j[1];h&&ge&&ae(!1);var ve=qS(),fe=ve.isFocusVisible,Ie=ve.onBlurVisible,Se=ve.ref;S.useImperativeHandle(r,function(){return{focusVisible:function(){ae(!0),F.current.focus()}}},[]),S.useEffect(function(){ge&&y&&!A&&Q.current.pulsate()},[A,y,ge]);function we(ye,gn){var il=arguments.length>2&&arguments[2]!==void 0?arguments[2]:p;return $t(function(Rs){gn&&gn(Rs);var Un=il;return!Un&&Q.current&&Q.current[ye](Rs),!0})}var _t=we("start",U),he=we("stop",Ee),Me=we("stop",Y),Vt=we("stop",function(ye){ge&&ye.preventDefault(),G&&G(ye)}),ht=we("start",ue),gt=we("stop",Z),Fe=we("stop",oe),Pe=we("stop",function(ye){ge&&(Ie(ye),ae(!1)),I&&I(ye)},!1),We=$t(function(ye){F.current||(F.current=ye.currentTarget),fe(ye)&&(ae(!0),B&&B(ye)),b&&b(ye)}),rt=function(){var gn=V();return f&&f!=="button"&&!(gn.tagName==="A"&&gn.href)},tn=S.useRef(!1),jt=$t(function(ye){y&&!tn.current&&ge&&Q.current&&ye.key===" "&&(tn.current=!0,ye.persist(),Q.current.stop(ye,function(){Q.current.start(ye)})),ye.target===ye.currentTarget&&rt()&&ye.key===" "&&ye.preventDefault(),R&&R(ye),ye.target===ye.currentTarget&&rt()&&ye.key==="Enter"&&!h&&(ye.preventDefault(),C&&C(ye))}),Pi=$t(function(ye){y&&ye.key===" "&&Q.current&&ge&&!ye.defaultPrevented&&(tn.current=!1,ye.persist(),Q.current.stop(ye,function(){Q.current.pulsate(ye)})),M&&M(ye),C&&ye.target===ye.currentTarget&&rt()&&ye.key===" "&&!ye.defaultPrevented&&C(ye)}),Ct=f;Ct==="button"&&z.href&&(Ct="a");var De={};Ct==="button"?(De.type=O,De.disabled=h):((Ct!=="a"||!z.href)&&(De.role="button"),De["aria-disabled"]=h);var tr=cn(i,n),vt=cn(Se,F),nr=cn(tr,vt),rr=S.useState(!1),tl=rr[0],nl=rr[1];S.useEffect(function(){nl(!0)},[]);var rl=tl&&!A&&!h;return S.createElement(Ct,$({className:ke(l.root,c,ge&&[l.focusVisible,_],h&&l.disabled),onBlur:Pe,onClick:C,onFocus:We,onKeyDown:jt,onKeyUp:Pi,onMouseDown:_t,onMouseLeave:Vt,onMouseUp:Me,onDragLeave:he,onTouchEnd:gt,onTouchMove:Fe,onTouchStart:ht,ref:nr,tabIndex:h?-1:X},De,z),a,rl?S.createElement(t5,$({ref:Q,center:o},P)):null)});const eb=Nt(n5,{name:"MuiButtonBase"})(r5);var i5=function(e){return{root:{textAlign:"center",flex:"0 0 auto",fontSize:e.typography.pxToRem(24),padding:12,borderRadius:"50%",overflow:"visible",color:e.palette.action.active,transition:e.transitions.create("background-color",{duration:e.transitions.duration.shortest}),"&:hover":{backgroundColor:qi(e.palette.action.active,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},"&$disabled":{backgroundColor:"transparent",color:e.palette.action.disabled}},edgeStart:{marginLeft:-12,"$sizeSmall&":{marginLeft:-3}},edgeEnd:{marginRight:-12,"$sizeSmall&":{marginRight:-3}},colorInherit:{color:"inherit"},colorPrimary:{color:e.palette.primary.main,"&:hover":{backgroundColor:qi(e.palette.primary.main,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},colorSecondary:{color:e.palette.secondary.main,"&:hover":{backgroundColor:qi(e.palette.secondary.main,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},disabled:{},sizeSmall:{padding:3,fontSize:e.typography.pxToRem(18)},label:{width:"100%",display:"flex",alignItems:"inherit",justifyContent:"inherit"}}},s5=S.forwardRef(function(e,n){var r=e.edge,i=r===void 0?!1:r,s=e.children,o=e.classes,a=e.className,l=e.color,c=l===void 0?"default":l,u=e.disabled,f=u===void 0?!1:u,d=e.disableFocusRipple,h=d===void 0?!1:d,g=e.size,A=g===void 0?"medium":g,E=Qe(e,["edge","children","classes","className","color","disabled","disableFocusRipple","size"]);return S.createElement(eb,$({className:ke(o.root,a,c!=="default"&&o["color".concat(Er(c))],f&&o.disabled,A==="small"&&o["size".concat(Er(A))],{start:o.edgeStart,end:o.edgeEnd}[i]),centerRipple:!0,focusRipple:!h,disabled:f,ref:n},E),S.createElement("span",{className:o.label},s))});const mi=Nt(i5,{name:"MuiIconButton"})(s5);var o5=function(e){var n={duration:e.transitions.duration.shortest};return{root:{display:"flex",minHeight:8*6,transition:e.transitions.create(["min-height","background-color"],n),padding:e.spacing(0,2),"&:hover:not($disabled)":{cursor:"pointer"},"&$expanded":{minHeight:64},"&$focused, &$focusVisible":{backgroundColor:e.palette.action.focus},"&$disabled":{opacity:e.palette.action.disabledOpacity}},expanded:{},focused:{},focusVisible:{},disabled:{},content:{display:"flex",flexGrow:1,transition:e.transitions.create(["margin"],n),margin:"12px 0","&$expanded":{margin:"20px 0"}},expandIcon:{transform:"rotate(0deg)",transition:e.transitions.create("transform",n),"&:hover":{backgroundColor:"transparent"},"&$expanded":{transform:"rotate(180deg)"}}}},a5=S.forwardRef(function(e,n){var r=e.children,i=e.classes,s=e.className,o=e.expandIcon,a=e.focusVisibleClassName,l=e.IconButtonProps,c=l===void 0?{}:l,u=e.onClick,f=Qe(e,["children","classes","className","expandIcon","focusVisibleClassName","IconButtonProps","onClick"]),d=S.useContext(JS),h=d.disabled,g=h===void 0?!1:h,A=d.expanded,E=d.toggle,p=function(y){E&&E(y),u&&u(y)};return S.createElement(eb,$({focusRipple:!1,disableRipple:!0,disabled:g,component:"div","aria-expanded":A,className:ke(i.root,s,g&&i.disabled,A&&i.expanded),focusVisibleClassName:ke(i.focusVisible,i.focused,a),onClick:p,ref:n},f),S.createElement("div",{className:ke(i.content,A&&i.expanded)},r),o&&S.createElement(mi,$({className:ke(i.expandIcon,A&&i.expanded),edge:"end",component:"div",tabIndex:null,role:null,"aria-hidden":!0},c),o))});const l5=Nt(o5,{name:"MuiAccordionSummary"})(a5);var c5=function(e){return{root:{margin:0},body2:e.typography.body2,body1:e.typography.body1,caption:e.typography.caption,button:e.typography.button,h1:e.typography.h1,h2:e.typography.h2,h3:e.typography.h3,h4:e.typography.h4,h5:e.typography.h5,h6:e.typography.h6,subtitle1:e.typography.subtitle1,subtitle2:e.typography.subtitle2,overline:e.typography.overline,srOnly:{position:"absolute",height:1,width:1,overflow:"hidden"},alignLeft:{textAlign:"left"},alignCenter:{textAlign:"center"},alignRight:{textAlign:"right"},alignJustify:{textAlign:"justify"},noWrap:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},gutterBottom:{marginBottom:"0.35em"},paragraph:{marginBottom:16},colorInherit:{color:"inherit"},colorPrimary:{color:e.palette.primary.main},colorSecondary:{color:e.palette.secondary.main},colorTextPrimary:{color:e.palette.text.primary},colorTextSecondary:{color:e.palette.text.secondary},colorError:{color:e.palette.error.main},displayInline:{display:"inline"},displayBlock:{display:"block"}}},y_={h1:"h1",h2:"h2",h3:"h3",h4:"h4",h5:"h5",h6:"h6",subtitle1:"h6",subtitle2:"h6",body1:"p",body2:"p"},u5=S.forwardRef(function(e,n){var r=e.align,i=r===void 0?"inherit":r,s=e.classes,o=e.className,a=e.color,l=a===void 0?"initial":a,c=e.component,u=e.display,f=u===void 0?"initial":u,d=e.gutterBottom,h=d===void 0?!1:d,g=e.noWrap,A=g===void 0?!1:g,E=e.paragraph,p=E===void 0?!1:E,m=e.variant,y=m===void 0?"body1":m,_=e.variantMapping,I=_===void 0?y_:_,C=Qe(e,["align","classes","className","color","component","display","gutterBottom","noWrap","paragraph","variant","variantMapping"]),b=c||(p?"p":I[y]||y_[y])||"span";return S.createElement(b,$({className:ke(s.root,o,y!=="inherit"&&s[y],l!=="initial"&&s["color".concat(Er(l))],A&&s.noWrap,h&&s.gutterBottom,p&&s.paragraph,i!=="inherit"&&s["align".concat(Er(i))],f!=="initial"&&s["display".concat(Er(f))]),ref:n},C))});const hr=Nt(c5,{name:"MuiTypography"})(u5);var tb=S.createContext();function f5(){return S.useContext(tb)}const nb=tb;function d5(){return S.useContext(nb)}function h5(t){return t=typeof t=="function"?t():t,wi.findDOMNode(t)}var _A=typeof window<"u"?S.useLayoutEffect:S.useEffect,g5=S.forwardRef(function(e,n){var r=e.children,i=e.container,s=e.disablePortal,o=s===void 0?!1:s,a=e.onRendered,l=S.useState(null),c=l[0],u=l[1],f=cn(S.isValidElement(r)?r.ref:null,n);return _A(function(){o||u(h5(i)||document.body)},[i,o]),_A(function(){if(c&&!o)return Ld(n,c),function(){Ld(n,null)}},[n,c,o]),_A(function(){a&&(c||o)&&a()},[a,c,o]),o?S.isValidElement(r)?S.cloneElement(r,{ref:f}):r:c&&wi.createPortal(r,c)});const A5=g5;function p5(){var t=document.createElement("div");t.style.width="99px",t.style.height="99px",t.style.position="absolute",t.style.top="-9999px",t.style.overflow="scroll",document.body.appendChild(t);var e=t.offsetWidth-t.clientWidth;return document.body.removeChild(t),e}function m5(t){var e=dr(t);return e.body===t?$S(e).innerWidth>e.documentElement.clientWidth:t.scrollHeight>t.clientHeight}function Kl(t,e){e?t.setAttribute("aria-hidden","true"):t.removeAttribute("aria-hidden")}function E_(t){return parseInt(window.getComputedStyle(t)["padding-right"],10)||0}function __(t,e,n){var r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:[],i=arguments.length>4?arguments[4]:void 0,s=[e,n].concat(Qh(r)),o=["TEMPLATE","SCRIPT","STYLE"];[].forEach.call(t.children,function(a){a.nodeType===1&&s.indexOf(a)===-1&&o.indexOf(a.tagName)===-1&&Kl(a,i)})}function xA(t,e){var n=-1;return t.some(function(r,i){return e(r)?(n=i,!0):!1}),n}function v5(t,e){var n=[],r=[],i=t.container,s;if(!e.disableScrollLock){if(m5(i)){var o=p5();n.push({value:i.style.paddingRight,key:"padding-right",el:i}),i.style["padding-right"]="".concat(E_(i)+o,"px"),s=dr(i).querySelectorAll(".mui-fixed"),[].forEach.call(s,function(u){r.push(u.style.paddingRight),u.style.paddingRight="".concat(E_(u)+o,"px")})}var a=i.parentElement,l=a.nodeName==="HTML"&&window.getComputedStyle(a)["overflow-y"]==="scroll"?a:i;n.push({value:l.style.overflow,key:"overflow",el:l}),l.style.overflow="hidden"}var c=function(){s&&[].forEach.call(s,function(f,d){r[d]?f.style.paddingRight=r[d]:f.style.removeProperty("padding-right")}),n.forEach(function(f){var d=f.value,h=f.el,g=f.key;d?h.style.setProperty(g,d):h.style.removeProperty(g)})};return c}function y5(t){var e=[];return[].forEach.call(t.children,function(n){n.getAttribute&&n.getAttribute("aria-hidden")==="true"&&e.push(n)}),e}var E5=function(){function t(){bM(this,t),this.modals=[],this.containers=[]}return Qv(t,[{key:"add",value:function(n,r){var i=this.modals.indexOf(n);if(i!==-1)return i;i=this.modals.length,this.modals.push(n),n.modalRef&&Kl(n.modalRef,!1);var s=y5(r);__(r,n.mountNode,n.modalRef,s,!0);var o=xA(this.containers,function(a){return a.container===r});return o!==-1?(this.containers[o].modals.push(n),i):(this.containers.push({modals:[n],container:r,restore:null,hiddenSiblingNodes:s}),i)}},{key:"mount",value:function(n,r){var i=xA(this.containers,function(o){return o.modals.indexOf(n)!==-1}),s=this.containers[i];s.restore||(s.restore=v5(s,r))}},{key:"remove",value:function(n){var r=this.modals.indexOf(n);if(r===-1)return r;var i=xA(this.containers,function(a){return a.modals.indexOf(n)!==-1}),s=this.containers[i];if(s.modals.splice(s.modals.indexOf(n),1),this.modals.splice(r,1),s.modals.length===0)s.restore&&s.restore(),n.modalRef&&Kl(n.modalRef,!0),__(s.container,n.mountNode,n.modalRef,s.hiddenSiblingNodes,!1),this.containers.splice(i,1);else{var o=s.modals[s.modals.length-1];o.modalRef&&Kl(o.modalRef,!1)}return r}},{key:"isTopModal",value:function(n){return this.modals.length>0&&this.modals[this.modals.length-1]===n}}]),t}();function _5(t){var e=t.children,n=t.disableAutoFocus,r=n===void 0?!1:n,i=t.disableEnforceFocus,s=i===void 0?!1:i,o=t.disableRestoreFocus,a=o===void 0?!1:o,l=t.getDoc,c=t.isEnabled,u=t.open,f=S.useRef(),d=S.useRef(null),h=S.useRef(null),g=S.useRef(),A=S.useRef(null),E=S.useCallback(function(y){A.current=wi.findDOMNode(y)},[]),p=cn(e.ref,E),m=S.useRef();return S.useEffect(function(){m.current=u},[u]),!m.current&&u&&typeof window<"u"&&(g.current=l().activeElement),S.useEffect(function(){if(u){var y=dr(A.current);!r&&A.current&&!A.current.contains(y.activeElement)&&(A.current.hasAttribute("tabIndex")||A.current.setAttribute("tabIndex",-1),A.current.focus());var _=function(){var B=A.current;if(B!==null){if(!y.hasFocus()||s||!c()||f.current){f.current=!1;return}A.current&&!A.current.contains(y.activeElement)&&A.current.focus()}},I=function(B){s||!c()||B.keyCode!==9||y.activeElement===A.current&&(f.current=!0,B.shiftKey?h.current.focus():d.current.focus())};y.addEventListener("focus",_,!0),y.addEventListener("keydown",I,!0);var C=setInterval(function(){_()},50);return function(){clearInterval(C),y.removeEventListener("focus",_,!0),y.removeEventListener("keydown",I,!0),a||(g.current&&g.current.focus&&g.current.focus(),g.current=null)}}},[r,s,a,c,u]),S.createElement(S.Fragment,null,S.createElement("div",{tabIndex:0,ref:d,"data-test":"sentinelStart"}),S.cloneElement(e,{ref:p}),S.createElement("div",{tabIndex:0,ref:h,"data-test":"sentinelEnd"}))}var x_={root:{zIndex:-1,position:"fixed",right:0,bottom:0,top:0,left:0,backgroundColor:"rgba(0, 0, 0, 0.5)",WebkitTapHighlightColor:"transparent"},invisible:{backgroundColor:"transparent"}},x5=S.forwardRef(function(e,n){var r=e.invisible,i=r===void 0?!1:r,s=e.open,o=Qe(e,["invisible","open"]);return s?S.createElement("div",$({"aria-hidden":!0,ref:n},o,{style:$({},x_.root,i?x_.invisible:{},o.style)})):null});const C5=x5;function I5(t){return t=typeof t=="function"?t():t,wi.findDOMNode(t)}function w5(t){return t.children?t.children.props.hasOwnProperty("in"):!1}var S5=new E5,b5=function(e){return{root:{position:"fixed",zIndex:e.zIndex.modal,right:0,bottom:0,top:0,left:0},hidden:{visibility:"hidden"}}},T5=S.forwardRef(function(e,n){var r=tu(),i=AS({name:"MuiModal",props:$({},e),theme:r}),s=i.BackdropComponent,o=s===void 0?C5:s,a=i.BackdropProps,l=i.children,c=i.closeAfterTransition,u=c===void 0?!1:c,f=i.container,d=i.disableAutoFocus,h=d===void 0?!1:d,g=i.disableBackdropClick,A=g===void 0?!1:g,E=i.disableEnforceFocus,p=E===void 0?!1:E,m=i.disableEscapeKeyDown,y=m===void 0?!1:m,_=i.disablePortal,I=_===void 0?!1:_,C=i.disableRestoreFocus,b=C===void 0?!1:C,B=i.disableScrollLock,R=B===void 0?!1:B,M=i.hideBackdrop,U=M===void 0?!1:M,G=i.keepMounted,Y=G===void 0?!1:G,Z=i.manager,oe=Z===void 0?S5:Z,ue=i.onBackdropClick,Ee=i.onClose,D=i.onEscapeKeyDown,X=i.onRendered,P=i.open,L=Qe(i,["BackdropComponent","BackdropProps","children","closeAfterTransition","container","disableAutoFocus","disableBackdropClick","disableEnforceFocus","disableEscapeKeyDown","disablePortal","disableRestoreFocus","disableScrollLock","hideBackdrop","keepMounted","manager","onBackdropClick","onClose","onEscapeKeyDown","onRendered","open"]),O=S.useState(!0),z=O[0],F=O[1],V=S.useRef({}),Q=S.useRef(null),j=S.useRef(null),ge=cn(j,n),ae=w5(i),ve=function(){return dr(Q.current)},fe=function(){return V.current.modalRef=j.current,V.current.mountNode=Q.current,V.current},Ie=function(){oe.mount(fe(),{disableScrollLock:R}),j.current.scrollTop=0},Se=$t(function(){var We=I5(f)||ve().body;oe.add(fe(),We),j.current&&Ie()}),we=S.useCallback(function(){return oe.isTopModal(fe())},[oe]),_t=$t(function(We){Q.current=We,We&&(X&&X(),P&&we()?Ie():Kl(j.current,!0))}),he=S.useCallback(function(){oe.remove(fe())},[oe]);if(S.useEffect(function(){return function(){he()}},[he]),S.useEffect(function(){P?Se():(!ae||!u)&&he()},[P,he,ae,u,Se]),!Y&&!P&&(!ae||z))return null;var Me=function(){F(!1)},Vt=function(){F(!0),u&&he()},ht=function(rt){rt.target===rt.currentTarget&&(ue&&ue(rt),!A&&Ee&&Ee(rt,"backdropClick"))},gt=function(rt){rt.key!=="Escape"||!we()||(D&&D(rt),y||(rt.stopPropagation(),Ee&&Ee(rt,"escapeKeyDown")))},Fe=b5(r||{zIndex:VS}),Pe={};return l.props.tabIndex===void 0&&(Pe.tabIndex=l.props.tabIndex||"-1"),ae&&(Pe.onEnter=T0(Me,l.props.onEnter),Pe.onExited=T0(Vt,l.props.onExited)),S.createElement(A5,{ref:_t,container:f,disablePortal:I},S.createElement("div",$({ref:ge,onKeyDown:gt,role:"presentation"},L,{style:$({},Fe.root,!P&&z?Fe.hidden:{},L.style)}),U?null:S.createElement(o,$({open:P,onClick:ht},a)),S.createElement(_5,{disableEnforceFocus:p,disableAutoFocus:h,disableRestoreFocus:b,getDoc:ve,isEnabled:we,open:P},S.cloneElement(l,Pe))))});const B5=T5;var R5=function(e){return{root:{height:1,margin:0,border:"none",flexShrink:0,backgroundColor:e.palette.divider},absolute:{position:"absolute",bottom:0,left:0,width:"100%"},inset:{marginLeft:72},light:{backgroundColor:qi(e.palette.divider,.08)},middle:{marginLeft:e.spacing(2),marginRight:e.spacing(2)},vertical:{height:"100%",width:1},flexItem:{alignSelf:"stretch",height:"auto"}}},P5=S.forwardRef(function(e,n){var r=e.absolute,i=r===void 0?!1:r,s=e.classes,o=e.className,a=e.component,l=a===void 0?"hr":a,c=e.flexItem,u=c===void 0?!1:c,f=e.light,d=f===void 0?!1:f,h=e.orientation,g=h===void 0?"horizontal":h,A=e.role,E=A===void 0?l!=="hr"?"separator":void 0:A,p=e.variant,m=p===void 0?"fullWidth":p,y=Qe(e,["absolute","classes","className","component","flexItem","light","orientation","role","variant"]);return S.createElement(l,$({className:ke(s.root,o,m!=="fullWidth"&&s[m],i&&s.absolute,u&&s.flexItem,d&&s.light,g==="vertical"&&s.vertical),role:E,ref:n},y))});const bn=Nt(R5,{name:"MuiDivider"})(P5);function rb(t){var e=t.props,n=t.states,r=t.muiFormControl;return n.reduce(function(i,s){return i[s]=e[s],r&&typeof e[s]>"u"&&(i[s]=r[s]),i},{})}function Yu(t,e){return parseInt(t[e],10)||0}var L5=typeof window<"u"?S.useLayoutEffect:S.useEffect,M5={shadow:{visibility:"hidden",position:"absolute",overflow:"hidden",height:0,top:0,left:0,transform:"translateZ(0)"}},N5=S.forwardRef(function(e,n){var r=e.onChange,i=e.rows,s=e.rowsMax,o=e.rowsMin,a=e.maxRows,l=e.minRows,c=l===void 0?1:l,u=e.style,f=e.value,d=Qe(e,["onChange","rows","rowsMax","rowsMin","maxRows","minRows","style","value"]),h=a||s,g=i||o||c,A=S.useRef(f!=null),E=A.current,p=S.useRef(null),m=cn(n,p),y=S.useRef(null),_=S.useRef(0),I=S.useState({}),C=I[0],b=I[1],B=S.useCallback(function(){var M=p.current,U=window.getComputedStyle(M),G=y.current;G.style.width=U.width,G.value=M.value||e.placeholder||"x",G.value.slice(-1)===`
`&&(G.value+=" ");var Y=U["box-sizing"],Z=Yu(U,"padding-bottom")+Yu(U,"padding-top"),oe=Yu(U,"border-bottom-width")+Yu(U,"border-top-width"),ue=G.scrollHeight-Z;G.value="x";var Ee=G.scrollHeight-Z,D=ue;g&&(D=Math.max(Number(g)*Ee,D)),h&&(D=Math.min(Number(h)*Ee,D)),D=Math.max(D,Ee);var X=D+(Y==="border-box"?Z+oe:0),P=Math.abs(D-ue)<=1;b(function(L){return _.current<20&&(X>0&&Math.abs((L.outerHeightStyle||0)-X)>1||L.overflow!==P)?(_.current+=1,{overflow:P,outerHeightStyle:X}):L})},[h,g,e.placeholder]);S.useEffect(function(){var M=YS(function(){_.current=0,B()});return window.addEventListener("resize",M),function(){M.clear(),window.removeEventListener("resize",M)}},[B]),L5(function(){B()}),S.useEffect(function(){_.current=0},[f]);var R=function(U){_.current=0,E||B(),r&&r(U)};return S.createElement(S.Fragment,null,S.createElement("textarea",$({value:f,onChange:R,ref:m,rows:g,style:$({height:C.outerHeightStyle,overflow:C.overflow?"hidden":null},u)},d)),S.createElement("textarea",{"aria-hidden":!0,className:e.className,readOnly:!0,ref:y,tabIndex:-1,style:$({},M5.shadow,u)}))});const O5=N5;function C_(t){return t!=null&&!(Array.isArray(t)&&t.length===0)}function D5(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return t&&(C_(t.value)&&t.value!==""||e&&C_(t.defaultValue)&&t.defaultValue!=="")}var k5=function(e){var n=e.palette.type==="light",r={color:"currentColor",opacity:n?.42:.5,transition:e.transitions.create("opacity",{duration:e.transitions.duration.shorter})},i={opacity:"0 !important"},s={opacity:n?.42:.5};return{"@global":{"@keyframes mui-auto-fill":{},"@keyframes mui-auto-fill-cancel":{}},root:$({},e.typography.body1,{color:e.palette.text.primary,lineHeight:"1.1876em",boxSizing:"border-box",position:"relative",cursor:"text",display:"inline-flex",alignItems:"center","&$disabled":{color:e.palette.text.disabled,cursor:"default"}}),formControl:{},focused:{},disabled:{},adornedStart:{},adornedEnd:{},error:{},marginDense:{},multiline:{padding:"".concat(8-2,"px 0 ").concat(8-1,"px"),"&$marginDense":{paddingTop:4-1}},colorSecondary:{},fullWidth:{width:"100%"},input:{font:"inherit",letterSpacing:"inherit",color:"currentColor",padding:"".concat(8-2,"px 0 ").concat(8-1,"px"),border:0,boxSizing:"content-box",background:"none",height:"1.1876em",margin:0,WebkitTapHighlightColor:"transparent",display:"block",minWidth:0,width:"100%",animationName:"mui-auto-fill-cancel",animationDuration:"10ms","&::-webkit-input-placeholder":r,"&::-moz-placeholder":r,"&:-ms-input-placeholder":r,"&::-ms-input-placeholder":r,"&:focus":{outline:0},"&:invalid":{boxShadow:"none"},"&::-webkit-search-decoration":{"-webkit-appearance":"none"},"label[data-shrink=false] + $formControl &":{"&::-webkit-input-placeholder":i,"&::-moz-placeholder":i,"&:-ms-input-placeholder":i,"&::-ms-input-placeholder":i,"&:focus::-webkit-input-placeholder":s,"&:focus::-moz-placeholder":s,"&:focus:-ms-input-placeholder":s,"&:focus::-ms-input-placeholder":s},"&$disabled":{opacity:1},"&:-webkit-autofill":{animationDuration:"5000s",animationName:"mui-auto-fill"}},inputMarginDense:{paddingTop:4-1},inputMultiline:{height:"auto",resize:"none",padding:0},inputTypeSearch:{"-moz-appearance":"textfield","-webkit-appearance":"textfield"},inputAdornedStart:{},inputAdornedEnd:{},inputHiddenLabel:{}}},Q5=typeof window>"u"?S.useEffect:S.useLayoutEffect,F5=S.forwardRef(function(e,n){var r=e["aria-describedby"],i=e.autoComplete,s=e.autoFocus,o=e.classes,a=e.className;e.color;var l=e.defaultValue,c=e.disabled,u=e.endAdornment;e.error;var f=e.fullWidth,d=f===void 0?!1:f,h=e.id,g=e.inputComponent,A=g===void 0?"input":g,E=e.inputProps,p=E===void 0?{}:E,m=e.inputRef;e.margin;var y=e.multiline,_=y===void 0?!1:y,I=e.name,C=e.onBlur,b=e.onChange,B=e.onClick,R=e.onFocus,M=e.onKeyDown,U=e.onKeyUp,G=e.placeholder,Y=e.readOnly,Z=e.renderSuffix,oe=e.rows,ue=e.rowsMax,Ee=e.rowsMin,D=e.maxRows,X=e.minRows,P=e.startAdornment,L=e.type,O=L===void 0?"text":L,z=e.value,F=Qe(e,["aria-describedby","autoComplete","autoFocus","classes","className","color","defaultValue","disabled","endAdornment","error","fullWidth","id","inputComponent","inputProps","inputRef","margin","multiline","name","onBlur","onChange","onClick","onFocus","onKeyDown","onKeyUp","placeholder","readOnly","renderSuffix","rows","rowsMax","rowsMin","maxRows","minRows","startAdornment","type","value"]),V=p.value!=null?p.value:z,Q=S.useRef(V!=null),j=Q.current,ge=S.useRef(),ae=S.useCallback(function(Ct){},[]),ve=cn(p.ref,ae),fe=cn(m,ve),Ie=cn(ge,fe),Se=S.useState(!1),we=Se[0],_t=Se[1],he=f5(),Me=rb({props:e,muiFormControl:he,states:["color","disabled","error","hiddenLabel","margin","required","filled"]});Me.focused=he?he.focused:we,S.useEffect(function(){!he&&c&&we&&(_t(!1),C&&C())},[he,c,we,C]);var Vt=he&&he.onFilled,ht=he&&he.onEmpty,gt=S.useCallback(function(Ct){D5(Ct)?Vt&&Vt():ht&&ht()},[Vt,ht]);Q5(function(){j&&gt({value:V})},[V,gt,j]);var Fe=function(De){if(Me.disabled){De.stopPropagation();return}R&&R(De),p.onFocus&&p.onFocus(De),he&&he.onFocus?he.onFocus(De):_t(!0)},Pe=function(De){C&&C(De),p.onBlur&&p.onBlur(De),he&&he.onBlur?he.onBlur(De):_t(!1)},We=function(De){if(!j){var tr=De.target||ge.current;if(tr==null)throw new Error(Cc(1));gt({value:tr.value})}for(var vt=arguments.length,nr=new Array(vt>1?vt-1:0),rr=1;rr<vt;rr++)nr[rr-1]=arguments[rr];p.onChange&&p.onChange.apply(p,[De].concat(nr)),b&&b.apply(void 0,[De].concat(nr))};S.useEffect(function(){gt(ge.current)},[]);var rt=function(De){ge.current&&De.currentTarget===De.target&&ge.current.focus(),B&&B(De)},tn=A,jt=$({},p,{ref:Ie});typeof tn!="string"?jt=$({inputRef:Ie,type:O},jt,{ref:null}):_?oe&&!D&&!X&&!ue&&!Ee?tn="textarea":(jt=$({minRows:oe||X,rowsMax:ue,maxRows:D},jt),tn=O5):jt=$({type:O},jt);var Pi=function(De){gt(De.animationName==="mui-auto-fill-cancel"?ge.current:{value:"x"})};return S.useEffect(function(){he&&he.setAdornedStart(!!P)},[he,P]),S.createElement("div",$({className:ke(o.root,o["color".concat(Er(Me.color||"primary"))],a,Me.disabled&&o.disabled,Me.error&&o.error,d&&o.fullWidth,Me.focused&&o.focused,he&&o.formControl,_&&o.multiline,P&&o.adornedStart,u&&o.adornedEnd,Me.margin==="dense"&&o.marginDense),onClick:rt,ref:n},F),P,S.createElement(nb.Provider,{value:null},S.createElement(tn,$({"aria-invalid":Me.error,"aria-describedby":r,autoComplete:i,autoFocus:s,defaultValue:l,disabled:Me.disabled,id:h,onAnimationStart:Pi,name:I,placeholder:G,readOnly:Y,required:Me.required,rows:oe,value:V,onKeyDown:M,onKeyUp:U},jt,{className:ke(o.input,p.className,Me.disabled&&o.disabled,_&&o.inputMultiline,Me.hiddenLabel&&o.inputHiddenLabel,P&&o.inputAdornedStart,u&&o.inputAdornedEnd,O==="search"&&o.inputTypeSearch,Me.margin==="dense"&&o.inputMarginDense),onBlur:Pe,onChange:We,onFocus:Fe}))),u,Z?Z($({},Me,{startAdornment:P})):null)});const U5=Nt(k5,{name:"MuiInputBase"})(F5);var G5=[0,1,2,3,4,5,6,7,8,9,10],z5=["auto",!0,1,2,3,4,5,6,7,8,9,10,11,12];function V5(t,e,n){var r={};z5.forEach(function(i){var s="grid-".concat(n,"-").concat(i);if(i===!0){r[s]={flexBasis:0,flexGrow:1,maxWidth:"100%"};return}if(i==="auto"){r[s]={flexBasis:"auto",flexGrow:0,maxWidth:"none"};return}var o="".concat(Math.round(i/12*1e8)/1e6,"%");r[s]={flexBasis:o,flexGrow:0,maxWidth:o}}),n==="xs"?$(t,r):t[e.breakpoints.up(n)]=r}function CA(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1,n=parseFloat(t);return"".concat(n/e).concat(String(t).replace(String(n),"")||"px")}function j5(t,e){var n={};return G5.forEach(function(r){var i=t.spacing(r);i!==0&&(n["spacing-".concat(e,"-").concat(r)]={margin:"-".concat(CA(i,2)),width:"calc(100% + ".concat(CA(i),")"),"& > $item":{padding:CA(i,2)}})}),n}var H5=function(e){return $({root:{},container:{boxSizing:"border-box",display:"flex",flexWrap:"wrap",width:"100%"},item:{boxSizing:"border-box",margin:"0"},zeroMinWidth:{minWidth:0},"direction-xs-column":{flexDirection:"column"},"direction-xs-column-reverse":{flexDirection:"column-reverse"},"direction-xs-row-reverse":{flexDirection:"row-reverse"},"wrap-xs-nowrap":{flexWrap:"nowrap"},"wrap-xs-wrap-reverse":{flexWrap:"wrap-reverse"},"align-items-xs-center":{alignItems:"center"},"align-items-xs-flex-start":{alignItems:"flex-start"},"align-items-xs-flex-end":{alignItems:"flex-end"},"align-items-xs-baseline":{alignItems:"baseline"},"align-content-xs-center":{alignContent:"center"},"align-content-xs-flex-start":{alignContent:"flex-start"},"align-content-xs-flex-end":{alignContent:"flex-end"},"align-content-xs-space-between":{alignContent:"space-between"},"align-content-xs-space-around":{alignContent:"space-around"},"justify-content-xs-center":{justifyContent:"center"},"justify-content-xs-flex-end":{justifyContent:"flex-end"},"justify-content-xs-space-between":{justifyContent:"space-between"},"justify-content-xs-space-around":{justifyContent:"space-around"},"justify-content-xs-space-evenly":{justifyContent:"space-evenly"}},j5(e,"xs"),e.breakpoints.keys.reduce(function(n,r){return V5(n,e,r),n},{}))},W5=S.forwardRef(function(e,n){var r=e.alignContent,i=r===void 0?"stretch":r,s=e.alignItems,o=s===void 0?"stretch":s,a=e.classes,l=e.className,c=e.component,u=c===void 0?"div":c,f=e.container,d=f===void 0?!1:f,h=e.direction,g=h===void 0?"row":h,A=e.item,E=A===void 0?!1:A,p=e.justify,m=e.justifyContent,y=m===void 0?"flex-start":m,_=e.lg,I=_===void 0?!1:_,C=e.md,b=C===void 0?!1:C,B=e.sm,R=B===void 0?!1:B,M=e.spacing,U=M===void 0?0:M,G=e.wrap,Y=G===void 0?"wrap":G,Z=e.xl,oe=Z===void 0?!1:Z,ue=e.xs,Ee=ue===void 0?!1:ue,D=e.zeroMinWidth,X=D===void 0?!1:D,P=Qe(e,["alignContent","alignItems","classes","className","component","container","direction","item","justify","justifyContent","lg","md","sm","spacing","wrap","xl","xs","zeroMinWidth"]),L=ke(a.root,l,d&&[a.container,U!==0&&a["spacing-xs-".concat(String(U))]],E&&a.item,X&&a.zeroMinWidth,g!=="row"&&a["direction-xs-".concat(String(g))],Y!=="wrap"&&a["wrap-xs-".concat(String(Y))],o!=="stretch"&&a["align-items-xs-".concat(String(o))],i!=="stretch"&&a["align-content-xs-".concat(String(i))],(p||y)!=="flex-start"&&a["justify-content-xs-".concat(String(p||y))],Ee!==!1&&a["grid-xs-".concat(String(Ee))],R!==!1&&a["grid-sm-".concat(String(R))],b!==!1&&a["grid-md-".concat(String(b))],I!==!1&&a["grid-lg-".concat(String(I))],oe!==!1&&a["grid-xl-".concat(String(oe))]);return S.createElement(u,$({className:L,ref:n},P))}),Y5=Nt(H5,{name:"MuiGrid"})(W5);const ot=Y5;function L0(t){return"scale(".concat(t,", ").concat(Math.pow(t,2),")")}var $5={entering:{opacity:1,transform:L0(1)},entered:{opacity:1,transform:"none"}},ib=S.forwardRef(function(e,n){var r=e.children,i=e.disableStrictModeCompat,s=i===void 0?!1:i,o=e.in,a=e.onEnter,l=e.onEntered,c=e.onEntering,u=e.onExit,f=e.onExited,d=e.onExiting,h=e.style,g=e.timeout,A=g===void 0?"auto":g,E=e.TransitionComponent,p=E===void 0?XS:E,m=Qe(e,["children","disableStrictModeCompat","in","onEnter","onEntered","onEntering","onExit","onExited","onExiting","style","timeout","TransitionComponent"]),y=S.useRef(),_=S.useRef(),I=Zv(),C=I.unstable_strictMode&&!s,b=S.useRef(null),B=cn(r.ref,n),R=cn(C?b:void 0,B),M=function(X){return function(P,L){if(X){var O=C?[b.current,P]:[P,L],z=qh(O,2),F=z[0],V=z[1];V===void 0?X(F):X(F,V)}}},U=M(c),G=M(function(D,X){QN(D);var P=Nd({style:h,timeout:A},{mode:"enter"}),L=P.duration,O=P.delay,z;A==="auto"?(z=I.transitions.getAutoHeightDuration(D.clientHeight),_.current=z):z=L,D.style.transition=[I.transitions.create("opacity",{duration:z,delay:O}),I.transitions.create("transform",{duration:z*.666,delay:O})].join(","),a&&a(D,X)}),Y=M(l),Z=M(d),oe=M(function(D){var X=Nd({style:h,timeout:A},{mode:"exit"}),P=X.duration,L=X.delay,O;A==="auto"?(O=I.transitions.getAutoHeightDuration(D.clientHeight),_.current=O):O=P,D.style.transition=[I.transitions.create("opacity",{duration:O,delay:L}),I.transitions.create("transform",{duration:O*.666,delay:L||O*.333})].join(","),D.style.opacity="0",D.style.transform=L0(.75),u&&u(D)}),ue=M(f),Ee=function(X,P){var L=C?X:P;A==="auto"&&(y.current=setTimeout(L,_.current||0))};return S.useEffect(function(){return function(){clearTimeout(y.current)}},[]),S.createElement(p,$({appear:!0,in:o,nodeRef:C?b:void 0,onEnter:G,onEntered:Y,onEntering:U,onExit:oe,onExited:ue,onExiting:Z,addEndListener:Ee,timeout:A==="auto"?null:A},m),function(D,X){return S.cloneElement(r,$({style:$({opacity:0,transform:L0(.75),visibility:D==="exited"&&!o?"hidden":void 0},$5[D],h,r.props.style),ref:R},X))})});ib.muiSupportAuto=!0;const K5=ib;var q5=function(e){var n=e.palette.type==="light",r=n?"rgba(0, 0, 0, 0.42)":"rgba(255, 255, 255, 0.7)";return{root:{position:"relative"},formControl:{"label + &":{marginTop:16}},focused:{},disabled:{},colorSecondary:{"&$underline:after":{borderBottomColor:e.palette.secondary.main}},underline:{"&:after":{borderBottom:"2px solid ".concat(e.palette.primary.main),left:0,bottom:0,content:'""',position:"absolute",right:0,transform:"scaleX(0)",transition:e.transitions.create("transform",{duration:e.transitions.duration.shorter,easing:e.transitions.easing.easeOut}),pointerEvents:"none"},"&$focused:after":{transform:"scaleX(1)"},"&$error:after":{borderBottomColor:e.palette.error.main,transform:"scaleX(1)"},"&:before":{borderBottom:"1px solid ".concat(r),left:0,bottom:0,content:'"\\00a0"',position:"absolute",right:0,transition:e.transitions.create("border-bottom-color",{duration:e.transitions.duration.shorter}),pointerEvents:"none"},"&:hover:not($disabled):before":{borderBottom:"2px solid ".concat(e.palette.text.primary),"@media (hover: none)":{borderBottom:"1px solid ".concat(r)}},"&$disabled:before":{borderBottomStyle:"dotted"}},error:{},marginDense:{},multiline:{},fullWidth:{},input:{},inputMarginDense:{},inputMultiline:{},inputTypeSearch:{}}},sb=S.forwardRef(function(e,n){var r=e.disableUnderline,i=e.classes,s=e.fullWidth,o=s===void 0?!1:s,a=e.inputComponent,l=a===void 0?"input":a,c=e.multiline,u=c===void 0?!1:c,f=e.type,d=f===void 0?"text":f,h=Qe(e,["disableUnderline","classes","fullWidth","inputComponent","multiline","type"]);return S.createElement(U5,$({classes:$({},i,{root:ke(i.root,!r&&i.underline),underline:null}),fullWidth:o,inputComponent:l,multiline:u,ref:n,type:d},h))});sb.muiName="Input";const ty=Nt(q5,{name:"MuiInput"})(sb);function I_(t,e){var n=0;return typeof e=="number"?n=e:e==="center"?n=t.height/2:e==="bottom"&&(n=t.height),n}function w_(t,e){var n=0;return typeof e=="number"?n=e:e==="center"?n=t.width/2:e==="right"&&(n=t.width),n}function S_(t){return[t.horizontal,t.vertical].map(function(e){return typeof e=="number"?"".concat(e,"px"):e}).join(" ")}function X5(t,e){for(var n=e,r=0;n&&n!==t;)n=n.parentElement,r+=n.scrollTop;return r}function IA(t){return typeof t=="function"?t():t}var Z5={root:{},paper:{position:"absolute",overflowY:"auto",overflowX:"hidden",minWidth:16,minHeight:16,maxWidth:"calc(100% - 32px)",maxHeight:"calc(100% - 32px)",outline:0}},J5=S.forwardRef(function(e,n){var r=e.action,i=e.anchorEl,s=e.anchorOrigin,o=s===void 0?{vertical:"top",horizontal:"left"}:s,a=e.anchorPosition,l=e.anchorReference,c=l===void 0?"anchorEl":l,u=e.children,f=e.classes,d=e.className,h=e.container,g=e.elevation,A=g===void 0?8:g,E=e.getContentAnchorEl,p=e.marginThreshold,m=p===void 0?16:p,y=e.onEnter,_=e.onEntered,I=e.onEntering,C=e.onExit,b=e.onExited,B=e.onExiting,R=e.open,M=e.PaperProps,U=M===void 0?{}:M,G=e.transformOrigin,Y=G===void 0?{vertical:"top",horizontal:"left"}:G,Z=e.TransitionComponent,oe=Z===void 0?K5:Z,ue=e.transitionDuration,Ee=ue===void 0?"auto":ue,D=e.TransitionProps,X=D===void 0?{}:D,P=Qe(e,["action","anchorEl","anchorOrigin","anchorPosition","anchorReference","children","classes","className","container","elevation","getContentAnchorEl","marginThreshold","onEnter","onEntered","onEntering","onExit","onExited","onExiting","open","PaperProps","transformOrigin","TransitionComponent","transitionDuration","TransitionProps"]),L=S.useRef(),O=S.useCallback(function(fe){if(c==="anchorPosition")return a;var Ie=IA(i),Se=Ie&&Ie.nodeType===1?Ie:dr(L.current).body,we=Se.getBoundingClientRect(),_t=fe===0?o.vertical:"center";return{top:we.top+I_(we,_t),left:we.left+w_(we,o.horizontal)}},[i,o.horizontal,o.vertical,a,c]),z=S.useCallback(function(fe){var Ie=0;if(E&&c==="anchorEl"){var Se=E(fe);if(Se&&fe.contains(Se)){var we=X5(fe,Se);Ie=Se.offsetTop+Se.clientHeight/2-we||0}}return Ie},[o.vertical,c,E]),F=S.useCallback(function(fe){var Ie=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return{vertical:I_(fe,Y.vertical)+Ie,horizontal:w_(fe,Y.horizontal)}},[Y.horizontal,Y.vertical]),V=S.useCallback(function(fe){var Ie=z(fe),Se={width:fe.offsetWidth,height:fe.offsetHeight},we=F(Se,Ie);if(c==="none")return{top:null,left:null,transformOrigin:S_(we)};var _t=O(Ie),he=_t.top-we.vertical,Me=_t.left-we.horizontal,Vt=he+Se.height,ht=Me+Se.width,gt=$S(IA(i)),Fe=gt.innerHeight-m,Pe=gt.innerWidth-m;if(he<m){var We=he-m;he-=We,we.vertical+=We}else if(Vt>Fe){var rt=Vt-Fe;he-=rt,we.vertical+=rt}if(Me<m){var tn=Me-m;Me-=tn,we.horizontal+=tn}else if(ht>Pe){var jt=ht-Pe;Me-=jt,we.horizontal+=jt}return{top:"".concat(Math.round(he),"px"),left:"".concat(Math.round(Me),"px"),transformOrigin:S_(we)}},[i,c,O,z,F,m]),Q=S.useCallback(function(){var fe=L.current;if(fe){var Ie=V(fe);Ie.top!==null&&(fe.style.top=Ie.top),Ie.left!==null&&(fe.style.left=Ie.left),fe.style.transformOrigin=Ie.transformOrigin}},[V]),j=function(Ie,Se){I&&I(Ie,Se),Q()},ge=S.useCallback(function(fe){L.current=wi.findDOMNode(fe)},[]);S.useEffect(function(){R&&Q()}),S.useImperativeHandle(r,function(){return R?{updatePosition:function(){Q()}}:null},[R,Q]),S.useEffect(function(){if(R){var fe=YS(function(){Q()});return window.addEventListener("resize",fe),function(){fe.clear(),window.removeEventListener("resize",fe)}}},[R,Q]);var ae=Ee;Ee==="auto"&&!oe.muiSupportAuto&&(ae=void 0);var ve=h||(i?dr(IA(i)).body:void 0);return S.createElement(B5,$({container:ve,open:R,ref:n,BackdropProps:{invisible:!0},className:ke(f.root,d)},P),S.createElement(oe,$({appear:!0,in:R,onEnter:y,onEntered:_,onExit:C,onExited:b,onExiting:B,timeout:ae},X,{onEntering:T0(j,X.onEntering)}),S.createElement(nu,$({elevation:A,ref:ge},U,{className:ke(f.paper,U.className)}),u)))});const ny=Nt(Z5,{name:"MuiPopover"})(J5);var e8=S.forwardRef(function(e,n){var r=e.classes,i=e.className,s=e.disabled,o=e.IconComponent,a=e.inputRef,l=e.variant,c=l===void 0?"standard":l,u=Qe(e,["classes","className","disabled","IconComponent","inputRef","variant"]);return S.createElement(S.Fragment,null,S.createElement("select",$({className:ke(r.root,r.select,r[c],i,s&&r.disabled),disabled:s,ref:a||n},u)),e.multiple?null:S.createElement(o,{className:ke(r.icon,r["icon".concat(Er(c))],s&&r.disabled)}))});const t8=e8,n8=Si(S.createElement("path",{d:"M7 10l5 5 5-5z"}));var r8=function(e){return{root:{},select:{"-moz-appearance":"none","-webkit-appearance":"none",userSelect:"none",borderRadius:0,minWidth:16,cursor:"pointer","&:focus":{backgroundColor:e.palette.type==="light"?"rgba(0, 0, 0, 0.05)":"rgba(255, 255, 255, 0.05)",borderRadius:0},"&::-ms-expand":{display:"none"},"&$disabled":{cursor:"default"},"&[multiple]":{height:"auto"},"&:not([multiple]) option, &:not([multiple]) optgroup":{backgroundColor:e.palette.background.paper},"&&":{paddingRight:24}},filled:{"&&":{paddingRight:32}},outlined:{borderRadius:e.shape.borderRadius,"&&":{paddingRight:32}},selectMenu:{height:"auto",minHeight:"1.1876em",textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden"},disabled:{},icon:{position:"absolute",right:0,top:"calc(50% - 12px)",pointerEvents:"none",color:e.palette.action.active,"&$disabled":{color:e.palette.action.disabled}},iconOpen:{transform:"rotate(180deg)"},iconFilled:{right:7},iconOutlined:{right:7},nativeInput:{bottom:0,left:0,position:"absolute",opacity:0,pointerEvents:"none",width:"100%"}}},i8=S.createElement(ty,null),ob=S.forwardRef(function(e,n){var r=e.children,i=e.classes,s=e.IconComponent,o=s===void 0?n8:s,a=e.input,l=a===void 0?i8:a,c=e.inputProps;e.variant;var u=Qe(e,["children","classes","IconComponent","input","inputProps","variant"]),f=d5(),d=rb({props:e,muiFormControl:f,states:["variant"]});return S.cloneElement(l,$({inputComponent:t8,inputProps:$({children:r,classes:i,IconComponent:o,variant:d.variant,type:void 0},c,l?l.props.inputProps:{}),ref:n},u))});ob.muiName="Select";const ry=Nt(r8,{name:"MuiNativeSelect"})(ob);var s8=function(e){return{thumb:{"&$open":{"& $offset":{transform:"scale(1) translateY(-10px)"}}},open:{},offset:$({zIndex:1},e.typography.body2,{fontSize:e.typography.pxToRem(12),lineHeight:1.2,transition:e.transitions.create(["transform"],{duration:e.transitions.duration.shortest}),top:-34,transformOrigin:"bottom center",transform:"scale(0)",position:"absolute"}),circle:{display:"flex",alignItems:"center",justifyContent:"center",width:32,height:32,borderRadius:"50% 50% 50% 0",backgroundColor:"currentColor",transform:"rotate(-45deg)"},label:{color:e.palette.primary.contrastText,transform:"rotate(45deg)"}}};function o8(t){var e=t.children,n=t.classes,r=t.className,i=t.open,s=t.value,o=t.valueLabelDisplay;return o==="off"?e:S.cloneElement(e,{className:ke(e.props.className,(i||o==="on")&&n.open,n.thumb)},S.createElement("span",{className:ke(n.offset,r)},S.createElement("span",{className:n.circle},S.createElement("span",{className:n.label},s))))}const a8=Nt(s8,{name:"PrivateValueLabel"})(o8);function wA(t,e){return t-e}function SA(t,e,n){return Math.min(Math.max(e,t),n)}function b_(t,e){var n=t.reduce(function(i,s,o){var a=Math.abs(e-s);return i===null||a<i.distance||a===i.distance?{distance:a,index:o}:i},null),r=n.index;return r}function $u(t,e){if(e.current!==void 0&&t.changedTouches){for(var n=0;n<t.changedTouches.length;n+=1){var r=t.changedTouches[n];if(r.identifier===e.current)return{x:r.clientX,y:r.clientY}}return!1}return{x:t.clientX,y:t.clientY}}function Ku(t,e,n){return(t-e)*100/(n-e)}function l8(t,e,n){return(n-e)*t+e}function c8(t){if(Math.abs(t)<1){var e=t.toExponential().split("e-"),n=e[0].split(".")[1];return(n?n.length:0)+parseInt(e[1],10)}var r=t.toString().split(".")[1];return r?r.length:0}function T_(t,e,n){var r=Math.round((t-n)/e)*e+n;return Number(r.toFixed(c8(e)))}function B_(t){var e=t.values,n=t.source,r=t.newValue,i=t.index;if(e[i]===r)return n;var s=e.slice();return s[i]=r,s}function qu(t){var e=t.sliderRef,n=t.activeIndex,r=t.setActive;(!e.current.contains(document.activeElement)||Number(document.activeElement.getAttribute("data-index"))!==n)&&e.current.querySelector('[role="slider"][data-index="'.concat(n,'"]')).focus(),r&&r(n)}var Xu={horizontal:{offset:function(e){return{left:"".concat(e,"%")}},leap:function(e){return{width:"".concat(e,"%")}}},"horizontal-reverse":{offset:function(e){return{right:"".concat(e,"%")}},leap:function(e){return{width:"".concat(e,"%")}}},vertical:{offset:function(e){return{bottom:"".concat(e,"%")}},leap:function(e){return{height:"".concat(e,"%")}}}},R_=function(e){return e},u8=function(e){return{root:{height:2,width:"100%",boxSizing:"content-box",padding:"13px 0",display:"inline-block",position:"relative",cursor:"pointer",touchAction:"none",color:e.palette.primary.main,WebkitTapHighlightColor:"transparent","&$disabled":{pointerEvents:"none",cursor:"default",color:e.palette.grey[400]},"&$vertical":{width:2,height:"100%",padding:"0 13px"},"@media (pointer: coarse)":{padding:"20px 0","&$vertical":{padding:"0 20px"}},"@media print":{colorAdjust:"exact"}},colorPrimary:{},colorSecondary:{color:e.palette.secondary.main},marked:{marginBottom:20,"&$vertical":{marginBottom:"auto",marginRight:20}},vertical:{},disabled:{},rail:{display:"block",position:"absolute",width:"100%",height:2,borderRadius:1,backgroundColor:"currentColor",opacity:.38,"$vertical &":{height:"100%",width:2}},track:{display:"block",position:"absolute",height:2,borderRadius:1,backgroundColor:"currentColor","$vertical &":{width:2}},trackFalse:{"& $track":{display:"none"}},trackInverted:{"& $track":{backgroundColor:e.palette.type==="light"?FS(e.palette.primary.main,.62):QS(e.palette.primary.main,.5)},"& $rail":{opacity:1}},thumb:{position:"absolute",width:12,height:12,marginLeft:-6,marginTop:-5,boxSizing:"border-box",borderRadius:"50%",outline:0,backgroundColor:"currentColor",display:"flex",alignItems:"center",justifyContent:"center",transition:e.transitions.create(["box-shadow"],{duration:e.transitions.duration.shortest}),"&::after":{position:"absolute",content:'""',borderRadius:"50%",left:-15,top:-15,right:-15,bottom:-15},"&$focusVisible,&:hover":{boxShadow:"0px 0px 0px 8px ".concat(qi(e.palette.primary.main,.16)),"@media (hover: none)":{boxShadow:"none"}},"&$active":{boxShadow:"0px 0px 0px 14px ".concat(qi(e.palette.primary.main,.16))},"&$disabled":{width:8,height:8,marginLeft:-4,marginTop:-3,"&:hover":{boxShadow:"none"}},"$vertical &":{marginLeft:-5,marginBottom:-6},"$vertical &$disabled":{marginLeft:-3,marginBottom:-4}},thumbColorPrimary:{},thumbColorSecondary:{"&$focusVisible,&:hover":{boxShadow:"0px 0px 0px 8px ".concat(qi(e.palette.secondary.main,.16))},"&$active":{boxShadow:"0px 0px 0px 14px ".concat(qi(e.palette.secondary.main,.16))}},active:{},focusVisible:{},valueLabel:{left:"calc(-50% - 4px)"},mark:{position:"absolute",width:2,height:2,borderRadius:1,backgroundColor:"currentColor"},markActive:{backgroundColor:e.palette.background.paper,opacity:.8},markLabel:$({},e.typography.body2,{color:e.palette.text.secondary,position:"absolute",top:26,transform:"translateX(-50%)",whiteSpace:"nowrap","$vertical &":{top:"auto",left:26,transform:"translateY(50%)"},"@media (pointer: coarse)":{top:40,"$vertical &":{left:31}}}),markLabelActive:{color:e.palette.text.primary}}},f8=S.forwardRef(function(e,n){var r=e["aria-label"],i=e["aria-labelledby"],s=e["aria-valuetext"],o=e.classes,a=e.className,l=e.color,c=l===void 0?"primary":l,u=e.component,f=u===void 0?"span":u,d=e.defaultValue,h=e.disabled,g=h===void 0?!1:h,A=e.getAriaLabel,E=e.getAriaValueText,p=e.marks,m=p===void 0?!1:p,y=e.max,_=y===void 0?100:y,I=e.min,C=I===void 0?0:I,b=e.name,B=e.onChange,R=e.onChangeCommitted,M=e.onMouseDown,U=e.orientation,G=U===void 0?"horizontal":U,Y=e.scale,Z=Y===void 0?R_:Y,oe=e.step,ue=oe===void 0?1:oe,Ee=e.ThumbComponent,D=Ee===void 0?"span":Ee,X=e.track,P=X===void 0?"normal":X,L=e.value,O=e.ValueLabelComponent,z=O===void 0?a8:O,F=e.valueLabelDisplay,V=F===void 0?"off":F,Q=e.valueLabelFormat,j=Q===void 0?R_:Q,ge=Qe(e,["aria-label","aria-labelledby","aria-valuetext","classes","className","color","component","defaultValue","disabled","getAriaLabel","getAriaValueText","marks","max","min","name","onChange","onChangeCommitted","onMouseDown","orientation","scale","step","ThumbComponent","track","value","ValueLabelComponent","valueLabelDisplay","valueLabelFormat"]),ae=Zv(),ve=S.useRef(),fe=S.useState(-1),Ie=fe[0],Se=fe[1],we=S.useState(-1),_t=we[0],he=we[1],Me=KS({controlled:L,default:d,name:"Slider"}),Vt=qh(Me,2),ht=Vt[0],gt=Vt[1],Fe=Array.isArray(ht),Pe=Fe?ht.slice().sort(wA):[ht];Pe=Pe.map(function(ce){return SA(ce,C,_)});var We=m===!0&&ue!==null?Qh(Array(Math.floor((_-C)/ue)+1)).map(function(ce,Ae){return{value:C+ue*Ae}}):m||[],rt=qS(),tn=rt.isFocusVisible,jt=rt.onBlurVisible,Pi=rt.ref,Ct=S.useState(-1),De=Ct[0],tr=Ct[1],vt=S.useRef(),nr=cn(Pi,vt),rr=cn(n,nr),tl=$t(function(ce){var Ae=Number(ce.currentTarget.getAttribute("data-index"));tn(ce)&&tr(Ae),he(Ae)}),nl=$t(function(){De!==-1&&(tr(-1),jt()),he(-1)}),rl=$t(function(ce){var Ae=Number(ce.currentTarget.getAttribute("data-index"));he(Ae)}),ye=$t(function(){he(-1)}),gn=ae.direction==="rtl",il=$t(function(ce){var Ae=Number(ce.currentTarget.getAttribute("data-index")),it=Pe[Ae],lt=(_-C)/10,ze=We.map(function(Bo){return Bo.value}),An=ze.indexOf(it),Ye,bo=gn?"ArrowLeft":"ArrowRight",Li=gn?"ArrowRight":"ArrowLeft";switch(ce.key){case"Home":Ye=C;break;case"End":Ye=_;break;case"PageUp":ue&&(Ye=it+lt);break;case"PageDown":ue&&(Ye=it-lt);break;case bo:case"ArrowUp":ue?Ye=it+ue:Ye=ze[An+1]||ze[ze.length-1];break;case Li:case"ArrowDown":ue?Ye=it-ue:Ye=ze[An-1]||ze[0];break;default:return}if(ce.preventDefault(),ue&&(Ye=T_(Ye,ue,C)),Ye=SA(Ye,C,_),Fe){var To=Ye;Ye=B_({values:Pe,source:ht,newValue:Ye,index:Ae}).sort(wA),qu({sliderRef:vt,activeIndex:Ye.indexOf(To)})}gt(Ye),tr(Ae),B&&B(ce,Ye),R&&R(ce,Ye)}),Rs=S.useRef(),Un=G;gn&&G!=="vertical"&&(Un+="-reverse");var Ps=function(Ae){var it=Ae.finger,lt=Ae.move,ze=lt===void 0?!1:lt,An=Ae.values,Ye=Ae.source,bo=vt.current,Li=bo.getBoundingClientRect(),To=Li.width,Bo=Li.height,Eu=Li.bottom,_u=Li.left,$r;Un.indexOf("vertical")===0?$r=(Eu-it.y)/Bo:$r=(it.x-_u)/To,Un.indexOf("-reverse")!==-1&&($r=1-$r);var yt;if(yt=l8($r,C,_),ue)yt=T_(yt,ue,C);else{var Mi=We.map(function(xg){return xg.value}),Ls=b_(Mi,yt);yt=Mi[Ls]}yt=SA(yt,C,_);var sr=0;if(Fe){ze?sr=Rs.current:sr=b_(An,yt);var al=yt;yt=B_({values:An,source:Ye,newValue:yt,index:sr}).sort(wA),sr=yt.indexOf(al),Rs.current=sr}return{newValue:yt,activeIndex:sr}},ir=$t(function(ce){var Ae=$u(ce,ve);if(Ae){var it=Ps({finger:Ae,move:!0,values:Pe,source:ht}),lt=it.newValue,ze=it.activeIndex;qu({sliderRef:vt,activeIndex:ze,setActive:Se}),gt(lt),B&&B(ce,lt)}}),Yr=$t(function(ce){var Ae=$u(ce,ve);if(Ae){var it=Ps({finger:Ae,values:Pe,source:ht}),lt=it.newValue;Se(-1),ce.type==="touchend"&&he(-1),R&&R(ce,lt),ve.current=void 0;var ze=dr(vt.current);ze.removeEventListener("mousemove",ir),ze.removeEventListener("mouseup",Yr),ze.removeEventListener("touchmove",ir),ze.removeEventListener("touchend",Yr)}}),sl=$t(function(ce){ce.preventDefault();var Ae=ce.changedTouches[0];Ae!=null&&(ve.current=Ae.identifier);var it=$u(ce,ve),lt=Ps({finger:it,values:Pe,source:ht}),ze=lt.newValue,An=lt.activeIndex;qu({sliderRef:vt,activeIndex:An,setActive:Se}),gt(ze),B&&B(ce,ze);var Ye=dr(vt.current);Ye.addEventListener("touchmove",ir),Ye.addEventListener("touchend",Yr)});S.useEffect(function(){var ce=vt.current;ce.addEventListener("touchstart",sl);var Ae=dr(ce);return function(){ce.removeEventListener("touchstart",sl),Ae.removeEventListener("mousemove",ir),Ae.removeEventListener("mouseup",Yr),Ae.removeEventListener("touchmove",ir),Ae.removeEventListener("touchend",Yr)}},[Yr,ir,sl]);var yg=$t(function(ce){M&&M(ce),ce.preventDefault();var Ae=$u(ce,ve),it=Ps({finger:Ae,values:Pe,source:ht}),lt=it.newValue,ze=it.activeIndex;qu({sliderRef:vt,activeIndex:ze,setActive:Se}),gt(lt),B&&B(ce,lt);var An=dr(vt.current);An.addEventListener("mousemove",ir),An.addEventListener("mouseup",Yr)}),ol=Ku(Fe?Pe[0]:C,C,_),Eg=Ku(Pe[Pe.length-1],C,_)-ol,_g=$({},Xu[Un].offset(ol),Xu[Un].leap(Eg));return S.createElement(f,$({ref:rr,className:ke(o.root,o["color".concat(Er(c))],a,g&&o.disabled,We.length>0&&We.some(function(ce){return ce.label})&&o.marked,P===!1&&o.trackFalse,G==="vertical"&&o.vertical,P==="inverted"&&o.trackInverted),onMouseDown:yg},ge),S.createElement("span",{className:o.rail}),S.createElement("span",{className:o.track,style:_g}),S.createElement("input",{value:Pe.join(","),name:b,type:"hidden"}),We.map(function(ce,Ae){var it=Ku(ce.value,C,_),lt=Xu[Un].offset(it),ze;return P===!1?ze=Pe.indexOf(ce.value)!==-1:ze=P==="normal"&&(Fe?ce.value>=Pe[0]&&ce.value<=Pe[Pe.length-1]:ce.value<=Pe[0])||P==="inverted"&&(Fe?ce.value<=Pe[0]||ce.value>=Pe[Pe.length-1]:ce.value>=Pe[0]),S.createElement(S.Fragment,{key:ce.value},S.createElement("span",{style:lt,"data-index":Ae,className:ke(o.mark,ze&&o.markActive)}),ce.label!=null?S.createElement("span",{"aria-hidden":!0,"data-index":Ae,style:lt,className:ke(o.markLabel,ze&&o.markLabelActive)},ce.label):null)}),Pe.map(function(ce,Ae){var it=Ku(ce,C,_),lt=Xu[Un].offset(it);return S.createElement(z,{key:Ae,valueLabelFormat:j,valueLabelDisplay:V,className:o.valueLabel,value:typeof j=="function"?j(Z(ce),Ae):j,index:Ae,open:_t===Ae||Ie===Ae||V==="on",disabled:g},S.createElement(D,{className:ke(o.thumb,o["thumbColor".concat(Er(c))],Ie===Ae&&o.active,g&&o.disabled,De===Ae&&o.focusVisible),tabIndex:g?null:0,role:"slider",style:lt,"data-index":Ae,"aria-label":A?A(Ae):r,"aria-labelledby":i,"aria-orientation":G,"aria-valuemax":Z(_),"aria-valuemin":Z(C),"aria-valuenow":Z(ce),"aria-valuetext":E?E(Z(ce),Ae):s,onKeyDown:il,onFocus:tl,onBlur:nl,onMouseOver:rl,onMouseLeave:ye}))}))});const iy=Nt(u8,{name:"MuiSlider"})(f8),ab=Si(S.createElement("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"})),d8=Si(S.createElement("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2z"})),lb=Si(S.createElement("path",{d:"M6 10c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm12 0c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm-6 0c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"})),h8=Si(S.createElement("path",{d:"M12 7c-2.76 0-5 2.24-5 5s2.24 5 5 5 5-2.24 5-5-2.24-5-5-5zm0-5C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"})),g8=Si(S.createElement("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"})),cb=Si(S.createElement("path",{d:"M19 13H5v-2h14v2z"})),A8=Si(S.createElement("path",{d:"M12 4.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5zM12 17c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5zm0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z"})),p8=Si(S.createElement("path",{d:"M12 7c2.76 0 5 2.24 5 5 0 .65-.13 1.26-.36 1.83l2.92 2.92c1.51-1.26 2.7-2.89 3.43-4.75-1.73-4.39-6-7.5-11-7.5-1.4 0-2.74.25-3.98.7l2.16 2.16C10.74 7.13 11.35 7 12 7zM2 4.27l2.28 2.28.46.46C3.08 8.3 1.78 10.02 1 12c1.73 4.39 6 7.5 11 7.5 1.55 0 3.03-.3 4.38-.84l.42.42L19.73 22 21 20.73 3.27 3 2 4.27zM7.53 9.8l1.55 1.55c-.05.21-.08.43-.08.65 0 1.66 1.34 3 3 3 .22 0 .44-.03.65-.08l1.55 1.55c-.67.33-1.41.53-2.2.53-2.76 0-5-2.24-5-5 0-.79.2-1.53.53-2.2zm4.31-.78l3.15 3.15.02-.16c0-1.66-1.34-3-3-3l-.17.01z"}));function m8(t,e){let n=null;const r=new Map,i=s=>{let o;if(e===void 0)o=r.get(s);else for(const[l,c]of r)if(e(l,s)){o=c;break}if(o!==void 0)if(n!=null&&n(o[1],s))i.remove(s);else return o[0];const a=t(s);return r.set(s,[a,Date.now()]),a};return i.remove=s=>{if(e===void 0)r.delete(s);else for(const[o]of r)if(e(o,s)){r.delete(o);break}},i.setShouldRemove=s=>{if(n=s,!!n)for(const[o,a]of r)n(a[1],o)&&r.delete(o)},i}const v8=(t,e)=>{do{const[n,...r]=e,i=t.get(n);if(!i)return;if(!r.length)return i[1];t=i[0],e=r}while(e.length)},y8=(t,e,n)=>{do{const[r,...i]=e;let s=t.get(r);if(s||(s=[new WeakMap],t.set(r,s)),!i.length){s[1]=n;return}t=s[0],e=i}while(e.length)},ub=()=>{const t=new WeakMap;return(n,r)=>{const i=v8(t,r);if(i)return i;const s=n();return y8(t,r,s),s}},E8=ub(),P_=t=>!!t.write,_8=t=>typeof t=="function";function x8(t,e){return E8(()=>{const n=new WeakMap,r=(l,c)=>{let u=n.get(l);if(u)return u;const f=c&&n.get(c),d=[],h=[];return l.forEach((g,A)=>{const E=e?e(g):A;h[A]=E;const p=f&&f.atomList[f.keyList.indexOf(E)];if(p){d[A]=p;return}const m=_=>{const I=_(i),C=_(t),B=r(C,I.prev).keyList.indexOf(E);if(B<0||B>=C.length){const R=l[r(l).keyList.indexOf(E)];if(R)return R;throw new Error("splitAtom: index out of bounds for read")}return C[B]},y=(_,I,C)=>{const b=_(i),B=_(t),M=r(B,b.prev).keyList.indexOf(E);if(M<0||M>=B.length)throw new Error("splitAtom: index out of bounds for write");const U=_8(C)?C(B[M]):C;I(t,[...B.slice(0,M),U,...B.slice(M+1)])};d[A]=P_(t)?Bn(m,y):Bn(m)}),f&&f.keyList.length===h.length&&f.keyList.every((g,A)=>g===h[A])?u=f:u={atomList:d,keyList:h},n.set(l,u),u},i=Bn(()=>({})),s=l=>{const c=l(i),u=l(t),f=r(u,c.prev);return c.prev=u,f.atomList},o=(l,c,u)=>{switch("read"in u&&(console.warn("atomToRemove is deprecated. use action with type"),u={type:"remove",atom:u}),u.type){case"remove":{const f=l(a).indexOf(u.atom);if(f>=0){const d=l(t);c(t,[...d.slice(0,f),...d.slice(f+1)])}break}case"insert":{const f=u.before?l(a).indexOf(u.before):l(a).length;if(f>=0){const d=l(t);c(t,[...d.slice(0,f),u.value,...d.slice(f)])}break}case"move":{const f=l(a).indexOf(u.atom),d=u.before?l(a).indexOf(u.before):l(a).length;if(f>=0&&d>=0){const h=l(t);f<d?c(t,[...h.slice(0,f),...h.slice(f+1,d),h[f],...h.slice(d)]):c(t,[...h.slice(0,d),h[f],...h.slice(d,f),...h.slice(f+1)])}break}}},a=P_(t)?Bn(s,o):Bn(s);return a},e?[t,e]:[t])}const C8=ub(),I8=Bn(()=>[]);function w8(t){const e=()=>{const n=S8(t);return Bn(i=>{const s=[],o=n.map((a,l)=>{try{return i(a)}catch(c){if(c instanceof Promise)s[l]=c;else throw c}});if(s.length)throw Promise.all(s);return b8(t,o)})};return Array.isArray(t)?t.length?C8(e,t):I8:e()}const S8=t=>Array.isArray(t)?t:Object.getOwnPropertyNames(t).map(e=>t[e]),b8=(t,e)=>Array.isArray(t)?e:Object.getOwnPropertyNames(t).reduce((n,r,i)=>({...n,[r]:e[i]}),{});function Od(t,e){if(!t)throw new Error(e||"loader assertion failed.")}const sy=!!(typeof process!="object"||String(process)!=="[object process]"||process.browser),L_=typeof process<"u"&&process.version&&/v([0-9]*)/.exec(process.version);L_&&parseFloat(L_[1]);const T8="3.4.14";function vi(t,e){if(!t)throw new Error(e||"loaders.gl assertion failed.")}const Vf=typeof process!="object"||String(process)!=="[object process]"||process.browser,B8=typeof window<"u"&&typeof window.orientation<"u",M_=typeof process<"u"&&process.version&&/v([0-9]*)/.exec(process.version);M_&&parseFloat(M_[1]);class R8{constructor(e,n){v(this,"name",void 0),v(this,"workerThread",void 0),v(this,"isRunning",!0),v(this,"result",void 0),v(this,"_resolve",()=>{}),v(this,"_reject",()=>{}),this.name=e,this.workerThread=n,this.result=new Promise((r,i)=>{this._resolve=r,this._reject=i})}postMessage(e,n){this.workerThread.postMessage({source:"loaders.gl",type:e,payload:n})}done(e){vi(this.isRunning),this.isRunning=!1,this._resolve(e)}error(e){vi(this.isRunning),this.isRunning=!1,this._reject(e)}}let bA=class{terminate(){}};const TA=new Map;function P8(t){vi(t.source&&!t.url||!t.source&&t.url);let e=TA.get(t.source||t.url);return e||(t.url&&(e=L8(t.url),TA.set(t.url,e)),t.source&&(e=fb(t.source),TA.set(t.source,e))),vi(e),e}function L8(t){if(!t.startsWith("http"))return t;const e=M8(t);return fb(e)}function fb(t){const e=new Blob([t],{type:"application/javascript"});return URL.createObjectURL(e)}function M8(t){return`try {
  importScripts('`.concat(t,`');
} catch (error) {
  console.error(error);
  throw error;
}`)}function db(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,n=arguments.length>2?arguments[2]:void 0;const r=n||new Set;if(t){if(N_(t))r.add(t);else if(N_(t.buffer))r.add(t.buffer);else if(!ArrayBuffer.isView(t)){if(e&&typeof t=="object")for(const i in t)db(t[i],e,r)}}return n===void 0?Array.from(r):[]}function N_(t){return t?t instanceof ArrayBuffer||typeof MessagePort<"u"&&t instanceof MessagePort||typeof ImageBitmap<"u"&&t instanceof ImageBitmap||typeof OffscreenCanvas<"u"&&t instanceof OffscreenCanvas:!1}const BA=()=>{};class M0{static isSupported(){return typeof Worker<"u"&&Vf||typeof bA<"u"&&!Vf}constructor(e){v(this,"name",void 0),v(this,"source",void 0),v(this,"url",void 0),v(this,"terminated",!1),v(this,"worker",void 0),v(this,"onMessage",void 0),v(this,"onError",void 0),v(this,"_loadableURL","");const{name:n,source:r,url:i}=e;vi(r||i),this.name=n,this.source=r,this.url=i,this.onMessage=BA,this.onError=s=>console.log(s),this.worker=Vf?this._createBrowserWorker():this._createNodeWorker()}destroy(){this.onMessage=BA,this.onError=BA,this.worker.terminate(),this.terminated=!0}get isRunning(){return!!this.onMessage}postMessage(e,n){n=n||db(e),this.worker.postMessage(e,n)}_getErrorFromErrorEvent(e){let n="Failed to load ";return n+="worker ".concat(this.name," from ").concat(this.url,". "),e.message&&(n+="".concat(e.message," in ")),e.lineno&&(n+=":".concat(e.lineno,":").concat(e.colno)),new Error(n)}_createBrowserWorker(){this._loadableURL=P8({source:this.source,url:this.url});const e=new Worker(this._loadableURL,{name:this.name});return e.onmessage=n=>{n.data?this.onMessage(n.data):this.onError(new Error("No data received"))},e.onerror=n=>{this.onError(this._getErrorFromErrorEvent(n)),this.terminated=!0},e.onmessageerror=n=>console.error(n),e}_createNodeWorker(){let e;if(this.url){const r=this.url.includes(":/")||this.url.startsWith("/")?this.url:"./".concat(this.url);e=new bA(r,{eval:!1})}else if(this.source)e=new bA(this.source,{eval:!0});else throw new Error("no worker");return e.on("message",n=>{this.onMessage(n)}),e.on("error",n=>{this.onError(n)}),e.on("exit",n=>{}),e}}class N8{static isSupported(){return M0.isSupported()}constructor(e){v(this,"name","unnamed"),v(this,"source",void 0),v(this,"url",void 0),v(this,"maxConcurrency",1),v(this,"maxMobileConcurrency",1),v(this,"onDebug",()=>{}),v(this,"reuseWorkers",!0),v(this,"props",{}),v(this,"jobQueue",[]),v(this,"idleQueue",[]),v(this,"count",0),v(this,"isDestroyed",!1),this.source=e.source,this.url=e.url,this.setProps(e)}destroy(){this.idleQueue.forEach(e=>e.destroy()),this.isDestroyed=!0}setProps(e){this.props={...this.props,...e},e.name!==void 0&&(this.name=e.name),e.maxConcurrency!==void 0&&(this.maxConcurrency=e.maxConcurrency),e.maxMobileConcurrency!==void 0&&(this.maxMobileConcurrency=e.maxMobileConcurrency),e.reuseWorkers!==void 0&&(this.reuseWorkers=e.reuseWorkers),e.onDebug!==void 0&&(this.onDebug=e.onDebug)}async startJob(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:(s,o,a)=>s.done(a),r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:(s,o)=>s.error(o);const i=new Promise(s=>(this.jobQueue.push({name:e,onMessage:n,onError:r,onStart:s}),this));return this._startQueuedJob(),await i}async _startQueuedJob(){if(!this.jobQueue.length)return;const e=this._getAvailableWorker();if(!e)return;const n=this.jobQueue.shift();if(n){this.onDebug({message:"Starting job",name:n.name,workerThread:e,backlog:this.jobQueue.length});const r=new R8(n.name,e);e.onMessage=i=>n.onMessage(r,i.type,i.payload),e.onError=i=>n.onError(r,i),n.onStart(r);try{await r.result}finally{this.returnWorkerToQueue(e)}}}returnWorkerToQueue(e){this.isDestroyed||!this.reuseWorkers||this.count>this._getMaxConcurrency()?(e.destroy(),this.count--):this.idleQueue.push(e),this.isDestroyed||this._startQueuedJob()}_getAvailableWorker(){if(this.idleQueue.length>0)return this.idleQueue.shift()||null;if(this.count<this._getMaxConcurrency()){this.count++;const e="".concat(this.name.toLowerCase()," (#").concat(this.count," of ").concat(this.maxConcurrency,")");return new M0({name:e,source:this.source,url:this.url})}return null}_getMaxConcurrency(){return B8?this.maxMobileConcurrency:this.maxConcurrency}}const O8={maxConcurrency:3,maxMobileConcurrency:1,reuseWorkers:!0,onDebug:()=>{}};class ni{static isSupported(){return M0.isSupported()}static getWorkerFarm(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return ni._workerFarm=ni._workerFarm||new ni({}),ni._workerFarm.setProps(e),ni._workerFarm}constructor(e){v(this,"props",void 0),v(this,"workerPools",new Map),this.props={...O8},this.setProps(e),this.workerPools=new Map}destroy(){for(const e of this.workerPools.values())e.destroy();this.workerPools=new Map}setProps(e){this.props={...this.props,...e};for(const n of this.workerPools.values())n.setProps(this._getWorkerPoolProps())}getWorkerPool(e){const{name:n,source:r,url:i}=e;let s=this.workerPools.get(n);return s||(s=new N8({name:n,source:r,url:i}),s.setProps(this._getWorkerPoolProps()),this.workerPools.set(n,s)),s}_getWorkerPoolProps(){return{maxConcurrency:this.props.maxConcurrency,maxMobileConcurrency:this.props.maxMobileConcurrency,reuseWorkers:this.props.reuseWorkers,onDebug:this.props.onDebug}}}v(ni,"_workerFarm",void 0);const D8="latest";function k8(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const n=e[t.id]||{},r="".concat(t.id,"-worker.js");let i=n.workerUrl;if(!i&&t.id==="compression"&&(i=e.workerUrl),e._workerType==="test"&&(i="modules/".concat(t.module,"/dist/").concat(r)),!i){let s=t.version;s==="latest"&&(s=D8);const o=s?"@".concat(s):"";i="https://unpkg.com/@loaders.gl/".concat(t.module).concat(o,"/dist/").concat(r)}return vi(i),i}function Q8(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:T8;vi(t,"no worker provided");const n=t.version;return!(!e||!n)}const O_={};function F8(t,e){return!ni.isSupported()||!Vf&&!(e!=null&&e._nodeWorkers)?!1:t.worker&&(e==null?void 0:e.worker)}async function U8(t,e,n,r,i){const s=t.id,o=k8(t,n),l=ni.getWorkerFarm(n).getWorkerPool({name:s,url:o});n=JSON.parse(JSON.stringify(n)),r=JSON.parse(JSON.stringify(r||{}));const c=await l.startJob("process-on-worker",G8.bind(null,i));return c.postMessage("process",{input:e,options:n,context:r}),await(await c.result).result}async function G8(t,e,n,r){switch(n){case"done":e.done(r);break;case"error":e.error(new Error(r.error));break;case"process":const{id:i,input:s,options:o}=r;try{const a=await t(s,o);e.postMessage("done",{id:i,result:a})}catch(a){const l=a instanceof Error?a.message:"unknown error";e.postMessage("error",{id:i,error:l})}break;default:console.warn("parse-with-worker unknown message ".concat(n))}}function z8(t,e,n){if(n=n||t.byteLength,t.byteLength<n||e.byteLength<n)return!1;const r=new Uint8Array(t),i=new Uint8Array(e);for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0}function V8(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];const r=e.map(a=>a instanceof ArrayBuffer?new Uint8Array(a):a),i=r.reduce((a,l)=>a+l.byteLength,0),s=new Uint8Array(i);let o=0;for(const a of r)s.set(a,o),o+=a.byteLength;return s.buffer}async function j8(t){const e=[];for await(const n of t)e.push(n);return V8(...e)}function D_(){let t;if(typeof window<"u"&&window.performance)t=window.performance.now();else if(typeof process<"u"&&process.hrtime){const e=process.hrtime();t=e[0]*1e3+e[1]/1e6}else t=Date.now();return t}let k_=class{constructor(e,n){this.name=void 0,this.type=void 0,this.sampleSize=1,this.time=0,this.count=0,this.samples=0,this.lastTiming=0,this.lastSampleTime=0,this.lastSampleCount=0,this._count=0,this._time=0,this._samples=0,this._startTime=0,this._timerPending=!1,this.name=e,this.type=n,this.reset()}reset(){return this.time=0,this.count=0,this.samples=0,this.lastTiming=0,this.lastSampleTime=0,this.lastSampleCount=0,this._count=0,this._time=0,this._samples=0,this._startTime=0,this._timerPending=!1,this}setSampleSize(e){return this.sampleSize=e,this}incrementCount(){return this.addCount(1),this}decrementCount(){return this.subtractCount(1),this}addCount(e){return this._count+=e,this._samples++,this._checkSampling(),this}subtractCount(e){return this._count-=e,this._samples++,this._checkSampling(),this}addTime(e){return this._time+=e,this.lastTiming=e,this._samples++,this._checkSampling(),this}timeStart(){return this._startTime=D_(),this._timerPending=!0,this}timeEnd(){return this._timerPending?(this.addTime(D_()-this._startTime),this._timerPending=!1,this._checkSampling(),this):this}getSampleAverageCount(){return this.sampleSize>0?this.lastSampleCount/this.sampleSize:0}getSampleAverageTime(){return this.sampleSize>0?this.lastSampleTime/this.sampleSize:0}getSampleHz(){return this.lastSampleTime>0?this.sampleSize/(this.lastSampleTime/1e3):0}getAverageCount(){return this.samples>0?this.count/this.samples:0}getAverageTime(){return this.samples>0?this.time/this.samples:0}getHz(){return this.time>0?this.samples/(this.time/1e3):0}_checkSampling(){this._samples===this.sampleSize&&(this.lastSampleTime=this._time,this.lastSampleCount=this._count,this.count+=this._count,this.time+=this._time,this.samples+=this._samples,this._time=0,this._count=0,this._samples=0)}},H8=class{constructor(e){this.id=void 0,this.stats={},this.id=e.id,this.stats={},this._initializeStats(e.stats),Object.seal(this)}get(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"count";return this._getOrCreate({name:e,type:n})}get size(){return Object.keys(this.stats).length}reset(){for(const e of Object.values(this.stats))e.reset();return this}forEach(e){for(const n of Object.values(this.stats))e(n)}getTable(){const e={};return this.forEach(n=>{e[n.name]={time:n.time||0,count:n.count||0,average:n.getAverageTime()||0,hz:n.getHz()||0}}),e}_initializeStats(){(arguments.length>0&&arguments[0]!==void 0?arguments[0]:[]).forEach(n=>this._getOrCreate(n))}_getOrCreate(e){const{name:n,type:r}=e;let i=this.stats[n];return i||(e instanceof k_?i=e:i=new k_(n,r),this.stats[n]=i),i}};const W8="Queued Requests",Y8="Active Requests",$8="Cancelled Requests",K8="Queued Requests Ever",q8="Active Requests Ever",X8={id:"request-scheduler",throttleRequests:!0,maxRequests:6};class Z8{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};v(this,"props",void 0),v(this,"stats",void 0),v(this,"activeRequestCount",0),v(this,"requestQueue",[]),v(this,"requestMap",new Map),v(this,"deferredUpdate",null),this.props={...X8,...e},this.stats=new H8({id:this.props.id}),this.stats.get(W8),this.stats.get(Y8),this.stats.get($8),this.stats.get(K8),this.stats.get(q8)}scheduleRequest(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:()=>0;if(!this.props.throttleRequests)return Promise.resolve({done:()=>{}});if(this.requestMap.has(e))return this.requestMap.get(e);const r={handle:e,priority:0,getPriority:n},i=new Promise(s=>(r.resolve=s,r));return this.requestQueue.push(r),this.requestMap.set(e,i),this._issueNewRequests(),i}_issueRequest(e){const{handle:n,resolve:r}=e;let i=!1;const s=()=>{i||(i=!0,this.requestMap.delete(n),this.activeRequestCount--,this._issueNewRequests())};return this.activeRequestCount++,r?r({done:s}):Promise.resolve({done:s})}_issueNewRequests(){this.deferredUpdate||(this.deferredUpdate=setTimeout(()=>this._issueNewRequestsAsync(),0))}_issueNewRequestsAsync(){this.deferredUpdate=null;const e=Math.max(this.props.maxRequests-this.activeRequestCount,0);if(e!==0){this._updateAllRequests();for(let n=0;n<e;++n){const r=this.requestQueue.shift();r&&this._issueRequest(r)}}}_updateAllRequests(){const e=this.requestQueue;for(let n=0;n<e.length;++n){const r=e[n];this._updateRequest(r)||(e.splice(n,1),this.requestMap.delete(r.handle),n--)}e.sort((n,r)=>n.priority-r.priority)}_updateRequest(e){return e.priority=e.getPriority(e.handle),e.priority<0?(e.resolve(null),!1):!0}}let J8="";const Q_={};function eO(t){for(const e in Q_)if(t.startsWith(e)){const n=Q_[e];t=t.replace(e,n)}return!t.startsWith("http://")&&!t.startsWith("https://")&&(t="".concat(J8).concat(t)),t}function tO(t){return t&&typeof t=="object"&&t.isBuffer}function hb(t){if(tO(t))return t;if(t instanceof ArrayBuffer)return t;if(ArrayBuffer.isView(t))return t.byteOffset===0&&t.byteLength===t.buffer.byteLength?t.buffer:t.buffer.slice(t.byteOffset,t.byteOffset+t.byteLength);if(typeof t=="string"){const e=t;return new TextEncoder().encode(e).buffer}if(t&&typeof t=="object"&&t._toArrayBuffer)return t._toArrayBuffer();throw new Error("toArrayBuffer")}function gb(t){const e=t?t.lastIndexOf("/"):-1;return e>=0?t.substr(e+1):""}function nO(t){const e=t?t.lastIndexOf("/"):-1;return e>=0?t.substr(0,e):""}const rO=t=>typeof t=="boolean",ql=t=>typeof t=="function",ru=t=>t!==null&&typeof t=="object",F_=t=>ru(t)&&t.constructor==={}.constructor,iO=t=>t&&typeof t[Symbol.iterator]=="function",sO=t=>t&&typeof t[Symbol.asyncIterator]=="function",xo=t=>typeof Response<"u"&&t instanceof Response||t&&t.arrayBuffer&&t.text&&t.json,Co=t=>typeof Blob<"u"&&t instanceof Blob,oO=t=>t&&typeof t=="object"&&t.isBuffer,aO=t=>typeof ReadableStream<"u"&&t instanceof ReadableStream||ru(t)&&ql(t.tee)&&ql(t.cancel)&&ql(t.getReader),lO=t=>ru(t)&&ql(t.read)&&ql(t.pipe)&&rO(t.readable),Ab=t=>aO(t)||lO(t),cO=/^data:([-\w.]+\/[-\w.+]+)(;|,)/,uO=/^([-\w.]+\/[-\w.+]+)/;function fO(t){const e=uO.exec(t);return e?e[1]:t}function U_(t){const e=cO.exec(t);return e?e[1]:""}const pb=/\?.*/;function dO(t){const e=t.match(pb);return e&&e[0]}function oy(t){return t.replace(pb,"")}function Zh(t){return xo(t)?t.url:Co(t)?t.name||"":typeof t=="string"?t:""}function ay(t){if(xo(t)){const e=t,n=e.headers.get("content-type")||"",r=oy(e.url);return fO(n)||U_(r)}return Co(t)?t.type||"":typeof t=="string"?U_(t):""}function hO(t){return xo(t)?t.headers["content-length"]||-1:Co(t)?t.size:typeof t=="string"?t.length:t instanceof ArrayBuffer||ArrayBuffer.isView(t)?t.byteLength:-1}async function mb(t){if(xo(t))return t;const e={},n=hO(t);n>=0&&(e["content-length"]=String(n));const r=Zh(t),i=ay(t);i&&(e["content-type"]=i);const s=await pO(t);s&&(e["x-first-bytes"]=s),typeof t=="string"&&(t=new TextEncoder().encode(t));const o=new Response(t,{headers:e});return Object.defineProperty(o,"url",{value:r}),o}async function gO(t){if(!t.ok){const e=await AO(t);throw new Error(e)}}async function AO(t){let e="Failed to fetch resource ".concat(t.url," (").concat(t.status,"): ");try{const n=t.headers.get("Content-Type");let r=t.statusText;n.includes("application/json")&&(r+=" ".concat(await t.text())),e+=r,e=e.length>60?"".concat(e.slice(0,60),"..."):e}catch{}return e}async function pO(t){if(typeof t=="string")return"data:,".concat(t.slice(0,5));if(t instanceof Blob){const n=t.slice(0,5);return await new Promise(r=>{const i=new FileReader;i.onload=s=>{var o;return r(s==null||(o=s.target)===null||o===void 0?void 0:o.result)},i.readAsDataURL(n)})}if(t instanceof ArrayBuffer){const n=t.slice(0,5),r=mO(n);return"data:base64,".concat(r)}return null}function mO(t){let e="";const n=new Uint8Array(t);for(let r=0;r<n.byteLength;r++)e+=String.fromCharCode(n[r]);return btoa(e)}async function G_(t,e){if(typeof t=="string"){t=eO(t);let n=e;return e!=null&&e.fetch&&typeof(e==null?void 0:e.fetch)!="function"&&(n=e.fetch),await fetch(t,n)}return await mb(t)}function vO(t){if(typeof window<"u"&&typeof window.process=="object"&&window.process.type==="renderer"||typeof process<"u"&&typeof process.versions=="object"&&process.versions.electron)return!0;const e=typeof navigator=="object"&&typeof navigator.userAgent=="string"&&navigator.userAgent,n=t||e;return!!(n&&n.indexOf("Electron")>=0)}function iu(){return!(typeof process=="object"&&String(process)==="[object process]"&&!process.browser)||vO()}const Zu=globalThis.window||globalThis.self||globalThis.global,yl=globalThis.process||{},vb=typeof __VERSION__<"u"?__VERSION__:"untranspiled source";iu();function yO(t){try{const e=window[t],n="__storage_test__";return e.setItem(n,n),e.removeItem(n),e}catch{return null}}let EO=class{constructor(e,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"sessionStorage";this.storage=void 0,this.id=void 0,this.config=void 0,this.storage=yO(r),this.id=e,this.config=n,this._loadConfiguration()}getConfiguration(){return this.config}setConfiguration(e){if(Object.assign(this.config,e),this.storage){const n=JSON.stringify(this.config);this.storage.setItem(this.id,n)}}_loadConfiguration(){let e={};if(this.storage){const n=this.storage.getItem(this.id);e=n?JSON.parse(n):{}}return Object.assign(this.config,e),this}};function _O(t){let e;return t<10?e="".concat(t.toFixed(2),"ms"):t<100?e="".concat(t.toFixed(1),"ms"):t<1e3?e="".concat(t.toFixed(0),"ms"):e="".concat((t/1e3).toFixed(2),"s"),e}function xO(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:8;const n=Math.max(e-t.length,0);return"".concat(" ".repeat(n)).concat(t)}function RA(t,e,n){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:600;const i=t.src.replace(/\(/g,"%28").replace(/\)/g,"%29");t.width>r&&(n=Math.min(n,r/t.width));const s=t.width*n,o=t.height*n,a=["font-size:1px;","padding:".concat(Math.floor(o/2),"px ").concat(Math.floor(s/2),"px;"),"line-height:".concat(o,"px;"),"background:url(".concat(i,");"),"background-size:".concat(s,"px ").concat(o,"px;"),"color:transparent;"].join("");return["".concat(e," %c+"),a]}let Dd;(function(t){t[t.BLACK=30]="BLACK",t[t.RED=31]="RED",t[t.GREEN=32]="GREEN",t[t.YELLOW=33]="YELLOW",t[t.BLUE=34]="BLUE",t[t.MAGENTA=35]="MAGENTA",t[t.CYAN=36]="CYAN",t[t.WHITE=37]="WHITE",t[t.BRIGHT_BLACK=90]="BRIGHT_BLACK",t[t.BRIGHT_RED=91]="BRIGHT_RED",t[t.BRIGHT_GREEN=92]="BRIGHT_GREEN",t[t.BRIGHT_YELLOW=93]="BRIGHT_YELLOW",t[t.BRIGHT_BLUE=94]="BRIGHT_BLUE",t[t.BRIGHT_MAGENTA=95]="BRIGHT_MAGENTA",t[t.BRIGHT_CYAN=96]="BRIGHT_CYAN",t[t.BRIGHT_WHITE=97]="BRIGHT_WHITE"})(Dd||(Dd={}));const CO=10;function z_(t){return typeof t!="string"?t:(t=t.toUpperCase(),Dd[t]||Dd.WHITE)}function IO(t,e,n){if(!iu&&typeof t=="string"){if(e){const r=z_(e);t="\x1B[".concat(r,"m").concat(t,"\x1B[39m")}if(n){const r=z_(n);t="\x1B[".concat(r+CO,"m").concat(t,"\x1B[49m")}}return t}function wO(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:["constructor"];const n=Object.getPrototypeOf(t),r=Object.getOwnPropertyNames(n),i=t;for(const s of r){const o=i[s];typeof o=="function"&&(e.find(a=>s===a)||(i[s]=o.bind(t)))}}function kd(t,e){if(!t)throw new Error(e||"Assertion failed")}function Oo(){let t;if(iu()&&Zu.performance){var e,n;t=Zu==null||(e=Zu.performance)===null||e===void 0||(n=e.now)===null||n===void 0?void 0:n.call(e)}else if("hrtime"in yl){var r;const i=yl==null||(r=yl.hrtime)===null||r===void 0?void 0:r.call(yl);t=i[0]*1e3+i[1]/1e6}else t=Date.now();return t}const Do={debug:iu()&&console.debug||console.log,log:console.log,info:console.info,warn:console.warn,error:console.error},SO={enabled:!0,level:0};function zn(){}const V_={},j_={once:!0};let ly=class{constructor(){let{id:e}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{id:""};this.id=void 0,this.VERSION=vb,this._startTs=Oo(),this._deltaTs=Oo(),this._storage=void 0,this.userData={},this.LOG_THROTTLE_TIMEOUT=0,this.id=e,this.userData={},this._storage=new EO("__probe-".concat(this.id,"__"),SO),this.timeStamp("".concat(this.id," started")),wO(this),Object.seal(this)}set level(e){this.setLevel(e)}get level(){return this.getLevel()}isEnabled(){return this._storage.config.enabled}getLevel(){return this._storage.config.level}getTotal(){return Number((Oo()-this._startTs).toPrecision(10))}getDelta(){return Number((Oo()-this._deltaTs).toPrecision(10))}set priority(e){this.level=e}get priority(){return this.level}getPriority(){return this.level}enable(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;return this._storage.setConfiguration({enabled:e}),this}setLevel(e){return this._storage.setConfiguration({level:e}),this}get(e){return this._storage.config[e]}set(e,n){this._storage.setConfiguration({[e]:n})}settings(){console.table?console.table(this._storage.config):console.log(this._storage.config)}assert(e,n){kd(e,n)}warn(e){return this._getLogFunction(0,e,Do.warn,arguments,j_)}error(e){return this._getLogFunction(0,e,Do.error,arguments)}deprecated(e,n){return this.warn("`".concat(e,"` is deprecated and will be removed in a later version. Use `").concat(n,"` instead"))}removed(e,n){return this.error("`".concat(e,"` has been removed. Use `").concat(n,"` instead"))}probe(e,n){return this._getLogFunction(e,n,Do.log,arguments,{time:!0,once:!0})}log(e,n){return this._getLogFunction(e,n,Do.debug,arguments)}info(e,n){return this._getLogFunction(e,n,console.info,arguments)}once(e,n){return this._getLogFunction(e,n,Do.debug||Do.info,arguments,j_)}table(e,n,r){return n?this._getLogFunction(e,n,console.table||zn,r&&[r],{tag:RO(n)}):zn}image(e){let{logLevel:n,priority:r,image:i,message:s="",scale:o=1}=e;return this._shouldLog(n||r)?iu()?BO({image:i,message:s,scale:o}):TO():zn}time(e,n){return this._getLogFunction(e,n,console.time?console.time:console.info)}timeEnd(e,n){return this._getLogFunction(e,n,console.timeEnd?console.timeEnd:console.info)}timeStamp(e,n){return this._getLogFunction(e,n,console.timeStamp||zn)}group(e,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{collapsed:!1};const i=H_({logLevel:e,message:n,opts:r}),{collapsed:s}=r;return i.method=(s?console.groupCollapsed:console.group)||console.info,this._getLogFunction(i)}groupCollapsed(e,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return this.group(e,n,Object.assign({},r,{collapsed:!0}))}groupEnd(e){return this._getLogFunction(e,"",console.groupEnd||zn)}withGroup(e,n,r){this.group(e,n)();try{r()}finally{this.groupEnd(e)()}}trace(){console.trace&&console.trace()}_shouldLog(e){return this.isEnabled()&&this.getLevel()>=yb(e)}_getLogFunction(e,n,r,i,s){if(this._shouldLog(e)){s=H_({logLevel:e,message:n,args:i,opts:s}),r=r||s.method,kd(r),s.total=this.getTotal(),s.delta=this.getDelta(),this._deltaTs=Oo();const o=s.tag||s.message;if(s.once&&o)if(!V_[o])V_[o]=Oo();else return zn;return n=bO(this.id,s.message,s),r.bind(console,n,...s.args)}return zn}};ly.VERSION=vb;function yb(t){if(!t)return 0;let e;switch(typeof t){case"number":e=t;break;case"object":e=t.logLevel||t.priority||0;break;default:return 0}return kd(Number.isFinite(e)&&e>=0),e}function H_(t){const{logLevel:e,message:n}=t;t.logLevel=yb(e);const r=t.args?Array.from(t.args):[];for(;r.length&&r.shift()!==n;);switch(typeof e){case"string":case"function":n!==void 0&&r.unshift(n),t.message=e;break;case"object":Object.assign(t,e);break}typeof t.message=="function"&&(t.message=t.message());const i=typeof t.message;return kd(i==="string"||i==="object"),Object.assign(t,{args:r},t.opts)}function bO(t,e,n){if(typeof e=="string"){const r=n.time?xO(_O(n.total)):"";e=n.time?"".concat(t,": ").concat(r,"  ").concat(e):"".concat(t,": ").concat(e),e=IO(e,n.color,n.background)}return e}function TO(t){return console.warn("removed"),zn}function BO(t){let{image:e,message:n="",scale:r=1}=t;if(typeof e=="string"){const s=new Image;return s.onload=()=>{const o=RA(s,n,r);console.log(...o)},s.src=e,zn}const i=e.nodeName||"";if(i.toLowerCase()==="img")return console.log(...RA(e,n,r)),zn;if(i.toLowerCase()==="canvas"){const s=new Image;return s.onload=()=>console.log(...RA(s,n,r)),s.src=e.toDataURL(),zn}return zn}function RO(t){for(const e in t)for(const n in t[e])return n||"untitled";return"empty"}const W_=new ly({id:"loaders.gl"});class PO{log(){return()=>{}}info(){return()=>{}}warn(){return()=>{}}error(){return()=>{}}}class LO{constructor(){v(this,"console",void 0),this.console=console}log(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return this.console.log.bind(this.console,...n)}info(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return this.console.info.bind(this.console,...n)}warn(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return this.console.warn.bind(this.console,...n)}error(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return this.console.error.bind(this.console,...n)}}const Eb={fetch:null,mimeType:void 0,nothrow:!1,log:new LO,CDN:"https://unpkg.com/@loaders.gl",worker:!0,maxConcurrency:3,maxMobileConcurrency:1,reuseWorkers:sy,_nodeWorkers:!1,_workerType:"",limit:0,_limitMB:0,batchSize:"auto",batchDebounceMs:0,metadata:!1,transforms:[]},MO={throws:"nothrow",dataType:"(no longer used)",uri:"baseUri",method:"fetch.method",headers:"fetch.headers",body:"fetch.body",mode:"fetch.mode",credentials:"fetch.credentials",cache:"fetch.cache",redirect:"fetch.redirect",referrer:"fetch.referrer",referrerPolicy:"fetch.referrerPolicy",integrity:"fetch.integrity",keepalive:"fetch.keepalive",signal:"fetch.signal"};function _b(){globalThis.loaders=globalThis.loaders||{};const{loaders:t}=globalThis;return t._state=t._state||{},t._state}const xb=()=>{const t=_b();return t.globalOptions=t.globalOptions||{...Eb},t.globalOptions};function NO(t,e,n,r){return n=n||[],n=Array.isArray(n)?n:[n],OO(t,n),kO(e,t,r)}function OO(t,e){Y_(t,null,Eb,MO,e);for(const n of e){const r=t&&t[n.id]||{},i=n.options&&n.options[n.id]||{},s=n.deprecatedOptions&&n.deprecatedOptions[n.id]||{};Y_(r,n.id,i,s,e)}}function Y_(t,e,n,r,i){const s=e||"Top level",o=e?"".concat(e,"."):"";for(const a in t){const l=!e&&ru(t[a]),c=a==="baseUri"&&!e,u=a==="workerUrl"&&e;if(!(a in n)&&!c&&!u){if(a in r)W_.warn("".concat(s," loader option '").concat(o).concat(a,"' no longer supported, use '").concat(r[a],"'"))();else if(!l){const f=DO(a,i);W_.warn("".concat(s," loader option '").concat(o).concat(a,"' not recognized. ").concat(f))()}}}}function DO(t,e){const n=t.toLowerCase();let r="";for(const i of e)for(const s in i.options){if(t===s)return"Did you mean '".concat(i.id,".").concat(s,"'?");const o=s.toLowerCase();(n.startsWith(o)||o.startsWith(n))&&(r=r||"Did you mean '".concat(i.id,".").concat(s,"'?"))}return r}function kO(t,e,n){const i={...t.options||{}};return QO(i,n),i.log===null&&(i.log=new PO),$_(i,xb()),$_(i,e),i}function $_(t,e){for(const n in e)if(n in e){const r=e[n];F_(r)&&F_(t[n])?t[n]={...t[n],...e[n]}:t[n]=e[n]}}function QO(t,e){e&&!("baseUri"in t)&&(t.baseUri=e)}function cy(t){var e;return t?(Array.isArray(t)&&(t=t[0]),Array.isArray((e=t)===null||e===void 0?void 0:e.extensions)):!1}function uy(t){var e,n;Od(t,"null loader"),Od(cy(t),"invalid loader");let r;return Array.isArray(t)&&(r=t[1],t=t[0],t={...t,options:{...t.options,...r}}),((e=t)!==null&&e!==void 0&&e.parseTextSync||(n=t)!==null&&n!==void 0&&n.parseText)&&(t.text=!0),t.text||(t.binary=!0),t}const Cb=()=>{const t=_b();return t.loaderRegistry=t.loaderRegistry||[],t.loaderRegistry};function FO(t){const e=Cb();t=Array.isArray(t)?t:[t];for(const n of t){const r=uy(n);e.find(i=>r===i)||e.unshift(r)}}function UO(){return Cb()}const GO=new ly({id:"loaders.gl"}),zO=/\.([^.]+)$/;async function VO(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0;if(!Ib(t))return null;let i=K_(t,e,{...n,nothrow:!0},r);if(i)return i;if(Co(t)&&(t=await t.slice(0,10).arrayBuffer(),i=K_(t,e,n,r)),!i&&!(n!=null&&n.nothrow))throw new Error(wb(t));return i}function K_(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0;if(!Ib(t))return null;if(e&&!Array.isArray(e))return uy(e);let i=[];e&&(i=i.concat(e)),n!=null&&n.ignoreRegisteredLoaders||i.push(...UO()),HO(i);const s=jO(t,i,n,r);if(!s&&!(n!=null&&n.nothrow))throw new Error(wb(t));return s}function jO(t,e,n,r){const i=Zh(t),s=ay(t),o=oy(i)||(r==null?void 0:r.url);let a=null,l="";if(n!=null&&n.mimeType&&(a=PA(e,n==null?void 0:n.mimeType),l="match forced by supplied MIME type ".concat(n==null?void 0:n.mimeType)),a=a||WO(e,o),l=l||(a?"matched url ".concat(o):""),a=a||PA(e,s),l=l||(a?"matched MIME type ".concat(s):""),a=a||$O(e,t),l=l||(a?"matched initial data ".concat(Sb(t)):""),a=a||PA(e,n==null?void 0:n.fallbackMimeType),l=l||(a?"matched fallback MIME type ".concat(s):""),l){var c;GO.log(1,"selectLoader selected ".concat((c=a)===null||c===void 0?void 0:c.name,": ").concat(l,"."))}return a}function Ib(t){return!(t instanceof Response&&t.status===204)}function wb(t){const e=Zh(t),n=ay(t);let r="No valid loader found (";r+=e?"".concat(gb(e),", "):"no url provided, ",r+="MIME type: ".concat(n?'"'.concat(n,'"'):"not provided",", ");const i=t?Sb(t):"";return r+=i?' first bytes: "'.concat(i,'"'):"first bytes: not available",r+=")",r}function HO(t){for(const e of t)uy(e)}function WO(t,e){const n=e&&zO.exec(e),r=n&&n[1];return r?YO(t,r):null}function YO(t,e){e=e.toLowerCase();for(const n of t)for(const r of n.extensions)if(r.toLowerCase()===e)return n;return null}function PA(t,e){for(const n of t)if(n.mimeTypes&&n.mimeTypes.includes(e)||e==="application/x.".concat(n.id))return n;return null}function $O(t,e){if(!e)return null;for(const n of t)if(typeof e=="string"){if(KO(e,n))return n}else if(ArrayBuffer.isView(e)){if(q_(e.buffer,e.byteOffset,n))return n}else if(e instanceof ArrayBuffer&&q_(e,0,n))return n;return null}function KO(t,e){return e.testText?e.testText(t):(Array.isArray(e.tests)?e.tests:[e.tests]).some(r=>t.startsWith(r))}function q_(t,e,n){return(Array.isArray(n.tests)?n.tests:[n.tests]).some(i=>qO(t,e,n,i))}function qO(t,e,n,r){if(r instanceof ArrayBuffer)return z8(r,t,r.byteLength);switch(typeof r){case"function":return r(t,n);case"string":const i=N0(t,e,r.length);return r===i;default:return!1}}function Sb(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:5;return typeof t=="string"?t.slice(0,e):ArrayBuffer.isView(t)?N0(t.buffer,t.byteOffset,e):t instanceof ArrayBuffer?N0(t,0,e):""}function N0(t,e,n){if(t.byteLength<e+n)return"";const r=new DataView(t);let i="";for(let s=0;s<n;s++)i+=String.fromCharCode(r.getUint8(e+s));return i}const XO=256*1024;function*ZO(t,e){const n=(e==null?void 0:e.chunkSize)||XO;let r=0;const i=new TextEncoder;for(;r<t.length;){const s=Math.min(t.length-r,n),o=t.slice(r,r+s);r+=s,yield i.encode(o)}}const JO=256*1024;function eD(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return function*(){const{chunkSize:n=JO}=e;let r=0;for(;r<t.byteLength;){const i=Math.min(t.byteLength-r,n),s=new ArrayBuffer(i),o=new Uint8Array(t,r,i);new Uint8Array(s).set(o),r+=i,yield s}}()}const tD=1024*1024;async function*nD(t,e){const n=(e==null?void 0:e.chunkSize)||tD;let r=0;for(;r<t.size;){const i=r+n,s=await t.slice(r,i).arrayBuffer();r=i,yield s}}function X_(t,e){return sy?rD(t,e):iD(t)}async function*rD(t,e){const n=t.getReader();let r;try{for(;;){const i=r||n.read();e!=null&&e._streamReadAhead&&(r=n.read());const{done:s,value:o}=await i;if(s)return;yield hb(o)}}catch{n.releaseLock()}}async function*iD(t,e){for await(const n of t)yield hb(n)}function sD(t,e){if(typeof t=="string")return ZO(t,e);if(t instanceof ArrayBuffer)return eD(t,e);if(Co(t))return nD(t,e);if(Ab(t))return X_(t,e);if(xo(t))return X_(t.body,e);throw new Error("makeIterator")}const bb="Cannot convert supplied data type";function oD(t,e,n){if(e.text&&typeof t=="string")return t;if(oO(t)&&(t=t.buffer),t instanceof ArrayBuffer){const r=t;return e.text&&!e.binary?new TextDecoder("utf8").decode(r):r}if(ArrayBuffer.isView(t)){if(e.text&&!e.binary)return new TextDecoder("utf8").decode(t);let r=t.buffer;const i=t.byteLength||t.length;return(t.byteOffset!==0||i!==r.byteLength)&&(r=r.slice(t.byteOffset,t.byteOffset+i)),r}throw new Error(bb)}async function aD(t,e,n){const r=t instanceof ArrayBuffer||ArrayBuffer.isView(t);if(typeof t=="string"||r)return oD(t,e);if(Co(t)&&(t=await mb(t)),xo(t)){const i=t;return await gO(i),e.binary?await i.arrayBuffer():await i.text()}if(Ab(t)&&(t=sD(t,n)),iO(t)||sO(t))return j8(t);throw new Error(bb)}function Tb(t,e){const n=xb(),r=t||n;return typeof r.fetch=="function"?r.fetch:ru(r.fetch)?i=>G_(i,r):e!=null&&e.fetch?e==null?void 0:e.fetch:G_}function lD(t,e,n){if(n)return n;const r={fetch:Tb(e,t),...t};if(r.url){const i=oy(r.url);r.baseUrl=i,r.queryString=dO(r.url),r.filename=gb(i),r.baseUrl=nO(i)}return Array.isArray(r.loaders)||(r.loaders=null),r}function cD(t,e){if(!e&&t&&!Array.isArray(t))return t;let n;if(t&&(n=Array.isArray(t)?t:[t]),e&&e.loaders){const r=Array.isArray(e.loaders)?e.loaders:[e.loaders];n=n?[...n,...r]:r}return n&&n.length?n:null}async function fy(t,e,n,r){vi(!r||typeof r=="object"),e&&!Array.isArray(e)&&!cy(e)&&(r=void 0,n=e,e=void 0),t=await t,n=n||{};const i=Zh(t),o=cD(e,r),a=await VO(t,o,n);return a?(n=NO(n,a,o,i),r=lD({url:i,parse:fy,loaders:o},n,r||null),await uD(a,t,n,r)):null}async function uD(t,e,n,r){if(Q8(t),xo(e)){const i=e,{ok:s,redirected:o,status:a,statusText:l,type:c,url:u}=i,f=Object.fromEntries(i.headers.entries());r.response={headers:f,ok:s,redirected:o,status:a,statusText:l,type:c,url:u}}if(e=await aD(e,t,n),t.parseTextSync&&typeof e=="string")return n.dataType="text",t.parseTextSync(e,n,r,t);if(F8(t,n))return await U8(t,e,n,r,fy);if(t.parseText&&typeof e=="string")return await t.parseText(e,n,r,t);if(t.parse)return await t.parse(e,n,r,t);throw vi(!t.parseSync),new Error("".concat(t.id," loader - no parser found and worker is disabled"))}async function Qd(t,e,n,r){!Array.isArray(e)&&!cy(e)&&(n=e,e=void 0);const i=Tb(n);let s=t;return typeof t=="string"&&(s=await i(t)),Co(t)&&(s=await i(t)),await fy(s,e,n)}const fD="3.4.14",{_parseImageNode:dD}=globalThis,O0=typeof Image<"u",D0=typeof ImageBitmap<"u",hD=!!dD,k0=sy?!0:hD;function gD(t){switch(t){case"auto":return D0||O0||k0;case"imagebitmap":return D0;case"image":return O0;case"data":return k0;default:throw new Error("@loaders.gl/images: image ".concat(t," not supported in this environment"))}}function AD(){if(D0)return"imagebitmap";if(O0)return"image";if(k0)return"data";throw new Error("Install '@loaders.gl/polyfills' to parse images under Node.js")}function pD(t){const e=vD(t);if(!e)throw new Error("Not an image");return e}function mD(t){switch(pD(t)){case"data":return t;case"image":case"imagebitmap":const e=document.createElement("canvas"),n=e.getContext("2d");if(!n)throw new Error("getImageData");return e.width=t.width,e.height=t.height,n.drawImage(t,0,0),n.getImageData(0,0,t.width,t.height);default:throw new Error("getImageData")}}function vD(t){return typeof ImageBitmap<"u"&&t instanceof ImageBitmap?"imagebitmap":typeof Image<"u"&&t instanceof Image?"image":t&&typeof t=="object"&&t.data&&t.width&&t.height?"data":null}const yD=/^data:image\/svg\+xml/,ED=/\.svg((\?|#).*)?$/;function dy(t){return t&&(yD.test(t)||ED.test(t))}function _D(t,e){if(dy(e)){let r=new TextDecoder().decode(t);try{typeof unescape=="function"&&typeof encodeURIComponent=="function"&&(r=unescape(encodeURIComponent(r)))}catch(s){throw new Error(s.message)}return"data:image/svg+xml;base64,".concat(btoa(r))}return Bb(t,e)}function Bb(t,e){if(dy(e))throw new Error("SVG cannot be parsed directly to imagebitmap");return new Blob([new Uint8Array(t)])}async function Rb(t,e,n){const r=_D(t,n),i=self.URL||self.webkitURL,s=typeof r!="string"&&i.createObjectURL(r);try{return await xD(s||r,e)}finally{s&&i.revokeObjectURL(s)}}async function xD(t,e){const n=new Image;return n.src=t,e.image&&e.image.decode&&n.decode?(await n.decode(),n):await new Promise((r,i)=>{try{n.onload=()=>r(n),n.onerror=s=>i(new Error("Could not load image ".concat(t,": ").concat(s)))}catch(s){i(s)}})}const CD={};let Z_=!0;async function ID(t,e,n){let r;dy(n)?r=await Rb(t,e,n):r=Bb(t,n);const i=e&&e.imagebitmap;return await wD(r,i)}async function wD(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if((SD(e)||!Z_)&&(e=null),e)try{return await createImageBitmap(t,e)}catch(n){console.warn(n),Z_=!1}return await createImageBitmap(t)}function SD(t){for(const e in t||CD)return!1;return!0}function bD(t){return!PD(t,"ftyp",4)||!(t[8]&96)?null:TD(t)}function TD(t){switch(BD(t,8,12).replace("\0"," ").trim()){case"avif":case"avis":return{extension:"avif",mimeType:"image/avif"};default:return null}}function BD(t,e,n){return String.fromCharCode(...t.slice(e,n))}function RD(t){return[...t].map(e=>e.charCodeAt(0))}function PD(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0;const r=RD(e);for(let i=0;i<r.length;++i)if(r[i]!==t[i+n])return!1;return!0}const Or=!1,Xl=!0;function Pb(t){const e=su(t);return MD(e)||DD(e)||ND(e)||OD(e)||LD(e)}function LD(t){const e=new Uint8Array(t instanceof DataView?t.buffer:t),n=bD(e);return n?{mimeType:n.mimeType,width:0,height:0}:null}function MD(t){const e=su(t);return e.byteLength>=24&&e.getUint32(0,Or)===2303741511?{mimeType:"image/png",width:e.getUint32(16,Or),height:e.getUint32(20,Or)}:null}function ND(t){const e=su(t);return e.byteLength>=10&&e.getUint32(0,Or)===1195984440?{mimeType:"image/gif",width:e.getUint16(6,Xl),height:e.getUint16(8,Xl)}:null}function OD(t){const e=su(t);return e.byteLength>=14&&e.getUint16(0,Or)===16973&&e.getUint32(2,Xl)===e.byteLength?{mimeType:"image/bmp",width:e.getUint32(18,Xl),height:e.getUint32(22,Xl)}:null}function DD(t){const e=su(t);if(!(e.byteLength>=3&&e.getUint16(0,Or)===65496&&e.getUint8(2)===255))return null;const{tableMarkers:r,sofMarkers:i}=kD();let s=2;for(;s+9<e.byteLength;){const o=e.getUint16(s,Or);if(i.has(o))return{mimeType:"image/jpeg",height:e.getUint16(s+5,Or),width:e.getUint16(s+7,Or)};if(!r.has(o))return null;s+=2,s+=e.getUint16(s,Or)}return null}function kD(){const t=new Set([65499,65476,65484,65501,65534]);for(let n=65504;n<65520;++n)t.add(n);return{tableMarkers:t,sofMarkers:new Set([65472,65473,65474,65475,65477,65478,65479,65481,65482,65483,65485,65486,65487,65502])}}function su(t){if(t instanceof DataView)return t;if(ArrayBuffer.isView(t))return new DataView(t.buffer);if(t instanceof ArrayBuffer)return new DataView(t);throw new Error("toDataView")}async function QD(t,e){const{mimeType:n}=Pb(t)||{},r=globalThis._parseImageNode;return Od(r),await r(t,n)}async function FD(t,e,n){e=e||{};const i=(e.image||{}).type||"auto",{url:s}=n||{},o=UD(i);let a;switch(o){case"imagebitmap":a=await ID(t,e,s);break;case"image":a=await Rb(t,e,s);break;case"data":a=await QD(t);break;default:Od(!1)}return i==="data"&&(a=mD(a)),a}function UD(t){switch(t){case"auto":case"data":return AD();default:return gD(t),t}}const GD=["png","jpg","jpeg","gif","webp","bmp","ico","svg","avif"],zD=["image/png","image/jpeg","image/gif","image/webp","image/avif","image/bmp","image/vnd.microsoft.icon","image/svg+xml"],VD={image:{type:"auto",decode:!0}},jD={id:"image",module:"images",name:"Images",version:fD,mimeTypes:zD,extensions:GD,parse:FD,tests:[t=>!!Pb(new DataView(t))],options:VD};function Lb(t){if(typeof window<"u"&&typeof window.process=="object"&&window.process.type==="renderer"||typeof process<"u"&&typeof process.versions=="object"&&process.versions.electron)return!0;const e=typeof navigator=="object"&&typeof navigator.userAgent=="string"&&navigator.userAgent,n=t||e;return!!(n&&n.indexOf("Electron")>=0)}function Ti(){return!(typeof process=="object"&&String(process)==="[object process]"&&!process.browser)||Lb()}const jf={self:typeof self<"u"&&self,window:typeof window<"u"&&window,global:typeof global<"u"&&global,document:typeof document<"u"&&document,process:typeof process=="object"&&process},Ju=jf.window||jf.self||jf.global,El=jf.process||{},Mb=typeof __VERSION__<"u"?__VERSION__:"untranspiled source";Ti();const LA=globalThis;function Nb(t){if(!t&&!Ti())return"Node";if(Lb(t))return"Electron";const n=t||(typeof navigator<"u"?navigator:{}).userAgent||"";if(n.indexOf("Edge")>-1)return"Edge";const r=n.indexOf("MSIE ")!==-1,i=n.indexOf("Trident/")!==-1;return r||i?"IE":LA.chrome?"Chrome":LA.safari?"Safari":LA.mozInnerScreenX?"Firefox":"Unknown"}function HD(t){try{const e=window[t],n="__storage_test__";return e.setItem(n,n),e.removeItem(n),e}catch{return null}}class WD{constructor(e,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"sessionStorage";v(this,"storage",void 0),v(this,"id",void 0),v(this,"config",void 0),this.storage=HD(r),this.id=e,this.config=n,this._loadConfiguration()}getConfiguration(){return this.config}setConfiguration(e){if(Object.assign(this.config,e),this.storage){const n=JSON.stringify(this.config);this.storage.setItem(this.id,n)}}_loadConfiguration(){let e={};if(this.storage){const n=this.storage.getItem(this.id);e=n?JSON.parse(n):{}}return Object.assign(this.config,e),this}}function YD(t){let e;return t<10?e="".concat(t.toFixed(2),"ms"):t<100?e="".concat(t.toFixed(1),"ms"):t<1e3?e="".concat(t.toFixed(0),"ms"):e="".concat((t/1e3).toFixed(2),"s"),e}function $D(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:8;const n=Math.max(e-t.length,0);return"".concat(" ".repeat(n)).concat(t)}function MA(t,e,n){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:600;const i=t.src.replace(/\(/g,"%28").replace(/\)/g,"%29");t.width>r&&(n=Math.min(n,r/t.width));const s=t.width*n,o=t.height*n,a=["font-size:1px;","padding:".concat(Math.floor(o/2),"px ").concat(Math.floor(s/2),"px;"),"line-height:".concat(o,"px;"),"background:url(".concat(i,");"),"background-size:".concat(s,"px ").concat(o,"px;"),"color:transparent;"].join("");return["".concat(e," %c+"),a]}let Fd;(function(t){t[t.BLACK=30]="BLACK",t[t.RED=31]="RED",t[t.GREEN=32]="GREEN",t[t.YELLOW=33]="YELLOW",t[t.BLUE=34]="BLUE",t[t.MAGENTA=35]="MAGENTA",t[t.CYAN=36]="CYAN",t[t.WHITE=37]="WHITE",t[t.BRIGHT_BLACK=90]="BRIGHT_BLACK",t[t.BRIGHT_RED=91]="BRIGHT_RED",t[t.BRIGHT_GREEN=92]="BRIGHT_GREEN",t[t.BRIGHT_YELLOW=93]="BRIGHT_YELLOW",t[t.BRIGHT_BLUE=94]="BRIGHT_BLUE",t[t.BRIGHT_MAGENTA=95]="BRIGHT_MAGENTA",t[t.BRIGHT_CYAN=96]="BRIGHT_CYAN",t[t.BRIGHT_WHITE=97]="BRIGHT_WHITE"})(Fd||(Fd={}));function J_(t){return typeof t=="string"?Fd[t.toUpperCase()]||Fd.WHITE:t}function KD(t,e,n){return!Ti&&typeof t=="string"&&(e&&(e=J_(e),t="\x1B[".concat(e,"m").concat(t,"\x1B[39m")),n&&(e=J_(n),t="\x1B[".concat(n+10,"m").concat(t,"\x1B[49m"))),t}function qD(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:["constructor"];const n=Object.getPrototypeOf(t),r=Object.getOwnPropertyNames(n);for(const i of r)typeof t[i]=="function"&&(e.find(s=>i===s)||(t[i]=t[i].bind(t)))}function Ud(t,e){if(!t)throw new Error(e||"Assertion failed")}function ko(){let t;if(Ti&&"performance"in Ju){var e,n;t=Ju==null||(e=Ju.performance)===null||e===void 0||(n=e.now)===null||n===void 0?void 0:n.call(e)}else if("hrtime"in El){var r;const i=El==null||(r=El.hrtime)===null||r===void 0?void 0:r.call(El);t=i[0]*1e3+i[1]/1e6}else t=Date.now();return t}const Qo={debug:Ti&&console.debug||console.log,log:console.log,info:console.info,warn:console.warn,error:console.error},XD={enabled:!0,level:0};function Vn(){}const ex={},tx={once:!0};class hy{constructor(){let{id:e}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{id:""};v(this,"id",void 0),v(this,"VERSION",Mb),v(this,"_startTs",ko()),v(this,"_deltaTs",ko()),v(this,"_storage",void 0),v(this,"userData",{}),v(this,"LOG_THROTTLE_TIMEOUT",0),this.id=e,this.userData={},this._storage=new WD("__probe-".concat(this.id,"__"),XD),this.timeStamp("".concat(this.id," started")),qD(this),Object.seal(this)}set level(e){this.setLevel(e)}get level(){return this.getLevel()}isEnabled(){return this._storage.config.enabled}getLevel(){return this._storage.config.level}getTotal(){return Number((ko()-this._startTs).toPrecision(10))}getDelta(){return Number((ko()-this._deltaTs).toPrecision(10))}set priority(e){this.level=e}get priority(){return this.level}getPriority(){return this.level}enable(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;return this._storage.setConfiguration({enabled:e}),this}setLevel(e){return this._storage.setConfiguration({level:e}),this}get(e){return this._storage.config[e]}set(e,n){this._storage.setConfiguration({[e]:n})}settings(){console.table?console.table(this._storage.config):console.log(this._storage.config)}assert(e,n){Ud(e,n)}warn(e){return this._getLogFunction(0,e,Qo.warn,arguments,tx)}error(e){return this._getLogFunction(0,e,Qo.error,arguments)}deprecated(e,n){return this.warn("`".concat(e,"` is deprecated and will be removed in a later version. Use `").concat(n,"` instead"))}removed(e,n){return this.error("`".concat(e,"` has been removed. Use `").concat(n,"` instead"))}probe(e,n){return this._getLogFunction(e,n,Qo.log,arguments,{time:!0,once:!0})}log(e,n){return this._getLogFunction(e,n,Qo.debug,arguments)}info(e,n){return this._getLogFunction(e,n,console.info,arguments)}once(e,n){for(var r=arguments.length,i=new Array(r>2?r-2:0),s=2;s<r;s++)i[s-2]=arguments[s];return this._getLogFunction(e,n,Qo.debug||Qo.info,arguments,tx)}table(e,n,r){return n?this._getLogFunction(e,n,console.table||Vn,r&&[r],{tag:tk(n)}):Vn}image(e){let{logLevel:n,priority:r,image:i,message:s="",scale:o=1}=e;return this._shouldLog(n||r)?Ti?ek({image:i,message:s,scale:o}):JD():Vn}time(e,n){return this._getLogFunction(e,n,console.time?console.time:console.info)}timeEnd(e,n){return this._getLogFunction(e,n,console.timeEnd?console.timeEnd:console.info)}timeStamp(e,n){return this._getLogFunction(e,n,console.timeStamp||Vn)}group(e,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{collapsed:!1};const i=nx({logLevel:e,message:n,opts:r}),{collapsed:s}=r;return i.method=(s?console.groupCollapsed:console.group)||console.info,this._getLogFunction(i)}groupCollapsed(e,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return this.group(e,n,Object.assign({},r,{collapsed:!0}))}groupEnd(e){return this._getLogFunction(e,"",console.groupEnd||Vn)}withGroup(e,n,r){this.group(e,n)();try{r()}finally{this.groupEnd(e)()}}trace(){console.trace&&console.trace()}_shouldLog(e){return this.isEnabled()&&this.getLevel()>=Ob(e)}_getLogFunction(e,n,r,i,s){if(this._shouldLog(e)){s=nx({logLevel:e,message:n,args:i,opts:s}),r=r||s.method,Ud(r),s.total=this.getTotal(),s.delta=this.getDelta(),this._deltaTs=ko();const o=s.tag||s.message;if(s.once)if(!ex[o])ex[o]=ko();else return Vn;return n=ZD(this.id,s.message,s),r.bind(console,n,...s.args)}return Vn}}v(hy,"VERSION",Mb);function Ob(t){if(!t)return 0;let e;switch(typeof t){case"number":e=t;break;case"object":e=t.logLevel||t.priority||0;break;default:return 0}return Ud(Number.isFinite(e)&&e>=0),e}function nx(t){const{logLevel:e,message:n}=t;t.logLevel=Ob(e);const r=t.args?Array.from(t.args):[];for(;r.length&&r.shift()!==n;);switch(typeof e){case"string":case"function":n!==void 0&&r.unshift(n),t.message=e;break;case"object":Object.assign(t,e);break}typeof t.message=="function"&&(t.message=t.message());const i=typeof t.message;return Ud(i==="string"||i==="object"),Object.assign(t,{args:r},t.opts)}function ZD(t,e,n){if(typeof e=="string"){const r=n.time?$D(YD(n.total)):"";e=n.time?"".concat(t,": ").concat(r,"  ").concat(e):"".concat(t,": ").concat(e),e=KD(e,n.color,n.background)}return e}function JD(t){return console.warn("removed"),Vn}function ek(t){let{image:e,message:n="",scale:r=1}=t;if(typeof e=="string"){const s=new Image;return s.onload=()=>{const o=MA(s,n,r);console.log(...o)},s.src=e,Vn}const i=e.nodeName||"";if(i.toLowerCase()==="img")return console.log(...MA(e,n,r)),Vn;if(i.toLowerCase()==="canvas"){const s=new Image;return s.onload=()=>console.log(...MA(s,n,r)),s.src=e.toDataURL(),Vn}return Vn}function tk(t){for(const e in t)for(const n in t[e])return n||"untitled";return"empty"}const be=new hy({id:"deck"});let Q0={};function nk(t){Q0=t}function qt(t,e,n,r){be.level>0&&Q0[t]&&Q0[t].call(null,e,n,r)}function rk(t){const e=t[0],n=t[t.length-1];return e==="{"&&n==="}"||e==="["&&n==="]"}const ik={id:"JSON",name:"JSON",module:"",version:"",options:{},extensions:["json","geojson"],mimeTypes:["application/json","application/geo+json"],testText:rk,parseTextSync:JSON.parse};function sk(){const t="8.9.34",e=globalThis.deck&&globalThis.deck.VERSION;if(e&&e!==t)throw new Error("deck.gl - multiple versions detected: ".concat(e," vs ").concat(t));return e||(be.log(1,"deck.gl ".concat(t))(),globalThis.deck={...globalThis.deck,VERSION:t,version:t,log:be,_registerLoggers:nk},FO([ik,[jD,{imagebitmap:{premultiplyAlpha:"none"}}]])),t}const ok=sk(),me={DEFAULT:-1,LNGLAT:1,METER_OFFSETS:2,LNGLAT_OFFSETS:3,CARTESIAN:0};Object.defineProperty(me,"IDENTITY",{get:()=>(be.deprecated("COORDINATE_SYSTEM.IDENTITY","COORDINATE_SYSTEM.CARTESIAN")(),0)});const gr={WEB_MERCATOR:1,GLOBE:2,WEB_MERCATOR_AUTO_OFFSET:4,IDENTITY:0},As={common:0,meters:1,pixels:2},rx={click:{handler:"onClick"},panstart:{handler:"onDragStart"},panmove:{handler:"onDrag"},panend:{handler:"onDragEnd"}},le=new hy({id:"luma.gl"});function on(t,e){if(!t)throw new Error(e||"luma.gl: assertion failed.")}const ak="Invalid WebGLRenderingContext",lk="Requires WebGL2";function Jh(t){return typeof WebGLRenderingContext<"u"&&t instanceof WebGLRenderingContext||typeof WebGL2RenderingContext<"u"&&t instanceof WebGL2RenderingContext?!0:!!(t&&Number.isFinite(t._version))}function Te(t){return typeof WebGL2RenderingContext<"u"&&t instanceof WebGL2RenderingContext?!0:!!(t&&t._version===2)}function ck(t){return Te(t)?t:null}function eg(t){return on(Jh(t),ak),t}function Jt(t){return on(Te(t),lk),t}const Ol={};function uk(t){globalThis.console&&globalThis.console.error&&globalThis.console.error(t)}function fk(t){globalThis.console&&globalThis.console.log&&globalThis.console.log(t)}function dk(t,e){Ol[t]=!0,e!==void 0&&uk(e)}function hk(t){const e=t.getError;t.getError=function(){let r;do r=e.apply(t),r!==0&&(Ol[r]=!0);while(r!==0);for(r in Ol)if(Ol[r])return delete Ol[r],parseInt(r,10);return 0}}const ou=function t(e){const n=e.gl;this.ext=e,this.isAlive=!0,this.hasBeenBound=!1,this.elementArrayBuffer=null,this.attribs=new Array(e.maxVertexAttribs);for(let r=0;r<this.attribs.length;r++){const i=new t.VertexAttrib(n);this.attribs[r]=i}this.maxAttrib=0};ou.VertexAttrib=function(e){this.enabled=!1,this.buffer=null,this.size=4,this.type=5126,this.normalized=!1,this.stride=16,this.offset=0,this.cached="",this.recache()};ou.VertexAttrib.prototype.recache=function(){this.cached=[this.size,this.type,this.normalized,this.stride,this.offset].join(":")};const Io=function(e){const n=this;this.gl=e,hk(e);const r=this.original={getParameter:e.getParameter,enableVertexAttribArray:e.enableVertexAttribArray,disableVertexAttribArray:e.disableVertexAttribArray,bindBuffer:e.bindBuffer,getVertexAttrib:e.getVertexAttrib,vertexAttribPointer:e.vertexAttribPointer};e.getParameter=function(s){return s===n.VERTEX_ARRAY_BINDING_OES?n.currentVertexArrayObject===n.defaultVertexArrayObject?null:n.currentVertexArrayObject:r.getParameter.apply(this,arguments)},e.enableVertexAttribArray=function(s){const o=n.currentVertexArrayObject;o.maxAttrib=Math.max(o.maxAttrib,s);const a=o.attribs[s];return a.enabled=!0,r.enableVertexAttribArray.apply(this,arguments)},e.disableVertexAttribArray=function(s){const o=n.currentVertexArrayObject;o.maxAttrib=Math.max(o.maxAttrib,s);const a=o.attribs[s];return a.enabled=!1,r.disableVertexAttribArray.apply(this,arguments)},e.bindBuffer=function(s,o){switch(s){case 34962:n.currentArrayBuffer=o;break;case 34963:n.currentVertexArrayObject.elementArrayBuffer=o;break}return r.bindBuffer.apply(this,arguments)},e.getVertexAttrib=function(s,o){const l=n.currentVertexArrayObject.attribs[s];switch(o){case 34975:return l.buffer;case 34338:return l.enabled;case 34339:return l.size;case 34340:return l.stride;case 34341:return l.type;case 34922:return l.normalized;default:return r.getVertexAttrib.apply(this,arguments)}},e.vertexAttribPointer=function(s,o,a,l,c,u){const f=n.currentVertexArrayObject;f.maxAttrib=Math.max(f.maxAttrib,s);const d=f.attribs[s];return d.buffer=n.currentArrayBuffer,d.size=o,d.type=a,d.normalized=l,d.stride=c,d.offset=u,d.recache(),r.vertexAttribPointer.apply(this,arguments)},e.instrumentExtension&&e.instrumentExtension(this,"OES_vertex_array_object"),e.canvas&&e.canvas.addEventListener("webglcontextrestored",()=>{fk("OESVertexArrayObject emulation library context restored"),n.reset_()},!0),this.reset_()};Io.prototype.VERTEX_ARRAY_BINDING_OES=34229;Io.prototype.reset_=function(){if(this.vertexArrayObjects!==void 0)for(let r=0;r<this.vertexArrayObjects.length;++r)this.vertexArrayObjects.isAlive=!1;const n=this.gl;this.maxVertexAttribs=n.getParameter(34921),this.defaultVertexArrayObject=new ou(this),this.currentVertexArrayObject=null,this.currentArrayBuffer=null,this.vertexArrayObjects=[this.defaultVertexArrayObject],this.bindVertexArrayOES(null)};Io.prototype.createVertexArrayOES=function(){const e=new ou(this);return this.vertexArrayObjects.push(e),e};Io.prototype.deleteVertexArrayOES=function(e){e.isAlive=!1,this.vertexArrayObjects.splice(this.vertexArrayObjects.indexOf(e),1),this.currentVertexArrayObject===e&&this.bindVertexArrayOES(null)};Io.prototype.isVertexArrayOES=function(e){return!!(e&&e instanceof ou&&e.hasBeenBound&&e.ext===this)};Io.prototype.bindVertexArrayOES=function(e){const n=this.gl;if(e&&!e.isAlive){dk(1282,"bindVertexArrayOES: attempt to bind deleted arrayObject");return}const r=this.original,i=this.currentVertexArrayObject;this.currentVertexArrayObject=e||this.defaultVertexArrayObject,this.currentVertexArrayObject.hasBeenBound=!0;const s=this.currentVertexArrayObject;if(i===s)return;(!i||s.elementArrayBuffer!==i.elementArrayBuffer)&&r.bindBuffer.call(n,34963,s.elementArrayBuffer);let o=this.currentArrayBuffer;const a=Math.max(i?i.maxAttrib:0,s.maxAttrib);for(let l=0;l<=a;l++){const c=s.attribs[l],u=i?i.attribs[l]:null;if((!i||c.enabled!==u.enabled)&&(c.enabled?r.enableVertexAttribArray.call(n,l):r.disableVertexAttribArray.call(n,l)),c.enabled){let f=!1;(!i||c.buffer!==u.buffer)&&(o!==c.buffer&&(r.bindBuffer.call(n,34962,c.buffer),o=c.buffer),f=!0),(f||c.cached!==u.cached)&&r.vertexAttribPointer.call(n,l,c.size,c.type,c.normalized,c.stride,c.offset)}}this.currentArrayBuffer!==o&&r.bindBuffer.call(n,34962,this.currentArrayBuffer)};function gk(t){if(typeof t.createVertexArray=="function")return;const e=t.getSupportedExtensions;t.getSupportedExtensions=function(){const i=e.call(this)||[];return i.indexOf("OES_vertex_array_object")<0&&i.push("OES_vertex_array_object"),i};const n=t.getExtension;t.getExtension=function(i){const s=n.call(this,i);return s||(i!=="OES_vertex_array_object"?null:(t.__OESVertexArrayObject||(this.__OESVertexArrayObject=new Io(this)),this.__OESVertexArrayObject))}}const ix="OES_element_index",sx="WEBGL_draw_buffers",Ak="EXT_disjoint_timer_query",pk="EXT_disjoint_timer_query_webgl2",mk="EXT_texture_filter_anisotropic",ox="WEBGL_debug_renderer_info",vk=35723,yk=4352,Ek=36795,_k=34047,xk=37445,Ck=37446,$e=t=>Te(t)?void 0:0,Ik={3074:t=>Te(t)?void 0:36064,[vk]:t=>Te(t)?void 0:yk,35977:$e,32937:$e,[Ek]:(t,e)=>{const n=Te(t)?t.getExtension(pk):t.getExtension(Ak);return n&&n.GPU_DISJOINT_EXT?e(n.GPU_DISJOINT_EXT):0},[xk]:(t,e)=>{const n=t.getExtension(ox);return e(n&&n.UNMASKED_VENDOR_WEBGL||7936)},[Ck]:(t,e)=>{const n=t.getExtension(ox);return e(n&&n.UNMASKED_RENDERER_WEBGL||7937)},[_k]:(t,e)=>{const n=t.luma.extensions[mk];return n?e(n.MAX_TEXTURE_MAX_ANISOTROPY_EXT):1},32883:$e,35071:$e,37447:$e,36063:(t,e)=>{if(!Te(t)){const n=t.getExtension(sx);return n?e(n.MAX_COLOR_ATTACHMENTS_WEBGL):0}},35379:$e,35374:$e,35377:$e,34852:t=>{if(!Te(t)){const e=t.getExtension(sx);return e?e.MAX_DRAW_BUFFERS_WEBGL:0}},36203:t=>t.getExtension(ix)?2147483647:65535,33001:t=>t.getExtension(ix)?16777216:65535,33e3:t=>16777216,37157:$e,35373:$e,35657:$e,36183:$e,37137:$e,34045:$e,35978:$e,35979:$e,35968:$e,35376:$e,35375:$e,35659:$e,37154:$e,35371:$e,35658:$e,35076:$e,35077:$e,35380:$e};function wk(t,e,n){const r=Ik[n],i=typeof r=="function"?r(t,e,n):r;return i!==void 0?i:e(n)}const Sk="OES_vertex_array_object",Db="ANGLE_instanced_arrays",bk="WEBGL_draw_buffers",Tk="EXT_disjoint_timer_query",Bk="EXT_texture_filter_anisotropic",Rk="VertexArray requires WebGL2 or OES_vertex_array_object extension";function Pk(t,e){return{webgl2:Te(t),ext:t.getExtension(e)}}const kb={[Sk]:{meta:{suffix:"OES"},createVertexArray:()=>{on(!1,Rk)},deleteVertexArray:()=>{},bindVertexArray:()=>{},isVertexArray:()=>!1},[Db]:{meta:{suffix:"ANGLE"},vertexAttribDivisor(t,e){on(e===0,"WebGL instanced rendering not supported")},drawElementsInstanced:()=>{},drawArraysInstanced:()=>{}},[bk]:{meta:{suffix:"WEBGL"},drawBuffers:()=>{on(!1)}},[Tk]:{meta:{suffix:"EXT"},createQuery:()=>{on(!1)},deleteQuery:()=>{on(!1)},beginQuery:()=>{on(!1)},endQuery:()=>{},getQuery(t,e){return this.getQueryObject(t,e)},getQueryParameter(t,e){return this.getQueryObject(t,e)},getQueryObject:()=>{}}},NA={readBuffer:(t,e,n)=>{Te(t)&&e(n)},getVertexAttrib:(t,e,n,r)=>{const{webgl2:i,ext:s}=Pk(t,Db);let o;switch(r){case 35069:o=i?void 0:!1;break;case 35070:o=!i&&!s?0:void 0;break}return o!==void 0?o:e(n,r)},getProgramParameter:(t,e,n,r)=>{if(!Te(t))switch(r){case 35967:return 35981;case 35971:return 0;case 35382:return 0}return e(n,r)},getInternalformatParameter:(t,e,n,r,i)=>{if(!Te(t))switch(i){case 32937:return new Int32Array([0])}return t.getInternalformatParameter(n,r,i)},getTexParameter(t,e,n,r){switch(r){case 34046:const{extensions:i}=t.luma,s=i[Bk];r=s&&s.TEXTURE_MAX_ANISOTROPY_EXT||34046;break}return e(n,r)},getParameter:wk,hint(t,e,n,r){return e(n,r)}};function Lk(t){t.luma=t.luma||{};const{luma:e}=t;return e.polyfilled||(gk(t),Mk(t),Ok(t,kb),Nk(t,{target:e,target2:t}),e.polyfilled=!0),t}globalThis.polyfillContext=Lk;function Mk(t){t.luma.extensions={};const e=t.getSupportedExtensions()||[];for(const n of e)t.luma[n]=t.getExtension(n)}function Nk(t,e){let{target:n,target2:r}=e;Object.keys(NA).forEach(i=>{if(typeof NA[i]=="function"){const s=t[i]?t[i].bind(t):()=>{},o=NA[i].bind(null,t,s);n[i]=o,r[i]=o}})}function Ok(t,e){for(const n of Object.getOwnPropertyNames(e))n!=="overrides"&&Dk(t,{extension:n,target:t.luma,target2:t})}function Dk(t,e){let{extension:n,target:r,target2:i}=e;const s=kb[n];on(s);const{meta:o={}}=s,{suffix:a=""}=o,l=t.getExtension(n);for(const c of Object.keys(s)){const u="".concat(c).concat(a);let f=null;c==="meta"||typeof t[c]=="function"||(l&&typeof l[u]=="function"?f=function(){return l[u](...arguments)}:typeof s[c]=="function"&&(f=s[c].bind(r))),f&&(r[c]=f,i[c]=f)}}const gy={3042:!1,32773:new Float32Array([0,0,0,0]),32777:32774,34877:32774,32969:1,32968:0,32971:1,32970:0,3106:new Float32Array([0,0,0,0]),3107:[!0,!0,!0,!0],2884:!1,2885:1029,2929:!1,2931:1,2932:513,2928:new Float32Array([0,1]),2930:!0,3024:!0,36006:null,2886:2305,33170:4352,2849:1,32823:!1,32824:0,10752:0,32938:1,32939:!1,3089:!1,3088:new Int32Array([0,0,1024,1024]),2960:!1,2961:0,2968:4294967295,36005:4294967295,2962:519,2967:0,2963:4294967295,34816:519,36003:0,36004:4294967295,2964:7680,2965:7680,2966:7680,34817:7680,34818:7680,34819:7680,2978:[0,0,1024,1024],3333:4,3317:4,37440:!1,37441:!1,37443:37444,35723:4352,36010:null,35977:!1,3330:0,3332:0,3331:0,3314:0,32878:0,3316:0,3315:0,32877:0},ki=(t,e,n)=>e?t.enable(n):t.disable(n),ax=(t,e,n)=>t.hint(n,e),Cn=(t,e,n)=>t.pixelStorei(n,e),kk=(t,e)=>{const n=Te(t)?36009:36160;return t.bindFramebuffer(n,e)},Qk=(t,e)=>t.bindFramebuffer(36008,e);function _l(t){return Array.isArray(t)||ArrayBuffer.isView(t)}const Fk={3042:ki,32773:(t,e)=>t.blendColor(...e),32777:"blendEquation",34877:"blendEquation",32969:"blendFunc",32968:"blendFunc",32971:"blendFunc",32970:"blendFunc",3106:(t,e)=>t.clearColor(...e),3107:(t,e)=>t.colorMask(...e),2884:ki,2885:(t,e)=>t.cullFace(e),2929:ki,2931:(t,e)=>t.clearDepth(e),2932:(t,e)=>t.depthFunc(e),2928:(t,e)=>t.depthRange(...e),2930:(t,e)=>t.depthMask(e),3024:ki,35723:ax,36006:kk,2886:(t,e)=>t.frontFace(e),33170:ax,2849:(t,e)=>t.lineWidth(e),32823:ki,32824:"polygonOffset",10752:"polygonOffset",35977:ki,32938:"sampleCoverage",32939:"sampleCoverage",3089:ki,3088:(t,e)=>t.scissor(...e),2960:ki,2961:(t,e)=>t.clearStencil(e),2968:(t,e)=>t.stencilMaskSeparate(1028,e),36005:(t,e)=>t.stencilMaskSeparate(1029,e),2962:"stencilFuncFront",2967:"stencilFuncFront",2963:"stencilFuncFront",34816:"stencilFuncBack",36003:"stencilFuncBack",36004:"stencilFuncBack",2964:"stencilOpFront",2965:"stencilOpFront",2966:"stencilOpFront",34817:"stencilOpBack",34818:"stencilOpBack",34819:"stencilOpBack",2978:(t,e)=>t.viewport(...e),3333:Cn,3317:Cn,37440:Cn,37441:Cn,37443:Cn,3330:Cn,3332:Cn,3331:Cn,36010:Qk,3314:Cn,32878:Cn,3316:Cn,3315:Cn,32877:Cn,framebuffer:(t,e)=>{const n=e&&"handle"in e?e.handle:e;return t.bindFramebuffer(36160,n)},blend:(t,e)=>e?t.enable(3042):t.disable(3042),blendColor:(t,e)=>t.blendColor(...e),blendEquation:(t,e)=>{e=_l(e)?e:[e,e],t.blendEquationSeparate(...e)},blendFunc:(t,e)=>{e=_l(e)&&e.length===2?[...e,...e]:e,t.blendFuncSeparate(...e)},clearColor:(t,e)=>t.clearColor(...e),clearDepth:(t,e)=>t.clearDepth(e),clearStencil:(t,e)=>t.clearStencil(e),colorMask:(t,e)=>t.colorMask(...e),cull:(t,e)=>e?t.enable(2884):t.disable(2884),cullFace:(t,e)=>t.cullFace(e),depthTest:(t,e)=>e?t.enable(2929):t.disable(2929),depthFunc:(t,e)=>t.depthFunc(e),depthMask:(t,e)=>t.depthMask(e),depthRange:(t,e)=>t.depthRange(...e),dither:(t,e)=>e?t.enable(3024):t.disable(3024),derivativeHint:(t,e)=>{t.hint(35723,e)},frontFace:(t,e)=>t.frontFace(e),mipmapHint:(t,e)=>t.hint(33170,e),lineWidth:(t,e)=>t.lineWidth(e),polygonOffsetFill:(t,e)=>e?t.enable(32823):t.disable(32823),polygonOffset:(t,e)=>t.polygonOffset(...e),sampleCoverage:(t,e)=>t.sampleCoverage(...e),scissorTest:(t,e)=>e?t.enable(3089):t.disable(3089),scissor:(t,e)=>t.scissor(...e),stencilTest:(t,e)=>e?t.enable(2960):t.disable(2960),stencilMask:(t,e)=>{e=_l(e)?e:[e,e];const[n,r]=e;t.stencilMaskSeparate(1028,n),t.stencilMaskSeparate(1029,r)},stencilFunc:(t,e)=>{e=_l(e)&&e.length===3?[...e,...e]:e;const[n,r,i,s,o,a]=e;t.stencilFuncSeparate(1028,n,r,i),t.stencilFuncSeparate(1029,s,o,a)},stencilOp:(t,e)=>{e=_l(e)&&e.length===3?[...e,...e]:e;const[n,r,i,s,o,a]=e;t.stencilOpSeparate(1028,n,r,i),t.stencilOpSeparate(1029,s,o,a)},viewport:(t,e)=>t.viewport(...e)};function At(t,e,n){return e[t]!==void 0?e[t]:n[t]}const Uk={blendEquation:(t,e,n)=>t.blendEquationSeparate(At(32777,e,n),At(34877,e,n)),blendFunc:(t,e,n)=>t.blendFuncSeparate(At(32969,e,n),At(32968,e,n),At(32971,e,n),At(32970,e,n)),polygonOffset:(t,e,n)=>t.polygonOffset(At(32824,e,n),At(10752,e,n)),sampleCoverage:(t,e,n)=>t.sampleCoverage(At(32938,e,n),At(32939,e,n)),stencilFuncFront:(t,e,n)=>t.stencilFuncSeparate(1028,At(2962,e,n),At(2967,e,n),At(2963,e,n)),stencilFuncBack:(t,e,n)=>t.stencilFuncSeparate(1029,At(34816,e,n),At(36003,e,n),At(36004,e,n)),stencilOpFront:(t,e,n)=>t.stencilOpSeparate(1028,At(2964,e,n),At(2965,e,n),At(2966,e,n)),stencilOpBack:(t,e,n)=>t.stencilOpSeparate(1029,At(34817,e,n),At(34818,e,n),At(34819,e,n))},lx={enable:(t,e)=>t({[e]:!0}),disable:(t,e)=>t({[e]:!1}),pixelStorei:(t,e,n)=>t({[e]:n}),hint:(t,e,n)=>t({[e]:n}),bindFramebuffer:(t,e,n)=>{switch(e){case 36160:return t({36006:n,36010:n});case 36009:return t({36006:n});case 36008:return t({36010:n});default:return null}},blendColor:(t,e,n,r,i)=>t({32773:new Float32Array([e,n,r,i])}),blendEquation:(t,e)=>t({32777:e,34877:e}),blendEquationSeparate:(t,e,n)=>t({32777:e,34877:n}),blendFunc:(t,e,n)=>t({32969:e,32968:n,32971:e,32970:n}),blendFuncSeparate:(t,e,n,r,i)=>t({32969:e,32968:n,32971:r,32970:i}),clearColor:(t,e,n,r,i)=>t({3106:new Float32Array([e,n,r,i])}),clearDepth:(t,e)=>t({2931:e}),clearStencil:(t,e)=>t({2961:e}),colorMask:(t,e,n,r,i)=>t({3107:[e,n,r,i]}),cullFace:(t,e)=>t({2885:e}),depthFunc:(t,e)=>t({2932:e}),depthRange:(t,e,n)=>t({2928:new Float32Array([e,n])}),depthMask:(t,e)=>t({2930:e}),frontFace:(t,e)=>t({2886:e}),lineWidth:(t,e)=>t({2849:e}),polygonOffset:(t,e,n)=>t({32824:e,10752:n}),sampleCoverage:(t,e,n)=>t({32938:e,32939:n}),scissor:(t,e,n,r,i)=>t({3088:new Int32Array([e,n,r,i])}),stencilMask:(t,e)=>t({2968:e,36005:e}),stencilMaskSeparate:(t,e,n)=>t({[e===1028?2968:36005]:n}),stencilFunc:(t,e,n,r)=>t({2962:e,2967:n,2963:r,34816:e,36003:n,36004:r}),stencilFuncSeparate:(t,e,n,r,i)=>t({[e===1028?2962:34816]:n,[e===1028?2967:36003]:r,[e===1028?2963:36004]:i}),stencilOp:(t,e,n,r)=>t({2964:e,2965:n,2966:r,34817:e,34818:n,34819:r}),stencilOpSeparate:(t,e,n,r,i)=>t({[e===1028?2964:34817]:n,[e===1028?2965:34818]:r,[e===1028?2966:34819]:i}),viewport:(t,e,n,r,i)=>t({2978:[e,n,r,i]})},Br=(t,e)=>t.isEnabled(e),cx={3042:Br,2884:Br,2929:Br,3024:Br,32823:Br,32926:Br,32928:Br,3089:Br,2960:Br,35977:Br};function Qb(t){for(const e in t)return!1;return!0}function Gk(t,e){if(t===e)return!0;const n=Array.isArray(t)||ArrayBuffer.isView(t),r=Array.isArray(e)||ArrayBuffer.isView(e);if(n&&r&&t.length===e.length){for(let i=0;i<t.length;++i)if(t[i]!==e[i])return!1;return!0}return!1}function ux(t,e){const n=t[e].bind(t);t[e]=function(){const i=arguments.length<=0?void 0:arguments[0];return i in t.state.cache?t.state.enable?t.state.cache[i]:n(...arguments):n(...arguments)},Object.defineProperty(t[e],"name",{value:"".concat(e,"-from-cache"),configurable:!1})}function zk(t,e,n){const r=t[e].bind(t);t[e]=function(){for(var s=arguments.length,o=new Array(s),a=0;a<s;a++)o[a]=arguments[a];const{valueChanged:l,oldValue:c}=n(t.state._updateCache,...o);return l&&r(...o),c},Object.defineProperty(t[e],"name",{value:"".concat(e,"-to-cache"),configurable:!1})}function Vk(t){const e=t.useProgram.bind(t);t.useProgram=function(r){t.state.program!==r&&(e(r),t.state.program=r)}}class jk{constructor(e){let{copyState:n=!1,log:r=()=>{}}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.gl=e,this.program=null,this.stateStack=[],this.enable=!0,this.cache=n?Wk(e):Object.assign({},gy),this.log=r,this._updateCache=this._updateCache.bind(this),Object.seal(this)}push(){this.stateStack.push({})}pop(){on(this.stateStack.length>0);const e=this.stateStack[this.stateStack.length-1];yi(this.gl,e),this.stateStack.pop()}_updateCache(e){let n=!1,r;const i=this.stateStack.length>0&&this.stateStack[this.stateStack.length-1];for(const s in e){on(s!==void 0);const o=e[s],a=this.cache[s];Gk(o,a)||(n=!0,r=a,i&&!(s in i)&&(i[s]=a),this.cache[s]=o)}return{valueChanged:n,oldValue:r}}}function Fb(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{enable:n=!0,copyState:r}=e;if(on(r!==void 0),!t.state){const{polyfillContext:i}=globalThis;i&&i(t),t.state=new jk(t,{copyState:r}),Vk(t);for(const s in lx){const o=lx[s];zk(t,s,o)}ux(t,"getParameter"),ux(t,"isEnabled")}return t.state.enable=n,t}function Hk(t){t.state||Fb(t,{copyState:!1}),t.state.push()}function fx(t){on(t.state),t.state.pop()}function yi(t,e){if(on(Jh(t),"setParameters requires a WebGL context"),Qb(e))return;const n={};for(const i in e){const s=Number(i),o=Fk[i];o&&(typeof o=="string"?n[o]=!0:o(t,e[i],s))}const r=t.state&&t.state.cache;if(r)for(const i in n){const s=Uk[i];s(t,e,r)}}function Wk(t,e){if(e=e||gy,typeof e=="number"){const i=e,s=cx[i];return s?s(t,i):t.getParameter(i)}const n=Array.isArray(e)?e:Object.keys(e),r={};for(const i of n){const s=cx[i];r[i]=s?s(t,Number(i)):t.getParameter(Number(i))}return r}function Yk(t){yi(t,gy)}function _r(t,e,n){if(Qb(e))return n(t);const{nocatch:r=!0}=e;Hk(t),yi(t,e);let i;if(r)i=n(t),fx(t);else try{i=n(t)}finally{fx(t)}return i}function La(t){const{luma:e}=t;if(t.canvas&&e){const n=e.canvasSizeInfo,r="clientWidth"in n?n.clientWidth:t.canvas.clientWidth;return r?t.drawingBufferWidth/r:1}return 1}function OA(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;const r=La(t),i=t.drawingBufferWidth,s=t.drawingBufferHeight;return Kk(e,r,i,s,n)}function $k(t){const e=typeof window>"u"?1:window.devicePixelRatio||1;return Number.isFinite(t)?t<=0?1:t:t?e:1}function Kk(t,e,n,r,i){const s=dx(t[0],e,n);let o=hx(t[1],e,r,i),a=dx(t[0]+1,e,n);const l=a===n-1?a:a-1;a=hx(t[1]+1,e,r,i);let c;return i?(a=a===0?a:a+1,c=o,o=a):c=a===r-1?a:a-1,{x:s,y:o,width:Math.max(l-s+1,1),height:Math.max(c-o+1,1)}}function dx(t,e,n){return Math.min(Math.round(t*e),n-1)}function hx(t,e,n,r){return r?Math.max(0,n-1-Math.round(t*e)):Math.min(Math.round(t*e),n-1)}const Ay=Ti(),qk=Ay&&typeof document<"u",Ub={webgl2:!0,webgl1:!0,throwOnError:!0,manageState:!0,canvas:null,debug:!1,width:800,height:600};function Gb(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};on(Ay,`createGLContext only available in the browser.
Create your own headless context or use 'createHeadlessContext' from @luma.gl/test-utils`),t=Object.assign({},Ub,t);const{width:e,height:n}=t;function r(a){if(t.throwOnError)throw new Error(a);return console.error(a),null}t.onError=r;let i;const{canvas:s}=t,o=e6({canvas:s,width:e,height:n,onError:r});return i=Jk(o,t),i?(i=py(i,t),t6(i),i):null}function py(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!t||t._instrumented)return t;t._version=t._version||n6(t),t.luma=t.luma||{},t.luma.canvasSizeInfo=t.luma.canvasSizeInfo||{},e=Object.assign({},Ub,e);const{manageState:n,debug:r}=e;return n&&Fb(t,{copyState:!1,log:function(){for(var i=arguments.length,s=new Array(i),o=0;o<i;o++)s[o]=arguments[o];return le.log(1,...s)()}}),Ay&&r&&(globalThis.makeDebugContext?(t=globalThis.makeDebugContext(t,e),le.level=Math.max(le.level,1)):le.warn('WebGL debug mode not activated. import "@luma.gl/debug" to enable.')()),t._instrumented=!0,t}function Xk(t){const e=t.getParameter(7936),n=t.getParameter(7937),r=t.getExtension("WEBGL_debug_renderer_info"),i=r&&t.getParameter(r.UNMASKED_VENDOR_WEBGL||7936),s=r&&t.getParameter(r.UNMASKED_RENDERER_WEBGL||7937);return{vendor:i||e,renderer:s||n,vendorMasked:e,rendererMasked:n,version:t.getParameter(7938),shadingLanguageVersion:t.getParameter(35724)}}function Zk(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t.canvas){const r=$k(e.useDevicePixels);r6(t,r,e);return}const n=t.getExtension("STACKGL_resize_drawingbuffer");n&&"width"in e&&"height"in e&&n.resize(e.width,e.height)}function Jk(t,e){const{onError:n}=e;let r=null;const i=l=>r=l.statusMessage||r;t.addEventListener("webglcontextcreationerror",i,!1);const{webgl1:s=!0,webgl2:o=!0}=e;let a=null;return o&&(a=a||t.getContext("webgl2",e),a=a||t.getContext("experimental-webgl2",e)),s&&(a=a||t.getContext("webgl",e),a=a||t.getContext("experimental-webgl",e)),t.removeEventListener("webglcontextcreationerror",i,!1),a?(e.onContextLost&&t.addEventListener("webglcontextlost",e.onContextLost,!1),e.onContextRestored&&t.addEventListener("webglcontextrestored",e.onContextRestored,!1),a):n("Failed to create ".concat(o&&!s?"WebGL2":"WebGL"," context: ").concat(r||"Unknown error"))}function e6(t){let{canvas:e,width:n=800,height:r=600,onError:i}=t,s;return typeof e=="string"?(qk&&document.readyState==="complete"||i("createGLContext called on canvas '".concat(e,"' before page was loaded")),s=document.getElementById(e)):e?s=e:(s=document.createElement("canvas"),s.id="lumagl-canvas",s.style.width=Number.isFinite(n)?"".concat(n,"px"):"100%",s.style.height=Number.isFinite(r)?"".concat(r,"px"):"100%",document.body.insertBefore(s,document.body.firstChild)),s}function t6(t){const e=Te(t)?"WebGL2":"WebGL1",n=Xk(t),r=n?"(".concat(n.vendor,",").concat(n.renderer,")"):"",i=t.debug?" debug":"";le.info(1,"".concat(e).concat(i," context ").concat(r))()}function n6(t){return typeof WebGL2RenderingContext<"u"&&t instanceof WebGL2RenderingContext?2:1}function r6(t,e,n){let r="width"in n?n.width:t.canvas.clientWidth,i="height"in n?n.height:t.canvas.clientHeight;(!r||!i)&&(le.log(1,"Canvas clientWidth/clientHeight is 0")(),e=1,r=t.canvas.width||1,i=t.canvas.height||1),t.luma=t.luma||{},t.luma.canvasSizeInfo=t.luma.canvasSizeInfo||{};const s=t.luma.canvasSizeInfo;if(s.clientWidth!==r||s.clientHeight!==i||s.devicePixelRatio!==e){let o=e;const a=Math.floor(r*o),l=Math.floor(i*o);t.canvas.width=a,t.canvas.height=l,(t.drawingBufferWidth!==a||t.drawingBufferHeight!==l)&&(le.warn("Device pixel ratio clamped")(),o=Math.min(t.drawingBufferWidth/r,t.drawingBufferHeight/i),t.canvas.width=Math.floor(r*o),t.canvas.height=Math.floor(i*o)),Object.assign(t.luma.canvasSizeInfo,{clientWidth:r,clientHeight:i,devicePixelRatio:e})}}function gx(){let t;if(typeof window<"u"&&window.performance)t=window.performance.now();else if(typeof process<"u"&&process.hrtime){const e=process.hrtime();t=e[0]*1e3+e[1]/1e6}else t=Date.now();return t}class Ax{constructor(e,n){v(this,"name",void 0),v(this,"type",void 0),v(this,"sampleSize",1),v(this,"time",void 0),v(this,"count",void 0),v(this,"samples",void 0),v(this,"lastTiming",void 0),v(this,"lastSampleTime",void 0),v(this,"lastSampleCount",void 0),v(this,"_count",0),v(this,"_time",0),v(this,"_samples",0),v(this,"_startTime",0),v(this,"_timerPending",!1),this.name=e,this.type=n,this.reset()}setSampleSize(e){return this.sampleSize=e,this}incrementCount(){return this.addCount(1),this}decrementCount(){return this.subtractCount(1),this}addCount(e){return this._count+=e,this._samples++,this._checkSampling(),this}subtractCount(e){return this._count-=e,this._samples++,this._checkSampling(),this}addTime(e){return this._time+=e,this.lastTiming=e,this._samples++,this._checkSampling(),this}timeStart(){return this._startTime=gx(),this._timerPending=!0,this}timeEnd(){return this._timerPending?(this.addTime(gx()-this._startTime),this._timerPending=!1,this._checkSampling(),this):this}getSampleAverageCount(){return this.sampleSize>0?this.lastSampleCount/this.sampleSize:0}getSampleAverageTime(){return this.sampleSize>0?this.lastSampleTime/this.sampleSize:0}getSampleHz(){return this.lastSampleTime>0?this.sampleSize/(this.lastSampleTime/1e3):0}getAverageCount(){return this.samples>0?this.count/this.samples:0}getAverageTime(){return this.samples>0?this.time/this.samples:0}getHz(){return this.time>0?this.samples/(this.time/1e3):0}reset(){return this.time=0,this.count=0,this.samples=0,this.lastTiming=0,this.lastSampleTime=0,this.lastSampleCount=0,this._count=0,this._time=0,this._samples=0,this._startTime=0,this._timerPending=!1,this}_checkSampling(){this._samples===this.sampleSize&&(this.lastSampleTime=this._time,this.lastSampleCount=this._count,this.count+=this._count,this.time+=this._time,this.samples+=this._samples,this._time=0,this._count=0,this._samples=0)}}class my{constructor(e){v(this,"id",void 0),v(this,"stats",{}),this.id=e.id,this.stats={},this._initializeStats(e.stats),Object.seal(this)}get(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"count";return this._getOrCreate({name:e,type:n})}get size(){return Object.keys(this.stats).length}reset(){for(const e in this.stats)this.stats[e].reset();return this}forEach(e){for(const n in this.stats)e(this.stats[n])}getTable(){const e={};return this.forEach(n=>{e[n.name]={time:n.time||0,count:n.count||0,average:n.getAverageTime()||0,hz:n.getHz()||0}}),e}_initializeStats(){(arguments.length>0&&arguments[0]!==void 0?arguments[0]:[]).forEach(n=>this._getOrCreate(n))}_getOrCreate(e){if(!e||!e.name)return null;const{name:n,type:r}=e;return this.stats[n]||(e instanceof Ax?this.stats[n]=e:this.stats[n]=new Ax(n,r)),this.stats[n]}}const Zl="8.5.21",i6="set luma.log.level=1 (or higher) to trace rendering";class s6{constructor(){this.stats=new Map}get(e){return this.stats.has(e)||this.stats.set(e,new my({id:e})),this.stats.get(e)}}const $s=new s6;if(globalThis.luma&&globalThis.luma.VERSION!==Zl)throw new Error("luma.gl - multiple VERSIONs detected: ".concat(globalThis.luma.VERSION," vs ").concat(Zl));globalThis.luma||(Ti()&&le.log(1,"luma.gl ".concat(Zl," - ").concat(i6))(),globalThis.luma=globalThis.luma||{VERSION:Zl,version:Zl,log:le,stats:$s,globals:{modules:{},nodeIO:{}}});function o6(t){return typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame(t):setTimeout(t,1e3/60)}function a6(t){return typeof window<"u"&&window.cancelAnimationFrame?window.cancelAnimationFrame(t):clearTimeout(t)}function J(t,e){if(!t)throw new Error(e||"luma.gl: assertion failed.")}function DA(t,e){if(typeof e!="string")return e;const n=Number(e);if(!isNaN(n))return n;e=e.replace(/^.*\./,"");const r=t[e];return J(r!==void 0,"Accessing undefined constant GL.".concat(e)),r}function ls(t,e){e=Number(e);for(const n in t)if(t[n]===e)return"GL.".concat(n);return String(e)}const kA={};function ps(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"id";kA[t]=kA[t]||1;const e=kA[t]++;return"".concat(t,"-").concat(e)}function px(t){return J(typeof t=="number","Input must be a number"),t&&(t&t-1)===0}function Ma(t){let e=!0;for(const n in t){e=!1;break}return e}function zb(t,e,n,r){const i="See luma.gl ".concat(n," Upgrade Guide at https://luma.gl/docs/upgrade-guide"),s=Object.getPrototypeOf(t);r.forEach(o=>{s.methodName||(s[o]=()=>{throw le.removed("Calling removed method ".concat(e,".").concat(o,": "),i)(),new Error(o)})})}const Fo="Resource subclass must define virtual methods";let Bi=class{get[Symbol.toStringTag](){return"Resource"}constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};eg(e);const{id:r,userData:i={}}=n;this.gl=e,this.gl2=e,this.id=r||ps(this[Symbol.toStringTag]),this.userData=i,this._bound=!1,this._handle=n.handle,this._handle===void 0&&(this._handle=this._createHandle()),this.byteLength=0,this._addStats()}toString(){return"".concat(this[Symbol.toStringTag]||this.constructor.name,"(").concat(this.id,")")}get handle(){return this._handle}delete(){let{deleteChildren:e=!1}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const n=this._handle&&this._deleteHandle(this._handle);return this._handle&&this._removeStats(),this._handle=null,n&&e&&n.filter(Boolean).forEach(r=>r.delete()),this}bind(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.handle;if(typeof e!="function")return this._bindHandle(e),this;let n;return this._bound?n=e():(this._bindHandle(this.handle),this._bound=!0,n=e(),this._bound=!1,this._bindHandle(null)),n}unbind(){this.bind(null)}getParameter(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};e=DA(this.gl,e),J(e);const i=(this.constructor.PARAMETERS||{})[e];if(i){const s=Te(this.gl);if(!((!("webgl2"in i)||s)&&(!("extension"in i)||this.gl.getExtension(i.extension)))){const a=i.webgl1,l="webgl2"in i?i.webgl2:i.webgl1;return s?l:a}}return this._getParameter(e,n)}getParameters(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{parameters:n,keys:r}=e,i=this.constructor.PARAMETERS||{},s=Te(this.gl),o={},a=n||Object.keys(i);for(const l of a){const c=i[l];if(c&&(!("webgl2"in c)||s)&&(!("extension"in c)||this.gl.getExtension(c.extension))){const f=r?ls(this.gl,l):l;o[f]=this.getParameter(l,e),r&&c.type==="GLenum"&&(o[f]=ls(this.gl,o[f]))}}return o}setParameter(e,n){e=DA(this.gl,e),J(e);const i=(this.constructor.PARAMETERS||{})[e];if(i){const s=Te(this.gl);if(!((!("webgl2"in i)||s)&&(!("extension"in i)||this.gl.getExtension(i.extension))))throw new Error("Parameter not available on this platform");i.type==="GLenum"&&(n=DA(n))}return this._setParameter(e,n),this}setParameters(e){for(const n in e)this.setParameter(n,e[n]);return this}stubRemovedMethods(e,n,r){return zb(this,e,n,r)}initialize(e){}_createHandle(){throw new Error(Fo)}_deleteHandle(){throw new Error(Fo)}_bindHandle(e){throw new Error(Fo)}_getOptsFromHandle(){throw new Error(Fo)}_getParameter(e,n){throw new Error(Fo)}_setParameter(e,n){throw new Error(Fo)}_context(){return this.gl.luma=this.gl.luma||{},this.gl.luma}_addStats(){const e=this[Symbol.toStringTag],n=$s.get("Resource Counts");n.get("Resources Created").incrementCount(),n.get("".concat(e,"s Created")).incrementCount(),n.get("".concat(e,"s Active")).incrementCount()}_removeStats(){const e=this[Symbol.toStringTag];$s.get("Resource Counts").get("".concat(e,"s Active")).decrementCount()}_trackAllocatedMemory(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this[Symbol.toStringTag];this._trackAllocatedMemoryForContext(e,n),this._trackAllocatedMemoryForContext(e,n,this.gl.canvas&&this.gl.canvas.id),this.byteLength=e}_trackAllocatedMemoryForContext(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this[Symbol.toStringTag],r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"";const i=$s.get("Memory Usage".concat(r));i.get("GPU Memory").addCount(e),i.get("".concat(n," Memory")).addCount(e)}_trackDeallocatedMemory(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this[Symbol.toStringTag];this._trackDeallocatedMemoryForContext(e),this._trackDeallocatedMemoryForContext(e,this.gl.canvas&&this.gl.canvas.id),this.byteLength=0}_trackDeallocatedMemoryForContext(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this[Symbol.toStringTag],n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";const r=$s.get("Memory Usage".concat(n));r.get("GPU Memory").subtractCount(this.byteLength),r.get("".concat(e," Memory")).subtractCount(this.byteLength)}};const l6="Failed to deduce GL constant from typed array";function F0(t){switch(ArrayBuffer.isView(t)?t.constructor:t){case Float32Array:return 5126;case Uint16Array:return 5123;case Uint32Array:return 5125;case Uint8Array:return 5121;case Uint8ClampedArray:return 5121;case Int8Array:return 5120;case Int16Array:return 5122;case Int32Array:return 5124;default:throw new Error(l6)}}function wc(t){let{clamped:e=!0}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};switch(t){case 5126:return Float32Array;case 5123:case 33635:case 32819:case 32820:return Uint16Array;case 5125:return Uint32Array;case 5121:return e?Uint8ClampedArray:Uint8Array;case 5120:return Int8Array;case 5122:return Int16Array;case 5124:return Int32Array;default:throw new Error("Failed to deduce typed array type from GL constant")}}function c6(t){let{data:e,width:n,height:r,bytesPerPixel:i=4,temp:s}=t;const o=n*i;s=s||new Uint8Array(o);for(let a=0;a<r/2;++a){const l=a*o,c=(r-a-1)*o;s.set(e.subarray(l,l+o)),e.copyWithin(l,c,c+o),e.set(s,c)}}function u6(t){let{data:e,width:n,height:r}=t;const i=Math.round(n/2),s=Math.round(r/2),o=new Uint8Array(i*s*4);for(let a=0;a<s;a++)for(let l=0;l<i;l++)for(let c=0;c<4;c++)o[(a*i+l)*4+c]=e[(a*2*n+l*2)*4+c];return{data:o,width:i,height:s}}function U0(t,e,n){const{removedProps:r={},deprecatedProps:i={},replacedProps:s={}}=n;for(const a in r)if(a in e){const c=r[a]?"".concat(t,".").concat(r[a]):"N/A";le.removed("".concat(t,".").concat(a),c)()}for(const a in i)if(a in e){const l=i[a];le.deprecated("".concat(t,".").concat(a),"".concat(t,".").concat(l))()}let o=null;for(const a in s)if(a in e){const l=s[a];le.deprecated("".concat(t,".").concat(a),"".concat(t,".").concat(l))(),o=o||Object.assign({},e),o[l]=e[a],delete o[a]}return o||e}const f6={offset:0,stride:0,type:5126,size:1,divisor:0,normalized:!1,integer:!1},d6={deprecatedProps:{instanced:"divisor",isInstanced:"divisor"}};class Tn{static getBytesPerElement(e){return wc(e.type||5126).BYTES_PER_ELEMENT}static getBytesPerVertex(e){return J(e.size),wc(e.type||5126).BYTES_PER_ELEMENT*e.size}static resolve(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return new Tn(f6,...n)}constructor(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];n.forEach(i=>this._assign(i)),Object.freeze(this)}toString(){return JSON.stringify(this)}get BYTES_PER_ELEMENT(){return Tn.getBytesPerElement(this)}get BYTES_PER_VERTEX(){return Tn.getBytesPerVertex(this)}_assign(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return e=U0("Accessor",e,d6),e.type!==void 0&&(this.type=e.type,(e.type===5124||e.type===5125)&&(this.integer=!0)),e.size!==void 0&&(this.size=e.size),e.offset!==void 0&&(this.offset=e.offset),e.stride!==void 0&&(this.stride=e.stride),e.normalized!==void 0&&(this.normalized=e.normalized),e.integer!==void 0&&(this.integer=e.integer),e.divisor!==void 0&&(this.divisor=e.divisor),e.buffer!==void 0&&(this.buffer=e.buffer),e.index!==void 0&&(typeof e.index=="boolean"?this.index=e.index?1:0:this.index=e.index),e.instanced!==void 0&&(this.divisor=e.instanced?1:0),e.isInstanced!==void 0&&(this.divisor=e.isInstanced?1:0),this}}const mx=10,Vb={offset:"accessor.offset",stride:"accessor.stride",type:"accessor.type",size:"accessor.size",divisor:"accessor.divisor",normalized:"accessor.normalized",integer:"accessor.integer",instanced:"accessor.divisor",isInstanced:"accessor.divisor"},h6={removedProps:{},replacedProps:{bytes:"byteLength"},deprecatedProps:Vb},g6={removedProps:Vb};let Ve=class extends Bi{get[Symbol.toStringTag](){return"Buffer"}constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(e,n),this.stubRemovedMethods("Buffer","v6.0",["layout","setLayout","getIndexedParameter"]),this.target=n.target||(this.gl.webgl2?36662:34962),this.initialize(n),Object.seal(this)}getElementCount(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.accessor;return Math.round(this.byteLength/Tn.getBytesPerElement(e))}getVertexCount(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.accessor;return Math.round(this.byteLength/Tn.getBytesPerVertex(e))}initialize(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return ArrayBuffer.isView(e)&&(e={data:e}),Number.isFinite(e)&&(e={byteLength:e}),e=U0("Buffer",e,h6),this.usage=e.usage||35044,this.debugData=null,this.setAccessor(Object.assign({},e,e.accessor)),e.data?this._setData(e.data,e.offset,e.byteLength):this._setByteLength(e.byteLength||0),this}setProps(e){return e=U0("Buffer",e,g6),"accessor"in e&&this.setAccessor(e.accessor),this}setAccessor(e){return e=Object.assign({},e),delete e.buffer,this.accessor=new Tn(e),this}reallocate(e){return e>this.byteLength?(this._setByteLength(e),!0):(this.bytesUsed=e,!1)}setData(e){return this.initialize(e)}subData(e){ArrayBuffer.isView(e)&&(e={data:e});const{data:n,offset:r=0,srcOffset:i=0}=e,s=e.byteLength||e.length;J(n);const o=this.gl.webgl2?36663:this.target;return this.gl.bindBuffer(o,this.handle),i!==0||s!==void 0?(Jt(this.gl),this.gl.bufferSubData(this.target,r,n,i,s)):this.gl.bufferSubData(o,r,n),this.gl.bindBuffer(o,null),this.debugData=null,this._inferType(n),this}copyData(e){let{sourceBuffer:n,readOffset:r=0,writeOffset:i=0,size:s}=e;const{gl:o}=this;return Jt(o),o.bindBuffer(36662,n.handle),o.bindBuffer(36663,this.handle),o.copyBufferSubData(36662,36663,r,i,s),o.bindBuffer(36662,null),o.bindBuffer(36663,null),this.debugData=null,this}getData(){let{dstData:e=null,srcByteOffset:n=0,dstOffset:r=0,length:i=0}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Jt(this.gl);const s=wc(this.accessor.type||5126,{clamped:!1}),o=this._getAvailableElementCount(n),a=r;let l,c;e?(c=e.length,l=c-a):(l=Math.min(o,i||o),c=a+l);const u=Math.min(o,l);return i=i||u,J(i<=u),e=e||new s(c),this.gl.bindBuffer(36662,this.handle),this.gl.getBufferSubData(36662,n,e,r,i),this.gl.bindBuffer(36662,null),e}bind(){let{target:e=this.target,index:n=this.accessor&&this.accessor.index,offset:r=0,size:i}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return e===35345||e===35982?i!==void 0?this.gl.bindBufferRange(e,n,this.handle,r,i):(J(r===0),this.gl.bindBufferBase(e,n,this.handle)):this.gl.bindBuffer(e,this.handle),this}unbind(){let{target:e=this.target,index:n=this.accessor&&this.accessor.index}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return e===35345||e===35982?this.gl.bindBufferBase(e,n,null):this.gl.bindBuffer(e,null),this}getDebugData(){return this.debugData?{data:this.debugData,changed:!1}:(this.debugData=this.getData({length:Math.min(mx,this.byteLength)}),{data:this.debugData,changed:!0})}invalidateDebugData(){this.debugData=null}_setData(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:e.byteLength+n;J(ArrayBuffer.isView(e)),this._trackDeallocatedMemory();const i=this._getTarget();this.gl.bindBuffer(i,this.handle),this.gl.bufferData(i,r,this.usage),this.gl.bufferSubData(i,n,e),this.gl.bindBuffer(i,null),this.debugData=e.slice(0,mx),this.bytesUsed=r,this._trackAllocatedMemory(r);const s=F0(e);return J(s),this.setAccessor(new Tn(this.accessor,{type:s})),this}_setByteLength(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.usage;J(e>=0),this._trackDeallocatedMemory();let r=e;e===0&&(r=new Float32Array(0));const i=this._getTarget();return this.gl.bindBuffer(i,this.handle),this.gl.bufferData(i,r,n),this.gl.bindBuffer(i,null),this.usage=n,this.debugData=null,this.bytesUsed=e,this._trackAllocatedMemory(e),this}_getTarget(){return this.gl.webgl2?36663:this.target}_getAvailableElementCount(e){const n=wc(this.accessor.type||5126,{clamped:!1}),r=e/n.BYTES_PER_ELEMENT;return this.getElementCount()-r}_inferType(e){this.accessor.type||this.setAccessor(new Tn(this.accessor,{type:F0(e)}))}_createHandle(){return this.gl.createBuffer()}_deleteHandle(){this.gl.deleteBuffer(this.handle),this._trackDeallocatedMemory()}_getParameter(e){this.gl.bindBuffer(this.target,this.handle);const n=this.gl.getBufferParameter(this.target,e);return this.gl.bindBuffer(this.target,null),n}get type(){return le.deprecated("Buffer.type","Buffer.accessor.type")(),this.accessor.type}get bytes(){return le.deprecated("Buffer.bytes","Buffer.byteLength")(),this.byteLength}setByteLength(e){return le.deprecated("setByteLength","reallocate")(),this.reallocate(e)}updateAccessor(e){return le.deprecated("updateAccessor(...)","setAccessor(new Accessor(buffer.accessor, ...)")(),this.accessor=new Tn(this.accessor,e),this}};const vy={6407:{dataFormat:6407,types:[5121,33635]},6408:{dataFormat:6408,types:[5121,32819,32820]},6406:{dataFormat:6406,types:[5121]},6409:{dataFormat:6409,types:[5121]},6410:{dataFormat:6410,types:[5121]},33326:{dataFormat:6403,types:[5126],gl2:!0},33328:{dataFormat:33319,types:[5126],gl2:!0},34837:{dataFormat:6407,types:[5126],gl2:!0},34836:{dataFormat:6408,types:[5126],gl2:!0}},jb={6403:1,36244:1,33319:2,33320:2,6407:3,36248:3,6408:4,36249:4,6402:1,34041:1,6406:1,6409:1,6410:2},Hb={5126:4,5125:4,5124:4,5123:2,5122:2,5131:2,5120:1,5121:1};function A6(t,e){const n=vy[e];if(!n)return!1;if(n.gl1===void 0&&n.gl2===void 0)return!0;const r=Te(t)&&n.gl2||n.gl1;return typeof r=="string"?t.getExtension(r):r}function p6(t,e){const n=vy[e];switch(n&&n.types[0]){case 5126:return t.getExtension("OES_texture_float_linear");case 5131:return t.getExtension("OES_texture_half_float_linear");default:return!0}}const m6=[9729,9728],vx=globalThis.WebGLBuffer||function(){};class lo extends Bi{get[Symbol.toStringTag](){return"Texture"}static isSupported(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{format:r,linearFiltering:i}=n;let s=!0;return r&&(s=s&&A6(e,r),s=s&&(!i||p6(e,r))),s}constructor(e,n){const{id:r=ps("texture"),handle:i,target:s}=n;super(e,{id:r,handle:i}),this.target=s,this.textureUnit=void 0,this.loaded=!1,this.width=void 0,this.height=void 0,this.depth=void 0,this.format=void 0,this.type=void 0,this.dataFormat=void 0,this.border=void 0,this.textureUnit=void 0,this.mipmaps=void 0}toString(){return"Texture(".concat(this.id,",").concat(this.width,"x").concat(this.height,")")}initialize(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=e.data;if(n instanceof Promise)return n.then(m=>this.initialize(Object.assign({},e,{pixels:m,data:m}))),this;const r=typeof HTMLVideoElement<"u"&&n instanceof HTMLVideoElement;if(r&&n.readyState<HTMLVideoElement.HAVE_METADATA)return this._video=null,n.addEventListener("loadeddata",()=>this.initialize(e)),this;const{pixels:i=null,format:s=6408,border:o=0,recreate:a=!1,parameters:l={},pixelStore:c={},textureUnit:u=void 0}=e;n||(n=i);let{width:f,height:d,dataFormat:h,type:g,compressed:A=!1,mipmaps:E=!0}=e;const{depth:p=0}=e;return{width:f,height:d,compressed:A,dataFormat:h,type:g}=this._deduceParameters({format:s,type:g,dataFormat:h,compressed:A,data:n,width:f,height:d}),this.width=f,this.height=d,this.depth=p,this.format=s,this.type=g,this.dataFormat=h,this.border=o,this.textureUnit=u,Number.isFinite(this.textureUnit)&&(this.gl.activeTexture(33984+this.textureUnit),this.gl.bindTexture(this.target,this.handle)),E&&this._isNPOT()&&(le.warn("texture: ".concat(this," is Non-Power-Of-Two, disabling mipmaping"))(),E=!1,this._updateForNPOT(l)),this.mipmaps=E,this.setImageData({data:n,width:f,height:d,depth:p,format:s,type:g,dataFormat:h,border:o,mipmaps:E,parameters:c,compressed:A}),E&&this.generateMipmap(),this.setParameters(l),a&&(this.data=n),r&&(this._video={video:n,parameters:l,lastTime:n.readyState>=HTMLVideoElement.HAVE_CURRENT_DATA?n.currentTime:-1}),this}update(){if(this._video){const{video:e,parameters:n,lastTime:r}=this._video;if(r===e.currentTime||e.readyState<HTMLVideoElement.HAVE_CURRENT_DATA)return;this.setSubImageData({data:e,parameters:n}),this.mipmaps&&this.generateMipmap(),this._video.lastTime=e.currentTime}}resize(e){let{height:n,width:r,mipmaps:i=!1}=e;return r!==this.width||n!==this.height?this.initialize({width:r,height:n,format:this.format,type:this.type,dataFormat:this.dataFormat,border:this.border,mipmaps:i}):this}generateMipmap(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this._isNPOT()?(le.warn("texture: ".concat(this," is Non-Power-Of-Two, disabling mipmaping"))(),this):(this.mipmaps=!0,this.gl.bindTexture(this.target,this.handle),_r(this.gl,e,()=>{this.gl.generateMipmap(this.target)}),this.gl.bindTexture(this.target,null),this)}setImageData(e){this._trackDeallocatedMemory("Texture");const{target:n=this.target,pixels:r=null,level:i=0,format:s=this.format,border:o=this.border,offset:a=0,parameters:l={}}=e;let{data:c=null,type:u=this.type,width:f=this.width,height:d=this.height,dataFormat:h=this.dataFormat,compressed:g=!1}=e;c||(c=r),{type:u,dataFormat:h,compressed:g,width:f,height:d}=this._deduceParameters({format:s,type:u,dataFormat:h,compressed:g,data:c,width:f,height:d});const{gl:A}=this;A.bindTexture(this.target,this.handle);let E=null;({data:c,dataType:E}=this._getDataType({data:c,compressed:g}));let p,m=0;if(_r(this.gl,l,()=>{switch(E){case"null":A.texImage2D(n,i,s,f,d,o,h,u,c);break;case"typed-array":A.texImage2D(n,i,s,f,d,o,h,u,c,a);break;case"buffer":p=Jt(A),p.bindBuffer(35052,c.handle||c),p.texImage2D(n,i,s,f,d,o,h,u,a),p.bindBuffer(35052,null);break;case"browser-object":Te(A)?A.texImage2D(n,i,s,f,d,o,h,u,c):A.texImage2D(n,i,s,h,u,c);break;case"compressed":for(const[y,_]of c.entries())A.compressedTexImage2D(n,y,_.format,_.width,_.height,o,_.data),m+=_.levelSize;break;default:J(!1,"Unknown image data type")}}),E==="compressed")this._trackAllocatedMemory(m,"Texture");else if(c&&c.byteLength)this._trackAllocatedMemory(c.byteLength,"Texture");else{const y=jb[this.dataFormat]||4,_=Hb[this.type]||1;this._trackAllocatedMemory(this.width*this.height*y*_,"Texture")}return this.loaded=!0,this}setSubImageData(e){let{target:n=this.target,pixels:r=null,data:i=null,x:s=0,y:o=0,width:a=this.width,height:l=this.height,level:c=0,format:u=this.format,type:f=this.type,dataFormat:d=this.dataFormat,compressed:h=!1,offset:g=0,border:A=this.border,parameters:E={}}=e;if({type:f,dataFormat:d,compressed:h,width:a,height:l}=this._deduceParameters({format:u,type:f,dataFormat:d,compressed:h,data:i,width:a,height:l}),J(this.depth===0,"texSubImage not supported for 3D textures"),i||(i=r),i&&i.data){const p=i;i=p.data,a=p.shape[0],l=p.shape[1]}i instanceof Ve&&(i=i.handle),this.gl.bindTexture(this.target,this.handle),_r(this.gl,E,()=>{if(h)this.gl.compressedTexSubImage2D(n,c,s,o,a,l,u,i);else if(i===null)this.gl.texSubImage2D(n,c,s,o,a,l,d,f,null);else if(ArrayBuffer.isView(i))this.gl.texSubImage2D(n,c,s,o,a,l,d,f,i,g);else if(i instanceof vx){const p=Jt(this.gl);p.bindBuffer(35052,i),p.texSubImage2D(n,c,s,o,a,l,d,f,g),p.bindBuffer(35052,null)}else Te(this.gl)?Jt(this.gl).texSubImage2D(n,c,s,o,a,l,d,f,i):this.gl.texSubImage2D(n,c,s,o,d,f,i)}),this.gl.bindTexture(this.target,null)}copyFramebuffer(){return le.error("Texture.copyFramebuffer({...}) is no logner supported, use copyToTexture(source, target, opts})")(),null}getActiveUnit(){return this.gl.getParameter(34016)-33984}bind(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.textureUnit;const{gl:n}=this;return e!==void 0&&(this.textureUnit=e,n.activeTexture(33984+e)),n.bindTexture(this.target,this.handle),e}unbind(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.textureUnit;const{gl:n}=this;return e!==void 0&&(this.textureUnit=e,n.activeTexture(33984+e)),n.bindTexture(this.target,null),e}_getDataType(e){let{data:n,compressed:r=!1}=e;return r?{data:n,dataType:"compressed"}:n===null?{data:n,dataType:"null"}:ArrayBuffer.isView(n)?{data:n,dataType:"typed-array"}:n instanceof Ve?{data:n.handle,dataType:"buffer"}:n instanceof vx?{data:n,dataType:"buffer"}:{data:n,dataType:"browser-object"}}_deduceParameters(e){const{format:n,data:r}=e;let{width:i,height:s,dataFormat:o,type:a,compressed:l}=e;const c=vy[n];return o=o||c&&c.dataFormat,a=a||c&&c.types[0],l=l||c&&c.compressed,{width:i,height:s}=this._deduceImageSize(r,i,s),{dataFormat:o,type:a,compressed:l,width:i,height:s,format:n,data:r}}_deduceImageSize(e,n,r){let i;return typeof ImageData<"u"&&e instanceof ImageData?i={width:e.width,height:e.height}:typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement?i={width:e.naturalWidth,height:e.naturalHeight}:typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement?i={width:e.width,height:e.height}:typeof ImageBitmap<"u"&&e instanceof ImageBitmap?i={width:e.width,height:e.height}:typeof HTMLVideoElement<"u"&&e instanceof HTMLVideoElement?i={width:e.videoWidth,height:e.videoHeight}:e?i={width:n,height:r}:i={width:n>=0?n:1,height:r>=0?r:1},J(i,"Could not deduced texture size"),J(n===void 0||i.width===n,"Deduced texture width does not match supplied width"),J(r===void 0||i.height===r,"Deduced texture height does not match supplied height"),i}_createHandle(){return this.gl.createTexture()}_deleteHandle(){this.gl.deleteTexture(this.handle),this._trackDeallocatedMemory("Texture")}_getParameter(e){switch(e){case 4096:return this.width;case 4097:return this.height;default:this.gl.bindTexture(this.target,this.handle);const n=this.gl.getTexParameter(this.target,e);return this.gl.bindTexture(this.target,null),n}}_setParameter(e,n){switch(this.gl.bindTexture(this.target,this.handle),n=this._getNPOTParam(e,n),e){case 33082:case 33083:this.gl.texParameterf(this.handle,e,n);break;case 4096:case 4097:J(!1);break;default:this.gl.texParameteri(this.target,e,n);break}return this.gl.bindTexture(this.target,null),this}_isNPOT(){return Te(this.gl)||!this.width||!this.height?!1:!px(this.width)||!px(this.height)}_updateForNPOT(e){e[this.gl.TEXTURE_MIN_FILTER]===void 0&&(e[this.gl.TEXTURE_MIN_FILTER]=this.gl.LINEAR),e[this.gl.TEXTURE_WRAP_S]===void 0&&(e[this.gl.TEXTURE_WRAP_S]=this.gl.CLAMP_TO_EDGE),e[this.gl.TEXTURE_WRAP_T]===void 0&&(e[this.gl.TEXTURE_WRAP_T]=this.gl.CLAMP_TO_EDGE)}_getNPOTParam(e,n){if(this._isNPOT())switch(e){case 10241:m6.indexOf(n)===-1&&(n=9729);break;case 10242:case 10243:n!==33071&&(n=33071);break}return n}}let v6="";function y6(t,e){return J(typeof t=="string"),t=v6+t,new Promise((n,r)=>{try{const i=new Image;i.onload=()=>n(i),i.onerror=()=>r(new Error("Could not load image ".concat(t,"."))),i.crossOrigin=e&&e.crossOrigin||"anonymous",i.src=t}catch(i){r(i)}})}class _n extends lo{get[Symbol.toStringTag](){return"Texture2D"}static isSupported(e,n){return lo.isSupported(e,n)}constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};eg(e),(n instanceof Promise||typeof n=="string")&&(n={data:n}),typeof n.data=="string"&&(n=Object.assign({},n,{data:y6(n.data)})),super(e,Object.assign({},n,{target:3553})),this.initialize(n),Object.seal(this)}}const G0=[34069,34070,34071,34072,34073,34074];class Wb extends lo{get[Symbol.toStringTag](){return"TextureCube"}constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};eg(e),super(e,Object.assign({},n,{target:34067})),this.initialize(n),Object.seal(this)}initialize(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{mipmaps:n=!0,parameters:r={}}=e;return this.opts=e,this.setCubeMapImageData(e).then(()=>{this.loaded=!0,n&&this.generateMipmap(e),this.setParameters(r)}),this}subImage(e){let{face:n,data:r,x:i=0,y:s=0,mipmapLevel:o=0}=e;return this._subImage({target:n,data:r,x:i,y:s,mipmapLevel:o})}async setCubeMapImageData(e){let{width:n,height:r,pixels:i,data:s,border:o=0,format:a=6408,type:l=5121}=e;const{gl:c}=this,u=i||s,f=await Promise.all(G0.map(d=>{const h=u[d];return Promise.all(Array.isArray(h)?h:[h])}));this.bind(),G0.forEach((d,h)=>{f[h].length>1&&this.opts.mipmaps!==!1&&le.warn("".concat(this.id," has mipmap and multiple LODs."))(),f[h].forEach((g,A)=>{n&&r?c.texImage2D(d,A,a,n,r,o,a,l,g):c.texImage2D(d,A,a,a,l,g)})}),this.unbind()}setImageDataForFace(e){const{face:n,width:r,height:i,pixels:s,data:o,border:a=0,format:l=6408,type:c=5121}=e,{gl:u}=this,f=s||o;return this.bind(),f instanceof Promise?f.then(d=>this.setImageDataForFace(Object.assign({},e,{face:n,data:d,pixels:d}))):this.width||this.height?u.texImage2D(n,0,l,r,i,a,l,c,f):u.texImage2D(n,0,l,l,c,f),this}}Wb.FACES=G0;class Yb extends lo{get[Symbol.toStringTag](){return"Texture3D"}static isSupported(e){return Te(e)}constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};Jt(e),n=Object.assign({depth:1},n,{target:32879,unpackFlipY:!1}),super(e,n),this.initialize(n),Object.seal(this)}setImageData(e){let{level:n=0,dataFormat:r=6408,width:i,height:s,depth:o=1,border:a=0,format:l,type:c=5121,offset:u=0,data:f,parameters:d={}}=e;if(this._trackDeallocatedMemory("Texture"),this.gl.bindTexture(this.target,this.handle),_r(this.gl,d,()=>{ArrayBuffer.isView(f)&&this.gl.texImage3D(this.target,n,r,i,s,o,a,l,c,f),f instanceof Ve&&(this.gl.bindBuffer(35052,f.handle),this.gl.texImage3D(this.target,n,r,i,s,o,a,l,c,u))}),f&&f.byteLength)this._trackAllocatedMemory(f.byteLength,"Texture");else{const h=jb[this.dataFormat]||4,g=Hb[this.type]||1;this._trackAllocatedMemory(this.width*this.height*this.depth*h*g,"Texture")}return this.loaded=!0,this}}const Ms="EXT_color_buffer_float",yx={33189:{bpp:2},33190:{gl2:!0,bpp:3},36012:{gl2:!0,bpp:4},36168:{bpp:1},34041:{bpp:4},35056:{gl2:!0,bpp:4},36013:{gl2:!0,bpp:5},32854:{bpp:2},36194:{bpp:2},32855:{bpp:2},33321:{gl2:!0,bpp:1},33330:{gl2:!0,bpp:1},33329:{gl2:!0,bpp:1},33332:{gl2:!0,bpp:2},33331:{gl2:!0,bpp:2},33334:{gl2:!0,bpp:4},33333:{gl2:!0,bpp:4},33323:{gl2:!0,bpp:2},33336:{gl2:!0,bpp:2},33335:{gl2:!0,bpp:2},33338:{gl2:!0,bpp:4},33337:{gl2:!0,bpp:4},33340:{gl2:!0,bpp:8},33339:{gl2:!0,bpp:8},32849:{gl2:!0,bpp:3},32856:{gl2:!0,bpp:4},32857:{gl2:!0,bpp:4},36220:{gl2:!0,bpp:4},36238:{gl2:!0,bpp:4},36975:{gl2:!0,bpp:4},36214:{gl2:!0,bpp:8},36232:{gl2:!0,bpp:8},36226:{gl2:!0,bpp:16},36208:{gl2:!0,bpp:16},33325:{gl2:Ms,bpp:2},33327:{gl2:Ms,bpp:4},34842:{gl2:Ms,bpp:8},33326:{gl2:Ms,bpp:4},33328:{gl2:Ms,bpp:8},34836:{gl2:Ms,bpp:16},35898:{gl2:Ms,bpp:4}};function E6(t,e,n){const r=n[e];if(!r)return!1;const i=Te(t)&&r.gl2||r.gl1;return typeof i=="string"?t.getExtension(i):i}class oa extends Bi{get[Symbol.toStringTag](){return"Renderbuffer"}static isSupported(e){let{format:n}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{format:null};return!n||E6(e,n,yx)}static getSamplesForFormat(e,n){let{format:r}=n;return e.getInternalformatParameter(36161,r,32937)}constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(e,n),this.initialize(n),Object.seal(this)}initialize(e){let{format:n,width:r=1,height:i=1,samples:s=0}=e;return J(n,"Needs format"),this._trackDeallocatedMemory(),this.gl.bindRenderbuffer(36161,this.handle),s!==0&&Te(this.gl)?this.gl.renderbufferStorageMultisample(36161,s,n,r,i):this.gl.renderbufferStorage(36161,n,r,i),this.format=n,this.width=r,this.height=i,this.samples=s,this._trackAllocatedMemory(this.width*this.height*(this.samples||1)*yx[this.format].bpp),this}resize(e){let{width:n,height:r}=e;return n!==this.width||r!==this.height?this.initialize({width:n,height:r,format:this.format,samples:this.samples}):this}_createHandle(){return this.gl.createRenderbuffer()}_deleteHandle(){this.gl.deleteRenderbuffer(this.handle),this._trackDeallocatedMemory()}_bindHandle(e){this.gl.bindRenderbuffer(36161,e)}_syncHandle(e){this.format=this.getParameter(36164),this.width=this.getParameter(36162),this.height=this.getParameter(36163),this.samples=this.getParameter(36011)}_getParameter(e){return this.gl.bindRenderbuffer(36161,this.handle),this.gl.getRenderbufferParameter(36161,e)}}const _6=256,x6=1024,C6=16384,Ex=6144,_x=6145,xx=6146,Cx=34041,$b="clear: bad arguments";function yy(t){let{framebuffer:e=null,color:n=null,depth:r=null,stencil:i=null}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const s={};e&&(s.framebuffer=e);let o=0;n&&(o|=C6,n!==!0&&(s.clearColor=n)),r&&(o|=_6,r!==!0&&(s.clearDepth=r)),i&&(o|=x6,r!==!0&&(s.clearStencil=r)),J(o!==0,$b),_r(t,s,()=>{t.clear(o)})}function I6(t){let{framebuffer:e=null,buffer:n=Ex,drawBuffer:r=0,value:i=[0,0,0,0]}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};Jt(t),_r(t,{framebuffer:e},()=>{switch(n){case Ex:switch(i.constructor){case Int32Array:t.clearBufferiv(n,r,i);break;case Uint32Array:t.clearBufferuiv(n,r,i);break;case Float32Array:default:t.clearBufferfv(n,r,i)}break;case _x:t.clearBufferfv(_x,0,[i]);break;case xx:t.clearBufferiv(xx,0,[i]);break;case Cx:const[s,o]=i;t.clearBufferfi(Cx,0,s,o);break;default:J(!1,$b)}})}function w6(t){switch(t){case 6406:case 33326:case 6403:return 1;case 33328:case 33319:return 2;case 6407:case 34837:return 3;case 6408:case 34836:return 4;default:return J(!1),0}}function tg(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{sourceX:n=0,sourceY:r=0,sourceFormat:i=6408}=e;let{sourceAttachment:s=36064,target:o=null,sourceWidth:a,sourceHeight:l,sourceType:c}=e;const{framebuffer:u,deleteFramebuffer:f}=Kb(t);J(u);const{gl:d,handle:h,attachments:g}=u;a=a||u.width,l=l||u.height,s===36064&&h===null&&(s=1028),J(g[s]),c=c||g[s].type,o=b6(o,c,i,a,l),c=c||F0(o);const A=d.bindFramebuffer(36160,h);return d.readPixels(n,r,a,l,i,c,o),d.bindFramebuffer(36160,A||null),f&&u.delete(),o}function Ix(t){let{sourceAttachment:e=36064,targetMaxHeight:n=Number.MAX_SAFE_INTEGER}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=tg(t,{sourceAttachment:e}),{width:i,height:s}=t;for(;s>n;)({data:r,width:i,height:s}=u6({data:r,width:i,height:s}));c6({data:r,width:i,height:s});const o=document.createElement("canvas");o.width=i,o.height=s;const a=o.getContext("2d"),l=a.createImageData(i,s);return l.data.set(r),a.putImageData(l,0,0),o.toDataURL()}function S6(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const{sourceX:r=0,sourceY:i=0,targetMipmaplevel:s=0,targetInternalFormat:o=6408}=n;let{targetX:a,targetY:l,targetZ:c,width:u,height:f}=n;const{framebuffer:d,deleteFramebuffer:h}=Kb(t);J(d);const{gl:g,handle:A}=d,E=typeof a<"u"||typeof l<"u"||typeof c<"u";a=a||0,l=l||0,c=c||0;const p=g.bindFramebuffer(36160,A);J(e);let m=null;if(e instanceof lo&&(m=e,u=Number.isFinite(u)?u:m.width,f=Number.isFinite(f)?f:m.height,m.bind(0),e=m.target),!E)g.copyTexImage2D(e,s,o,r,i,u,f,0);else switch(e){case 3553:case 34067:g.copyTexSubImage2D(e,s,a,l,r,i,u,f);break;case 35866:case 32879:Jt(g).copyTexSubImage3D(e,s,a,l,c,r,i,u,f);break}return m&&m.unbind(),g.bindFramebuffer(36160,p||null),h&&d.delete(),m}function Kb(t){return t instanceof bt?{framebuffer:t,deleteFramebuffer:!1}:{framebuffer:D6(t),deleteFramebuffer:!0}}function b6(t,e,n,r,i){if(t)return t;e=e||5121;const s=wc(e,{clamped:!1}),o=w6(n);return new s(r*i*o)}const je={WEBGL2:"WEBGL2",VERTEX_ARRAY_OBJECT:"VERTEX_ARRAY_OBJECT",TIMER_QUERY:"TIMER_QUERY",INSTANCED_RENDERING:"INSTANCED_RENDERING",MULTIPLE_RENDER_TARGETS:"MULTIPLE_RENDER_TARGETS",ELEMENT_INDEX_UINT32:"ELEMENT_INDEX_UINT32",BLEND_EQUATION_MINMAX:"BLEND_EQUATION_MINMAX",FLOAT_BLEND:"FLOAT_BLEND",COLOR_ENCODING_SRGB:"COLOR_ENCODING_SRGB",TEXTURE_DEPTH:"TEXTURE_DEPTH",TEXTURE_FLOAT:"TEXTURE_FLOAT",TEXTURE_HALF_FLOAT:"TEXTURE_HALF_FLOAT",TEXTURE_FILTER_LINEAR_FLOAT:"TEXTURE_FILTER_LINEAR_FLOAT",TEXTURE_FILTER_LINEAR_HALF_FLOAT:"TEXTURE_FILTER_LINEAR_HALF_FLOAT",TEXTURE_FILTER_ANISOTROPIC:"TEXTURE_FILTER_ANISOTROPIC",COLOR_ATTACHMENT_RGBA32F:"COLOR_ATTACHMENT_RGBA32F",COLOR_ATTACHMENT_FLOAT:"COLOR_ATTACHMENT_FLOAT",COLOR_ATTACHMENT_HALF_FLOAT:"COLOR_ATTACHMENT_HALF_FLOAT",GLSL_FRAG_DATA:"GLSL_FRAG_DATA",GLSL_FRAG_DEPTH:"GLSL_FRAG_DEPTH",GLSL_DERIVATIVES:"GLSL_DERIVATIVES",GLSL_TEXTURE_LOD:"GLSL_TEXTURE_LOD"};function T6(t){const e=new _n(t,{format:6408,type:5126,dataFormat:6408}),n=new bt(t,{id:"test-framebuffer",check:!1,attachments:{36064:e}}),r=n.getStatus();return e.delete(),n.delete(),r===36053}const qb={[je.WEBGL2]:[!1,!0],[je.VERTEX_ARRAY_OBJECT]:["OES_vertex_array_object",!0],[je.TIMER_QUERY]:["EXT_disjoint_timer_query","EXT_disjoint_timer_query_webgl2"],[je.INSTANCED_RENDERING]:["ANGLE_instanced_arrays",!0],[je.MULTIPLE_RENDER_TARGETS]:["WEBGL_draw_buffers",!0],[je.ELEMENT_INDEX_UINT32]:["OES_element_index_uint",!0],[je.BLEND_EQUATION_MINMAX]:["EXT_blend_minmax",!0],[je.FLOAT_BLEND]:["EXT_float_blend"],[je.COLOR_ENCODING_SRGB]:["EXT_sRGB",!0],[je.TEXTURE_DEPTH]:["WEBGL_depth_texture",!0],[je.TEXTURE_FLOAT]:["OES_texture_float",!0],[je.TEXTURE_HALF_FLOAT]:["OES_texture_half_float",!0],[je.TEXTURE_FILTER_LINEAR_FLOAT]:["OES_texture_float_linear"],[je.TEXTURE_FILTER_LINEAR_HALF_FLOAT]:["OES_texture_half_float_linear"],[je.TEXTURE_FILTER_ANISOTROPIC]:["EXT_texture_filter_anisotropic"],[je.COLOR_ATTACHMENT_RGBA32F]:[T6,"EXT_color_buffer_float"],[je.COLOR_ATTACHMENT_FLOAT]:[!1,"EXT_color_buffer_float"],[je.COLOR_ATTACHMENT_HALF_FLOAT]:["EXT_color_buffer_half_float"],[je.GLSL_FRAG_DATA]:["WEBGL_draw_buffers",!0],[je.GLSL_FRAG_DEPTH]:["EXT_frag_depth",!0],[je.GLSL_DERIVATIVES]:["OES_standard_derivatives",!0],[je.GLSL_TEXTURE_LOD]:["EXT_shader_texture_lod",!0]},B6=2;function z0(t,e){return Ey(t,e)}function Ey(t,e){return e=Array.isArray(e)?e:[e],e.every(n=>Xb(t,n))}function R6(t){t.luma=t.luma||{},t.luma.caps=t.luma.caps||{};for(const e in qb)t.luma.caps[e]===void 0&&(t.luma.caps[e]=Xb(t,e));return t.luma.caps}function Xb(t,e){return t.luma=t.luma||{},t.luma.caps=t.luma.caps||{},t.luma.caps[e]===void 0&&(t.luma.caps[e]=P6(t,e)),t.luma.caps[e]||le.log(B6,"Feature: ".concat(e," not supported"))(),t.luma.caps[e]}function P6(t,e){const n=qb[e];J(n,e);let r;const i=Te(t)&&n[1]||n[0];if(typeof i=="function")r=i(t);else if(Array.isArray(i)){r=!0;for(const s of i)r=r&&!!t.getExtension(s)}else typeof i=="string"?r=!!t.getExtension(i):typeof i=="boolean"?r=i:J(!1);return r}const wx="Multiple render targets not supported";class bt extends Bi{get[Symbol.toStringTag](){return"Framebuffer"}static isSupported(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{colorBufferFloat:r,colorBufferHalfFloat:i}=n;let s=!0;return r&&(s=!!(e.getExtension("EXT_color_buffer_float")||e.getExtension("WEBGL_color_buffer_float")||e.getExtension("OES_texture_float"))),i&&(s=s&&!!(e.getExtension("EXT_color_buffer_float")||e.getExtension("EXT_color_buffer_half_float"))),s}static getDefaultFramebuffer(e){return e.luma=e.luma||{},e.luma.defaultFramebuffer=e.luma.defaultFramebuffer||new bt(e,{id:"default-framebuffer",handle:null,attachments:{}}),e.luma.defaultFramebuffer}get MAX_COLOR_ATTACHMENTS(){const e=Jt(this.gl);return e.getParameter(e.MAX_COLOR_ATTACHMENTS)}get MAX_DRAW_BUFFERS(){const e=Jt(this.gl);return e.getParameter(e.MAX_DRAW_BUFFERS)}constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(e,n),this.width=null,this.height=null,this.attachments={},this.readBuffer=36064,this.drawBuffers=[36064],this.ownResources=[],this.initialize(n),Object.seal(this)}get color(){return this.attachments[36064]||null}get texture(){return this.attachments[36064]||null}get depth(){return this.attachments[36096]||this.attachments[33306]||null}get stencil(){return this.attachments[36128]||this.attachments[33306]||null}initialize(e){let{width:n=1,height:r=1,attachments:i=null,color:s=!0,depth:o=!0,stencil:a=!1,check:l=!0,readBuffer:c=void 0,drawBuffers:u=void 0}=e;if(J(n>=0&&r>=0,"Width and height need to be integers"),this.width=n,this.height=r,i)for(const f in i){const d=i[f];(Array.isArray(d)?d[0]:d).resize({width:n,height:r})}else i=this._createDefaultAttachments(s,o,a,n,r);this.update({clearAttachments:!0,attachments:i,readBuffer:c,drawBuffers:u}),i&&l&&this.checkStatus()}delete(){for(const e of this.ownResources)e.delete();return super.delete(),this}update(e){let{attachments:n={},readBuffer:r,drawBuffers:i,clearAttachments:s=!1,resizeAttachments:o=!0}=e;this.attach(n,{clearAttachments:s,resizeAttachments:o});const{gl:a}=this,l=a.bindFramebuffer(36160,this.handle);return r&&this._setReadBuffer(r),i&&this._setDrawBuffers(i),a.bindFramebuffer(36160,l||null),this}resize(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{width:n,height:r}=e;if(this.handle===null)return J(n===void 0&&r===void 0),this.width=this.gl.drawingBufferWidth,this.height=this.gl.drawingBufferHeight,this;n===void 0&&(n=this.gl.drawingBufferWidth),r===void 0&&(r=this.gl.drawingBufferHeight),n!==this.width&&r!==this.height&&le.log(2,"Resizing framebuffer ".concat(this.id," to ").concat(n,"x").concat(r))();for(const i in this.attachments)this.attachments[i].resize({width:n,height:r});return this.width=n,this.height=r,this}attach(e){let{clearAttachments:n=!1,resizeAttachments:r=!0}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const i={};n&&Object.keys(this.attachments).forEach(o=>{i[o]=null}),Object.assign(i,e);const s=this.gl.bindFramebuffer(36160,this.handle);for(const o in i){J(o!==void 0,"Misspelled framebuffer binding point?");const a=Number(o),l=i[a];let c=l;if(!c)this._unattach(a);else if(c instanceof oa)this._attachRenderbuffer({attachment:a,renderbuffer:c});else if(Array.isArray(l)){const[u,f=0,d=0]=l;c=u,this._attachTexture({attachment:a,texture:u,layer:f,level:d})}else this._attachTexture({attachment:a,texture:c,layer:0,level:0});r&&c&&c.resize({width:this.width,height:this.height})}this.gl.bindFramebuffer(36160,s||null),Object.assign(this.attachments,e),Object.keys(this.attachments).filter(o=>!this.attachments[o]).forEach(o=>{delete this.attachments[o]})}checkStatus(){const e=this.getStatus();if(e!==36053)throw new Error(M6(e));return this}getStatus(){const{gl:e}=this,n=e.bindFramebuffer(36160,this.handle),r=e.checkFramebufferStatus(36160);return e.bindFramebuffer(36160,n||null),r}clear(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{color:n,depth:r,stencil:i,drawBuffers:s=[]}=e,o=this.gl.bindFramebuffer(36160,this.handle);return(n||r||i)&&yy(this.gl,{color:n,depth:r,stencil:i}),s.forEach((a,l)=>{I6(this.gl,{drawBuffer:l,value:a})}),this.gl.bindFramebuffer(36160,o||null),this}readPixels(){return le.error("Framebuffer.readPixels() is no logner supported, use readPixelsToArray(framebuffer)")(),null}readPixelsToBuffer(){return le.error("Framebuffer.readPixelsToBuffer()is no logner supported, use readPixelsToBuffer(framebuffer)")(),null}copyToDataUrl(){return le.error("Framebuffer.copyToDataUrl() is no logner supported, use copyToDataUrl(framebuffer)")(),null}copyToImage(){return le.error("Framebuffer.copyToImage() is no logner supported, use copyToImage(framebuffer)")(),null}copyToTexture(){return le.error("Framebuffer.copyToTexture({...}) is no logner supported, use copyToTexture(source, target, opts})")(),null}blit(){return le.error("Framebuffer.blit({...}) is no logner supported, use blit(source, target, opts)")(),null}invalidate(e){let{attachments:n=[],x:r=0,y:i=0,width:s,height:o}=e;const a=Jt(this.gl),l=a.bindFramebuffer(36008,this.handle);return r===0&&i===0&&s===void 0&&o===void 0?a.invalidateFramebuffer(36008,n):a.invalidateFramebuffer(36008,n,r,i,s,o),a.bindFramebuffer(36008,l),this}getAttachmentParameter(e,n,r){let i=this._getAttachmentParameterFallback(n);return i===null&&(this.gl.bindFramebuffer(36160,this.handle),i=this.gl.getFramebufferAttachmentParameter(36160,e,n),this.gl.bindFramebuffer(36160,null)),r&&i>1e3&&(i=ls(this.gl,i)),i}getAttachmentParameters(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:36064,n=arguments.length>1?arguments[1]:void 0,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.constructor.ATTACHMENT_PARAMETERS||[];const i={};for(const s of r){const o=n?ls(this.gl,s):s;i[o]=this.getAttachmentParameter(e,s,n)}return i}getParameters(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;const n=Object.keys(this.attachments),r={};for(const i of n){const s=Number(i),o=e?ls(this.gl,s):s;r[o]=this.getAttachmentParameters(s,e)}return r}show(){return typeof window<"u"&&window.open(Ix(this),"luma-debug-texture"),this}log(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";if(e>le.level||typeof window>"u")return this;n=n||"Framebuffer ".concat(this.id);const r=Ix(this,{targetMaxHeight:100});return le.image({logLevel:e,message:n,image:r},n)(),this}bind(){let{target:e=36160}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.gl.bindFramebuffer(e,this.handle),this}unbind(){let{target:e=36160}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.gl.bindFramebuffer(e,null),this}_createDefaultAttachments(e,n,r,i,s){let o=null;return e&&(o=o||{},o[36064]=new _n(this.gl,{id:"".concat(this.id,"-color0"),pixels:null,format:6408,type:5121,width:i,height:s,mipmaps:!1,parameters:{10241:9729,10240:9729,10242:33071,10243:33071}}),this.ownResources.push(o[36064])),n&&r?(o=o||{},o[33306]=new oa(this.gl,{id:"".concat(this.id,"-depth-stencil"),format:35056,width:i,height:111}),this.ownResources.push(o[33306])):n?(o=o||{},o[36096]=new oa(this.gl,{id:"".concat(this.id,"-depth"),format:33189,width:i,height:s}),this.ownResources.push(o[36096])):r&&J(!1),o}_unattach(e){const n=this.attachments[e];n&&(n instanceof oa?this.gl.framebufferRenderbuffer(36160,e,36161,null):this.gl.framebufferTexture2D(36160,e,3553,null,0),delete this.attachments[e])}_attachRenderbuffer(e){let{attachment:n=36064,renderbuffer:r}=e;const{gl:i}=this;i.framebufferRenderbuffer(36160,n,36161,r.handle),this.attachments[n]=r}_attachTexture(e){let{attachment:n=36064,texture:r,layer:i,level:s}=e;const{gl:o}=this;switch(o.bindTexture(r.target,r.handle),r.target){case 35866:case 32879:Jt(o).framebufferTextureLayer(36160,n,r.target,s,i);break;case 34067:const l=L6(i);o.framebufferTexture2D(36160,n,l,r.handle,s);break;case 3553:o.framebufferTexture2D(36160,n,3553,r.handle,s);break;default:J(!1,"Illegal texture type")}o.bindTexture(r.target,null),this.attachments[n]=r}_setReadBuffer(e){const n=ck(this.gl);n?n.readBuffer(e):J(e===36064||e===1029,wx),this.readBuffer=e}_setDrawBuffers(e){const{gl:n}=this,r=Jt(n);if(r)r.drawBuffers(e);else{const i=n.getExtension("WEBGL_draw_buffers");i?i.drawBuffersWEBGL(e):J(e.length===1&&(e[0]===36064||e[0]===1029),wx)}this.drawBuffers=e}_getAttachmentParameterFallback(e){const n=R6(this.gl);switch(e){case 36052:return n.WEBGL2?null:0;case 33298:case 33299:case 33300:case 33301:case 33302:case 33303:return n.WEBGL2?null:8;case 33297:return n.WEBGL2?null:5125;case 33296:return!n.WEBGL2&&!n.EXT_sRGB?9729:null;default:return null}}_createHandle(){return this.gl.createFramebuffer()}_deleteHandle(){this.gl.deleteFramebuffer(this.handle)}_bindHandle(e){return this.gl.bindFramebuffer(36160,e)}}function L6(t){return t<34069?t+34069:t}function M6(t){return(bt.STATUS||{})[t]||"Framebuffer error ".concat(t)}const N6=[36049,36048,33296,33298,33299,33300,33301,33302,33303];bt.ATTACHMENT_PARAMETERS=N6;function O6(t,e){J(t instanceof _n||t instanceof Wb||t instanceof Yb);const n=t.constructor,{gl:r,width:i,height:s,format:o,type:a,dataFormat:l,border:c,mipmaps:u}=t,f=Object.assign({width:i,height:s,format:o,type:a,dataFormat:l,border:c,mipmaps:u},e);return new n(r,f)}function D6(t,e){const{gl:n,width:r,height:i,id:s}=t;return new bt(n,Object.assign({},e,{id:"framebuffer-for-".concat(s),width:r,height:i,attachments:{36064:t}}))}function Hf(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"unnamed";const n=/#define[\s*]SHADER_NAME[\s*]([A-Za-z0-9_-]+)[\s*]/,r=t.match(n);return r?r[1]:e}const k6=35632,Q6=35633;function F6(t){switch(t){case k6:return"fragment";case Q6:return"vertex";default:return"unknown type"}}function U6(t,e,n,r){const i=t.split(/\r?\n/),s={},o={},a=r||Hf(e)||"(unnamed)",l="".concat(F6(n)," shader ").concat(a);for(let u=0;u<i.length;u++){const f=i[u];if(f.length<=1)continue;const d=f.split(":"),h=d[0],g=parseInt(d[2],10);if(isNaN(g))throw new Error("GLSL compilation error in ".concat(l,": ").concat(t));h!=="WARNING"?s[g]=f:o[g]=f}const c=G6(e);return{shaderName:l,errors:Sx(s,c),warnings:Sx(o,c)}}function Sx(t,e){let n="";for(let r=0;r<e.length;r++){const i=e[r];if(!(!t[r+3]&&!t[r+2]&&!t[r+1])&&(n+="".concat(i,`
`),t[r+1])){const s=t[r+1],o=s.split(":",3),a=o[0],l=parseInt(o[1],10)||0,c=s.substring(o.join(":").length+1).trim();n+=Zb("^^^ ".concat(a,": ").concat(c,`

`),l)}}return n}function G6(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:": ";const r=t.split(/\r?\n/),i=String(r.length+e-1).length;return r.map((s,o)=>{const a=String(o+e),l=a.length;return Zb(a,i-l)+n+s})}function Zb(t,e){let n="";for(let r=0;r<e;++r)n+=" ";return"".concat(n).concat(t)}function Jb(t){let e=100;const n=t.match(/[^\s]+/g);if(n.length>=2&&n[0]==="#version"){const r=parseInt(n[1],10);Number.isFinite(r)&&(e=r)}return e}const z6="Shader: GLSL source code must be a JavaScript string";class Sc extends Bi{get[Symbol.toStringTag](){return"Shader"}static getTypeName(e){switch(e){case 35633:return"vertex-shader";case 35632:return"fragment-shader";default:return J(!1),"unknown"}}constructor(e,n){eg(e),J(typeof n.source=="string",z6);const r=Hf(n.source,null)||n.id||ps("unnamed ".concat(Sc.getTypeName(n.shaderType)));super(e,{id:r}),this.shaderType=n.shaderType,this.source=n.source,this.initialize(n)}initialize(e){let{source:n}=e;const r=Hf(n,null);r&&(this.id=ps(r)),this._compile(n)}getParameter(e){return this.gl.getShaderParameter(this.handle,e)}toString(){return"".concat(Sc.getTypeName(this.shaderType),":").concat(this.id)}getName(){return Hf(this.source)||"unnamed-shader"}getSource(){return this.gl.getShaderSource(this.handle)}getTranslatedSource(){const e=this.gl.getExtension("WEBGL_debug_shaders");return e?e.getTranslatedShaderSource(this.handle):"No translated source available. WEBGL_debug_shaders not implemented"}_compile(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.source;if(e.startsWith("#version ")||(e=`#version 100
`.concat(e)),this.source=e,this.gl.shaderSource(this.handle,this.source),this.gl.compileShader(this.handle),!this.getParameter(35713)){const r=this.gl.getShaderInfoLog(this.handle),{shaderName:i,errors:s,warnings:o}=U6(r,this.source,this.shaderType,this.id);throw le.error("GLSL compilation errors in ".concat(i,`
`).concat(s))(),le.warn("GLSL compilation warnings in ".concat(i,`
`).concat(o))(),new Error("GLSL compilation errors in ".concat(i))}}_deleteHandle(){this.gl.deleteShader(this.handle)}_getOptsFromHandle(){return{type:this.getParameter(35663),source:this.getSource()}}}class QA extends Sc{get[Symbol.toStringTag](){return"VertexShader"}constructor(e,n){typeof n=="string"&&(n={source:n}),super(e,Object.assign({},n,{shaderType:35633}))}_createHandle(){return this.gl.createShader(35633)}}class FA extends Sc{get[Symbol.toStringTag](){return"FragmentShader"}constructor(e,n){typeof n=="string"&&(n={source:n}),super(e,Object.assign({},n,{shaderType:35632}))}_createHandle(){return this.gl.createShader(35632)}}const V6={5126:et.bind(null,"uniform1fv",In,1,Yt),35664:et.bind(null,"uniform2fv",In,2,Yt),35665:et.bind(null,"uniform3fv",In,3,Yt),35666:et.bind(null,"uniform4fv",In,4,Yt),5124:et.bind(null,"uniform1iv",Qi,1,Yt),35667:et.bind(null,"uniform2iv",Qi,2,Yt),35668:et.bind(null,"uniform3iv",Qi,3,Yt),35669:et.bind(null,"uniform4iv",Qi,4,Yt),35670:et.bind(null,"uniform1iv",Qi,1,Yt),35671:et.bind(null,"uniform2iv",Qi,2,Yt),35672:et.bind(null,"uniform3iv",Qi,3,Yt),35673:et.bind(null,"uniform4iv",Qi,4,Yt),35674:et.bind(null,"uniformMatrix2fv",In,4,Zr),35675:et.bind(null,"uniformMatrix3fv",In,9,Zr),35676:et.bind(null,"uniformMatrix4fv",In,16,Zr),35678:kt,35680:kt,5125:et.bind(null,"uniform1uiv",ef,1,Yt),36294:et.bind(null,"uniform2uiv",ef,2,Yt),36295:et.bind(null,"uniform3uiv",ef,3,Yt),36296:et.bind(null,"uniform4uiv",ef,4,Yt),35685:et.bind(null,"uniformMatrix2x3fv",In,6,Zr),35686:et.bind(null,"uniformMatrix2x4fv",In,8,Zr),35687:et.bind(null,"uniformMatrix3x2fv",In,6,Zr),35688:et.bind(null,"uniformMatrix3x4fv",In,12,Zr),35689:et.bind(null,"uniformMatrix4x2fv",In,8,Zr),35690:et.bind(null,"uniformMatrix4x3fv",In,12,Zr),35678:kt,35680:kt,35679:kt,35682:kt,36289:kt,36292:kt,36293:kt,36298:kt,36299:kt,36300:kt,36303:kt,36306:kt,36307:kt,36308:kt,36311:kt},j6={},H6={},W6={},bx=[0];function _y(t,e,n,r){e===1&&typeof t=="boolean"&&(t=t?1:0),Number.isFinite(t)&&(bx[0]=t,t=bx);const i=t.length;if(i%e&&le.warn("Uniform size should be multiples of ".concat(e),t)(),t instanceof n)return t;let s=r[i];s||(s=new n(i),r[i]=s);for(let o=0;o<i;o++)s[o]=t[o];return s}function In(t,e){return _y(t,e,Float32Array,j6)}function Qi(t,e){return _y(t,e,Int32Array,H6)}function ef(t,e){return _y(t,e,Uint32Array,W6)}function Tx(t,e,n){const r=V6[n.type];if(!r)throw new Error("Unknown GLSL uniform type ".concat(n.type));return r().bind(null,t,e)}function Y6(t){if(t[t.length-1]!=="]")return{name:t,length:1,isArray:!1};const e=/([^[]*)(\[[0-9]+\])?/,n=t.match(e);if(!n||n.length<2)throw new Error("Failed to parse GLSL uniform name ".concat(t));return{name:n[1],length:n[2]||1,isArray:!!n[2]}}function $6(t,e,n){for(const r in t){const i=t[r];if((!n||!!n[r])&&!K6(i))throw e=e?"".concat(e," "):"",console.error("".concat(e," Bad uniform ").concat(r),i),new Error("".concat(e," Bad uniform ").concat(r))}return!0}function K6(t){return Array.isArray(t)||ArrayBuffer.isView(t)?X6(t):isFinite(t)||t===!0||t===!1||t instanceof lo||t instanceof oa?!0:t instanceof bt?!!t.texture:!1}function q6(t,e,n){if(Array.isArray(n)||ArrayBuffer.isView(n))if(t[e]){const r=t[e];for(let i=0,s=n.length;i<s;++i)r[i]=n[i]}else t[e]=n.slice();else t[e]=n}function X6(t){if(t.length===0)return!1;const e=Math.min(t.length,16);for(let n=0;n<e;++n)if(!Number.isFinite(t[n]))return!1;return!0}function kt(){let t=null;return(e,n,r)=>{const i=t!==r;return i&&(e.uniform1i(n,r),t=r),i}}function et(t,e,n,r){let i=null,s=null;return(o,a,l)=>{const c=e(l,n),u=c.length;let f=!1;if(i===null)i=new Float32Array(u),s=u,f=!0;else{J(s===u,"Uniform length cannot change.");for(let d=0;d<u;++d)if(c[d]!==i[d]){f=!0;break}}return f&&(r(o,t,a,c),i.set(c)),f}}function Yt(t,e,n,r){t[e](n,r)}function Zr(t,e,n,r){t[e](n,!1,r)}const Z6=5120,J6=5121,eQ=5122,tQ=5123,Bx=0,tf=1,nQ=2,rQ=3,nf=4,iQ=5,sQ=6,It=5126,oQ=35664,aQ=35665,lQ=35666,xl=5124,cQ=35667,uQ=35668,fQ=35669,Cl=5125,dQ=36294,hQ=36295,gQ=36296,AQ=35670,pQ=35671,mQ=35672,vQ=35673,yQ=35674,EQ=35675,_Q=35676,xQ=35685,CQ=35686,IQ=35687,wQ=35688,SQ=35689,bQ=35690,V0={[It]:[It,1,"float"],[oQ]:[It,2,"vec2"],[aQ]:[It,3,"vec3"],[lQ]:[It,4,"vec4"],[xl]:[xl,1,"int"],[cQ]:[xl,2,"ivec2"],[uQ]:[xl,3,"ivec3"],[fQ]:[xl,4,"ivec4"],[Cl]:[Cl,1,"uint"],[dQ]:[Cl,2,"uvec2"],[hQ]:[Cl,3,"uvec3"],[gQ]:[Cl,4,"uvec4"],[AQ]:[It,1,"bool"],[pQ]:[It,2,"bvec2"],[mQ]:[It,3,"bvec3"],[vQ]:[It,4,"bvec4"],[yQ]:[It,8,"mat2"],[xQ]:[It,8,"mat2x3"],[CQ]:[It,8,"mat2x4"],[EQ]:[It,12,"mat3"],[IQ]:[It,12,"mat3x2"],[wQ]:[It,12,"mat3x4"],[_Q]:[It,16,"mat4"],[SQ]:[It,16,"mat4x2"],[bQ]:[It,16,"mat4x3"]};function TQ(t){switch(t){case Bx:return Bx;case tf:return tf;case rQ:return tf;case nQ:return tf;case nf:return nf;case iQ:return nf;case sQ:return nf;default:return J(!1),0}}function Rx(t){const e=V0[t];if(!e)return null;const[n,r]=e;return{type:n,components:r}}function eT(t,e){switch(t){case Z6:case J6:case eQ:case tQ:t=It;break}for(const n in V0){const[r,i,s]=V0[n];if(r===t&&i===e)return{glType:n,name:s}}return null}class BQ{constructor(e){this.id=e.id,this.attributeInfos=[],this.attributeInfosByName={},this.attributeInfosByLocation=[],this.varyingInfos=[],this.varyingInfosByName={},Object.seal(this),this._readAttributesFromProgram(e),this._readVaryingsFromProgram(e)}getAttributeInfo(e){const n=Number(e);return Number.isFinite(n)?this.attributeInfosByLocation[n]:this.attributeInfosByName[e]||null}getAttributeLocation(e){const n=this.getAttributeInfo(e);return n?n.location:-1}getAttributeAccessor(e){const n=this.getAttributeInfo(e);return n?n.accessor:null}getVaryingInfo(e){const n=Number(e);return Number.isFinite(n)?this.varyingInfos[n]:this.varyingInfosByName[e]||null}getVaryingIndex(e){const n=this.getVaryingInfo();return n?n.location:-1}getVaryingAccessor(e){const n=this.getVaryingInfo();return n?n.accessor:null}_readAttributesFromProgram(e){const{gl:n}=e,r=n.getProgramParameter(e.handle,35721);for(let i=0;i<r;i++){const{name:s,type:o,size:a}=n.getActiveAttrib(e.handle,i),l=n.getAttribLocation(e.handle,s);l>=0&&this._addAttribute(l,s,o,a)}this.attributeInfos.sort((i,s)=>i.location-s.location)}_readVaryingsFromProgram(e){const{gl:n}=e;if(!Te(n))return;const r=n.getProgramParameter(e.handle,35971);for(let i=0;i<r;i++){const{name:s,type:o,size:a}=n.getTransformFeedbackVarying(e.handle,i);this._addVarying(i,s,o,a)}this.varyingInfos.sort((i,s)=>i.location-s.location)}_addAttribute(e,n,r,i){const{type:s,components:o}=Rx(r),a={type:s,size:i*o};this._inferProperties(e,n,a);const l={location:e,name:n,accessor:new Tn(a)};this.attributeInfos.push(l),this.attributeInfosByLocation[e]=l,this.attributeInfosByName[l.name]=l}_inferProperties(e,n,r){/instance/i.test(n)&&(r.divisor=1)}_addVarying(e,n,r,i){const{type:s,components:o}=Rx(r),a=new Tn({type:s,size:i*o}),l={location:e,name:n,accessor:a};this.varyingInfos.push(l),this.varyingInfosByName[l.name]=l}}const Px=4,RQ=35981,PQ=["setVertexArray","setAttributes","setBuffers","unsetBuffers","use","getUniformCount","getUniformInfo","getUniformLocation","getUniformValue","getVarying","getFragDataLocation","getAttachedShaders","getAttributeCount","getAttributeLocation","getAttributeInfo"];class tT extends Bi{get[Symbol.toStringTag](){return"Program"}constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(e,n),this.stubRemovedMethods("Program","v6.0",PQ),this._isCached=!1,this.initialize(n),Object.seal(this),this._setId(n.id)}initialize(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{hash:n,vs:r,fs:i,varyings:s,bufferMode:o=RQ}=e;return this.hash=n||"",this.vs=typeof r=="string"?new QA(this.gl,{id:"".concat(e.id,"-vs"),source:r}):r,this.fs=typeof i=="string"?new FA(this.gl,{id:"".concat(e.id,"-fs"),source:i}):i,J(this.vs instanceof QA),J(this.fs instanceof FA),this.uniforms={},this._textureUniforms={},s&&s.length>0&&(Jt(this.gl),this.varyings=s,this.gl2.transformFeedbackVaryings(this.handle,s,o)),this._compileAndLink(),this._readUniformLocationsFromLinkedProgram(),this.configuration=new BQ(this),this.setProps(e)}delete(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this._isCached?this:super.delete(e)}setProps(e){return"uniforms"in e&&this.setUniforms(e.uniforms),this}draw(e){let{logPriority:n,drawMode:r=4,vertexCount:i,offset:s=0,start:o,end:a,isIndexed:l=!1,indexType:c=5123,instanceCount:u=0,isInstanced:f=u>0,vertexArray:d=null,transformFeedback:h,framebuffer:g,parameters:A={},uniforms:E,samplers:p}=e;if((E||p)&&(le.deprecated("Program.draw({uniforms})","Program.setUniforms(uniforms)")(),this.setUniforms(E||{})),le.priority>=n){const m=g?g.id:"default",y="mode=".concat(ls(this.gl,r)," verts=").concat(i," ")+"instances=".concat(u," indexType=").concat(ls(this.gl,c)," ")+"isInstanced=".concat(f," isIndexed=").concat(l," ")+"Framebuffer=".concat(m);le.log(n,y)()}return J(d),this.gl.useProgram(this.handle),!this._areTexturesRenderable()||i===0||f&&u===0?!1:(d.bindForDraw(i,u,()=>{if(g!==void 0&&(A=Object.assign({},A,{framebuffer:g})),h){const m=TQ(r);h.begin(m)}this._bindTextures(),_r(this.gl,A,()=>{l&&f?this.gl2.drawElementsInstanced(r,i,c,s,u):l&&Te(this.gl)&&!isNaN(o)&&!isNaN(a)?this.gl2.drawRangeElements(r,o,a,i,c,s):l?this.gl.drawElements(r,i,c,s):f?this.gl2.drawArraysInstanced(r,s,i,u):this.gl.drawArrays(r,s,i)}),h&&h.end()}),!0)}setUniforms(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};le.priority>=2&&$6(e,this.id,this._uniformSetters),this.gl.useProgram(this.handle);for(const n in e){const r=e[n],i=this._uniformSetters[n];if(i){let s=r,o=!1;if(s instanceof bt&&(s=s.texture),s instanceof lo)if(o=this.uniforms[n]!==r,o){i.textureIndex===void 0&&(i.textureIndex=this._textureIndexCounter++);const a=s,{textureIndex:l}=i;a.bind(l),s=l,this._textureUniforms[n]=a}else s=i.textureIndex;else this._textureUniforms[n]&&delete this._textureUniforms[n];(i(s)||o)&&q6(this.uniforms,n,r)}}return this}_areTexturesRenderable(){let e=!0;for(const n in this._textureUniforms){const r=this._textureUniforms[n];r.update(),e=e&&r.loaded}return e}_bindTextures(){for(const e in this._textureUniforms){const n=this._uniformSetters[e].textureIndex;this._textureUniforms[e].bind(n)}}_createHandle(){return this.gl.createProgram()}_deleteHandle(){this.gl.deleteProgram(this.handle)}_getOptionsFromHandle(e){const n=this.gl.getAttachedShaders(e),r={};for(const i of n)switch(this.gl.getShaderParameter(this.handle,35663)){case 35633:r.vs=new QA({handle:i});break;case 35632:r.fs=new FA({handle:i});break}return r}_getParameter(e){return this.gl.getProgramParameter(this.handle,e)}_setId(e){if(!e){const n=this._getName();this.id=ps(n)}}_getName(){let e=this.vs.getName()||this.fs.getName();return e=e.replace(/shader/i,""),e=e?"".concat(e,"-program"):"program",e}_compileAndLink(){const{gl:e}=this;if(e.attachShader(this.handle,this.vs.handle),e.attachShader(this.handle,this.fs.handle),le.time(Px,"linkProgram for ".concat(this._getName()))(),e.linkProgram(this.handle),le.timeEnd(Px,"linkProgram for ".concat(this._getName()))(),e.debug||le.level>0){if(!e.getProgramParameter(this.handle,35714))throw new Error("Error linking: ".concat(e.getProgramInfoLog(this.handle)));if(e.validateProgram(this.handle),!e.getProgramParameter(this.handle,35715))throw new Error("Error validating: ".concat(e.getProgramInfoLog(this.handle)))}}_readUniformLocationsFromLinkedProgram(){const{gl:e}=this;this._uniformSetters={},this._uniformCount=this._getParameter(35718);for(let n=0;n<this._uniformCount;n++){const r=this.gl.getActiveUniform(this.handle,n),{name:i}=Y6(r.name);let s=e.getUniformLocation(this.handle,i);if(this._uniformSetters[i]=Tx(e,s,r),r.size>1)for(let o=0;o<r.size;o++)s=e.getUniformLocation(this.handle,"".concat(i,"[").concat(o,"]")),this._uniformSetters["".concat(i,"[").concat(o,"]")]=Tx(e,s,r)}this._textureIndexCounter=0}getActiveUniforms(e,n){return this.gl2.getActiveUniforms(this.handle,e,n)}getUniformBlockIndex(e){return this.gl2.getUniformBlockIndex(this.handle,e)}getActiveUniformBlockParameter(e,n){return this.gl2.getActiveUniformBlockParameter(this.handle,e,n)}uniformBlockBinding(e,n){this.gl2.uniformBlockBinding(this.handle,e,n)}}const LQ=34918,MQ=34919,NQ=35007,OQ=36795,DQ=35976,kQ=35887,QQ=36202;class Gd extends Bi{get[Symbol.toStringTag](){return"Query"}static isSupported(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];const r=Te(e),i=Ey(e,je.TIMER_QUERY);let s=r||i;for(const o of n)switch(o){case"queries":s=s&&r;break;case"timers":s=s&&i;break;default:J(!1)}return s}constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(e,n),this.target=null,this._queryPending=!1,this._pollingPromise=null,Object.seal(this)}beginTimeElapsedQuery(){return this.begin(NQ)}beginOcclusionQuery(){let{conservative:e=!1}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.begin(e?QQ:kQ)}beginTransformFeedbackQuery(){return this.begin(DQ)}begin(e){return this._queryPending?this:(this.target=e,this.gl2.beginQuery(this.target,this.handle),this)}end(){return this._queryPending?this:(this.target&&(this.gl2.endQuery(this.target),this.target=null,this._queryPending=!0),this)}isResultAvailable(){if(!this._queryPending)return!1;const e=this.gl2.getQueryParameter(this.handle,MQ);return e&&(this._queryPending=!1),e}isTimerDisjoint(){return this.gl2.getParameter(OQ)}getResult(){return this.gl2.getQueryParameter(this.handle,LQ)}getTimerMilliseconds(){return this.getResult()/1e6}createPoll(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Number.POSITIVE_INFINITY;if(this._pollingPromise)return this._pollingPromise;let n=0;return this._pollingPromise=new Promise((r,i)=>{const s=()=>{this.isResultAvailable()?(r(this.getResult()),this._pollingPromise=null):n++>e?(i("Timed out"),this._pollingPromise=null):requestAnimationFrame(s)};requestAnimationFrame(s)}),this._pollingPromise}_createHandle(){return Gd.isSupported(this.gl)?this.gl2.createQuery():null}_deleteHandle(){this.gl2.deleteQuery(this.handle)}}class nT extends Bi{get[Symbol.toStringTag](){return"TransformFeedback"}static isSupported(e){return Te(e)}constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};Jt(e),super(e,n),this.initialize(n),this.stubRemovedMethods("TransformFeedback","v6.0",["pause","resume"]),Object.seal(this)}initialize(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.buffers={},this.unused={},this.configuration=null,this.bindOnUse=!0,Ma(this.buffers)||this.bind(()=>this._unbindBuffers()),this.setProps(e),this}setProps(e){"program"in e&&(this.configuration=e.program&&e.program.configuration),"configuration"in e&&(this.configuration=e.configuration),"bindOnUse"in e&&(e=e.bindOnUse),"buffers"in e&&this.setBuffers(e.buffers)}setBuffers(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.bind(()=>{for(const n in e)this.setBuffer(n,e[n])}),this}setBuffer(e,n){const r=this._getVaryingIndex(e),{buffer:i,byteSize:s,byteOffset:o}=this._getBufferParams(n);return r<0?(this.unused[e]=i,le.warn("".concat(this.id," unused varying buffer ").concat(e))(),this):(this.buffers[r]=n,this.bindOnUse||this._bindBuffer(r,i,o,s),this)}begin(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;return this.gl.bindTransformFeedback(36386,this.handle),this._bindBuffers(),this.gl.beginTransformFeedback(e),this}end(){return this.gl.endTransformFeedback(),this._unbindBuffers(),this.gl.bindTransformFeedback(36386,null),this}_getBufferParams(e){let n,r,i;return e instanceof Ve?i=e:(i=e.buffer,r=e.byteSize,n=e.byteOffset),(n!==void 0||r!==void 0)&&(n=n||0,r=r||i.byteLength-n),{buffer:i,byteOffset:n,byteSize:r}}_getVaryingInfo(e){return this.configuration&&this.configuration.getVaryingInfo(e)}_getVaryingIndex(e){if(this.configuration)return this.configuration.getVaryingInfo(e).location;const n=Number(e);return Number.isFinite(n)?n:-1}_bindBuffers(){if(this.bindOnUse)for(const e in this.buffers){const{buffer:n,byteSize:r,byteOffset:i}=this._getBufferParams(this.buffers[e]);this._bindBuffer(e,n,i,r)}}_unbindBuffers(){if(this.bindOnUse)for(const e in this.buffers)this._bindBuffer(e,null)}_bindBuffer(e,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,i=arguments.length>3?arguments[3]:void 0;const s=n&&n.handle;return!s||i===void 0?this.gl.bindBufferBase(35982,e,s):this.gl.bindBufferRange(35982,e,s,r,i),this}_createHandle(){return this.gl.createTransformFeedback()}_deleteHandle(){this.gl.deleteTransformFeedback(this.handle)}_bindHandle(e){this.gl.bindTransformFeedback(36386,this.handle)}}let rf=null;function FQ(t){return(!rf||rf.byteLength<t)&&(rf=new ArrayBuffer(t)),rf}function UQ(t,e){const n=FQ(t.BYTES_PER_ELEMENT*e);return new t(n,0,e)}function GQ(t){let{target:e,source:n,start:r=0,count:i=1}=t;const s=n.length,o=i*s;let a=0;for(let l=r;a<s;a++)e[l++]=n[a];for(;a<o;)a<o-a?(e.copyWithin(r+a,r,r+a),a*=2):(e.copyWithin(r+a,r,r+o-a),a=o);return e}const zQ="elements must be GL.ELEMENT_ARRAY_BUFFER";class wn extends Bi{get[Symbol.toStringTag](){return"VertexArrayObject"}static isSupported(e){return(arguments.length>1&&arguments[1]!==void 0?arguments[1]:{}).constantAttributeZero?Te(e)||Nb()==="Chrome":!0}static getDefaultArray(e){return e.luma=e.luma||{},e.luma.defaultVertexArray||(e.luma.defaultVertexArray=new wn(e,{handle:null,isDefaultArray:!0})),e.luma.defaultVertexArray}static getMaxAttributes(e){return wn.MAX_ATTRIBUTES=wn.MAX_ATTRIBUTES||e.getParameter(34921),wn.MAX_ATTRIBUTES}static setConstant(e,n,r){switch(r.constructor){case Float32Array:wn._setConstantFloatArray(e,n,r);break;case Int32Array:wn._setConstantIntArray(e,n,r);break;case Uint32Array:wn._setConstantUintArray(e,n,r);break;default:J(!1)}}constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const r=n.id||n.program&&n.program.id;super(e,Object.assign({},n,{id:r})),this.buffer=null,this.bufferValue=null,this.isDefaultArray=n.isDefaultArray||!1,this.gl2=e,this.initialize(n),Object.seal(this)}delete(){return super.delete(),this.buffer&&this.buffer.delete(),this}get MAX_ATTRIBUTES(){return wn.getMaxAttributes(this.gl)}initialize(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.setProps(e)}setProps(e){return this}setElementBuffer(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;return J(!e||e.target===34963,zQ),this.bind(()=>{this.gl.bindBuffer(34963,e?e.handle:null)}),this}setBuffer(e,n,r){if(n.target===34963)return this.setElementBuffer(n,r);const{size:i,type:s,stride:o,offset:a,normalized:l,integer:c,divisor:u}=r,{gl:f,gl2:d}=this;return e=Number(e),this.bind(()=>{f.bindBuffer(34962,n.handle),c?(J(Te(f)),d.vertexAttribIPointer(e,i,s,o,a)):f.vertexAttribPointer(e,i,s,l,o,a),f.enableVertexAttribArray(e),d.vertexAttribDivisor(e,u||0)}),this}enable(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return!n&&e===0&&!wn.isSupported(this.gl,{constantAttributeZero:!0})||(e=Number(e),this.bind(()=>n?this.gl.enableVertexAttribArray(e):this.gl.disableVertexAttribArray(e))),this}getConstantBuffer(e,n){const r=this._normalizeConstantArrayValue(n),i=r.byteLength*e,s=r.length*e;let o=!this.buffer;if(this.buffer=this.buffer||new Ve(this.gl,i),o=o||this.buffer.reallocate(i),o=o||!this._compareConstantArrayValues(r,this.bufferValue),o){const a=UQ(n.constructor,s);GQ({target:a,source:r,start:0,count:s}),this.buffer.subData(a),this.bufferValue=n}return this.buffer}_normalizeConstantArrayValue(e){return Array.isArray(e)?new Float32Array(e):e}_compareConstantArrayValues(e,n){if(!e||!n||e.length!==n.length||e.constructor!==n.constructor)return!1;for(let r=0;r<e.length;++r)if(e[r]!==n[r])return!1;return!0}static _setConstantFloatArray(e,n,r){switch(r.length){case 1:e.vertexAttrib1fv(n,r);break;case 2:e.vertexAttrib2fv(n,r);break;case 3:e.vertexAttrib3fv(n,r);break;case 4:e.vertexAttrib4fv(n,r);break;default:J(!1)}}static _setConstantIntArray(e,n,r){switch(J(Te(e)),r.length){case 1:e.vertexAttribI1iv(n,r);break;case 2:e.vertexAttribI2iv(n,r);break;case 3:e.vertexAttribI3iv(n,r);break;case 4:e.vertexAttribI4iv(n,r);break;default:J(!1)}}static _setConstantUintArray(e,n,r){switch(J(Te(e)),r.length){case 1:e.vertexAttribI1uiv(n,r);break;case 2:e.vertexAttribI2uiv(n,r);break;case 3:e.vertexAttribI3uiv(n,r);break;case 4:e.vertexAttribI4uiv(n,r);break;default:J(!1)}}_createHandle(){return this.gl.createVertexArray()}_deleteHandle(e){return this.gl2.deleteVertexArray(e),[this.elements]}_bindHandle(e){this.gl2.bindVertexArray(e)}_getParameter(e,n){let{location:r}=n;return J(Number.isFinite(r)),this.bind(()=>{switch(e){case 34373:return this.gl.getVertexAttribOffset(r,e);default:return this.gl.getVertexAttrib(r,e)}})}}const VQ="VertexArray: attributes must be Buffers or constants (i.e. typed array)",jQ=/^(.+)__LOCATION_([0-9]+)$/,HQ=["setBuffers","setGeneric","clearBindings","setLocations","setGenericValues","setDivisor","enable","disable"];class WQ{constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const r=n.id||n.program&&n.program.id;this.id=r,this.gl=e,this.configuration=null,this.elements=null,this.elementsAccessor=null,this.values=null,this.accessors=null,this.unused=null,this.drawParams=null,this.buffer=null,this.attributes={},this.vertexArrayObject=new wn(e),zb(this,"VertexArray","v6.0",HQ),this.initialize(n),Object.seal(this)}delete(){this.buffer&&this.buffer.delete(),this.vertexArrayObject.delete()}initialize(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.reset(),this.configuration=null,this.bindOnUse=!1,this.setProps(e)}reset(){this.elements=null,this.elementsAccessor=null;const{MAX_ATTRIBUTES:e}=this.vertexArrayObject;return this.values=new Array(e).fill(null),this.accessors=new Array(e).fill(null),this.unused={},this.drawParams=null,this}setProps(e){return"program"in e&&(this.configuration=e.program&&e.program.configuration),"configuration"in e&&(this.configuration=e.configuration),"attributes"in e&&this.setAttributes(e.attributes),"elements"in e&&this.setElementBuffer(e.elements),"bindOnUse"in e&&(e=e.bindOnUse),this}clearDrawParams(){this.drawParams=null}getDrawParams(){return this.drawParams=this.drawParams||this._updateDrawParams(),this.drawParams}setAttributes(e){return Object.assign(this.attributes,e),this.vertexArrayObject.bind(()=>{for(const n in e){const r=e[n];this._setAttribute(n,r)}this.gl.bindBuffer(34962,null)}),this}setElementBuffer(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.elements=e,this.elementsAccessor=n,this.clearDrawParams(),this.vertexArrayObject.setElementBuffer(e,n),this}setBuffer(e,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(n.target===34963)return this.setElementBuffer(n,r);const{location:i,accessor:s}=this._resolveLocationAndAccessor(e,n,n.accessor,r);return i>=0&&(this.values[i]=n,this.accessors[i]=s,this.clearDrawParams(),this.vertexArrayObject.setBuffer(i,n,s)),this}setConstant(e,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const{location:i,accessor:s}=this._resolveLocationAndAccessor(e,n,Object.assign({size:n.length},r));return i>=0&&(n=this.vertexArrayObject._normalizeConstantArrayValue(n),this.values[i]=n,this.accessors[i]=s,this.clearDrawParams(),this.vertexArrayObject.enable(i,!1)),this}unbindBuffers(){return this.vertexArrayObject.bind(()=>{this.elements&&this.vertexArrayObject.setElementBuffer(null),this.buffer=this.buffer||new Ve(this.gl,{accessor:{size:4}});for(let e=0;e<this.vertexArrayObject.MAX_ATTRIBUTES;e++)this.values[e]instanceof Ve&&(this.gl.disableVertexAttribArray(e),this.gl.bindBuffer(34962,this.buffer.handle),this.gl.vertexAttribPointer(e,1,5126,!1,0,0))}),this}bindBuffers(){return this.vertexArrayObject.bind(()=>{this.elements&&this.setElementBuffer(this.elements);for(let e=0;e<this.vertexArrayObject.MAX_ATTRIBUTES;e++){const n=this.values[e];n instanceof Ve&&this.setBuffer(e,n)}}),this}bindForDraw(e,n,r){let i;return this.vertexArrayObject.bind(()=>{this._setConstantAttributes(e,n),i=r()}),i}_resolveLocationAndAccessor(e,n,r,i){const s={location:-1,accessor:null},{location:o,name:a}=this._getAttributeIndex(e);if(!Number.isFinite(o)||o<0)return this.unused[e]=n,le.once(3,()=>"unused value ".concat(e," in ").concat(this.id))(),s;const l=this._getAttributeInfo(a||o);if(!l)return s;const c=this.accessors[o]||{},u=Tn.resolve(l.accessor,c,r,i),{size:f,type:d}=u;return J(Number.isFinite(f)&&Number.isFinite(d)),{location:o,accessor:u}}_getAttributeInfo(e){return this.configuration&&this.configuration.getAttributeInfo(e)}_getAttributeIndex(e){const n=Number(e);if(Number.isFinite(n))return{location:n};const r=jQ.exec(e),i=r?r[1]:e,s=r?Number(r[2]):0;return this.configuration?{location:this.configuration.getAttributeLocation(i)+s,name:i}:{location:-1}}_setAttribute(e,n){if(n instanceof Ve)this.setBuffer(e,n);else if(Array.isArray(n)&&n.length&&n[0]instanceof Ve){const r=n[0],i=n[1];this.setBuffer(e,r,i)}else if(ArrayBuffer.isView(n)||Array.isArray(n)){const r=n;this.setConstant(e,r)}else if(n.buffer instanceof Ve){const r=n;this.setBuffer(e,r.buffer,r)}else throw new Error(VQ)}_setConstantAttributes(e,n){const r=Math.max(e|0,n|0);let i=this.values[0];ArrayBuffer.isView(i)&&this._setConstantAttributeZero(i,r);for(let s=1;s<this.vertexArrayObject.MAX_ATTRIBUTES;s++)i=this.values[s],ArrayBuffer.isView(i)&&this._setConstantAttribute(s,i)}_setConstantAttributeZero(e,n){if(wn.isSupported(this.gl,{constantAttributeZero:!0})){this._setConstantAttribute(0,e);return}const r=this.vertexArrayObject.getConstantBuffer(n,e);this.vertexArrayObject.setBuffer(0,r,this.accessors[0])}_setConstantAttribute(e,n){wn.setConstant(this.gl,e,n)}_updateDrawParams(){const e={isIndexed:!1,isInstanced:!1,indexCount:1/0,vertexCount:1/0,instanceCount:1/0};for(let n=0;n<this.vertexArrayObject.MAX_ATTRIBUTES;n++)this._updateDrawParamsForLocation(e,n);return this.elements&&(e.elementCount=this.elements.getElementCount(this.elements.accessor),e.isIndexed=!0,e.indexType=this.elementsAccessor.type||this.elements.accessor.type,e.indexOffset=this.elementsAccessor.offset||0),e.indexCount===1/0&&(e.indexCount=0),e.vertexCount===1/0&&(e.vertexCount=0),e.instanceCount===1/0&&(e.instanceCount=0),e}_updateDrawParamsForLocation(e,n){const r=this.values[n],i=this.accessors[n];if(!r)return;const{divisor:s}=i,o=s>0;if(e.isInstanced=e.isInstanced||o,r instanceof Ve){const a=r;if(o){const l=a.getVertexCount(i);e.instanceCount=Math.min(e.instanceCount,l)}else{const l=a.getVertexCount(i);e.vertexCount=Math.min(e.vertexCount,l)}}}setElements(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return le.deprecated("setElements","setElementBuffer")(),this.setElementBuffer(e,n)}}function YQ(t,e){const{maxElts:n=16,size:r=1}=e;let i="[";for(let o=0;o<t.length&&o<n;++o)o>0&&(i+=",".concat(o%r===0?" ":"")),i+=bc(t[o],e);const s=t.length>n?"...":"]";return"".concat(i).concat(s)}function bc(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const n=1e-16,{isInteger:r=!1}=e;if(Array.isArray(t)||ArrayBuffer.isView(t))return YQ(t,e);if(!Number.isFinite(t))return String(t);if(Math.abs(t)<n)return r?"0":"0.";if(r||Math.abs(t)>100&&Math.abs(t)<1e4)return t.toFixed(0);const i=t.toPrecision(2);return i.indexOf(".0")===i.length-2?i.slice(0,-1):i}function Lx(t){let{header:e="Uniforms",program:n,uniforms:r,undefinedOnly:i=!1}=t;J(n);const s=".*_.*",o=".*Matrix",a=n._uniformSetters,l={},c=Object.keys(a).sort();let u=0;for(const h of c)!h.match(s)&&!h.match(o)&&UA({table:l,header:e,uniforms:r,uniformName:h,undefinedOnly:i})&&u++;for(const h of c)h.match(o)&&UA({table:l,header:e,uniforms:r,uniformName:h,undefinedOnly:i})&&u++;for(const h of c)l[h]||UA({table:l,header:e,uniforms:r,uniformName:h,undefinedOnly:i})&&u++;let f=0;const d={};if(!i)for(const h in r){const g=r[h];l[h]||(f++,d[h]={Type:"NOT USED: ".concat(g),[e]:bc(g)})}return{table:l,count:u,unusedTable:d,unusedCount:f}}function UA(t){let{table:e,header:n,uniforms:r,uniformName:i,undefinedOnly:s}=t;const o=r[i],a=$Q(o);return!s||!a?(e[i]={[n]:a?bc(o):"N/A","Uniform Type":a?o:"NOT PROVIDED"},!0):!1}function $Q(t){return t!=null}function KQ(t){let{vertexArray:e,header:n="Attributes"}=t;if(!e.configuration)return{};const r={};e.elements&&(r.ELEMENT_ARRAY_BUFFER=Mx(e,e.elements,null,n));const i=e.values;for(const s in i){const o=e._getAttributeInfo(s);if(o){let a="".concat(s,": ").concat(o.name);const l=e.accessors[o.location];l&&(a="".concat(s,": ").concat(qQ(o.name,l))),r[a]=Mx(e,i[s],l,n)}}return r}function Mx(t,e,n,r){const{gl:i}=t;if(!e)return{[r]:"null","Format ":"N/A"};let s="NOT PROVIDED",o=1,a=0,l=0,c,u,f;if(n&&(s=n.type,o=n.size,s=String(s).replace("Array",""),c=s.indexOf("nt")!==-1),e instanceof Ve){const d=e,{data:h,changed:g}=d.getDebugData();u=g?"*":"",f=h,l=d.byteLength,a=l/h.BYTES_PER_ELEMENT/o;let A;if(n){const E=n.divisor>0;A="".concat(E?"I ":"P "," ").concat(a," (x").concat(o,"=").concat(l," bytes ").concat(ls(i,s),")")}else c=!0,A="".concat(l," bytes");return{[r]:"".concat(u).concat(bc(f,{size:o,isInteger:c})),"Format ":A}}return f=e,o=e.length,s=String(e.constructor.name).replace("Array",""),c=s.indexOf("nt")!==-1,{[r]:"".concat(bc(f,{size:o,isInteger:c})," (constant)"),"Format ":"".concat(o,"x").concat(s," (constant)")}}function qQ(t,e){const{type:n,size:r}=e,i=eT(n,r);return i?"".concat(t," (").concat(i.name,")"):t}function XQ(t){const e={},n="Accessors for ".concat(t.id);for(const r of t.attributeInfos)if(r){const i=Nx(r);e["in ".concat(i)]={[n]:JSON.stringify(r.accessor)}}for(const r of t.varyingInfos)if(r){const i=Nx(r);e["out ".concat(i)]={[n]:JSON.stringify(r.accessor)}}return e}function Nx(t){const{type:e,size:n}=t.accessor,r=eT(e,n);return r?"".concat(r.name," ").concat(t.name):t.name}const Ox=Ti()&&typeof document<"u";let ZQ=0;class JQ{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{onCreateContext:n=E=>Gb(E),onAddHTML:r=null,onInitialize:i=()=>{},onRender:s=()=>{},onFinalize:o=()=>{},onError:a,gl:l=null,glOptions:c={},debug:u=!1,createFramebuffer:f=!1,autoResizeViewport:d=!0,autoResizeDrawingBuffer:h=!0,stats:g=$s.get("animation-loop-".concat(ZQ++))}=e;let{useDevicePixels:A=!0}=e;"useDevicePixelRatio"in e&&(le.deprecated("useDevicePixelRatio","useDevicePixels")(),A=e.useDevicePixelRatio),this.props={onCreateContext:n,onAddHTML:r,onInitialize:i,onRender:s,onFinalize:o,onError:a,gl:l,glOptions:c,debug:u,createFramebuffer:f},this.gl=l,this.needsRedraw=null,this.timeline=null,this.stats=g,this.cpuTime=this.stats.get("CPU Time"),this.gpuTime=this.stats.get("GPU Time"),this.frameRate=this.stats.get("Frame Rate"),this._initialized=!1,this._running=!1,this._animationFrameId=null,this._nextFramePromise=null,this._resolveNextFrame=null,this._cpuStartTime=0,this.setProps({autoResizeViewport:d,autoResizeDrawingBuffer:h,useDevicePixels:A}),this.start=this.start.bind(this),this.stop=this.stop.bind(this),this._pageLoadPromise=null,this._onMousemove=this._onMousemove.bind(this),this._onMouseleave=this._onMouseleave.bind(this)}delete(){this.stop(),this._setDisplay(null)}setNeedsRedraw(e){return J(typeof e=="string"),this.needsRedraw=this.needsRedraw||e,this}setProps(e){return"autoResizeViewport"in e&&(this.autoResizeViewport=e.autoResizeViewport),"autoResizeDrawingBuffer"in e&&(this.autoResizeDrawingBuffer=e.autoResizeDrawingBuffer),"useDevicePixels"in e&&(this.useDevicePixels=e.useDevicePixels),this}start(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(this._running)return this;this._running=!0;const n=this._getPageLoadPromise().then(()=>!this._running||this._initialized?null:(this._createWebGLContext(e),this._createFramebuffer(),this._startEventHandling(),this._initializeCallbackData(),this._updateCallbackData(),this._resizeCanvasDrawingBuffer(),this._resizeViewport(),this._gpuTimeQuery=Gd.isSupported(this.gl,["timers"])?new Gd(this.gl):null,this._initialized=!0,this.onInitialize(this.animationProps))).then(r=>{this._running&&(this._addCallbackData(r||{}),r!==!1&&this._startLoop())});return this.props.onError&&n.catch(this.props.onError),this}redraw(){return this.isContextLost()?this:(this._beginTimers(),this._setupFrame(),this._updateCallbackData(),this._renderFrame(this.animationProps),this._clearNeedsRedraw(),this.offScreen&&this.gl.commit&&this.gl.commit(),this._resolveNextFrame&&(this._resolveNextFrame(this),this._nextFramePromise=null,this._resolveNextFrame=null),this._endTimers(),this)}stop(){return this._running&&(this._finalizeCallbackData(),this._cancelAnimationFrame(this._animationFrameId),this._nextFramePromise=null,this._resolveNextFrame=null,this._animationFrameId=null,this._running=!1),this}attachTimeline(e){return this.timeline=e,this.timeline}detachTimeline(){this.timeline=null}waitForRender(){return this.setNeedsRedraw("waitForRender"),this._nextFramePromise||(this._nextFramePromise=new Promise(e=>{this._resolveNextFrame=e})),this._nextFramePromise}async toDataURL(){return this.setNeedsRedraw("toDataURL"),await this.waitForRender(),this.gl.canvas.toDataURL()}isContextLost(){return this.gl.isContextLost()}onCreateContext(){return this.props.onCreateContext(...arguments)}onInitialize(){return this.props.onInitialize(...arguments)}onRender(){return this.props.onRender(...arguments)}onFinalize(){return this.props.onFinalize(...arguments)}getHTMLControlValue(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;const r=document.getElementById(e);return r?Number(r.value):n}setViewParameters(){return le.removed("AnimationLoop.setViewParameters","AnimationLoop.setProps")(),this}_startLoop(){const e=()=>{this._running&&(this.redraw(),this._animationFrameId=this._requestAnimationFrame(e))};this._cancelAnimationFrame(this._animationFrameId),this._animationFrameId=this._requestAnimationFrame(e)}_getPageLoadPromise(){return this._pageLoadPromise||(this._pageLoadPromise=Ox?new Promise((e,n)=>{if(Ox&&document.readyState==="complete"){e(document);return}window.addEventListener("load",()=>{e(document)})}):Promise.resolve({})),this._pageLoadPromise}_setDisplay(e){this.display&&(this.display.delete(),this.display.animationLoop=null),e&&(e.animationLoop=this),this.display=e}_cancelAnimationFrame(e){return this.display&&this.display.cancelAnimationFrame?this.display.cancelAnimationFrame(e):a6(e)}_requestAnimationFrame(e){if(this._running)return this.display&&this.display.requestAnimationFrame?this.display.requestAnimationFrame(e):o6(e)}_renderFrame(){if(this.display){this.display._renderFrame(...arguments);return}this.onRender(...arguments)}_clearNeedsRedraw(){this.needsRedraw=null}_setupFrame(){this._resizeCanvasDrawingBuffer(),this._resizeViewport(),this._resizeFramebuffer()}_initializeCallbackData(){this.animationProps={gl:this.gl,stop:this.stop,canvas:this.gl.canvas,framebuffer:this.framebuffer,useDevicePixels:this.useDevicePixels,needsRedraw:null,startTime:Date.now(),engineTime:0,tick:0,tock:0,time:0,_timeline:this.timeline,_loop:this,_animationLoop:this,_mousePosition:null}}_updateCallbackData(){const{width:e,height:n,aspect:r}=this._getSizeAndAspect();(e!==this.animationProps.width||n!==this.animationProps.height)&&this.setNeedsRedraw("drawing buffer resized"),r!==this.animationProps.aspect&&this.setNeedsRedraw("drawing buffer aspect changed"),this.animationProps.width=e,this.animationProps.height=n,this.animationProps.aspect=r,this.animationProps.needsRedraw=this.needsRedraw,this.animationProps.engineTime=Date.now()-this.animationProps.startTime,this.timeline&&this.timeline.update(this.animationProps.engineTime),this.animationProps.tick=Math.floor(this.animationProps.time/1e3*60),this.animationProps.tock++,this.animationProps.time=this.timeline?this.timeline.getTime():this.animationProps.engineTime,this.animationProps._offScreen=this.offScreen}_finalizeCallbackData(){this.onFinalize(this.animationProps)}_addCallbackData(e){typeof e=="object"&&e!==null&&(this.animationProps=Object.assign({},this.animationProps,e))}_createWebGLContext(e){if(this.offScreen=e.canvas&&typeof OffscreenCanvas<"u"&&e.canvas instanceof OffscreenCanvas,e=Object.assign({},e,this.props.glOptions),this.gl=this.props.gl?py(this.props.gl,e):this.onCreateContext(e),!Jh(this.gl))throw new Error("AnimationLoop.onCreateContext - illegal context returned");Yk(this.gl),this._createInfoDiv()}_createInfoDiv(){if(this.gl.canvas&&this.props.onAddHTML){const e=document.createElement("div");document.body.appendChild(e),e.style.position="relative";const n=document.createElement("div");n.style.position="absolute",n.style.left="10px",n.style.bottom="10px",n.style.width="300px",n.style.background="white",e.appendChild(this.gl.canvas),e.appendChild(n);const r=this.props.onAddHTML(n);r&&(n.innerHTML=r)}}_getSizeAndAspect(){const e=this.gl.drawingBufferWidth,n=this.gl.drawingBufferHeight;let r=1;const{canvas:i}=this.gl;return i&&i.clientHeight?r=i.clientWidth/i.clientHeight:e>0&&n>0&&(r=e/n),{width:e,height:n,aspect:r}}_resizeViewport(){this.autoResizeViewport&&this.gl.viewport(0,0,this.gl.drawingBufferWidth,this.gl.drawingBufferHeight)}_resizeCanvasDrawingBuffer(){this.autoResizeDrawingBuffer&&Zk(this.gl,{useDevicePixels:this.useDevicePixels})}_createFramebuffer(){this.props.createFramebuffer&&(this.framebuffer=new bt(this.gl))}_resizeFramebuffer(){this.framebuffer&&this.framebuffer.resize({width:this.gl.drawingBufferWidth,height:this.gl.drawingBufferHeight})}_beginTimers(){this.frameRate.timeEnd(),this.frameRate.timeStart(),this._gpuTimeQuery&&this._gpuTimeQuery.isResultAvailable()&&!this._gpuTimeQuery.isTimerDisjoint()&&this.stats.get("GPU Time").addTime(this._gpuTimeQuery.getTimerMilliseconds()),this._gpuTimeQuery&&this._gpuTimeQuery.beginTimeElapsedQuery(),this.cpuTime.timeStart()}_endTimers(){this.cpuTime.timeEnd(),this._gpuTimeQuery&&this._gpuTimeQuery.end()}_startEventHandling(){const{canvas:e}=this.gl;e&&(e.addEventListener("mousemove",this._onMousemove),e.addEventListener("mouseleave",this._onMouseleave))}_onMousemove(e){this.animationProps._mousePosition=[e.offsetX,e.offsetY]}_onMouseleave(e){this.animationProps._mousePosition=null}}const au="vs",xy="fs";function Ln(t,e){if(!t)throw new Error(e||"shadertools: assertion failed.")}const GA={number:{validate(t,e){return Number.isFinite(t)&&(!("max"in e)||t<=e.max)&&(!("min"in e)||t>=e.min)}},array:{validate(t,e){return Array.isArray(t)||ArrayBuffer.isView(t)}}};function eF(t){const e={};for(const n in t){const r=t[n],i=tF(r);e[n]=i}return e}function tF(t){let e=Dx(t);return e==="object"?t?"type"in t?Object.assign({},t,GA[t.type]):"value"in t?(e=Dx(t.value),Object.assign({type:e},t,GA[e])):{type:"object",value:t}:{type:"object",value:null}:Object.assign({type:e,value:t},GA[e])}function Dx(t){return Array.isArray(t)||ArrayBuffer.isView(t)?"array":typeof t}const nF="vs",rF="fs";class kx{constructor(e){let{name:n,vs:r,fs:i,dependencies:s=[],uniforms:o,getUniforms:a,deprecations:l=[],defines:c={},inject:u={},vertexShader:f,fragmentShader:d}=e;Ln(typeof n=="string"),this.name=n,this.vs=r||f,this.fs=i||d,this.getModuleUniforms=a,this.dependencies=s,this.deprecations=this._parseDeprecationDefinitions(l),this.defines=c,this.injections=iF(u),o&&(this.uniforms=eF(o))}getModuleSource(e){let n;switch(e){case nF:n=this.vs||"";break;case rF:n=this.fs||"";break;default:Ln(!1)}return"#define MODULE_".concat(this.name.toUpperCase().replace(/[^0-9a-z]/gi,"_"),`
`).concat(n,"// END MODULE_").concat(this.name,`

`)}getUniforms(e,n){return this.getModuleUniforms?this.getModuleUniforms(e,n):this.uniforms?this._defaultGetUniforms(e):{}}getDefines(){return this.defines}checkDeprecations(e,n){this.deprecations.forEach(r=>{r.regex.test(e)&&(r.deprecated?n.deprecated(r.old,r.new)():n.removed(r.old,r.new)())})}_parseDeprecationDefinitions(e){return e.forEach(n=>{switch(n.type){case"function":n.regex=new RegExp("\\b".concat(n.old,"\\("));break;default:n.regex=new RegExp("".concat(n.type," ").concat(n.old,";"))}}),e}_defaultGetUniforms(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const n={},r=this.uniforms;for(const i in r){const s=r[i];i in e&&!s.private?(s.validate&&Ln(s.validate(e[i],s),"".concat(this.name,": invalid ").concat(i)),n[i]=e[i]):n[i]=s.value}return n}}function iF(t){const e={vs:{},fs:{}};for(const n in t){let r=t[n];const i=n.slice(0,2);typeof r=="string"&&(r={order:0,injection:r}),e[i][n]=r}return e}function sF(t){return oF(iT(t))}function oF(t){const e={},n={};return rT({modules:t,level:0,moduleMap:e,moduleDepth:n}),Object.keys(n).sort((r,i)=>n[i]-n[r]).map(r=>e[r])}function rT(t){let{modules:e,level:n,moduleMap:r,moduleDepth:i}=t;if(n>=5)throw new Error("Possible loop in shader dependency graph");for(const s of e)r[s.name]=s,(i[s.name]===void 0||i[s.name]<n)&&(i[s.name]=n);for(const s of e)s.dependencies&&rT({modules:s.dependencies,level:n+1,moduleMap:r,moduleDepth:i})}function iT(t,e){return t.map(n=>(n instanceof kx||(Ln(typeof n!="string","Shader module use by name is deprecated. Import shader module '".concat(n,"' and use it directly.")),Ln(n.name,"shader module has no name"),n=new kx(n),n.dependencies=iT(n.dependencies)),n))}function aF(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const e=typeof window<"u"?window.navigator||{}:{},n=t.userAgent||e.userAgent||"",r=n.indexOf("MSIE ")!==-1,i=n.indexOf("Trident/")!==-1;return r||i}const lF=7936,cF=7937,uF=7938,fF=35724,Cy={GLSL_FRAG_DATA:["WEBGL_draw_buffers",!0],GLSL_FRAG_DEPTH:["EXT_frag_depth",!0],GLSL_DERIVATIVES:["OES_standard_derivatives",!0],GLSL_TEXTURE_LOD:["EXT_shader_texture_lod",!0]},Us={};Object.keys(Cy).forEach(t=>{Us[t]=t});function dF(t){return typeof WebGL2RenderingContext<"u"&&t instanceof WebGL2RenderingContext?!0:!!(t&&t._version===2)}function hF(t){const e=t.getExtension("WEBGL_debug_renderer_info"),n=t.getParameter(e&&e.UNMASKED_VENDOR_WEBGL||lF),r=t.getParameter(e&&e.UNMASKED_RENDERER_WEBGL||cF);return{gpuVendor:gF(n,r),vendor:n,renderer:r,version:t.getParameter(uF),shadingLanguageVersion:t.getParameter(fF)}}function gF(t,e){return t.match(/NVIDIA/i)||e.match(/NVIDIA/i)?"NVIDIA":t.match(/INTEL/i)||e.match(/INTEL/i)?"INTEL":t.match(/AMD/i)||e.match(/AMD/i)||t.match(/ATI/i)||e.match(/ATI/i)?"AMD":"UNKNOWN GPU"}const zA={};function Qx(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const r=Cy[e];if(Ln(r,e),!aF(n))return!0;if(e in zA)return zA[e];const i=r[0],s=n.behavior||"enable",o="#extension GL_".concat(i," : ").concat(s,`
void main(void) {}`),a=t.createShader(35633);t.shaderSource(a,o),t.compileShader(a);const l=t.getShaderParameter(a,35713);return t.deleteShader(a),zA[e]=l,l}function AF(t,e){const n=Cy[e];Ln(n,e);const r=dF(t)&&n[1]||n[0],i=typeof r=="string"?!!t.getExtension(r):r;return Ln(i===!1||i===!0),i}function sf(t,e){return e=Array.isArray(e)?e:[e],e.every(n=>AF(t,n))}function pF(t){switch(hF(t).gpuVendor.toLowerCase()){case"nvidia":return`#define NVIDIA_GPU
// Nvidia optimizes away the calculation necessary for emulated fp64
#define LUMA_FP64_CODE_ELIMINATION_WORKAROUND 1
`;case"intel":return`#define INTEL_GPU
// Intel optimizes away the calculation necessary for emulated fp64
#define LUMA_FP64_CODE_ELIMINATION_WORKAROUND 1
// Intel's built-in 'tan' function doesn't have acceptable precision
#define LUMA_FP32_TAN_PRECISION_WORKAROUND 1
// Intel GPU doesn't have full 32 bits precision in same cases, causes overflow
#define LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND 1
`;case"amd":return`#define AMD_GPU
`;default:return`#define DEFAULT_GPU
// Prevent driver from optimizing away the calculation necessary for emulated fp64
#define LUMA_FP64_CODE_ELIMINATION_WORKAROUND 1
// Intel's built-in 'tan' function doesn't have acceptable precision
#define LUMA_FP32_TAN_PRECISION_WORKAROUND 1
// Intel GPU doesn't have full 32 bits precision in same cases, causes overflow
#define LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND 1
`}}function mF(t,e,n){let r=`#if (__VERSION__ > 120)

# define FEATURE_GLSL_DERIVATIVES
# define FEATURE_GLSL_DRAW_BUFFERS
# define FEATURE_GLSL_FRAG_DEPTH
# define FEATURE_GLSL_TEXTURE_LOD

// DEPRECATED FLAGS, remove in v9
# define FRAG_DEPTH
# define DERIVATIVES
# define DRAW_BUFFERS
# define TEXTURE_LOD

#endif // __VERSION
`;return sf(t,Us.GLSL_FRAG_DEPTH)&&(r+=`
// FRAG_DEPTH => gl_FragDepth is available
#ifdef GL_EXT_frag_depth
#extension GL_EXT_frag_depth : enable
# define FEATURE_GLSL_FRAG_DEPTH
# define FRAG_DEPTH
# define gl_FragDepth gl_FragDepthEXT
#endif
`),sf(t,Us.GLSL_DERIVATIVES)&&Qx(t,Us.GLSL_DERIVATIVES)&&(r+=`
// DERIVATIVES => dxdF, dxdY and fwidth are available
#ifdef GL_OES_standard_derivatives
#extension GL_OES_standard_derivatives : enable
# define FEATURE_GLSL_DERIVATIVES
# define DERIVATIVES
#endif
`),sf(t,Us.GLSL_FRAG_DATA)&&Qx(t,Us.GLSL_FRAG_DATA,{behavior:"require"})&&(r+=`
// DRAW_BUFFERS => gl_FragData[] is available
#ifdef GL_EXT_draw_buffers
#extension GL_EXT_draw_buffers : require
#define FEATURE_GLSL_DRAW_BUFFERS
#define DRAW_BUFFERS
#endif
`),sf(t,Us.GLSL_TEXTURE_LOD)&&(r+=`// TEXTURE_LOD => texture2DLod etc are available
#ifdef GL_EXT_shader_texture_lod
#extension GL_EXT_shader_texture_lod : enable

# define FEATURE_GLSL_TEXTURE_LOD
# define TEXTURE_LOD

#endif
`),r}const vF=`#ifdef MODULE_LOGDEPTH
  logdepth_adjustPosition(gl_Position);
#endif
`,yF=`#ifdef MODULE_MATERIAL
  gl_FragColor = material_filterColor(gl_FragColor);
#endif

#ifdef MODULE_LIGHTING
  gl_FragColor = lighting_filterColor(gl_FragColor);
#endif

#ifdef MODULE_FOG
  gl_FragColor = fog_filterColor(gl_FragColor);
#endif

#ifdef MODULE_PICKING
  gl_FragColor = picking_filterHighlightColor(gl_FragColor);
  gl_FragColor = picking_filterPickingColor(gl_FragColor);
#endif

#ifdef MODULE_LOGDEPTH
  logdepth_setFragDepth();
#endif
`,EF={[au]:vF,[xy]:yF},Wf="__LUMA_INJECT_DECLARATIONS__",Fx=/void\s+main\s*\([^)]*\)\s*\{\n?/,Ux=/}\n?[^{}]*$/,VA=[];function Gx(t,e,n){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;const i=e===au;for(const s in n){const o=n[s];o.sort((l,c)=>l.order-c.order),VA.length=o.length;for(let l=0,c=o.length;l<c;++l)VA[l]=o[l].injection;const a="".concat(VA.join(`
`),`
`);switch(s){case"vs:#decl":i&&(t=t.replace(Wf,a));break;case"vs:#main-start":i&&(t=t.replace(Fx,l=>l+a));break;case"vs:#main-end":i&&(t=t.replace(Ux,l=>a+l));break;case"fs:#decl":i||(t=t.replace(Wf,a));break;case"fs:#main-start":i||(t=t.replace(Fx,l=>l+a));break;case"fs:#main-end":i||(t=t.replace(Ux,l=>a+l));break;default:t=t.replace(s,l=>l+a)}}return t=t.replace(Wf,""),r&&(t=t.replace(/\}\s*$/,s=>s+EF[e])),t}function j0(t){const e={};return Ln(Array.isArray(t)&&t.length>1),t.forEach(n=>{for(const r in n)e[r]=e[r]?"".concat(e[r],`
`).concat(n[r]):n[r]}),e}function Na(t){return new RegExp("\\b".concat(t,"[ \\t]+(\\w+[ \\t]+\\w+(\\[\\w+\\])?;)"),"g")}const sT=[[/^(#version[ \t]+(100|300[ \t]+es))?[ \t]*\n/,`#version 300 es
`],[/\btexture(2D|2DProj|Cube)Lod(EXT)?\(/g,"textureLod("],[/\btexture(2D|2DProj|Cube)(EXT)?\(/g,"texture("]],_F=[...sT,[Na("attribute"),"in $1"],[Na("varying"),"out $1"]],xF=[...sT,[Na("varying"),"in $1"]],oT=[[/^#version[ \t]+300[ \t]+es/,"#version 100"],[/\btexture(2D|2DProj|Cube)Lod\(/g,"texture$1LodEXT("],[/\btexture\(/g,"texture2D("],[/\btextureLod\(/g,"texture2DLodEXT("]],CF=[...oT,[Na("in"),"attribute $1"],[Na("out"),"varying $1"]],IF=[...oT,[Na("in"),"varying $1"]],H0="gl_FragColor",W0=/\bout[ \t]+vec4[ \t]+(\w+)[ \t]*;\n?/,wF=/void\s+main\s*\([^)]*\)\s*\{\n?/;function SF(t,e,n){switch(e){case 300:return n?zd(t,_F):bF(t);case 100:return n?zd(t,CF):TF(t);default:throw new Error("unknown GLSL version ".concat(e))}}function zd(t,e){for(const[n,r]of e)t=t.replace(n,r);return t}function bF(t){t=zd(t,xF);const e=t.match(W0);if(e){const n=e[1];t=t.replace(new RegExp("\\b".concat(H0,"\\b"),"g"),n)}else{const n="fragmentColor";t=t.replace(wF,r=>"out vec4 ".concat(n,`;
`).concat(r)).replace(new RegExp("\\b".concat(H0,"\\b"),"g"),n)}return t}function TF(t){t=zd(t,IF);const e=t.match(W0);if(e){const n=e[1];t=t.replace(W0,"").replace(new RegExp("\\b".concat(n,"\\b"),"g"),H0)}return t}const BF=`

`.concat(Wf,`

`),aT={[au]:"vertex",[xy]:"fragment"},RF=`precision highp float;

`;function PF(t,e){const{vs:n,fs:r}=e,i=sF(e.modules||[]);return{gl:t,vs:zx(t,Object.assign({},e,{source:n,type:au,modules:i})),fs:zx(t,Object.assign({},e,{source:r,type:xy,modules:i})),getUniforms:LF(i)}}function zx(t,e){let{id:n,source:r,type:i,modules:s,defines:o={},hookFunctions:a=[],inject:l={},transpileToGLSL100:c=!1,prologue:u=!0,log:f}=e;Ln(typeof r=="string","shader source must be a string");const d=i===au,h=r.split(`
`);let g=100,A="",E=r;h[0].indexOf("#version ")===0?(g=300,A=h[0],E=h.slice(1).join(`
`)):A="#version ".concat(g);const p={};s.forEach(b=>{Object.assign(p,b.getDefines())}),Object.assign(p,o);let m=u?"".concat(A,`
`).concat(NF({id:n,source:r,type:i}),`
`).concat(MF({type:i}),`
`).concat(pF(t),`
`).concat(mF(t),`
`).concat(OF(p),`
`).concat(d?"":RF,`
`):"".concat(A,`
`);const y=kF(a),_={},I={},C={};for(const b in l){const B=typeof l[b]=="string"?{injection:l[b],order:0}:l[b],R=b.match(/^(v|f)s:(#)?([\w-]+)$/);if(R){const M=R[2],U=R[3];M?U==="decl"?I[b]=[B]:C[b]=[B]:_[b]=[B]}else C[b]=[B]}for(const b of s){f&&b.checkDeprecations(E,f);const B=b.getModuleSource(i,g);m+=B;const R=b.injections[i];for(const M in R){const U=M.match(/^(v|f)s:#([\w-]+)$/);if(U){const Y=U[2]==="decl"?I:C;Y[M]=Y[M]||[],Y[M].push(R[M])}else _[M]=_[M]||[],_[M].push(R[M])}}return m+=BF,m=Gx(m,i,I),m+=DF(y[i],_),m+=E,m=Gx(m,i,C),m=SF(m,c?100:g,d),m}function LF(t){return function(n){const r={};for(const i of t){const s=i.getUniforms(n,r);Object.assign(r,s)}return r}}function MF(t){let{type:e}=t;return`
#define SHADER_TYPE_`.concat(aT[e].toUpperCase(),`
`)}function NF(t){let{id:e,source:n,type:r}=t;return e&&typeof e=="string"&&n.indexOf("SHADER_NAME")===-1?`
#define SHADER_NAME `.concat(e,"_").concat(aT[r],`

`):""}function OF(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e=0,n="";for(const r in t){e===0&&(n+=`
// APPLICATION DEFINES
`),e++;const i=t[r];(i||Number.isFinite(i))&&(n+="#define ".concat(r.toUpperCase()," ").concat(t[r],`
`))}return e===0&&(n+=`
`),n}function DF(t,e){let n="";for(const r in t){const i=t[r];if(n+="void ".concat(i.signature,` {
`),i.header&&(n+="  ".concat(i.header)),e[r]){const s=e[r];s.sort((o,a)=>o.order-a.order);for(const o of s)n+="  ".concat(o.injection,`
`)}i.footer&&(n+="  ".concat(i.footer)),n+=`}
`}return n}function kF(t){const e={vs:{},fs:{}};return t.forEach(n=>{let r;typeof n!="string"?(r=n,n=r.hook):r={},n=n.trim();const[i,s]=n.split(":"),o=n.replace(/\(.+/,"");e[i][o]=Object.assign(r,{signature:s})}),e}const QF="void main() {gl_FragColor = vec4(0);}",lT=`out vec4 transform_output;
void main() {
  transform_output = vec4(0);
}`,FF=`#version 300 es
`.concat(lT);function cT(t,e){e=Array.isArray(e)?e:[e];const n=t.replace(/^\s+/,"").split(/\s+/),[r,i,s]=n;if(!e.includes(r)||!i||!s)return null;const o=s.split(";")[0];return{qualifier:r,type:i,name:o}}function uT(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{version:e=100,input:n,inputType:r,output:i}=t;if(!n)return e===300?FF:e>300?"#version ".concat(e,`
`).concat(lT):QF;const s=zF(n,r);return e>=300?"#version ".concat(e," ").concat(e===300?"es":"",`
in `).concat(r," ").concat(n,`;
out vec4 `).concat(i,`;
void main() {
  `).concat(i," = ").concat(s,`;
}`):"varying ".concat(r," ").concat(n,`;
void main() {
  gl_FragColor = `).concat(s,`;
}`)}function UF(t){switch(t){case"float":return"x";case"vec2":return"xy";case"vec3":return"xyz";case"vec4":return"xyzw";default:return Ln(!1),null}}function GF(t){switch(t){case"float":return 1;case"vec2":return 2;case"vec3":return 3;case"vec4":return 4;default:return Ln(!1),null}}function zF(t,e){switch(e){case"float":return"vec4(".concat(t,", 0.0, 0.0, 1.0)");case"vec2":return"vec4(".concat(t,", 0.0, 1.0)");case"vec3":return"vec4(".concat(t,", 1.0)");case"vec4":return t;default:return Ln(!1),null}}const VF=`#ifdef LUMA_FP32_TAN_PRECISION_WORKAROUND
const float TWO_PI = 6.2831854820251465;
const float PI_2 = 1.5707963705062866;
const float PI_16 = 0.1963495463132858;

const float SIN_TABLE_0 = 0.19509032368659973;
const float SIN_TABLE_1 = 0.3826834261417389;
const float SIN_TABLE_2 = 0.5555702447891235;
const float SIN_TABLE_3 = 0.7071067690849304;

const float COS_TABLE_0 = 0.9807852506637573;
const float COS_TABLE_1 = 0.9238795042037964;
const float COS_TABLE_2 = 0.8314695954322815;
const float COS_TABLE_3 = 0.7071067690849304;

const float INVERSE_FACTORIAL_3 = 1.666666716337204e-01;
const float INVERSE_FACTORIAL_5 = 8.333333767950535e-03;
const float INVERSE_FACTORIAL_7 = 1.9841270113829523e-04;
const float INVERSE_FACTORIAL_9 = 2.75573188446287533e-06;

float sin_taylor_fp32(float a) {
  float r, s, t, x;

  if (a == 0.0) {
    return 0.0;
  }

  x = -a * a;
  s = a;
  r = a;

  r = r * x;
  t = r * INVERSE_FACTORIAL_3;
  s = s + t;

  r = r * x;
  t = r * INVERSE_FACTORIAL_5;
  s = s + t;

  r = r * x;
  t = r * INVERSE_FACTORIAL_7;
  s = s + t;

  r = r * x;
  t = r * INVERSE_FACTORIAL_9;
  s = s + t;

  return s;
}

void sincos_taylor_fp32(float a, out float sin_t, out float cos_t) {
  if (a == 0.0) {
    sin_t = 0.0;
    cos_t = 1.0;
  }
  sin_t = sin_taylor_fp32(a);
  cos_t = sqrt(1.0 - sin_t * sin_t);
}

float tan_taylor_fp32(float a) {
    float sin_a;
    float cos_a;

    if (a == 0.0) {
        return 0.0;
    }
    float z = floor(a / TWO_PI);
    float r = a - TWO_PI * z;

    float t;
    float q = floor(r / PI_2 + 0.5);
    int j = int(q);

    if (j < -2 || j > 2) {
        return 1.0 / 0.0;
    }

    t = r - PI_2 * q;

    q = floor(t / PI_16 + 0.5);
    int k = int(q);
    int abs_k = int(abs(float(k)));

    if (abs_k > 4) {
        return 1.0 / 0.0;
    } else {
        t = t - PI_16 * q;
    }

    float u = 0.0;
    float v = 0.0;

    float sin_t, cos_t;
    float s, c;
    sincos_taylor_fp32(t, sin_t, cos_t);

    if (k == 0) {
        s = sin_t;
        c = cos_t;
    } else {
        if (abs(float(abs_k) - 1.0) < 0.5) {
            u = COS_TABLE_0;
            v = SIN_TABLE_0;
        } else if (abs(float(abs_k) - 2.0) < 0.5) {
            u = COS_TABLE_1;
            v = SIN_TABLE_1;
        } else if (abs(float(abs_k) - 3.0) < 0.5) {
            u = COS_TABLE_2;
            v = SIN_TABLE_2;
        } else if (abs(float(abs_k) - 4.0) < 0.5) {
            u = COS_TABLE_3;
            v = SIN_TABLE_3;
        }
        if (k > 0) {
            s = u * sin_t + v * cos_t;
            c = u * cos_t - v * sin_t;
        } else {
            s = u * sin_t - v * cos_t;
            c = u * cos_t + v * sin_t;
        }
    }

    if (j == 0) {
        sin_a = s;
        cos_a = c;
    } else if (j == 1) {
        sin_a = c;
        cos_a = -s;
    } else if (j == -1) {
        sin_a = -c;
        cos_a = s;
    } else {
        sin_a = -s;
        cos_a = -c;
    }
    return sin_a / cos_a;
}
#endif

float tan_fp32(float a) {
#ifdef LUMA_FP32_TAN_PRECISION_WORKAROUND
  return tan_taylor_fp32(a);
#else
  return tan(a);
#endif
}
`,jF={name:"fp32",vs:VF,fs:null};function Tc(t,e){if(!t)throw new Error("math.gl assertion ".concat(e))}const an={EPSILON:1e-12,debug:!1,precision:4,printTypes:!1,printDegrees:!1,printRowMajor:!0};function HF(t,{precision:e=an.precision}={}){return t=WF(t),"".concat(parseFloat(t.toPrecision(e)))}function co(t){return Array.isArray(t)||ArrayBuffer.isView(t)&&!(t instanceof DataView)}function Pt(t,e,n){return $F(t,r=>Math.max(e,Math.min(n,r)))}function eo(t,e,n){return co(t)?t.map((r,i)=>eo(r,e[i],n)):n*e+(1-n)*t}function ci(t,e,n){const r=an.EPSILON;n&&(an.EPSILON=n);try{if(t===e)return!0;if(co(t)&&co(e)){if(t.length!==e.length)return!1;for(let i=0;i<t.length;++i)if(!ci(t[i],e[i]))return!1;return!0}return t&&t.equals?t.equals(e):e&&e.equals?e.equals(t):typeof t=="number"&&typeof e=="number"?Math.abs(t-e)<=an.EPSILON*Math.max(1,Math.abs(t),Math.abs(e)):!1}finally{an.EPSILON=r}}function WF(t){return Math.round(t/an.EPSILON)*an.EPSILON}function YF(t){return t.clone?t.clone():new Array(t.length)}function $F(t,e,n){if(co(t)){const r=t;n=n||YF(r);for(let i=0;i<n.length&&i<r.length;++i)n[i]=e(t[i],i,n);return n}return e(t)}function KF(t){function e(){var n=Reflect.construct(t,Array.from(arguments));return Object.setPrototypeOf(n,Object.getPrototypeOf(this)),n}return e.prototype=Object.create(t.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t,e}class Iy extends KF(Array){clone(){return new this.constructor().copy(this)}fromArray(e,n=0){for(let r=0;r<this.ELEMENTS;++r)this[r]=e[r+n];return this.check()}toArray(e=[],n=0){for(let r=0;r<this.ELEMENTS;++r)e[n+r]=this[r];return e}from(e){return Array.isArray(e)?this.copy(e):this.fromObject(e)}to(e){return e===this?this:co(e)?this.toArray(e):this.toObject(e)}toTarget(e){return e?this.to(e):this}toFloat32Array(){return new Float32Array(this)}toString(){return this.formatString(an)}formatString(e){let n="";for(let r=0;r<this.ELEMENTS;++r)n+=(r>0?", ":"")+HF(this[r],e);return"".concat(e.printTypes?this.constructor.name:"","[").concat(n,"]")}equals(e){if(!e||this.length!==e.length)return!1;for(let n=0;n<this.ELEMENTS;++n)if(!ci(this[n],e[n]))return!1;return!0}exactEquals(e){if(!e||this.length!==e.length)return!1;for(let n=0;n<this.ELEMENTS;++n)if(this[n]!==e[n])return!1;return!0}negate(){for(let e=0;e<this.ELEMENTS;++e)this[e]=-this[e];return this.check()}lerp(e,n,r){if(r===void 0)return this.lerp(this,e,n);for(let i=0;i<this.ELEMENTS;++i){const s=e[i];this[i]=s+r*(n[i]-s)}return this.check()}min(e){for(let n=0;n<this.ELEMENTS;++n)this[n]=Math.min(e[n],this[n]);return this.check()}max(e){for(let n=0;n<this.ELEMENTS;++n)this[n]=Math.max(e[n],this[n]);return this.check()}clamp(e,n){for(let r=0;r<this.ELEMENTS;++r)this[r]=Math.min(Math.max(this[r],e[r]),n[r]);return this.check()}add(...e){for(const n of e)for(let r=0;r<this.ELEMENTS;++r)this[r]+=n[r];return this.check()}subtract(...e){for(const n of e)for(let r=0;r<this.ELEMENTS;++r)this[r]-=n[r];return this.check()}scale(e){if(typeof e=="number")for(let n=0;n<this.ELEMENTS;++n)this[n]*=e;else for(let n=0;n<this.ELEMENTS&&n<e.length;++n)this[n]*=e[n];return this.check()}multiplyByScalar(e){for(let n=0;n<this.ELEMENTS;++n)this[n]*=e;return this.check()}check(){if(an.debug&&!this.validate())throw new Error("math.gl: ".concat(this.constructor.name," some fields set to invalid numbers'"));return this}validate(){let e=this.length===this.ELEMENTS;for(let n=0;n<this.ELEMENTS;++n)e=e&&Number.isFinite(this[n]);return e}sub(e){return this.subtract(e)}setScalar(e){for(let n=0;n<this.ELEMENTS;++n)this[n]=e;return this.check()}addScalar(e){for(let n=0;n<this.ELEMENTS;++n)this[n]+=e;return this.check()}subScalar(e){return this.addScalar(-e)}multiplyScalar(e){for(let n=0;n<this.ELEMENTS;++n)this[n]*=e;return this.check()}divideScalar(e){return this.multiplyByScalar(1/e)}clampScalar(e,n){for(let r=0;r<this.ELEMENTS;++r)this[r]=Math.min(Math.max(this[r],e),n);return this.check()}get elements(){return this}}function qF(t,e){if(t.length!==e)return!1;for(let n=0;n<t.length;++n)if(!Number.isFinite(t[n]))return!1;return!0}function He(t){if(!Number.isFinite(t))throw new Error("Invalid number ".concat(t));return t}function Jl(t,e,n=""){if(an.debug&&!qF(t,e))throw new Error("math.gl: ".concat(n," some fields set to invalid numbers'"));return t}class fT extends Iy{get x(){return this[0]}set x(e){this[0]=He(e)}get y(){return this[1]}set y(e){this[1]=He(e)}len(){return Math.sqrt(this.lengthSquared())}magnitude(){return this.len()}lengthSquared(){let e=0;for(let n=0;n<this.ELEMENTS;++n)e+=this[n]*this[n];return e}magnitudeSquared(){return this.lengthSquared()}distance(e){return Math.sqrt(this.distanceSquared(e))}distanceSquared(e){let n=0;for(let r=0;r<this.ELEMENTS;++r){const i=this[r]-e[r];n+=i*i}return He(n)}dot(e){let n=0;for(let r=0;r<this.ELEMENTS;++r)n+=this[r]*e[r];return He(n)}normalize(){const e=this.magnitude();if(e!==0)for(let n=0;n<this.ELEMENTS;++n)this[n]/=e;return this.check()}multiply(...e){for(const n of e)for(let r=0;r<this.ELEMENTS;++r)this[r]*=n[r];return this.check()}divide(...e){for(const n of e)for(let r=0;r<this.ELEMENTS;++r)this[r]/=n[r];return this.check()}lengthSq(){return this.lengthSquared()}distanceTo(e){return this.distance(e)}distanceToSquared(e){return this.distanceSquared(e)}getComponent(e){return Tc(e>=0&&e<this.ELEMENTS,"index is out of range"),He(this[e])}setComponent(e,n){return Tc(e>=0&&e<this.ELEMENTS,"index is out of range"),this[e]=n,this.check()}addVectors(e,n){return this.copy(e).add(n)}subVectors(e,n){return this.copy(e).subtract(n)}multiplyVectors(e,n){return this.copy(e).multiply(n)}addScaledVector(e,n){return this.add(new this.constructor(e).multiplyScalar(n))}}var ec=1e-6,Cr=typeof Float32Array<"u"?Float32Array:Array;Math.hypot||(Math.hypot=function(){for(var t=0,e=arguments.length;e--;)t+=arguments[e]*arguments[e];return Math.sqrt(t)});function XF(){var t=new Cr(2);return Cr!=Float32Array&&(t[0]=0,t[1]=0),t}function Vd(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t}function dT(t,e){return t[0]=-e[0],t[1]=-e[1],t}function hT(t,e,n,r){var i=e[0],s=e[1];return t[0]=i+r*(n[0]-i),t[1]=s+r*(n[1]-s),t}function ZF(t,e,n){var r=e[0],i=e[1];return t[0]=n[0]*r+n[3]*i+n[6],t[1]=n[1]*r+n[4]*i+n[7],t}function JF(t,e,n){var r=e[0],i=e[1];return t[0]=n[0]*r+n[4]*i+n[12],t[1]=n[1]*r+n[5]*i+n[13],t}(function(){var t=XF();return function(e,n,r,i,s,o){var a,l;for(n||(n=2),r||(r=0),i?l=Math.min(i*n+r,e.length):l=e.length,a=r;a<l;a+=n)t[0]=e[a],t[1]=e[a+1],s(t,t,o),e[a]=t[0],e[a+1]=t[1];return e}})();function e7(t,e,n){const r=e[0],i=e[1],s=n[3]*r+n[7]*i||1;return t[0]=(n[0]*r+n[4]*i)/s,t[1]=(n[1]*r+n[5]*i)/s,t}function gT(t,e,n){const r=e[0],i=e[1],s=e[2],o=n[3]*r+n[7]*i+n[11]*s||1;return t[0]=(n[0]*r+n[4]*i+n[8]*s)/o,t[1]=(n[1]*r+n[5]*i+n[9]*s)/o,t[2]=(n[2]*r+n[6]*i+n[10]*s)/o,t}function t7(t,e,n){const r=e[0],i=e[1];return t[0]=n[0]*r+n[2]*i,t[1]=n[1]*r+n[3]*i,t[2]=e[2],t}function n7(t,e,n){const r=e[0],i=e[1];return t[0]=n[0]*r+n[2]*i,t[1]=n[1]*r+n[3]*i,t[2]=e[2],t[3]=e[3],t}function AT(t,e,n){const r=e[0],i=e[1],s=e[2];return t[0]=n[0]*r+n[3]*i+n[6]*s,t[1]=n[1]*r+n[4]*i+n[7]*s,t[2]=n[2]*r+n[5]*i+n[8]*s,t[3]=e[3],t}function pT(){var t=new Cr(3);return Cr!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t}function r7(t){var e=t[0],n=t[1],r=t[2];return Math.hypot(e,n,r)}function Vx(t,e,n){var r=new Cr(3);return r[0]=t,r[1]=e,r[2]=n,r}function i7(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t}function s7(t){var e=t[0],n=t[1],r=t[2];return e*e+n*n+r*r}function o7(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t}function a7(t,e){var n=e[0],r=e[1],i=e[2],s=n*n+r*r+i*i;return s>0&&(s=1/Math.sqrt(s)),t[0]=e[0]*s,t[1]=e[1]*s,t[2]=e[2]*s,t}function mT(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function Yf(t,e,n){var r=e[0],i=e[1],s=e[2],o=n[0],a=n[1],l=n[2];return t[0]=i*l-s*a,t[1]=s*o-r*l,t[2]=r*a-i*o,t}function l7(t,e,n,r){var i=e[0],s=e[1],o=e[2];return t[0]=i+r*(n[0]-i),t[1]=s+r*(n[1]-s),t[2]=o+r*(n[2]-o),t}function wy(t,e,n){var r=e[0],i=e[1],s=e[2],o=n[3]*r+n[7]*i+n[11]*s+n[15];return o=o||1,t[0]=(n[0]*r+n[4]*i+n[8]*s+n[12])/o,t[1]=(n[1]*r+n[5]*i+n[9]*s+n[13])/o,t[2]=(n[2]*r+n[6]*i+n[10]*s+n[14])/o,t}function vT(t,e,n){var r=e[0],i=e[1],s=e[2];return t[0]=r*n[0]+i*n[3]+s*n[6],t[1]=r*n[1]+i*n[4]+s*n[7],t[2]=r*n[2]+i*n[5]+s*n[8],t}function yT(t,e,n){var r=n[0],i=n[1],s=n[2],o=n[3],a=e[0],l=e[1],c=e[2],u=i*c-s*l,f=s*a-r*c,d=r*l-i*a,h=i*d-s*f,g=s*u-r*d,A=r*f-i*u,E=o*2;return u*=E,f*=E,d*=E,h*=2,g*=2,A*=2,t[0]=a+u+h,t[1]=l+f+g,t[2]=c+d+A,t}function c7(t,e,n,r){var i=[],s=[];return i[0]=e[0]-n[0],i[1]=e[1]-n[1],i[2]=e[2]-n[2],s[0]=i[0],s[1]=i[1]*Math.cos(r)-i[2]*Math.sin(r),s[2]=i[1]*Math.sin(r)+i[2]*Math.cos(r),t[0]=s[0]+n[0],t[1]=s[1]+n[1],t[2]=s[2]+n[2],t}function u7(t,e,n,r){var i=[],s=[];return i[0]=e[0]-n[0],i[1]=e[1]-n[1],i[2]=e[2]-n[2],s[0]=i[2]*Math.sin(r)+i[0]*Math.cos(r),s[1]=i[1],s[2]=i[2]*Math.cos(r)-i[0]*Math.sin(r),t[0]=s[0]+n[0],t[1]=s[1]+n[1],t[2]=s[2]+n[2],t}function f7(t,e,n,r){var i=[],s=[];return i[0]=e[0]-n[0],i[1]=e[1]-n[1],i[2]=e[2]-n[2],s[0]=i[0]*Math.cos(r)-i[1]*Math.sin(r),s[1]=i[0]*Math.sin(r)+i[1]*Math.cos(r),s[2]=i[2],t[0]=s[0]+n[0],t[1]=s[1]+n[1],t[2]=s[2]+n[2],t}function d7(t,e){var n=t[0],r=t[1],i=t[2],s=e[0],o=e[1],a=e[2],l=Math.sqrt(n*n+r*r+i*i),c=Math.sqrt(s*s+o*o+a*a),u=l*c,f=u&&mT(t,e)/u;return Math.acos(Math.min(Math.max(f,-1),1))}var ET=i7,_T=r7,jA=s7;(function(){var t=pT();return function(e,n,r,i,s,o){var a,l;for(n||(n=3),r||(r=0),i?l=Math.min(i*n+r,e.length):l=e.length,a=r;a<l;a+=n)t[0]=e[a],t[1]=e[a+1],t[2]=e[a+2],s(t,t,o),e[a]=t[0],e[a+1]=t[1],e[a+2]=t[2];return e}})();const HA=[0,0,0];let of;class re extends fT{static get ZERO(){return of||(of=new re(0,0,0),Object.freeze(of)),of}constructor(e=0,n=0,r=0){super(-0,-0,-0),arguments.length===1&&co(e)?this.copy(e):(an.debug&&(He(e),He(n),He(r)),this[0]=e,this[1]=n,this[2]=r)}set(e,n,r){return this[0]=e,this[1]=n,this[2]=r,this.check()}copy(e){return this[0]=e[0],this[1]=e[1],this[2]=e[2],this.check()}fromObject(e){return an.debug&&(He(e.x),He(e.y),He(e.z)),this[0]=e.x,this[1]=e.y,this[2]=e.z,this.check()}toObject(e){return e.x=this[0],e.y=this[1],e.z=this[2],e}get ELEMENTS(){return 3}get z(){return this[2]}set z(e){this[2]=He(e)}angle(e){return d7(this,e)}cross(e){return Yf(this,this,e),this.check()}rotateX({radians:e,origin:n=HA}){return c7(this,this,n,e),this.check()}rotateY({radians:e,origin:n=HA}){return u7(this,this,n,e),this.check()}rotateZ({radians:e,origin:n=HA}){return f7(this,this,n,e),this.check()}transform(e){return this.transformAsPoint(e)}transformAsPoint(e){return wy(this,this,e),this.check()}transformAsVector(e){return gT(this,this,e),this.check()}transformByMatrix3(e){return vT(this,this,e),this.check()}transformByMatrix2(e){return t7(this,this,e),this.check()}transformByQuaternion(e){return yT(this,this,e),this.check()}}let af;class Sy extends fT{static get ZERO(){return af||(af=new Sy(0,0,0,0),Object.freeze(af)),af}constructor(e=0,n=0,r=0,i=0){super(-0,-0,-0,-0),co(e)&&arguments.length===1?this.copy(e):(an.debug&&(He(e),He(n),He(r),He(i)),this[0]=e,this[1]=n,this[2]=r,this[3]=i)}set(e,n,r,i){return this[0]=e,this[1]=n,this[2]=r,this[3]=i,this.check()}copy(e){return this[0]=e[0],this[1]=e[1],this[2]=e[2],this[3]=e[3],this.check()}fromObject(e){return an.debug&&(He(e.x),He(e.y),He(e.z),He(e.w)),this[0]=e.x,this[1]=e.y,this[2]=e.z,this[3]=e.w,this}toObject(e){return e.x=this[0],e.y=this[1],e.z=this[2],e.w=this[3],e}get ELEMENTS(){return 4}get z(){return this[2]}set z(e){this[2]=He(e)}get w(){return this[3]}set w(e){this[3]=He(e)}transform(e){return wy(this,this,e),this.check()}transformByMatrix3(e){return AT(this,this,e),this.check()}transformByMatrix2(e){return n7(this,this,e),this.check()}transformByQuaternion(e){return yT(this,this,e),this.check()}applyMatrix4(e){return e.transform(this,this),this}}class xT extends Iy{toString(){let e="[";if(an.printRowMajor){e+="row-major:";for(let n=0;n<this.RANK;++n)for(let r=0;r<this.RANK;++r)e+=" ".concat(this[r*this.RANK+n])}else{e+="column-major:";for(let n=0;n<this.ELEMENTS;++n)e+=" ".concat(this[n])}return e+="]",e}getElementIndex(e,n){return n*this.RANK+e}getElement(e,n){return this[n*this.RANK+e]}setElement(e,n,r){return this[n*this.RANK+e]=He(r),this}getColumn(e,n=new Array(this.RANK).fill(-0)){const r=e*this.RANK;for(let i=0;i<this.RANK;++i)n[i]=this[r+i];return n}setColumn(e,n){const r=e*this.RANK;for(let i=0;i<this.RANK;++i)this[r+i]=n[i];return this}}function h7(){var t=new Cr(9);return Cr!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[5]=0,t[6]=0,t[7]=0),t[0]=1,t[4]=1,t[8]=1,t}function g7(t,e){if(t===e){var n=e[1],r=e[2],i=e[5];t[1]=e[3],t[2]=e[6],t[3]=n,t[5]=e[7],t[6]=r,t[7]=i}else t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8];return t}function A7(t,e){var n=e[0],r=e[1],i=e[2],s=e[3],o=e[4],a=e[5],l=e[6],c=e[7],u=e[8],f=u*o-a*c,d=-u*s+a*l,h=c*s-o*l,g=n*f+r*d+i*h;return g?(g=1/g,t[0]=f*g,t[1]=(-u*r+i*c)*g,t[2]=(a*r-i*o)*g,t[3]=d*g,t[4]=(u*n-i*l)*g,t[5]=(-a*n+i*s)*g,t[6]=h*g,t[7]=(-c*n+r*l)*g,t[8]=(o*n-r*s)*g,t):null}function p7(t){var e=t[0],n=t[1],r=t[2],i=t[3],s=t[4],o=t[5],a=t[6],l=t[7],c=t[8];return e*(c*s-o*l)+n*(-c*i+o*a)+r*(l*i-s*a)}function jx(t,e,n){var r=e[0],i=e[1],s=e[2],o=e[3],a=e[4],l=e[5],c=e[6],u=e[7],f=e[8],d=n[0],h=n[1],g=n[2],A=n[3],E=n[4],p=n[5],m=n[6],y=n[7],_=n[8];return t[0]=d*r+h*o+g*c,t[1]=d*i+h*a+g*u,t[2]=d*s+h*l+g*f,t[3]=A*r+E*o+p*c,t[4]=A*i+E*a+p*u,t[5]=A*s+E*l+p*f,t[6]=m*r+y*o+_*c,t[7]=m*i+y*a+_*u,t[8]=m*s+y*l+_*f,t}function m7(t,e,n){var r=e[0],i=e[1],s=e[2],o=e[3],a=e[4],l=e[5],c=e[6],u=e[7],f=e[8],d=n[0],h=n[1];return t[0]=r,t[1]=i,t[2]=s,t[3]=o,t[4]=a,t[5]=l,t[6]=d*r+h*o+c,t[7]=d*i+h*a+u,t[8]=d*s+h*l+f,t}function v7(t,e,n){var r=e[0],i=e[1],s=e[2],o=e[3],a=e[4],l=e[5],c=e[6],u=e[7],f=e[8],d=Math.sin(n),h=Math.cos(n);return t[0]=h*r+d*o,t[1]=h*i+d*a,t[2]=h*s+d*l,t[3]=h*o-d*r,t[4]=h*a-d*i,t[5]=h*l-d*s,t[6]=c,t[7]=u,t[8]=f,t}function Hx(t,e,n){var r=n[0],i=n[1];return t[0]=r*e[0],t[1]=r*e[1],t[2]=r*e[2],t[3]=i*e[3],t[4]=i*e[4],t[5]=i*e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t}function y7(t,e){var n=e[0],r=e[1],i=e[2],s=e[3],o=n+n,a=r+r,l=i+i,c=n*o,u=r*o,f=r*a,d=i*o,h=i*a,g=i*l,A=s*o,E=s*a,p=s*l;return t[0]=1-f-g,t[3]=u-p,t[6]=d+E,t[1]=u+p,t[4]=1-c-g,t[7]=h-A,t[2]=d-E,t[5]=h+A,t[8]=1-c-f,t}var Y0;(function(t){t[t.COL0ROW0=0]="COL0ROW0",t[t.COL0ROW1=1]="COL0ROW1",t[t.COL0ROW2=2]="COL0ROW2",t[t.COL1ROW0=3]="COL1ROW0",t[t.COL1ROW1=4]="COL1ROW1",t[t.COL1ROW2=5]="COL1ROW2",t[t.COL2ROW0=6]="COL2ROW0",t[t.COL2ROW1=7]="COL2ROW1",t[t.COL2ROW2=8]="COL2ROW2"})(Y0||(Y0={}));const E7=Object.freeze([1,0,0,0,1,0,0,0,1]);class Ft extends xT{static get IDENTITY(){return x7()}static get ZERO(){return _7()}get ELEMENTS(){return 9}get RANK(){return 3}get INDICES(){return Y0}constructor(e,...n){super(-0,-0,-0,-0,-0,-0,-0,-0,-0),arguments.length===1&&Array.isArray(e)?this.copy(e):n.length>0?this.copy([e,...n]):this.identity()}copy(e){return this[0]=e[0],this[1]=e[1],this[2]=e[2],this[3]=e[3],this[4]=e[4],this[5]=e[5],this[6]=e[6],this[7]=e[7],this[8]=e[8],this.check()}identity(){return this.copy(E7)}fromObject(e){return this.check()}fromQuaternion(e){return y7(this,e),this.check()}set(e,n,r,i,s,o,a,l,c){return this[0]=e,this[1]=n,this[2]=r,this[3]=i,this[4]=s,this[5]=o,this[6]=a,this[7]=l,this[8]=c,this.check()}setRowMajor(e,n,r,i,s,o,a,l,c){return this[0]=e,this[1]=i,this[2]=a,this[3]=n,this[4]=s,this[5]=l,this[6]=r,this[7]=o,this[8]=c,this.check()}determinant(){return p7(this)}transpose(){return g7(this,this),this.check()}invert(){return A7(this,this),this.check()}multiplyLeft(e){return jx(this,e,this),this.check()}multiplyRight(e){return jx(this,this,e),this.check()}rotate(e){return v7(this,this,e),this.check()}scale(e){return Array.isArray(e)?Hx(this,this,e):Hx(this,this,[e,e]),this.check()}translate(e){return m7(this,this,e),this.check()}transform(e,n){let r;switch(e.length){case 2:r=ZF(n||[-0,-0],e,this);break;case 3:r=vT(n||[-0,-0,-0],e,this);break;case 4:r=AT(n||[-0,-0,-0,-0],e,this);break;default:throw new Error("Illegal vector")}return Jl(r,e.length),r}transformVector(e,n){return this.transform(e,n)}transformVector2(e,n){return this.transform(e,n)}transformVector3(e,n){return this.transform(e,n)}}let lf,cf;function _7(){return lf||(lf=new Ft([0,0,0,0,0,0,0,0,0]),Object.freeze(lf)),lf}function x7(){return cf||(cf=new Ft,Object.freeze(cf)),cf}function C7(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function I7(t,e){if(t===e){var n=e[1],r=e[2],i=e[3],s=e[6],o=e[7],a=e[11];t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=n,t[6]=e[9],t[7]=e[13],t[8]=r,t[9]=s,t[11]=e[14],t[12]=i,t[13]=o,t[14]=a}else t[0]=e[0],t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=e[1],t[5]=e[5],t[6]=e[9],t[7]=e[13],t[8]=e[2],t[9]=e[6],t[10]=e[10],t[11]=e[14],t[12]=e[3],t[13]=e[7],t[14]=e[11],t[15]=e[15];return t}function $0(t,e){var n=e[0],r=e[1],i=e[2],s=e[3],o=e[4],a=e[5],l=e[6],c=e[7],u=e[8],f=e[9],d=e[10],h=e[11],g=e[12],A=e[13],E=e[14],p=e[15],m=n*a-r*o,y=n*l-i*o,_=n*c-s*o,I=r*l-i*a,C=r*c-s*a,b=i*c-s*l,B=u*A-f*g,R=u*E-d*g,M=u*p-h*g,U=f*E-d*A,G=f*p-h*A,Y=d*p-h*E,Z=m*Y-y*G+_*U+I*M-C*R+b*B;return Z?(Z=1/Z,t[0]=(a*Y-l*G+c*U)*Z,t[1]=(i*G-r*Y-s*U)*Z,t[2]=(A*b-E*C+p*I)*Z,t[3]=(d*C-f*b-h*I)*Z,t[4]=(l*M-o*Y-c*R)*Z,t[5]=(n*Y-i*M+s*R)*Z,t[6]=(E*_-g*b-p*y)*Z,t[7]=(u*b-d*_+h*y)*Z,t[8]=(o*G-a*M+c*B)*Z,t[9]=(r*M-n*G-s*B)*Z,t[10]=(g*C-A*_+p*m)*Z,t[11]=(f*_-u*C-h*m)*Z,t[12]=(a*R-o*U-l*B)*Z,t[13]=(n*U-r*R+i*B)*Z,t[14]=(A*y-g*I-E*m)*Z,t[15]=(u*I-f*y+d*m)*Z,t):null}function w7(t){var e=t[0],n=t[1],r=t[2],i=t[3],s=t[4],o=t[5],a=t[6],l=t[7],c=t[8],u=t[9],f=t[10],d=t[11],h=t[12],g=t[13],A=t[14],E=t[15],p=e*o-n*s,m=e*a-r*s,y=e*l-i*s,_=n*a-r*o,I=n*l-i*o,C=r*l-i*a,b=c*g-u*h,B=c*A-f*h,R=c*E-d*h,M=u*A-f*g,U=u*E-d*g,G=f*E-d*A;return p*G-m*U+y*M+_*R-I*B+C*b}function to(t,e,n){var r=e[0],i=e[1],s=e[2],o=e[3],a=e[4],l=e[5],c=e[6],u=e[7],f=e[8],d=e[9],h=e[10],g=e[11],A=e[12],E=e[13],p=e[14],m=e[15],y=n[0],_=n[1],I=n[2],C=n[3];return t[0]=y*r+_*a+I*f+C*A,t[1]=y*i+_*l+I*d+C*E,t[2]=y*s+_*c+I*h+C*p,t[3]=y*o+_*u+I*g+C*m,y=n[4],_=n[5],I=n[6],C=n[7],t[4]=y*r+_*a+I*f+C*A,t[5]=y*i+_*l+I*d+C*E,t[6]=y*s+_*c+I*h+C*p,t[7]=y*o+_*u+I*g+C*m,y=n[8],_=n[9],I=n[10],C=n[11],t[8]=y*r+_*a+I*f+C*A,t[9]=y*i+_*l+I*d+C*E,t[10]=y*s+_*c+I*h+C*p,t[11]=y*o+_*u+I*g+C*m,y=n[12],_=n[13],I=n[14],C=n[15],t[12]=y*r+_*a+I*f+C*A,t[13]=y*i+_*l+I*d+C*E,t[14]=y*s+_*c+I*h+C*p,t[15]=y*o+_*u+I*g+C*m,t}function jd(t,e,n){var r=n[0],i=n[1],s=n[2],o,a,l,c,u,f,d,h,g,A,E,p;return e===t?(t[12]=e[0]*r+e[4]*i+e[8]*s+e[12],t[13]=e[1]*r+e[5]*i+e[9]*s+e[13],t[14]=e[2]*r+e[6]*i+e[10]*s+e[14],t[15]=e[3]*r+e[7]*i+e[11]*s+e[15]):(o=e[0],a=e[1],l=e[2],c=e[3],u=e[4],f=e[5],d=e[6],h=e[7],g=e[8],A=e[9],E=e[10],p=e[11],t[0]=o,t[1]=a,t[2]=l,t[3]=c,t[4]=u,t[5]=f,t[6]=d,t[7]=h,t[8]=g,t[9]=A,t[10]=E,t[11]=p,t[12]=o*r+u*i+g*s+e[12],t[13]=a*r+f*i+A*s+e[13],t[14]=l*r+d*i+E*s+e[14],t[15]=c*r+h*i+p*s+e[15]),t}function by(t,e,n){var r=n[0],i=n[1],s=n[2];return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t[4]=e[4]*i,t[5]=e[5]*i,t[6]=e[6]*i,t[7]=e[7]*i,t[8]=e[8]*s,t[9]=e[9]*s,t[10]=e[10]*s,t[11]=e[11]*s,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function S7(t,e,n,r){var i=r[0],s=r[1],o=r[2],a=Math.hypot(i,s,o),l,c,u,f,d,h,g,A,E,p,m,y,_,I,C,b,B,R,M,U,G,Y,Z,oe;return a<ec?null:(a=1/a,i*=a,s*=a,o*=a,l=Math.sin(n),c=Math.cos(n),u=1-c,f=e[0],d=e[1],h=e[2],g=e[3],A=e[4],E=e[5],p=e[6],m=e[7],y=e[8],_=e[9],I=e[10],C=e[11],b=i*i*u+c,B=s*i*u+o*l,R=o*i*u-s*l,M=i*s*u-o*l,U=s*s*u+c,G=o*s*u+i*l,Y=i*o*u+s*l,Z=s*o*u-i*l,oe=o*o*u+c,t[0]=f*b+A*B+y*R,t[1]=d*b+E*B+_*R,t[2]=h*b+p*B+I*R,t[3]=g*b+m*B+C*R,t[4]=f*M+A*U+y*G,t[5]=d*M+E*U+_*G,t[6]=h*M+p*U+I*G,t[7]=g*M+m*U+C*G,t[8]=f*Y+A*Z+y*oe,t[9]=d*Y+E*Z+_*oe,t[10]=h*Y+p*Z+I*oe,t[11]=g*Y+m*Z+C*oe,e!==t&&(t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t)}function CT(t,e,n){var r=Math.sin(n),i=Math.cos(n),s=e[4],o=e[5],a=e[6],l=e[7],c=e[8],u=e[9],f=e[10],d=e[11];return e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[4]=s*i+c*r,t[5]=o*i+u*r,t[6]=a*i+f*r,t[7]=l*i+d*r,t[8]=c*i-s*r,t[9]=u*i-o*r,t[10]=f*i-a*r,t[11]=d*i-l*r,t}function b7(t,e,n){var r=Math.sin(n),i=Math.cos(n),s=e[0],o=e[1],a=e[2],l=e[3],c=e[8],u=e[9],f=e[10],d=e[11];return e!==t&&(t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=s*i-c*r,t[1]=o*i-u*r,t[2]=a*i-f*r,t[3]=l*i-d*r,t[8]=s*r+c*i,t[9]=o*r+u*i,t[10]=a*r+f*i,t[11]=l*r+d*i,t}function IT(t,e,n){var r=Math.sin(n),i=Math.cos(n),s=e[0],o=e[1],a=e[2],l=e[3],c=e[4],u=e[5],f=e[6],d=e[7];return e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=s*i+c*r,t[1]=o*i+u*r,t[2]=a*i+f*r,t[3]=l*i+d*r,t[4]=c*i-s*r,t[5]=u*i-o*r,t[6]=f*i-a*r,t[7]=d*i-l*r,t}function T7(t,e){var n=e[0],r=e[1],i=e[2],s=e[4],o=e[5],a=e[6],l=e[8],c=e[9],u=e[10];return t[0]=Math.hypot(n,r,i),t[1]=Math.hypot(s,o,a),t[2]=Math.hypot(l,c,u),t}function B7(t,e){var n=e[0],r=e[1],i=e[2],s=e[3],o=n+n,a=r+r,l=i+i,c=n*o,u=r*o,f=r*a,d=i*o,h=i*a,g=i*l,A=s*o,E=s*a,p=s*l;return t[0]=1-f-g,t[1]=u+p,t[2]=d-E,t[3]=0,t[4]=u-p,t[5]=1-c-g,t[6]=h+A,t[7]=0,t[8]=d+E,t[9]=h-A,t[10]=1-c-f,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function R7(t,e,n,r,i,s,o){var a=1/(n-e),l=1/(i-r),c=1/(s-o);return t[0]=s*2*a,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=s*2*l,t[6]=0,t[7]=0,t[8]=(n+e)*a,t[9]=(i+r)*l,t[10]=(o+s)*c,t[11]=-1,t[12]=0,t[13]=0,t[14]=o*s*2*c,t[15]=0,t}function P7(t,e,n,r,i){var s=1/Math.tan(e/2),o;return t[0]=s/n,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=s,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,i!=null&&i!==1/0?(o=1/(r-i),t[10]=(i+r)*o,t[14]=2*i*r*o):(t[10]=-1,t[14]=-2*r),t}var L7=P7;function M7(t,e,n,r,i,s,o){var a=1/(e-n),l=1/(r-i),c=1/(s-o);return t[0]=-2*a,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*l,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*c,t[11]=0,t[12]=(e+n)*a,t[13]=(i+r)*l,t[14]=(o+s)*c,t[15]=1,t}var N7=M7;function O7(t,e,n,r){var i,s,o,a,l,c,u,f,d,h,g=e[0],A=e[1],E=e[2],p=r[0],m=r[1],y=r[2],_=n[0],I=n[1],C=n[2];return Math.abs(g-_)<ec&&Math.abs(A-I)<ec&&Math.abs(E-C)<ec?C7(t):(u=g-_,f=A-I,d=E-C,h=1/Math.hypot(u,f,d),u*=h,f*=h,d*=h,i=m*d-y*f,s=y*u-p*d,o=p*f-m*u,h=Math.hypot(i,s,o),h?(h=1/h,i*=h,s*=h,o*=h):(i=0,s=0,o=0),a=f*o-d*s,l=d*i-u*o,c=u*s-f*i,h=Math.hypot(a,l,c),h?(h=1/h,a*=h,l*=h,c*=h):(a=0,l=0,c=0),t[0]=i,t[1]=a,t[2]=u,t[3]=0,t[4]=s,t[5]=l,t[6]=f,t[7]=0,t[8]=o,t[9]=c,t[10]=d,t[11]=0,t[12]=-(i*g+s*A+o*E),t[13]=-(a*g+l*A+c*E),t[14]=-(u*g+f*A+d*E),t[15]=1,t)}function D7(){var t=new Cr(4);return Cr!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0,t[3]=0),t}function k7(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t}function Ty(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t}function Q7(t){var e=t[0],n=t[1],r=t[2],i=t[3];return Math.hypot(e,n,r,i)}function F7(t){var e=t[0],n=t[1],r=t[2],i=t[3];return e*e+n*n+r*r+i*i}function U7(t,e){var n=e[0],r=e[1],i=e[2],s=e[3],o=n*n+r*r+i*i+s*s;return o>0&&(o=1/Math.sqrt(o)),t[0]=n*o,t[1]=r*o,t[2]=i*o,t[3]=s*o,t}function G7(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3]}function z7(t,e,n,r){var i=e[0],s=e[1],o=e[2],a=e[3];return t[0]=i+r*(n[0]-i),t[1]=s+r*(n[1]-s),t[2]=o+r*(n[2]-o),t[3]=a+r*(n[3]-a),t}function Wa(t,e,n){var r=e[0],i=e[1],s=e[2],o=e[3];return t[0]=n[0]*r+n[4]*i+n[8]*s+n[12]*o,t[1]=n[1]*r+n[5]*i+n[9]*s+n[13]*o,t[2]=n[2]*r+n[6]*i+n[10]*s+n[14]*o,t[3]=n[3]*r+n[7]*i+n[11]*s+n[15]*o,t}function V7(t,e,n){var r=e[0],i=e[1],s=e[2],o=n[0],a=n[1],l=n[2],c=n[3],u=c*r+a*s-l*i,f=c*i+l*r-o*s,d=c*s+o*i-a*r,h=-o*r-a*i-l*s;return t[0]=u*c+h*-o+f*-l-d*-a,t[1]=f*c+h*-a+d*-o-u*-l,t[2]=d*c+h*-l+u*-a-f*-o,t[3]=e[3],t}(function(){var t=D7();return function(e,n,r,i,s,o){var a,l;for(n||(n=4),r||(r=0),i?l=Math.min(i*n+r,e.length):l=e.length,a=r;a<l;a+=n)t[0]=e[a],t[1]=e[a+1],t[2]=e[a+2],t[3]=e[a+3],s(t,t,o),e[a]=t[0],e[a+1]=t[1],e[a+2]=t[2],e[a+3]=t[3];return e}})();var K0;(function(t){t[t.COL0ROW0=0]="COL0ROW0",t[t.COL0ROW1=1]="COL0ROW1",t[t.COL0ROW2=2]="COL0ROW2",t[t.COL0ROW3=3]="COL0ROW3",t[t.COL1ROW0=4]="COL1ROW0",t[t.COL1ROW1=5]="COL1ROW1",t[t.COL1ROW2=6]="COL1ROW2",t[t.COL1ROW3=7]="COL1ROW3",t[t.COL2ROW0=8]="COL2ROW0",t[t.COL2ROW1=9]="COL2ROW1",t[t.COL2ROW2=10]="COL2ROW2",t[t.COL2ROW3=11]="COL2ROW3",t[t.COL3ROW0=12]="COL3ROW0",t[t.COL3ROW1=13]="COL3ROW1",t[t.COL3ROW2=14]="COL3ROW2",t[t.COL3ROW3=15]="COL3ROW3"})(K0||(K0={}));const j7=45*Math.PI/180,H7=1,WA=.1,YA=500,W7=Object.freeze([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]);class Ze extends xT{static get IDENTITY(){return $7()}static get ZERO(){return Y7()}get ELEMENTS(){return 16}get RANK(){return 4}get INDICES(){return K0}constructor(e){super(-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0),arguments.length===1&&Array.isArray(e)?this.copy(e):this.identity()}copy(e){return this[0]=e[0],this[1]=e[1],this[2]=e[2],this[3]=e[3],this[4]=e[4],this[5]=e[5],this[6]=e[6],this[7]=e[7],this[8]=e[8],this[9]=e[9],this[10]=e[10],this[11]=e[11],this[12]=e[12],this[13]=e[13],this[14]=e[14],this[15]=e[15],this.check()}set(e,n,r,i,s,o,a,l,c,u,f,d,h,g,A,E){return this[0]=e,this[1]=n,this[2]=r,this[3]=i,this[4]=s,this[5]=o,this[6]=a,this[7]=l,this[8]=c,this[9]=u,this[10]=f,this[11]=d,this[12]=h,this[13]=g,this[14]=A,this[15]=E,this.check()}setRowMajor(e,n,r,i,s,o,a,l,c,u,f,d,h,g,A,E){return this[0]=e,this[1]=s,this[2]=c,this[3]=h,this[4]=n,this[5]=o,this[6]=u,this[7]=g,this[8]=r,this[9]=a,this[10]=f,this[11]=A,this[12]=i,this[13]=l,this[14]=d,this[15]=E,this.check()}toRowMajor(e){return e[0]=this[0],e[1]=this[4],e[2]=this[8],e[3]=this[12],e[4]=this[1],e[5]=this[5],e[6]=this[9],e[7]=this[13],e[8]=this[2],e[9]=this[6],e[10]=this[10],e[11]=this[14],e[12]=this[3],e[13]=this[7],e[14]=this[11],e[15]=this[15],e}identity(){return this.copy(W7)}fromObject(e){return this.check()}fromQuaternion(e){return B7(this,e),this.check()}frustum(e){const{left:n,right:r,bottom:i,top:s,near:o=WA,far:a=YA}=e;return a===1/0?K7(this,n,r,i,s,o):R7(this,n,r,i,s,o,a),this.check()}lookAt(e){const{eye:n,center:r=[0,0,0],up:i=[0,1,0]}=e;return O7(this,n,r,i),this.check()}ortho(e){const{left:n,right:r,bottom:i,top:s,near:o=WA,far:a=YA}=e;return N7(this,n,r,i,s,o,a),this.check()}orthographic(e){const{fovy:n=j7,aspect:r=H7,focalDistance:i=1,near:s=WA,far:o=YA}=e;Wx(n);const a=n/2,l=i*Math.tan(a),c=l*r;return this.ortho({left:-c,right:c,bottom:-l,top:l,near:s,far:o})}perspective(e){const{fovy:n=45*Math.PI/180,aspect:r=1,near:i=.1,far:s=500}=e;return Wx(n),L7(this,n,r,i,s),this.check()}determinant(){return w7(this)}getScale(e=[-0,-0,-0]){return e[0]=Math.sqrt(this[0]*this[0]+this[1]*this[1]+this[2]*this[2]),e[1]=Math.sqrt(this[4]*this[4]+this[5]*this[5]+this[6]*this[6]),e[2]=Math.sqrt(this[8]*this[8]+this[9]*this[9]+this[10]*this[10]),e}getTranslation(e=[-0,-0,-0]){return e[0]=this[12],e[1]=this[13],e[2]=this[14],e}getRotation(e,n){e=e||[-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0],n=n||[-0,-0,-0];const r=this.getScale(n),i=1/r[0],s=1/r[1],o=1/r[2];return e[0]=this[0]*i,e[1]=this[1]*s,e[2]=this[2]*o,e[3]=0,e[4]=this[4]*i,e[5]=this[5]*s,e[6]=this[6]*o,e[7]=0,e[8]=this[8]*i,e[9]=this[9]*s,e[10]=this[10]*o,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}getRotationMatrix3(e,n){e=e||[-0,-0,-0,-0,-0,-0,-0,-0,-0],n=n||[-0,-0,-0];const r=this.getScale(n),i=1/r[0],s=1/r[1],o=1/r[2];return e[0]=this[0]*i,e[1]=this[1]*s,e[2]=this[2]*o,e[3]=this[4]*i,e[4]=this[5]*s,e[5]=this[6]*o,e[6]=this[8]*i,e[7]=this[9]*s,e[8]=this[10]*o,e}transpose(){return I7(this,this),this.check()}invert(){return $0(this,this),this.check()}multiplyLeft(e){return to(this,e,this),this.check()}multiplyRight(e){return to(this,this,e),this.check()}rotateX(e){return CT(this,this,e),this.check()}rotateY(e){return b7(this,this,e),this.check()}rotateZ(e){return IT(this,this,e),this.check()}rotateXYZ(e){return this.rotateX(e[0]).rotateY(e[1]).rotateZ(e[2])}rotateAxis(e,n){return S7(this,this,e,n),this.check()}scale(e){return by(this,this,Array.isArray(e)?e:[e,e,e]),this.check()}translate(e){return jd(this,this,e),this.check()}transform(e,n){return e.length===4?(n=Wa(n||[-0,-0,-0,-0],e,this),Jl(n,4),n):this.transformAsPoint(e,n)}transformAsPoint(e,n){const{length:r}=e;let i;switch(r){case 2:i=JF(n||[-0,-0],e,this);break;case 3:i=wy(n||[-0,-0,-0],e,this);break;default:throw new Error("Illegal vector")}return Jl(i,e.length),i}transformAsVector(e,n){let r;switch(e.length){case 2:r=e7(n||[-0,-0],e,this);break;case 3:r=gT(n||[-0,-0,-0],e,this);break;default:throw new Error("Illegal vector")}return Jl(r,e.length),r}transformPoint(e,n){return this.transformAsPoint(e,n)}transformVector(e,n){return this.transformAsPoint(e,n)}transformDirection(e,n){return this.transformAsVector(e,n)}makeRotationX(e){return this.identity().rotateX(e)}makeTranslation(e,n,r){return this.identity().translate([e,n,r])}}let uf,ff;function Y7(){return uf||(uf=new Ze([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),Object.freeze(uf)),uf}function $7(){return ff||(ff=new Ze,Object.freeze(ff)),ff}function Wx(t){if(t>Math.PI*2)throw Error("expected radians")}function K7(t,e,n,r,i,s){const o=2*s/(n-e),a=2*s/(i-r),l=(n+e)/(n-e),c=(i+r)/(i-r),u=-1,f=-1,d=-2*s;return t[0]=o,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=a,t[6]=0,t[7]=0,t[8]=l,t[9]=c,t[10]=u,t[11]=f,t[12]=0,t[13]=0,t[14]=d,t[15]=0,t}function Yx(){var t=new Cr(4);return Cr!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t[3]=1,t}function q7(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t}function wT(t,e,n){n=n*.5;var r=Math.sin(n);return t[0]=r*e[0],t[1]=r*e[1],t[2]=r*e[2],t[3]=Math.cos(n),t}function $x(t,e,n){var r=e[0],i=e[1],s=e[2],o=e[3],a=n[0],l=n[1],c=n[2],u=n[3];return t[0]=r*u+o*a+i*c-s*l,t[1]=i*u+o*l+s*a-r*c,t[2]=s*u+o*c+r*l-i*a,t[3]=o*u-r*a-i*l-s*c,t}function X7(t,e,n){n*=.5;var r=e[0],i=e[1],s=e[2],o=e[3],a=Math.sin(n),l=Math.cos(n);return t[0]=r*l+o*a,t[1]=i*l+s*a,t[2]=s*l-i*a,t[3]=o*l-r*a,t}function Z7(t,e,n){n*=.5;var r=e[0],i=e[1],s=e[2],o=e[3],a=Math.sin(n),l=Math.cos(n);return t[0]=r*l-s*a,t[1]=i*l+o*a,t[2]=s*l+r*a,t[3]=o*l-i*a,t}function J7(t,e,n){n*=.5;var r=e[0],i=e[1],s=e[2],o=e[3],a=Math.sin(n),l=Math.cos(n);return t[0]=r*l+i*a,t[1]=i*l-r*a,t[2]=s*l+o*a,t[3]=o*l-s*a,t}function eU(t,e){var n=e[0],r=e[1],i=e[2];return t[0]=n,t[1]=r,t[2]=i,t[3]=Math.sqrt(Math.abs(1-n*n-r*r-i*i)),t}function $f(t,e,n,r){var i=e[0],s=e[1],o=e[2],a=e[3],l=n[0],c=n[1],u=n[2],f=n[3],d,h,g,A,E;return h=i*l+s*c+o*u+a*f,h<0&&(h=-h,l=-l,c=-c,u=-u,f=-f),1-h>ec?(d=Math.acos(h),g=Math.sin(d),A=Math.sin((1-r)*d)/g,E=Math.sin(r*d)/g):(A=1-r,E=r),t[0]=A*i+E*l,t[1]=A*s+E*c,t[2]=A*o+E*u,t[3]=A*a+E*f,t}function tU(t,e){var n=e[0],r=e[1],i=e[2],s=e[3],o=n*n+r*r+i*i+s*s,a=o?1/o:0;return t[0]=-n*a,t[1]=-r*a,t[2]=-i*a,t[3]=s*a,t}function nU(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=e[3],t}function ST(t,e){var n=e[0]+e[4]+e[8],r;if(n>0)r=Math.sqrt(n+1),t[3]=.5*r,r=.5/r,t[0]=(e[5]-e[7])*r,t[1]=(e[6]-e[2])*r,t[2]=(e[1]-e[3])*r;else{var i=0;e[4]>e[0]&&(i=1),e[8]>e[i*3+i]&&(i=2);var s=(i+1)%3,o=(i+2)%3;r=Math.sqrt(e[i*3+i]-e[s*3+s]-e[o*3+o]+1),t[i]=.5*r,r=.5/r,t[3]=(e[s*3+o]-e[o*3+s])*r,t[s]=(e[s*3+i]+e[i*3+s])*r,t[o]=(e[o*3+i]+e[i*3+o])*r}return t}var rU=k7,iU=Ty,sU=G7,oU=z7,aU=Q7,lU=F7,bT=U7,cU=function(){var t=pT(),e=Vx(1,0,0),n=Vx(0,1,0);return function(r,i,s){var o=mT(i,s);return o<-.999999?(Yf(t,e,i),_T(t)<1e-6&&Yf(t,n,i),a7(t,t),wT(r,t,Math.PI),r):o>.999999?(r[0]=0,r[1]=0,r[2]=0,r[3]=1,r):(Yf(t,i,s),r[0]=t[0],r[1]=t[1],r[2]=t[2],r[3]=1+o,bT(r,r))}}();(function(){var t=Yx(),e=Yx();return function(n,r,i,s,o,a){return $f(t,r,o,a),$f(e,i,s,a),$f(n,t,e,2*a*(1-a)),n}})();(function(){var t=h7();return function(e,n,r,i){return t[0]=r[0],t[3]=r[1],t[6]=r[2],t[1]=i[0],t[4]=i[1],t[7]=i[2],t[2]=-n[0],t[5]=-n[1],t[8]=-n[2],bT(e,ST(e,t))}})();const uU=[0,0,0,1];class Kx extends Iy{constructor(e=0,n=0,r=0,i=1){super(-0,-0,-0,-0),Array.isArray(e)&&arguments.length===1?this.copy(e):this.set(e,n,r,i)}copy(e){return this[0]=e[0],this[1]=e[1],this[2]=e[2],this[3]=e[3],this.check()}set(e,n,r,i){return this[0]=e,this[1]=n,this[2]=r,this[3]=i,this.check()}fromObject(e){return this[0]=e.x,this[1]=e.y,this[2]=e.z,this[3]=e.w,this.check()}fromMatrix3(e){return ST(this,e),this.check()}fromAxisRotation(e,n){return wT(this,e,n),this.check()}identity(){return q7(this),this.check()}setAxisAngle(e,n){return this.fromAxisRotation(e,n)}get ELEMENTS(){return 4}get x(){return this[0]}set x(e){this[0]=He(e)}get y(){return this[1]}set y(e){this[1]=He(e)}get z(){return this[2]}set z(e){this[2]=He(e)}get w(){return this[3]}set w(e){this[3]=He(e)}len(){return aU(this)}lengthSquared(){return lU(this)}dot(e){return sU(this,e)}rotationTo(e,n){return cU(this,e,n),this.check()}add(e){return rU(this,this,e),this.check()}calculateW(){return eU(this,this),this.check()}conjugate(){return nU(this,this),this.check()}invert(){return tU(this,this),this.check()}lerp(e,n,r){return r===void 0?this.lerp(this,e,n):(oU(this,e,n,r),this.check())}multiplyRight(e){return $x(this,this,e),this.check()}multiplyLeft(e){return $x(this,e,this),this.check()}normalize(){const e=this.len(),n=e>0?1/e:0;return this[0]=this[0]*n,this[1]=this[1]*n,this[2]=this[2]*n,this[3]=this[3]*n,e===0&&(this[3]=1),this.check()}rotateX(e){return X7(this,this,e),this.check()}rotateY(e){return Z7(this,this,e),this.check()}rotateZ(e){return J7(this,this,e),this.check()}scale(e){return iU(this,this,e),this.check()}slerp(e,n,r){let i,s,o;switch(arguments.length){case 1:({start:i=uU,target:s,ratio:o}=e);break;case 2:i=this,s=e,o=n;break;default:i=e,s=n,o=r}return $f(this,i,s,o),this.check()}transformVector4(e,n=new Sy){return V7(n,e,this),Jl(n,4)}lengthSq(){return this.lengthSquared()}setFromAxisAngle(e,n){return this.setAxisAngle(e,n)}premultiply(e){return this.multiplyLeft(e)}multiply(e){return this.multiplyRight(e)}}const TT={EPSILON1:.1,EPSILON2:.01,EPSILON3:.001,EPSILON4:1e-4,EPSILON5:1e-5,EPSILON6:1e-6,EPSILON7:1e-7,EPSILON8:1e-8,EPSILON9:1e-9,EPSILON10:1e-10,EPSILON11:1e-11,EPSILON12:1e-12,EPSILON13:1e-13,EPSILON14:1e-14,EPSILON15:1e-15,EPSILON16:1e-16,EPSILON17:1e-17,EPSILON18:1e-18,EPSILON19:1e-19,EPSILON20:1e-20,PI_OVER_TWO:Math.PI/2,PI_OVER_FOUR:Math.PI/4,PI_OVER_SIX:Math.PI/6,TWO_PI:Math.PI*2},qx=`#if (defined(SHADER_TYPE_FRAGMENT) && defined(LIGHTING_FRAGMENT)) || (defined(SHADER_TYPE_VERTEX) && defined(LIGHTING_VERTEX))

struct AmbientLight {
 vec3 color;
};

struct PointLight {
 vec3 color;
 vec3 position;
 vec3 attenuation;
};

struct DirectionalLight {
  vec3 color;
  vec3 direction;
};

uniform AmbientLight lighting_uAmbientLight;
uniform PointLight lighting_uPointLight[MAX_LIGHTS];
uniform DirectionalLight lighting_uDirectionalLight[MAX_LIGHTS];
uniform int lighting_uPointLightCount;
uniform int lighting_uDirectionalLightCount;

uniform bool lighting_uEnabled;

float getPointLightAttenuation(PointLight pointLight, float distance) {
  return pointLight.attenuation.x
       + pointLight.attenuation.y * distance
       + pointLight.attenuation.z * distance * distance;
}

#endif
`,fU={lightSources:{}};function $A(){let{color:t=[0,0,0],intensity:e=1}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return t.map(n=>n*e/255)}function dU(t){let{ambientLight:e,pointLights:n=[],directionalLights:r=[]}=t;const i={};return e?i["lighting_uAmbientLight.color"]=$A(e):i["lighting_uAmbientLight.color"]=[0,0,0],n.forEach((s,o)=>{i["lighting_uPointLight[".concat(o,"].color")]=$A(s),i["lighting_uPointLight[".concat(o,"].position")]=s.position,i["lighting_uPointLight[".concat(o,"].attenuation")]=s.attenuation||[1,0,0]}),i.lighting_uPointLightCount=n.length,r.forEach((s,o)=>{i["lighting_uDirectionalLight[".concat(o,"].color")]=$A(s),i["lighting_uDirectionalLight[".concat(o,"].direction")]=s.direction}),i.lighting_uDirectionalLightCount=r.length,i}function BT(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:fU;if("lightSources"in t){const{ambientLight:e,pointLights:n,directionalLights:r}=t.lightSources||{};return e||n&&n.length>0||r&&r.length>0?Object.assign({},dU({ambientLight:e,pointLights:n,directionalLights:r}),{lighting_uEnabled:!0}):{lighting_uEnabled:!1}}if("lights"in t){const e={pointLights:[],directionalLights:[]};for(const n of t.lights||[])switch(n.type){case"ambient":e.ambientLight=n;break;case"directional":e.directionalLights.push(n);break;case"point":e.pointLights.push(n);break}return BT({lightSources:e})}return{}}const hU={name:"lights",vs:qx,fs:qx,getUniforms:BT,defines:{MAX_LIGHTS:3}},gU=new Uint8Array([0,255,255,255]),AU={pickingSelectedColor:null,pickingHighlightColor:gU,pickingActive:!1,pickingAttribute:!1};function pU(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:AU;const e={};if(t.pickingSelectedColor!==void 0)if(!t.pickingSelectedColor)e.picking_uSelectedColorValid=0;else{const n=t.pickingSelectedColor.slice(0,3);e.picking_uSelectedColorValid=1,e.picking_uSelectedColor=n}if(t.pickingHighlightColor){const n=Array.from(t.pickingHighlightColor,r=>r/255);Number.isFinite(n[3])||(n[3]=1),e.picking_uHighlightColor=n}return t.pickingActive!==void 0&&(e.picking_uActive=!!t.pickingActive,e.picking_uAttribute=!!t.pickingAttribute),e}const mU=`uniform bool picking_uActive;
uniform bool picking_uAttribute;
uniform vec3 picking_uSelectedColor;
uniform bool picking_uSelectedColorValid;

out vec4 picking_vRGBcolor_Avalid;

const float COLOR_SCALE = 1. / 255.;

bool picking_isColorValid(vec3 color) {
  return dot(color, vec3(1.0)) > 0.001;
}

bool isVertexPicked(vec3 vertexColor) {
  return
    picking_uSelectedColorValid &&
    !picking_isColorValid(abs(vertexColor - picking_uSelectedColor));
}

void picking_setPickingColor(vec3 pickingColor) {
  if (picking_uActive) {
    picking_vRGBcolor_Avalid.a = float(picking_isColorValid(pickingColor));

    if (!picking_uAttribute) {
      picking_vRGBcolor_Avalid.rgb = pickingColor * COLOR_SCALE;
    }
  } else {
    picking_vRGBcolor_Avalid.a = float(isVertexPicked(pickingColor));
  }
}

void picking_setPickingAttribute(float value) {
  if (picking_uAttribute) {
    picking_vRGBcolor_Avalid.r = value;
  }
}
void picking_setPickingAttribute(vec2 value) {
  if (picking_uAttribute) {
    picking_vRGBcolor_Avalid.rg = value;
  }
}
void picking_setPickingAttribute(vec3 value) {
  if (picking_uAttribute) {
    picking_vRGBcolor_Avalid.rgb = value;
  }
}
`,vU=`uniform bool picking_uActive;
uniform vec3 picking_uSelectedColor;
uniform vec4 picking_uHighlightColor;

in vec4 picking_vRGBcolor_Avalid;
vec4 picking_filterHighlightColor(vec4 color) {
  if (picking_uActive) {
    return color;
  }
  bool selected = bool(picking_vRGBcolor_Avalid.a);

  if (selected) {
    float highLightAlpha = picking_uHighlightColor.a;
    float blendedAlpha = highLightAlpha + color.a * (1.0 - highLightAlpha);
    float highLightRatio = highLightAlpha / blendedAlpha;

    vec3 blendedRGB = mix(color.rgb, picking_uHighlightColor.rgb, highLightRatio);
    return vec4(blendedRGB, blendedAlpha);
  } else {
    return color;
  }
}
vec4 picking_filterPickingColor(vec4 color) {
  if (picking_uActive) {
    if (picking_vRGBcolor_Avalid.a == 0.0) {
      discard;
    }
    return picking_vRGBcolor_Avalid;
  }
  return color;
}
vec4 picking_filterColor(vec4 color) {
  vec4 highightColor = picking_filterHighlightColor(color);
  return picking_filterPickingColor(highightColor);
}

`,yU={name:"picking",vs:mU,fs:vU,getUniforms:pU},EU=`
uniform float lighting_uAmbient;
uniform float lighting_uDiffuse;
uniform float lighting_uShininess;
uniform vec3  lighting_uSpecularColor;

vec3 lighting_getLightColor(vec3 surfaceColor, vec3 light_direction, vec3 view_direction, vec3 normal_worldspace, vec3 color) {
    vec3 halfway_direction = normalize(light_direction + view_direction);
    float lambertian = dot(light_direction, normal_worldspace);
    float specular = 0.0;
    if (lambertian > 0.0) {
      float specular_angle = max(dot(normal_worldspace, halfway_direction), 0.0);
      specular = pow(specular_angle, lighting_uShininess);
    }
    lambertian = max(lambertian, 0.0);
    return (lambertian * lighting_uDiffuse * surfaceColor + specular * lighting_uSpecularColor) * color;
}

vec3 lighting_getLightColor(vec3 surfaceColor, vec3 cameraPosition, vec3 position_worldspace, vec3 normal_worldspace) {
  vec3 lightColor = surfaceColor;

  if (lighting_uEnabled) {
    vec3 view_direction = normalize(cameraPosition - position_worldspace);
    lightColor = lighting_uAmbient * surfaceColor * lighting_uAmbientLight.color;

    for (int i = 0; i < MAX_LIGHTS; i++) {
      if (i >= lighting_uPointLightCount) {
        break;
      }
      PointLight pointLight = lighting_uPointLight[i];
      vec3 light_position_worldspace = pointLight.position;
      vec3 light_direction = normalize(light_position_worldspace - position_worldspace);
      lightColor += lighting_getLightColor(surfaceColor, light_direction, view_direction, normal_worldspace, pointLight.color);
    }

    for (int i = 0; i < MAX_LIGHTS; i++) {
      if (i >= lighting_uDirectionalLightCount) {
        break;
      }
      DirectionalLight directionalLight = lighting_uDirectionalLight[i];
      lightColor += lighting_getLightColor(surfaceColor, -directionalLight.direction, view_direction, normal_worldspace, directionalLight.color);
    }
  }
  return lightColor;
}

vec3 lighting_getSpecularLightColor(vec3 cameraPosition, vec3 position_worldspace, vec3 normal_worldspace) {
  vec3 lightColor = vec3(0, 0, 0);
  vec3 surfaceColor = vec3(0, 0, 0);

  if (lighting_uEnabled) {
    vec3 view_direction = normalize(cameraPosition - position_worldspace);

    for (int i = 0; i < MAX_LIGHTS; i++) {
      if (i >= lighting_uPointLightCount) {
        break;
      }
      PointLight pointLight = lighting_uPointLight[i];
      vec3 light_position_worldspace = pointLight.position;
      vec3 light_direction = normalize(light_position_worldspace - position_worldspace);
      lightColor += lighting_getLightColor(surfaceColor, light_direction, view_direction, normal_worldspace, pointLight.color);
    }

    for (int i = 0; i < MAX_LIGHTS; i++) {
      if (i >= lighting_uDirectionalLightCount) {
        break;
      }
      DirectionalLight directionalLight = lighting_uDirectionalLight[i];
      lightColor += lighting_getLightColor(surfaceColor, -directionalLight.direction, view_direction, normal_worldspace, directionalLight.color);
    }
  }
  return lightColor;
}
`,_U={};function xU(t){const{ambient:e=.35,diffuse:n=.6,shininess:r=32,specularColor:i=[30,30,30]}=t;return{lighting_uAmbient:e,lighting_uDiffuse:n,lighting_uShininess:r,lighting_uSpecularColor:i.map(s=>s/255)}}function CU(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:_U;if(!("material"in t))return{};const{material:e}=t;return e?xU(e):{lighting_uEnabled:!1}}const IU={name:"gouraud-lighting",dependencies:[hU],vs:EU,defines:{LIGHTING_VERTEX:1},getUniforms:CU},wU=`attribute float transform_elementID;
vec2 transform_getPixelSizeHalf(vec2 size) {
  return vec2(1.) / (2. * size);
}

vec2 transform_getPixelIndices(vec2 texSize, vec2 pixelSizeHalf) {
  float yIndex = floor((transform_elementID / texSize[0]) + pixelSizeHalf[1]);
  float xIndex = transform_elementID - (yIndex * texSize[0]);
  return vec2(xIndex, yIndex);
}
vec2 transform_getTexCoord(vec2 size) {
  vec2 pixelSizeHalf = transform_getPixelSizeHalf(size);
  vec2 indices = transform_getPixelIndices(size, pixelSizeHalf);
  vec2 coord = indices / size + pixelSizeHalf;
  return coord;
}
vec2 transform_getPos(vec2 size) {
  vec2 texCoord = transform_getTexCoord(size);
  vec2 pos = (texCoord * (2.0, 2.0)) - (1., 1.);
  return pos;
}
vec4 transform_getInput(sampler2D texSampler, vec2 size) {
  vec2 texCoord = transform_getTexCoord(size);
  vec4 textureColor = texture2D(texSampler, texCoord);
  return textureColor;
}
`,SU={name:"transform",vs:wU,fs:null};class wo{static getDefaultProgramManager(e){return e.luma=e.luma||{},e.luma.defaultProgramManager=e.luma.defaultProgramManager||new wo(e),e.luma.defaultProgramManager}constructor(e){this.gl=e,this._programCache={},this._getUniforms={},this._registeredModules={},this._hookFunctions=[],this._defaultModules=[],this._hashes={},this._hashCounter=0,this.stateHash=0,this._useCounts={}}addDefaultModule(e){this._defaultModules.find(n=>n.name===e.name)||this._defaultModules.push(e),this.stateHash++}removeDefaultModule(e){const n=typeof e=="string"?e:e.name;this._defaultModules=this._defaultModules.filter(r=>r.name!==n),this.stateHash++}addShaderHook(e,n){n&&(e=Object.assign(n,{hook:e})),this._hookFunctions.push(e),this.stateHash++}get(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{vs:n="",fs:r="",defines:i={},inject:s={},varyings:o=[],bufferMode:a=35981,transpileToGLSL100:l=!1}=e,c=this._getModuleList(e.modules),u=this._getHash(n),f=this._getHash(r),d=c.map(y=>this._getHash(y.name)).sort(),h=o.map(y=>this._getHash(y)),g=Object.keys(i).sort(),A=Object.keys(s).sort(),E=[],p=[];for(const y of g)E.push(this._getHash(y)),E.push(this._getHash(i[y]));for(const y of A)p.push(this._getHash(y)),p.push(this._getHash(s[y]));const m="".concat(u,"/").concat(f,"D").concat(E.join("/"),"M").concat(d.join("/"),"I").concat(p.join("/"),"V").concat(h.join("/"),"H").concat(this.stateHash,"B").concat(a).concat(l?"T":"");if(!this._programCache[m]){const y=PF(this.gl,{vs:n,fs:r,modules:c,inject:s,defines:i,hookFunctions:this._hookFunctions,transpileToGLSL100:l});this._programCache[m]=new tT(this.gl,{hash:m,vs:y.vs,fs:y.fs,varyings:o,bufferMode:a}),this._getUniforms[m]=y.getUniforms||(_=>{}),this._useCounts[m]=0}return this._useCounts[m]++,this._programCache[m]}getUniforms(e){return this._getUniforms[e.hash]||null}release(e){const n=e.hash;this._useCounts[n]--,this._useCounts[n]===0&&(this._programCache[n].delete(),delete this._programCache[n],delete this._getUniforms[n],delete this._useCounts[n])}_getHash(e){return this._hashes[e]===void 0&&(this._hashes[e]=this._hashCounter++),this._hashes[e]}_getModuleList(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];const n=new Array(this._defaultModules.length+e.length),r={};let i=0;for(let s=0,o=this._defaultModules.length;s<o;++s){const a=this._defaultModules[s],l=a.name;n[i++]=a,r[l]=!0}for(let s=0,o=e.length;s<o;++s){const a=e[s],l=a.name;r[l]||(n[i++]=a,r[l]=!0)}return n.length=i,n}}const bU={POSITION:"positions",NORMAL:"normals",COLOR_0:"colors",TEXCOORD_0:"texCoords",TEXCOORD_1:"texCoords1",TEXCOORD_2:"texCoords2"};function TU(t,e,n){const r={};let i=e.indices;for(const s in e.attributes){const o=e.attributes[s],a=BU(s,n);if(s==="indices")i=o;else if(o.constant)r[a]=o.value;else{const l=o.value,c={...o};delete c.value,r[a]=[new Ve(t,l),c],RU(s,c)}}if(i){const s=i.value||i;J(s instanceof Uint16Array||s instanceof Uint32Array,'attribute array for "indices" must be of integer type');const o={size:1,isIndexed:i.isIndexed===void 0?!0:i.isIndexed};r.indices=[new Ve(t,{data:s,target:34963}),o]}return r}function BU(t,e){const{attributeMap:n=bU}=e||{};return n&&n[t]||t}function RU(t,e){let n;switch(t){case"texCoords":case"texCoord1":case"texCoord2":case"texCoord3":n="uvs";break;case"vertices":case"positions":case"normals":case"pickingColors":n="vectors";break}switch(n){case"vectors":e.size=e.size||3;break;case"uvs":e.size=e.size||2;break}J(Number.isFinite(e.size),"attribute ".concat(t," needs size"))}const Uo=2,PU=1e4,LU="Model needs drawMode and vertexCount",Xx=()=>{},MU={};class Jn{constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{id:r=ps("model")}=n;J(Jh(e)),this.id=r,this.gl=e,this.id=n.id||ps("Model"),this.lastLogTime=0,this.animated=!1,this.initialize(n)}initialize(e){this.props={},this.programManager=e.programManager||wo.getDefaultProgramManager(this.gl),this._programManagerState=-1,this._managedProgram=!1;const{program:n=null,vs:r,fs:i,modules:s,defines:o,inject:a,varyings:l,bufferMode:c,transpileToGLSL100:u}=e;this.programProps={program:n,vs:r,fs:i,modules:s,defines:o,inject:a,varyings:l,bufferMode:c,transpileToGLSL100:u},this.program=null,this.vertexArray=null,this._programDirty=!0,this.userData={},this.needsRedraw=!0,this._attributes={},this.attributes={},this.uniforms={},this.pickable=!0,this._checkProgram(),this.setUniforms(Object.assign({},this.getModuleUniforms(e.moduleSettings))),this.drawMode=e.drawMode!==void 0?e.drawMode:4,this.vertexCount=e.vertexCount||0,this.geometryBuffers={},this.isInstanced=e.isInstanced||e.instanced||e.instanceCount>0,this._setModelProps(e),this.geometry={},J(this.drawMode!==void 0&&Number.isFinite(this.vertexCount),LU)}setProps(e){this._setModelProps(e)}delete(){for(const e in this._attributes)this._attributes[e]!==this.attributes[e]&&this._attributes[e].delete();this._managedProgram&&(this.programManager.release(this.program),this._managedProgram=!1),this.vertexArray.delete(),this._deleteGeometryBuffers()}getDrawMode(){return this.drawMode}getVertexCount(){return this.vertexCount}getInstanceCount(){return this.instanceCount}getAttributes(){return this.attributes}getProgram(){return this.program}setProgram(e){const{program:n,vs:r,fs:i,modules:s,defines:o,inject:a,varyings:l,bufferMode:c,transpileToGLSL100:u}=e;this.programProps={program:n,vs:r,fs:i,modules:s,defines:o,inject:a,varyings:l,bufferMode:c,transpileToGLSL100:u},this._programDirty=!0}getUniforms(){return this.uniforms}setDrawMode(e){return this.drawMode=e,this}setVertexCount(e){return J(Number.isFinite(e)),this.vertexCount=e,this}setInstanceCount(e){return J(Number.isFinite(e)),this.instanceCount=e,this}setGeometry(e){return this.drawMode=e.drawMode,this.vertexCount=e.getVertexCount(),this._deleteGeometryBuffers(),this.geometryBuffers=TU(this.gl,e),this.vertexArray.setAttributes(this.geometryBuffers),this}setAttributes(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(Ma(e))return this;const n={};for(const r in e){const i=e[r];n[r]=i.getValue?i.getValue():i}return this.vertexArray.setAttributes(n),this}setUniforms(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return Object.assign(this.uniforms,e),this}getModuleUniforms(e){this._checkProgram();const n=this.programManager.getUniforms(this.program);return n?n(e):{}}updateModuleSettings(e){const n=this.getModuleUniforms(e||{});return this.setUniforms(n)}clear(e){return yy(this.program.gl,e),this}draw(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this._checkProgram();const{moduleSettings:n=null,framebuffer:r,uniforms:i={},attributes:s={},transformFeedback:o=this.transformFeedback,parameters:a={},vertexArray:l=this.vertexArray}=e;this.setAttributes(s),this.updateModuleSettings(n),this.setUniforms(i);let c;le.priority>=Uo&&(c=this._logDrawCallStart(Uo));const u=this.vertexArray.getDrawParams(),{isIndexed:f=u.isIndexed,indexType:d=u.indexType,indexOffset:h=u.indexOffset,vertexArrayInstanced:g=u.isInstanced}=this.props;g&&!this.isInstanced&&le.warn("Found instanced attributes on non-instanced model",this.id)();const{isInstanced:A,instanceCount:E}=this,{onBeforeRender:p=Xx,onAfterRender:m=Xx}=this.props;p(),this.program.setUniforms(this.uniforms);const y=this.program.draw(Object.assign(MU,e,{logPriority:c,uniforms:null,framebuffer:r,parameters:a,drawMode:this.getDrawMode(),vertexCount:this.getVertexCount(),vertexArray:l,transformFeedback:o,isIndexed:f,indexType:d,isInstanced:A,instanceCount:E,offset:f?h:0}));return m(),le.priority>=Uo&&this._logDrawCallEnd(c,l,r),y}transform(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{discard:n=!0,feedbackBuffers:r,unbindModels:i=[]}=e;let{parameters:s}=e;r&&this._setFeedbackBuffers(r),n&&(s=Object.assign({},s,{35977:n})),i.forEach(o=>o.vertexArray.unbindBuffers());try{this.draw(Object.assign({},e,{parameters:s}))}finally{i.forEach(o=>o.vertexArray.bindBuffers())}return this}render(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return le.warn("Model.render() is deprecated. Use Model.setUniforms() and Model.draw()")(),this.setUniforms(e).draw()}_setModelProps(e){Object.assign(this.props,e),"uniforms"in e&&this.setUniforms(e.uniforms),"pickable"in e&&(this.pickable=e.pickable),"instanceCount"in e&&(this.instanceCount=e.instanceCount),"geometry"in e&&this.setGeometry(e.geometry),"attributes"in e&&this.setAttributes(e.attributes),"_feedbackBuffers"in e&&this._setFeedbackBuffers(e._feedbackBuffers)}_checkProgram(){if(!(this._programDirty||this.programManager.stateHash!==this._programManagerState))return;let{program:n}=this.programProps;if(n)this._managedProgram=!1;else{const{vs:r,fs:i,modules:s,inject:o,defines:a,varyings:l,bufferMode:c,transpileToGLSL100:u}=this.programProps;n=this.programManager.get({vs:r,fs:i,modules:s,inject:o,defines:a,varyings:l,bufferMode:c,transpileToGLSL100:u}),this.program&&this._managedProgram&&this.programManager.release(this.program),this._programManagerState=this.programManager.stateHash,this._managedProgram=!0}J(n instanceof tT,"Model needs a program"),this._programDirty=!1,n!==this.program&&(this.program=n,this.vertexArray?this.vertexArray.setProps({program:this.program,attributes:this.vertexArray.attributes}):this.vertexArray=new WQ(this.gl,{program:this.program}),this.setUniforms(Object.assign({},this.getModuleUniforms())))}_deleteGeometryBuffers(){for(const e in this.geometryBuffers){const n=this.geometryBuffers[e][0]||this.geometryBuffers[e];n instanceof Ve&&n.delete()}}_setAnimationProps(e){this.animated&&J(e,"Model.draw(): animated uniforms but no animationProps")}_setFeedbackBuffers(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(Ma(e))return this;const{gl:n}=this.program;return this.transformFeedback=this.transformFeedback||new nT(n,{program:this.program}),this.transformFeedback.setBuffers(e),this}_logDrawCallStart(e){const n=e>3?0:PU;if(!(Date.now()-this.lastLogTime<n))return this.lastLogTime=Date.now(),le.group(Uo,">>> DRAWING MODEL ".concat(this.id),{collapsed:le.level<=2})(),e}_logDrawCallEnd(e,n,r,i){if(e===void 0)return;const s=KQ({vertexArray:n,header:"".concat(this.id," attributes"),attributes:this._attributes}),{table:o,unusedTable:a,unusedCount:l}=Lx({header:"".concat(this.id," uniforms"),program:this.program,uniforms:Object.assign({},this.program.uniforms,r)}),{table:c,count:u}=Lx({header:"".concat(this.id," uniforms"),program:this.program,uniforms:Object.assign({},this.program.uniforms,r),undefinedOnly:!0});u>0&&le.log("MISSING UNIFORMS",Object.keys(c))(),l>0&&le.log("UNUSED UNIFORMS",Object.keys(a))();const f=XQ(this.vertexArray.configuration);le.table(e,s)(),le.table(e,o)(),le.table(e+1,f)(),i&&i.log({logLevel:Uo,message:"Rendered to ".concat(i.id)}),le.groupEnd(Uo)()}}class NU{constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.gl=e,this.currentIndex=0,this.feedbackMap={},this.varyings=null,this.bindings=[],this.resources={},this._initialize(n),Object.seal(this)}setupResources(e){for(const n of this.bindings)this._setupTransformFeedback(n,e)}updateModelProps(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{varyings:n}=this;return n.length>0&&(e=Object.assign({},e,{varyings:n})),e}getDrawOptions(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const n=this.bindings[this.currentIndex],{sourceBuffers:r,transformFeedback:i}=n;return{attributes:Object.assign({},r,e.attributes),transformFeedback:i}}swap(){return this.feedbackMap?(this.currentIndex=this._getNextIndex(),!0):!1}update(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this._setupBuffers(e)}getBuffer(e){const{feedbackBuffers:n}=this.bindings[this.currentIndex],r=e?n[e]:null;return r?r instanceof Ve?r:r.buffer:null}getData(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{varyingName:n}=e,r=this.getBuffer(n);return r?r.getData():null}delete(){for(const e in this.resources)this.resources[e].delete()}_initialize(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this._setupBuffers(e),this.varyings=e.varyings||Object.keys(this.bindings[this.currentIndex].feedbackBuffers),this.varyings.length>0&&J(Te(this.gl))}_getFeedbackBuffers(e){const{sourceBuffers:n={}}=e,r={};if(this.bindings[this.currentIndex]&&Object.assign(r,this.bindings[this.currentIndex].feedbackBuffers),this.feedbackMap)for(const i in this.feedbackMap){const s=this.feedbackMap[i];i in n&&(r[s]=i)}Object.assign(r,e.feedbackBuffers);for(const i in r){const s=r[i];if(typeof s=="string"){const o=n[s],{byteLength:a,usage:l,accessor:c}=o;r[i]=this._createNewBuffer(i,{byteLength:a,usage:l,accessor:c})}}return r}_setupBuffers(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{sourceBuffers:n=null}=e;Object.assign(this.feedbackMap,e.feedbackMap);const r=this._getFeedbackBuffers(e);this._updateBindings({sourceBuffers:n,feedbackBuffers:r})}_setupTransformFeedback(e,n){let{model:r}=n;const{program:i}=r;e.transformFeedback=new nT(this.gl,{program:i,buffers:e.feedbackBuffers})}_updateBindings(e){if(this.bindings[this.currentIndex]=this._updateBinding(this.bindings[this.currentIndex],e),this.feedbackMap){const{sourceBuffers:n,feedbackBuffers:r}=this._swapBuffers(this.bindings[this.currentIndex]),i=this._getNextIndex();this.bindings[i]=this._updateBinding(this.bindings[i],{sourceBuffers:n,feedbackBuffers:r})}}_updateBinding(e,n){return e?(Object.assign(e.sourceBuffers,n.sourceBuffers),Object.assign(e.feedbackBuffers,n.feedbackBuffers),e.transformFeedback&&e.transformFeedback.setBuffers(e.feedbackBuffers),e):{sourceBuffers:Object.assign({},n.sourceBuffers),feedbackBuffers:Object.assign({},n.feedbackBuffers)}}_swapBuffers(e){if(!this.feedbackMap)return null;const n=Object.assign({},e.sourceBuffers),r=Object.assign({},e.feedbackBuffers);for(const i in this.feedbackMap){const s=this.feedbackMap[i];n[i]=e.feedbackBuffers[s],r[s]=e.sourceBuffers[i],J(r[s]instanceof Ve)}return{sourceBuffers:n,feedbackBuffers:r}}_createNewBuffer(e,n){const r=new Ve(this.gl,n);return this.resources[e]&&this.resources[e].delete(),this.resources[e]=r,r}_getNextIndex(){return(this.currentIndex+1)%2}}const OU="transform_uSampler_",Hd="transform_uSize_",Zx="transform_position";function DU(t){let{vs:e,sourceTextureMap:n,targetTextureVarying:r,targetTexture:i}=t,o=Object.keys(n).length,a=null;const l={};let c=e,u={};if(o>0||r){const f=c.split(`
`),d=f.slice();if(f.forEach((h,g,A)=>{if(o>0){const E=GU(h,n);if(E){const{updatedLine:p,inject:m}=E;d[g]=p,u=j0([u,m]),Object.assign(l,E.samplerTextureMap),o--}}r&&!a&&(a=UU(h,r))}),r){J(i);const h="".concat(Hd).concat(r),g="uniform vec2 ".concat(h,`;
`),A="     vec2 ".concat(Zx," = transform_getPos(").concat(h,`);
     gl_Position = vec4(`).concat(Zx,`, 0, 1.);
`);u=j0([u,{"vs:#decl":g,"vs:#main-start":A}])}c=d.join(`
`)}return{vs:c,targetTextureType:a,inject:u,samplerTextureMap:l}}function kU(t){let{sourceTextureMap:e,targetTextureVarying:n,targetTexture:r}=t;const i={};let s,o;n&&({width:s,height:o}=r,i["".concat(Hd).concat(n)]=[s,o]);for(const a in e)({width:s,height:o}=e[a]),i["".concat(Hd).concat(a)]=[s,o];return i}function QU(t){return cT(t,["attribute","in"])}function FU(t){const e="".concat(OU).concat(t),n="".concat(Hd).concat(t),r="  uniform sampler2D ".concat(e,`;
  uniform vec2 `).concat(n,";");return{samplerName:e,sizeName:n,uniformDeclerations:r}}function UU(t,e){const n=cT(t,["varying","out"]);return n&&n.name===e?n.type:null}function GU(t,e){const n={},r=QU(t);if(!r)return null;const{type:i,name:s}=r;if(s&&e[s]){const o="// ".concat(t," => Replaced by Transform with a sampler"),{samplerName:a,sizeName:l,uniformDeclerations:c}=FU(s),u=UF(i),f="  ".concat(i," ").concat(s," = transform_getInput(").concat(a,", ").concat(l,").").concat(u,`;
`);return n[a]=s,{updatedLine:o,inject:{"vs:#decl":c,"vs:#main-start":f},samplerTextureMap:n}}return null}const zU={10241:9728,10240:9728,10242:33071,10243:33071},VU="transform_output";class jU{constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.gl=e,this.id=this.currentIndex=0,this._swapTexture=null,this.targetTextureVarying=null,this.targetTextureType=null,this.samplerTextureMap=null,this.bindings=[],this.resources={},this._initialize(n),Object.seal(this)}updateModelProps(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const n=this._processVertexShader(e);return Object.assign({},e,n)}getDrawOptions(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{sourceBuffers:n,sourceTextures:r,framebuffer:i,targetTexture:s}=this.bindings[this.currentIndex],o=Object.assign({},n,e.attributes),a=Object.assign({},e.uniforms),l=Object.assign({},e.parameters);let c=e.discard;if(this.hasSourceTextures||this.hasTargetTexture){o.transform_elementID=this.elementIDBuffer;for(const f in this.samplerTextureMap){const d=this.samplerTextureMap[f];a[f]=r[d]}this._setSourceTextureParameters();const u=kU({sourceTextureMap:r,targetTextureVarying:this.targetTextureVarying,targetTexture:s});Object.assign(a,u)}return this.hasTargetTexture&&(c=!1,l.viewport=[0,0,i.width,i.height]),{attributes:o,framebuffer:i,uniforms:a,discard:c,parameters:l}}swap(){return this._swapTexture?(this.currentIndex=this._getNextIndex(),!0):!1}update(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this._setupTextures(e)}getTargetTexture(){const{targetTexture:e}=this.bindings[this.currentIndex];return e}getData(){let{packed:e=!1}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{framebuffer:n}=this.bindings[this.currentIndex],r=tg(n);if(!e)return r;const i=r.constructor,s=GF(this.targetTextureType),o=new i(r.length*s/4);let a=0;for(let l=0;l<r.length;l+=4)for(let c=0;c<s;c++)o[a++]=r[l+c];return o}getFramebuffer(){return this.bindings[this.currentIndex].framebuffer}delete(){this.ownTexture&&this.ownTexture.delete(),this.elementIDBuffer&&this.elementIDBuffer.delete()}_initialize(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{_targetTextureVarying:n,_swapTexture:r}=e;this._swapTexture=r,this.targetTextureVarying=n,this.hasTargetTexture=n,this._setupTextures(e)}_createTargetTexture(e){const{sourceTextures:n,textureOrReference:r}=e;if(r instanceof _n)return r;const i=n[r];return i?(this._targetRefTexName=r,this._createNewTexture(i)):null}_setupTextures(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{sourceBuffers:n,_sourceTextures:r={},_targetTexture:i}=e,s=this._createTargetTexture({sourceTextures:r,textureOrReference:i});this.hasSourceTextures=this.hasSourceTextures||r&&Object.keys(r).length>0,this._updateBindings({sourceBuffers:n,sourceTextures:r,targetTexture:s}),"elementCount"in e&&this._updateElementIDBuffer(e.elementCount)}_updateElementIDBuffer(e){if(typeof e!="number"||this.elementCount>=e)return;const n=new Float32Array(e);n.forEach((r,i,s)=>{s[i]=i}),this.elementIDBuffer?this.elementIDBuffer.setData({data:n}):this.elementIDBuffer=new Ve(this.gl,{data:n,accessor:{size:1}}),this.elementCount=e}_updateBindings(e){if(this.bindings[this.currentIndex]=this._updateBinding(this.bindings[this.currentIndex],e),this._swapTexture){const{sourceTextures:n,targetTexture:r}=this._swapTextures(this.bindings[this.currentIndex]),i=this._getNextIndex();this.bindings[i]=this._updateBinding(this.bindings[i],{sourceTextures:n,targetTexture:r})}}_updateBinding(e,n){const{sourceBuffers:r,sourceTextures:i,targetTexture:s}=n;if(e||(e={sourceBuffers:{},sourceTextures:{},targetTexture:null}),Object.assign(e.sourceTextures,i),Object.assign(e.sourceBuffers,r),s){e.targetTexture=s;const{width:o,height:a}=s,{framebuffer:l}=e;l?(l.update({attachments:{36064:s},resizeAttachments:!1}),l.resize({width:o,height:a})):e.framebuffer=new bt(this.gl,{id:"transform-framebuffer",width:o,height:a,attachments:{36064:s}})}return e}_setSourceTextureParameters(){const e=this.currentIndex,{sourceTextures:n}=this.bindings[e];for(const r in n)n[r].setParameters(zU)}_swapTextures(e){if(!this._swapTexture)return null;const n=Object.assign({},e.sourceTextures);n[this._swapTexture]=e.targetTexture;const r=e.sourceTextures[this._swapTexture];return{sourceTextures:n,targetTexture:r}}_createNewTexture(e){const n=O6(e,{parameters:{10241:9728,10240:9728,10242:33071,10243:33071},pixelStore:{37440:!1}});return this.ownTexture&&this.ownTexture.delete(),this.ownTexture=n,n}_getNextIndex(){return(this.currentIndex+1)%2}_processVertexShader(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{sourceTextures:n,targetTexture:r}=this.bindings[this.currentIndex],{vs:i,uniforms:s,targetTextureType:o,inject:a,samplerTextureMap:l}=DU({vs:e.vs,sourceTextureMap:n,targetTextureVarying:this.targetTextureVarying,targetTexture:r}),c=j0([e.inject||{},a]);this.targetTextureType=o,this.samplerTextureMap=l;const u=e._fs||uT({version:Jb(i),input:this.targetTextureVarying,inputType:o,output:VU}),f=this.hasSourceTextures||this.targetTextureVarying?[SU].concat(e.modules||[]):e.modules;return{vs:i,fs:u,modules:f,uniforms:s,inject:c}}}class By{static isSupported(e){return Te(e)}constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.gl=e,this.model=null,this.elementCount=0,this.bufferTransform=null,this.textureTransform=null,this.elementIDBuffer=null,this._initialize(n),Object.seal(this)}delete(){const{model:e,bufferTransform:n,textureTransform:r}=this;e&&e.delete(),n&&n.delete(),r&&r.delete()}run(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{clearRenderTarget:n=!0}=e,r=this._updateDrawOptions(e);n&&r.framebuffer&&r.framebuffer.clear({color:!0}),this.model.transform(r)}swap(){let e=!1;const n=[this.bufferTransform,this.textureTransform].filter(Boolean);for(const r of n)e=e||r.swap();J(e,"Nothing to swap")}getBuffer(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;return this.bufferTransform&&this.bufferTransform.getBuffer(e)}getData(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const n=[this.bufferTransform,this.textureTransform].filter(Boolean);for(const r of n){const i=r.getData(e);if(i)return i}return null}getFramebuffer(){return this.textureTransform&&this.textureTransform.getFramebuffer()}update(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};"elementCount"in e&&this.model.setVertexCount(e.elementCount);const n=[this.bufferTransform,this.textureTransform].filter(Boolean);for(const r of n)r.update(e)}_initialize(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{gl:n}=this;this._buildResourceTransforms(n,e),e=this._updateModelProps(e),this.model=new Jn(n,Object.assign({},e,{fs:e.fs||uT({version:Jb(e.vs)}),id:e.id||"transform-model",drawMode:e.drawMode||0,vertexCount:e.elementCount})),this.bufferTransform&&this.bufferTransform.setupResources({model:this.model})}_updateModelProps(e){let n=Object.assign({},e);const r=[this.bufferTransform,this.textureTransform].filter(Boolean);for(const i of r)n=i.updateModelProps(n);return n}_buildResourceTransforms(e,n){HU(n)&&(this.bufferTransform=new NU(e,n)),WU(n)&&(this.textureTransform=new jU(e,n)),J(this.bufferTransform||this.textureTransform,"must provide source/feedback buffers or source/target textures")}_updateDrawOptions(e){let n=Object.assign({},e);const r=[this.bufferTransform,this.textureTransform].filter(Boolean);for(const i of r)n=Object.assign(n,i.getDrawOptions(n));return n}}function HU(t){return!!(!Ma(t.feedbackBuffers)||!Ma(t.feedbackMap)||t.varyings&&t.varyings.length>0)}function WU(t){return!!(!Ma(t._sourceTextures)||t._targetTexture||t._targetTextureVarying)}const Jx={POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6};class Wr{static get DRAW_MODE(){return Jx}constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{id:n=ps("geometry"),drawMode:r=Jx.TRIANGLES,attributes:i={},indices:s=null,vertexCount:o=null}=e;this.id=n,this.drawMode=r|0,this.attributes={},this.userData={},this._setAttributes(i,s),this.vertexCount=o||this._calculateVertexCount(this.attributes,this.indices)}get mode(){return this.drawMode}getVertexCount(){return this.vertexCount}getAttributes(){return this.indices?{indices:this.indices,...this.attributes}:this.attributes}_print(e){return"Geometry ".concat(this.id," attribute ").concat(e)}_setAttributes(e,n){n&&(this.indices=ArrayBuffer.isView(n)?{value:n,size:1}:n);for(const r in e){let i=e[r];i=ArrayBuffer.isView(i)?{value:i}:i,J(ArrayBuffer.isView(i.value),"".concat(this._print(r),": must be typed array or object with value as typed array")),(r==="POSITION"||r==="positions")&&!i.size&&(i.size=3),r==="indices"?(J(!this.indices),this.indices=i):this.attributes[r]=i}return this.indices&&this.indices.isIndexed!==void 0&&(this.indices=Object.assign({},this.indices),delete this.indices.isIndexed),this}_calculateVertexCount(e,n){if(n)return n.value.length;let r=1/0;for(const i in e){const s=e[i],{value:o,size:a,constant:l}=s;!l&&o&&a>=1&&(r=Math.min(r,o.length/a))}return J(Number.isFinite(r)),r}}let YU=1,$U=1;class RT{constructor(){this.time=0,this.channels=new Map,this.animations=new Map,this.playing=!1,this.lastEngineTime=-1}addChannel(e){const{delay:n=0,duration:r=Number.POSITIVE_INFINITY,rate:i=1,repeat:s=1}=e,o=YU++,a={time:0,delay:n,duration:r,rate:i,repeat:s};return this._setChannelTime(a,this.time),this.channels.set(o,a),o}removeChannel(e){this.channels.delete(e);for(const[n,r]of this.animations)r.channel===e&&this.detachAnimation(n)}isFinished(e){const n=this.channels.get(e);return n===void 0?!1:this.time>=n.delay+n.duration*n.repeat}getTime(e){if(e===void 0)return this.time;const n=this.channels.get(e);return n===void 0?-1:n.time}setTime(e){this.time=Math.max(0,e);const n=this.channels.values();for(const i of n)this._setChannelTime(i,this.time);const r=this.animations.values();for(const i of r){const{animation:s,channel:o}=i;s.setTime(this.getTime(o))}}play(){this.playing=!0}pause(){this.playing=!1,this.lastEngineTime=-1}reset(){this.setTime(0)}attachAnimation(e,n){const r=$U++;return this.animations.set(r,{animation:e,channel:n}),e.setTime(this.getTime(n)),r}detachAnimation(e){this.animations.delete(e)}update(e){this.playing&&(this.lastEngineTime===-1&&(this.lastEngineTime=e),this.setTime(this.time+(e-this.lastEngineTime)),this.lastEngineTime=e)}_setChannelTime(e,n){const r=n-e.delay,i=e.duration*e.repeat;r>=i?e.time=e.duration*e.rate:(e.time=Math.max(0,r)%e.duration,e.time*=e.rate)}}const KU=[255,255,255],qU=1;let XU=0;class ZU{constructor(e={}){v(this,"id",void 0),v(this,"color",void 0),v(this,"intensity",void 0),v(this,"type","ambient");const{color:n=KU}=e,{intensity:r=qU}=e;this.id=e.id||"ambient-".concat(XU++),this.color=n,this.intensity=r}}const JU=[255,255,255],e9=1,t9=[0,0,-1];let n9=0;class eC{constructor(e={}){v(this,"id",void 0),v(this,"color",void 0),v(this,"intensity",void 0),v(this,"type","directional"),v(this,"direction",void 0),v(this,"shadow",void 0);const{color:n=JU}=e,{intensity:r=e9}=e,{direction:i=t9}=e,{_shadow:s=!1}=e;this.id=e.id||"directional-".concat(n9++),this.color=n,this.intensity=r,this.type="directional",this.direction=new re(i).normalize().toArray(),this.shadow=s}getProjectedLight(e){return this}}class r9{constructor(e,n={id:"pass"}){v(this,"id",void 0),v(this,"gl",void 0),v(this,"props",void 0);const{id:r}=n;this.id=r,this.gl=e,this.props={...n}}setProps(e){Object.assign(this.props,e)}render(e){}cleanup(){}}class Ry extends r9{constructor(...e){super(...e),v(this,"_lastRenderIndex",-1)}render(e){const n=this.gl;return yi(n,{framebuffer:e.target}),this._drawLayers(e)}_drawLayers(e){const{target:n,moduleParameters:r,viewports:i,views:s,onViewportActive:o,clearStack:a=!0,clearCanvas:l=!0}=e;e.pass=e.pass||"unknown";const c=this.gl;l&&s9(c,n),a&&(this._lastRenderIndex=-1);const u=[];for(const f of i){const d=s&&s[f.id];o==null||o(f);const h=this._getDrawLayerParams(f,e),g=f.subViewports||[f];for(const A of g){const E=this._drawLayersInViewport(c,{target:n,moduleParameters:r,viewport:A,view:d,pass:e.pass,layers:e.layers},h);u.push(E)}}return u}_getDrawLayerParams(e,{layers:n,pass:r,isPicking:i=!1,layerFilter:s,cullRect:o,effects:a,moduleParameters:l},c=!1){const u=[],f=PT(this._lastRenderIndex+1),d={layer:n[0],viewport:e,isPicking:i,renderPass:r,cullRect:o},h={};for(let g=0;g<n.length;g++){const A=n[g],E=this._shouldDrawLayer(A,d,s,h),p={shouldDrawLayer:E};E&&!c&&(p.layerRenderIndex=f(A,E),p.moduleParameters=this._getModuleParameters(A,a,r,l),p.layerParameters=this.getLayerParameters(A,g,e)),u[g]=p}return u}_drawLayersInViewport(e,{layers:n,moduleParameters:r,pass:i,target:s,viewport:o,view:a},l){const c=i9(e,{moduleParameters:r,target:s,viewport:o});if(a&&a.props.clear){const f=a.props.clear===!0?{color:!0,depth:!0}:a.props.clear;_r(e,{scissorTest:!0,scissor:c},()=>yy(e,f))}const u={totalCount:n.length,visibleCount:0,compositeCount:0,pickableCount:0};yi(e,{viewport:c});for(let f=0;f<n.length;f++){const d=n[f],{shouldDrawLayer:h,layerRenderIndex:g,moduleParameters:A,layerParameters:E}=l[f];if(h&&d.props.pickable&&u.pickableCount++,d.isComposite)u.compositeCount++;else if(h){u.visibleCount++,this._lastRenderIndex=Math.max(this._lastRenderIndex,g),A.viewport=o;try{d._drawLayer({moduleParameters:A,uniforms:{layerIndex:g},parameters:E})}catch(p){d.raiseError(p,"drawing ".concat(d," to ").concat(i))}}}return u}shouldDrawLayer(e){return!0}getModuleParameters(e,n){return null}getLayerParameters(e,n,r){return e.props.parameters}_shouldDrawLayer(e,n,r,i){if(!(e.props.visible&&this.shouldDrawLayer(e)))return!1;n.layer=e;let o=e.parent;for(;o;){if(!o.props.visible||!o.filterSubLayer(n))return!1;n.layer=o,o=o.parent}if(r){const a=n.layer.id;if(a in i||(i[a]=r(n)),!i[a])return!1}return e.activateViewport(n.viewport),!0}_getModuleParameters(e,n,r,i){var s;const o=Object.assign(Object.create(((s=e.internalState)===null||s===void 0?void 0:s.propsInTransition)||e.props),{autoWrapLongitude:e.wrapLongitude,viewport:e.context.viewport,mousePosition:e.context.mousePosition,pickingActive:0,devicePixelRatio:La(this.gl)});if(n)for(const l of n){var a;Object.assign(o,(a=l.getModuleParameters)===null||a===void 0?void 0:a.call(l,e))}return Object.assign(o,this.getModuleParameters(e,n),i)}}function PT(t=0,e={}){const n={},r=(i,s)=>{const o=i.props._offset,a=i.id,l=i.parent&&i.parent.id;let c;if(l&&!(l in e)&&r(i.parent,!1),l in n){const u=n[l]=n[l]||PT(e[l],e);c=u(i,s),n[a]=u}else Number.isFinite(o)?(c=o+(e[l]||0),n[a]=null):c=t;return s&&c>=t&&(t=c+1),e[a]=c,c};return r}function i9(t,{moduleParameters:e,target:n,viewport:r}){const i=n&&n.id!=="default-framebuffer",s=e&&e.devicePixelRatio||La(t),o=i?n.height:t.drawingBufferHeight,a=r;return[a.x*s,o-(a.y+a.height)*s,a.width*s,a.height*s]}function s9(t,e){const n=e?e.width:t.drawingBufferWidth,r=e?e.height:t.drawingBufferHeight;yi(t,{viewport:[0,0,n,r]}),t.clear(16640)}class o9 extends Ry{constructor(e,n){super(e,n),v(this,"shadowMap",void 0),v(this,"depthBuffer",void 0),v(this,"fbo",void 0),this.shadowMap=new _n(e,{width:1,height:1,parameters:{10241:9729,10240:9729,10242:33071,10243:33071}}),this.depthBuffer=new oa(e,{format:33189,width:1,height:1}),this.fbo=new bt(e,{id:"shadowmap",width:1,height:1,attachments:{36064:this.shadowMap,36096:this.depthBuffer}})}render(e){const n=this.fbo;_r(this.gl,{depthRange:[0,1],depthTest:!0,blend:!1,clearColor:[1,1,1,1]},()=>{const r=e.viewports[0],i=La(this.gl),s=r.width*i,o=r.height*i;(s!==n.width||o!==n.height)&&n.resize({width:s,height:o}),super.render({...e,target:n,pass:"shadow"})})}shouldDrawLayer(e){return e.props.shadowEnabled!==!1}getModuleParameters(){return{drawToShadowMap:!0}}delete(){this.fbo&&(this.fbo.delete(),this.fbo=null),this.shadowMap&&(this.shadowMap.delete(),this.shadowMap=null),this.depthBuffer&&(this.depthBuffer.delete(),this.depthBuffer=null)}}const LT="#define SMOOTH_EDGE_RADIUS 0.5",a9=`
`.concat(LT,`

struct VertexGeometry {
  vec4 position;
  vec3 worldPosition;
  vec3 worldPositionAlt;
  vec3 normal;
  vec2 uv;
  vec3 pickingColor;
} geometry = VertexGeometry(
  vec4(0.0, 0.0, 1.0, 0.0),
  vec3(0.0),
  vec3(0.0),
  vec3(0.0),
  vec2(0.0),
  vec3(0.0)
);
`),l9=`
`.concat(LT,`

struct FragmentGeometry {
  vec2 uv;
} geometry;

float smoothedge(float edge, float x) {
  return smoothstep(edge - SMOOTH_EDGE_RADIUS, edge + SMOOTH_EDGE_RADIUS, x);
}
`),c9={name:"geometry",vs:a9,fs:l9},u9=Object.keys(me).map(t=>"const int COORDINATE_SYSTEM_".concat(t," = ").concat(me[t],";")).join(""),f9=Object.keys(gr).map(t=>"const int PROJECTION_MODE_".concat(t," = ").concat(gr[t],";")).join(""),d9=Object.keys(As).map(t=>"const int UNIT_".concat(t.toUpperCase()," = ").concat(As[t],";")).join(""),h9="".concat(u9,`
`).concat(f9,`
`).concat(d9,`

uniform int project_uCoordinateSystem;
uniform int project_uProjectionMode;
uniform float project_uScale;
uniform bool project_uWrapLongitude;
uniform vec3 project_uCommonUnitsPerMeter;
uniform vec3 project_uCommonUnitsPerWorldUnit;
uniform vec3 project_uCommonUnitsPerWorldUnit2;
uniform vec4 project_uCenter;
uniform mat4 project_uModelMatrix;
uniform mat4 project_uViewProjectionMatrix;
uniform vec2 project_uViewportSize;
uniform float project_uDevicePixelRatio;
uniform float project_uFocalDistance;
uniform vec3 project_uCameraPosition;
uniform vec3 project_uCoordinateOrigin;
uniform vec3 project_uCommonOrigin;
uniform bool project_uPseudoMeters;

const float TILE_SIZE = 512.0;
const float PI = 3.1415926536;
const float WORLD_SCALE = TILE_SIZE / (PI * 2.0);
const vec3 ZERO_64_LOW = vec3(0.0);
const float EARTH_RADIUS = 6370972.0;
const float GLOBE_RADIUS = 256.0;
float project_size_at_latitude(float lat) {
  float y = clamp(lat, -89.9, 89.9);
  return 1.0 / cos(radians(y));
}

float project_size() {
  if (project_uProjectionMode == PROJECTION_MODE_WEB_MERCATOR &&
    project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT &&
    project_uPseudoMeters == false) {
    
    if (geometry.position.w == 0.0) {
      return project_size_at_latitude(geometry.worldPosition.y);
    }
  
    float y = geometry.position.y / TILE_SIZE * 2.0 - 1.0;
    float y2 = y * y;
    float y4 = y2 * y2;
    float y6 = y4 * y2;
    return 1.0 + 4.9348 * y2 + 4.0587 * y4 + 1.5642 * y6;
  }
  return 1.0;
}

float project_size_at_latitude(float meters, float lat) {
  return meters * project_uCommonUnitsPerMeter.z * project_size_at_latitude(lat);
}
float project_size(float meters) {
  return meters * project_uCommonUnitsPerMeter.z * project_size();
}

vec2 project_size(vec2 meters) {
  return meters * project_uCommonUnitsPerMeter.xy * project_size();
}

vec3 project_size(vec3 meters) {
  return meters * project_uCommonUnitsPerMeter * project_size();
}

vec4 project_size(vec4 meters) {
  return vec4(meters.xyz * project_uCommonUnitsPerMeter, meters.w);
}
mat3 project_get_orientation_matrix(vec3 up) {
  vec3 uz = normalize(up);
  vec3 ux = abs(uz.z) == 1.0 ? vec3(1.0, 0.0, 0.0) : normalize(vec3(uz.y, -uz.x, 0));
  vec3 uy = cross(uz, ux);
  return mat3(ux, uy, uz);
}

bool project_needs_rotation(vec3 commonPosition, out mat3 transform) {
  if (project_uProjectionMode == PROJECTION_MODE_GLOBE) {
    transform = project_get_orientation_matrix(commonPosition);
    return true;
  }
  return false;
}
vec3 project_normal(vec3 vector) {
  vec4 normal_modelspace = project_uModelMatrix * vec4(vector, 0.0);
  vec3 n = normalize(normal_modelspace.xyz * project_uCommonUnitsPerMeter);
  mat3 rotation;
  if (project_needs_rotation(geometry.position.xyz, rotation)) {
    n = rotation * n;
  }
  return n;
}

vec4 project_offset_(vec4 offset) {
  float dy = offset.y;
  vec3 commonUnitsPerWorldUnit = project_uCommonUnitsPerWorldUnit + project_uCommonUnitsPerWorldUnit2 * dy;
  return vec4(offset.xyz * commonUnitsPerWorldUnit, offset.w);
}
vec2 project_mercator_(vec2 lnglat) {
  float x = lnglat.x;
  if (project_uWrapLongitude) {
    x = mod(x + 180., 360.0) - 180.;
  }
  float y = clamp(lnglat.y, -89.9, 89.9);
  return vec2(
    radians(x) + PI,
    PI + log(tan_fp32(PI * 0.25 + radians(y) * 0.5))
  ) * WORLD_SCALE;
}

vec3 project_globe_(vec3 lnglatz) {
  float lambda = radians(lnglatz.x);
  float phi = radians(lnglatz.y);
  float cosPhi = cos(phi);
  float D = (lnglatz.z / EARTH_RADIUS + 1.0) * GLOBE_RADIUS;

  return vec3(
    sin(lambda) * cosPhi,
    -cos(lambda) * cosPhi,
    sin(phi)
  ) * D;
}
vec4 project_position(vec4 position, vec3 position64Low) {
  vec4 position_world = project_uModelMatrix * position;
  if (project_uProjectionMode == PROJECTION_MODE_WEB_MERCATOR) {
    if (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT) {
      return vec4(
        project_mercator_(position_world.xy),
        project_size_at_latitude(position_world.z, position_world.y),
        position_world.w
      );
    }
    if (project_uCoordinateSystem == COORDINATE_SYSTEM_CARTESIAN) {
      position_world.xyz += project_uCoordinateOrigin;
    }
  }
  if (project_uProjectionMode == PROJECTION_MODE_GLOBE) {
    if (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT) {
      return vec4(
        project_globe_(position_world.xyz),
        position_world.w
      );
    }
  }
  if (project_uProjectionMode == PROJECTION_MODE_WEB_MERCATOR_AUTO_OFFSET) {
    if (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT) {
      if (abs(position_world.y - project_uCoordinateOrigin.y) > 0.25) {
        return vec4(
          project_mercator_(position_world.xy) - project_uCommonOrigin.xy,
          project_size(position_world.z),
          position_world.w
        );
      }
    }
  }
  if (project_uProjectionMode == PROJECTION_MODE_IDENTITY ||
    (project_uProjectionMode == PROJECTION_MODE_WEB_MERCATOR_AUTO_OFFSET &&
    (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT ||
     project_uCoordinateSystem == COORDINATE_SYSTEM_CARTESIAN))) {
    position_world.xyz -= project_uCoordinateOrigin;
  }
  return project_offset_(position_world + project_uModelMatrix * vec4(position64Low, 0.0));
}

vec4 project_position(vec4 position) {
  return project_position(position, ZERO_64_LOW);
}

vec3 project_position(vec3 position, vec3 position64Low) {
  vec4 projected_position = project_position(vec4(position, 1.0), position64Low);
  return projected_position.xyz;
}

vec3 project_position(vec3 position) {
  vec4 projected_position = project_position(vec4(position, 1.0), ZERO_64_LOW);
  return projected_position.xyz;
}

vec2 project_position(vec2 position) {
  vec4 projected_position = project_position(vec4(position, 0.0, 1.0), ZERO_64_LOW);
  return projected_position.xy;
}

vec4 project_common_position_to_clipspace(vec4 position, mat4 viewProjectionMatrix, vec4 center) {
  return viewProjectionMatrix * position + center;
}
vec4 project_common_position_to_clipspace(vec4 position) {
  return project_common_position_to_clipspace(position, project_uViewProjectionMatrix, project_uCenter);
}
vec2 project_pixel_size_to_clipspace(vec2 pixels) {
  vec2 offset = pixels / project_uViewportSize * project_uDevicePixelRatio * 2.0;
  return offset * project_uFocalDistance;
}

float project_size_to_pixel(float meters) {
  return project_size(meters) * project_uScale;
}
float project_size_to_pixel(float size, int unit) {
  if (unit == UNIT_METERS) return project_size_to_pixel(size);
  if (unit == UNIT_COMMON) return size * project_uScale;
  return size;
}
float project_pixel_size(float pixels) {
  return pixels / project_uScale;
}
vec2 project_pixel_size(vec2 pixels) {
  return pixels / project_uScale;
}
`);function g9(t,e){if(t===e)return!0;if(Array.isArray(t)){const n=t.length;if(!e||e.length!==n)return!1;for(let r=0;r<n;r++)if(t[r]!==e[r])return!1;return!0}return!1}function lu(t){let e={},n;return r=>{for(const i in r)if(!g9(r[i],e[i])){n=t(r),e=r;break}return n}}const tC=[0,0,0,0],A9=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0],MT=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],p9=[0,0,0],NT=[0,0,0],m9=lu(E9);function OT(t,e,n=NT){n.length<3&&(n=[n[0],n[1],0]);let r=n,i,s=!0;switch(e===me.LNGLAT_OFFSETS||e===me.METER_OFFSETS?i=n:i=t.isGeospatial?[Math.fround(t.longitude),Math.fround(t.latitude),0]:null,t.projectionMode){case gr.WEB_MERCATOR:(e===me.LNGLAT||e===me.CARTESIAN)&&(i=[0,0,0],s=!1);break;case gr.WEB_MERCATOR_AUTO_OFFSET:e===me.LNGLAT?r=i:e===me.CARTESIAN&&(r=[Math.fround(t.center[0]),Math.fround(t.center[1]),0],i=t.unprojectPosition(r),r[0]-=n[0],r[1]-=n[1],r[2]-=n[2]);break;case gr.IDENTITY:r=t.position.map(Math.fround),r[2]=r[2]||0;break;case gr.GLOBE:s=!1,i=null;break;default:s=!1}return{geospatialOrigin:i,shaderCoordinateOrigin:r,offsetMode:s}}function v9(t,e,n){const{viewMatrixUncentered:r,projectionMatrix:i}=t;let{viewMatrix:s,viewProjectionMatrix:o}=t,a=tC,l=tC,c=t.cameraPosition;const{geospatialOrigin:u,shaderCoordinateOrigin:f,offsetMode:d}=OT(t,e,n);return d&&(l=t.projectPosition(u||f),c=[c[0]-l[0],c[1]-l[1],c[2]-l[2]],l[3]=1,a=Wa([],l,o),s=r||s,o=to([],i,s),o=to([],o,A9)),{viewMatrix:s,viewProjectionMatrix:o,projectionCenter:a,originCommon:l,cameraPosCommon:c,shaderCoordinateOrigin:f,geospatialOrigin:u}}function y9({viewport:t,devicePixelRatio:e=1,modelMatrix:n=null,coordinateSystem:r=me.DEFAULT,coordinateOrigin:i=NT,autoWrapLongitude:s=!1}){r===me.DEFAULT&&(r=t.isGeospatial?me.LNGLAT:me.CARTESIAN);const o=m9({viewport:t,devicePixelRatio:e,coordinateSystem:r,coordinateOrigin:i});return o.project_uWrapLongitude=s,o.project_uModelMatrix=n||MT,o}function E9({viewport:t,devicePixelRatio:e,coordinateSystem:n,coordinateOrigin:r}){const{projectionCenter:i,viewProjectionMatrix:s,originCommon:o,cameraPosCommon:a,shaderCoordinateOrigin:l,geospatialOrigin:c}=v9(t,n,r),u=t.getDistanceScales(),f=[t.width*e,t.height*e],d=Wa([],[0,0,-t.focalDistance,1],t.projectionMatrix)[3]||1,h={project_uCoordinateSystem:n,project_uProjectionMode:t.projectionMode,project_uCoordinateOrigin:l,project_uCommonOrigin:o.slice(0,3),project_uCenter:i,project_uPseudoMeters:!!t._pseudoMeters,project_uViewportSize:f,project_uDevicePixelRatio:e,project_uFocalDistance:d,project_uCommonUnitsPerMeter:u.unitsPerMeter,project_uCommonUnitsPerWorldUnit:u.unitsPerMeter,project_uCommonUnitsPerWorldUnit2:p9,project_uScale:t.scale,project_uWrapLongitude:!1,project_uViewProjectionMatrix:s,project_uModelMatrix:MT,project_uCameraPosition:a};if(c){const g=t.getDistanceScales(c);switch(n){case me.METER_OFFSETS:h.project_uCommonUnitsPerWorldUnit=g.unitsPerMeter,h.project_uCommonUnitsPerWorldUnit2=g.unitsPerMeter2;break;case me.LNGLAT:case me.LNGLAT_OFFSETS:t._pseudoMeters||(h.project_uCommonUnitsPerMeter=g.unitsPerMeter),h.project_uCommonUnitsPerWorldUnit=g.unitsPerDegree,h.project_uCommonUnitsPerWorldUnit2=g.unitsPerDegree2;break;case me.CARTESIAN:h.project_uCommonUnitsPerWorldUnit=[1,1,g.unitsPerMeter[2]],h.project_uCommonUnitsPerWorldUnit2=[0,0,g.unitsPerMeter2[2]];break}}return h}const _9={};function x9(t=_9){return"viewport"in t?y9(t):{}}const Py={name:"project",dependencies:[jF,c9],vs:h9,getUniforms:x9};function C9(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function va(t,e){const n=Wa([],e,t);return Ty(n,n,1/n[3]),n}function nC(t,e){const n=t%e;return n<0?e+n:n}function q0(t,e,n){return t<e?e:t>n?n:t}function I9(t){return Math.log(t)*Math.LOG2E}const Ly=Math.log2||I9;function Ei(t,e){if(!t)throw new Error(e||"@math.gl/web-mercator: assertion failed.")}const Ar=Math.PI,DT=Ar/4,$n=Ar/180,X0=180/Ar,Oa=512,Wd=4003e4,df=85.051129,w9=1.5;function S9(t){return Ly(t)}function ms(t){const[e,n]=t;Ei(Number.isFinite(e)),Ei(Number.isFinite(n)&&n>=-90&&n<=90,"invalid latitude");const r=e*$n,i=n*$n,s=Oa*(r+Ar)/(2*Ar),o=Oa*(Ar+Math.log(Math.tan(DT+i*.5)))/(2*Ar);return[s,o]}function Da(t){const[e,n]=t,r=e/Oa*(2*Ar)-Ar,i=2*(Math.atan(Math.exp(n/Oa*(2*Ar)-Ar))-DT);return[r*X0,i*X0]}function b9(t){const{latitude:e}=t;Ei(Number.isFinite(e));const n=Math.cos(e*$n);return S9(Wd*n)-9}function KA(t){const e=Math.cos(t*$n);return Oa/Wd/e}function Z0(t){const{latitude:e,longitude:n,highPrecision:r=!1}=t;Ei(Number.isFinite(e)&&Number.isFinite(n));const i=Oa,s=Math.cos(e*$n),o=i/360,a=o/s,l=i/Wd/s,c={unitsPerMeter:[l,l,l],metersPerUnit:[1/l,1/l,1/l],unitsPerDegree:[o,a,l],degreesPerUnit:[1/o,1/a,1/l]};if(r){const u=$n*Math.tan(e*$n)/s,f=o*u/2,d=i/Wd*u,h=d/a*l;c.unitsPerDegree2=[0,f,d],c.unitsPerMeter2=[h,0,h]}return c}function kT(t,e){const[n,r,i]=t,[s,o,a]=e,{unitsPerMeter:l,unitsPerMeter2:c}=Z0({longitude:n,latitude:r,highPrecision:!0}),u=ms(t);u[0]+=s*(l[0]+c[0]*o),u[1]+=o*(l[1]+c[1]*o);const f=Da(u),d=(i||0)+(a||0);return Number.isFinite(i)||Number.isFinite(a)?[f[0],f[1],d]:f}function T9(t){const{height:e,pitch:n,bearing:r,altitude:i,scale:s,center:o}=t,a=C9();jd(a,a,[0,0,-i]),CT(a,a,-n*$n),IT(a,a,r*$n);const l=s/e;return by(a,a,[l,l,l]),o&&jd(a,a,o7([],o)),a}function B9(t){const{width:e,height:n,altitude:r,pitch:i=0,offset:s,center:o,scale:a,nearZMultiplier:l=1,farZMultiplier:c=1}=t;let{fovy:u=Yd(w9)}=t;r!==void 0&&(u=Yd(r));const f=u*$n,d=i*$n,h=QT(u);let g=h;o&&(g+=o[2]*a/Math.cos(d)/n);const A=f*(.5+(s?s[1]:0)/n),E=Math.sin(A)*g/Math.sin(q0(Math.PI/2-d-A,.01,Math.PI-.01)),p=Math.sin(d)*E+g,m=g*10,y=Math.min(p*c,m);return{fov:f,aspect:e/n,focalDistance:h,near:l,far:y}}function Yd(t){return 2*Math.atan(.5/t)*X0}function QT(t){return .5/Math.tan(.5*t*$n)}function FT(t,e){const[n,r,i=0]=t;return Ei(Number.isFinite(n)&&Number.isFinite(r)&&Number.isFinite(i)),va(e,[n,r,i,1])}function ng(t,e,n=0){const[r,i,s]=t;if(Ei(Number.isFinite(r)&&Number.isFinite(i),"invalid pixel coordinate"),Number.isFinite(s))return va(e,[r,i,s,1]);const o=va(e,[r,i,0,1]),a=va(e,[r,i,1,1]),l=o[2],c=a[2],u=l===c?0:((n||0)-l)/(c-l);return hT([],o,a,u)}function R9(t){const{width:e,height:n,bounds:r,minExtent:i=0,maxZoom:s=24,offset:o=[0,0]}=t,[[a,l],[c,u]]=r,f=P9(t.padding),d=ms([a,q0(u,-df,df)]),h=ms([c,q0(l,-df,df)]),g=[Math.max(Math.abs(h[0]-d[0]),i),Math.max(Math.abs(h[1]-d[1]),i)],A=[e-f.left-f.right-Math.abs(o[0])*2,n-f.top-f.bottom-Math.abs(o[1])*2];Ei(A[0]>0&&A[1]>0);const E=A[0]/g[0],p=A[1]/g[1],m=(f.right-f.left)/2/E,y=(f.top-f.bottom)/2/p,_=[(h[0]+d[0])/2+m,(h[1]+d[1])/2+y],I=Da(_),C=Math.min(s,Ly(Math.abs(Math.min(E,p))));return Ei(Number.isFinite(C)),{longitude:I[0],latitude:I[1],zoom:C}}function P9(t=0){return typeof t=="number"?{top:t,bottom:t,left:t,right:t}:(Ei(Number.isFinite(t.top)&&Number.isFinite(t.bottom)&&Number.isFinite(t.left)&&Number.isFinite(t.right)),t)}const rC=Math.PI/180;function L9(t,e=0){const{width:n,height:r,unproject:i}=t,s={targetZ:e},o=i([0,r],s),a=i([n,r],s);let l,c;const u=t.fovy?.5*t.fovy*rC:Math.atan(.5/t.altitude),f=(90-t.pitch)*rC;return u>f-.01?(l=iC(t,0,e),c=iC(t,n,e)):(l=i([0,0],s),c=i([n,0],s)),[o,a,c,l]}function iC(t,e,n){const{pixelUnprojectionMatrix:r}=t,i=va(r,[e,0,1,1]),s=va(r,[e,t.height,1,1]),a=(n*t.distanceScales.unitsPerMeter[2]-i[2])/(s[2]-i[2]),l=hT([],i,s,a),c=Da(l);return c.push(n),c}const sC=512;function M9(t){const{width:e,height:n,pitch:r=0}=t;let{longitude:i,latitude:s,zoom:o,bearing:a=0}=t;(i<-180||i>180)&&(i=nC(i+180,360)-180),(a<-180||a>180)&&(a=nC(a+180,360)-180);const l=Ly(n/sC);if(o<=l)o=l,s=0;else{const c=n/2/Math.pow(2,o),u=Da([0,c])[1];if(s<u)s=u;else{const f=Da([0,sC-c])[1];s>f&&(s=f)}}return{width:e,height:n,longitude:i,latitude:s,zoom:o,pitch:r,bearing:a}}const N9=`
const int max_lights = 2;
uniform mat4 shadow_uViewProjectionMatrices[max_lights];
uniform vec4 shadow_uProjectCenters[max_lights];
uniform bool shadow_uDrawShadowMap;
uniform bool shadow_uUseShadowMap;
uniform int shadow_uLightId;
uniform float shadow_uLightCount;

varying vec3 shadow_vPosition[max_lights];

vec4 shadow_setVertexPosition(vec4 position_commonspace) {
  if (shadow_uDrawShadowMap) {
    return project_common_position_to_clipspace(position_commonspace, shadow_uViewProjectionMatrices[shadow_uLightId], shadow_uProjectCenters[shadow_uLightId]);
  }
  if (shadow_uUseShadowMap) {
    for (int i = 0; i < max_lights; i++) {
      if(i < int(shadow_uLightCount)) {
        vec4 shadowMap_position = project_common_position_to_clipspace(position_commonspace, shadow_uViewProjectionMatrices[i], shadow_uProjectCenters[i]);
        shadow_vPosition[i] = (shadowMap_position.xyz / shadowMap_position.w + 1.0) / 2.0;
      }
    }
  }
  return gl_Position;
}
`,O9=`
const int max_lights = 2;
uniform bool shadow_uDrawShadowMap;
uniform bool shadow_uUseShadowMap;
uniform sampler2D shadow_uShadowMap0;
uniform sampler2D shadow_uShadowMap1;
uniform vec4 shadow_uColor;
uniform float shadow_uLightCount;

varying vec3 shadow_vPosition[max_lights];

const vec4 bitPackShift = vec4(1.0, 255.0, 65025.0, 16581375.0);
const vec4 bitUnpackShift = 1.0 / bitPackShift;
const vec4 bitMask = vec4(1.0 / 255.0, 1.0 / 255.0, 1.0 / 255.0,  0.0);

float shadow_getShadowWeight(vec3 position, sampler2D shadowMap) {
  vec4 rgbaDepth = texture2D(shadowMap, position.xy);

  float z = dot(rgbaDepth, bitUnpackShift);
  return smoothstep(0.001, 0.01, position.z - z);
}

vec4 shadow_filterShadowColor(vec4 color) {
  if (shadow_uDrawShadowMap) {
    vec4 rgbaDepth = fract(gl_FragCoord.z * bitPackShift);
    rgbaDepth -= rgbaDepth.gbaa * bitMask;
    return rgbaDepth;
  }
  if (shadow_uUseShadowMap) {
    float shadowAlpha = 0.0;
    shadowAlpha += shadow_getShadowWeight(shadow_vPosition[0], shadow_uShadowMap0);
    if(shadow_uLightCount > 1.0) {
      shadowAlpha += shadow_getShadowWeight(shadow_vPosition[1], shadow_uShadowMap1);
    }
    shadowAlpha *= shadow_uColor.a / shadow_uLightCount;
    float blendedAlpha = shadowAlpha + color.a * (1.0 - shadowAlpha);

    return vec4(
      mix(color.rgb, shadow_uColor.rgb, shadowAlpha / blendedAlpha),
      blendedAlpha
    );
  }
  return color;
}
`,D9=lu(G9),k9=lu(z9),Q9=[0,0,0,1],F9=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0];function U9(t,e){const[n,r,i]=t,s=ng([n,r,i],e);return Number.isFinite(i)?s:[s[0],s[1],0]}function G9({viewport:t,center:e}){return new Ze(t.viewProjectionMatrix).invert().transform(e)}function z9({viewport:t,shadowMatrices:e}){const n=[],r=t.pixelUnprojectionMatrix,i=t.isGeospatial?void 0:1,s=[[0,0,i],[t.width,0,i],[0,t.height,i],[t.width,t.height,i],[0,0,-1],[t.width,0,-1],[0,t.height,-1],[t.width,t.height,-1]].map(o=>U9(o,r));for(const o of e){const a=o.clone().translate(new re(t.center).negate()),l=s.map(u=>a.transform(u)),c=new Ze().ortho({left:Math.min(...l.map(u=>u[0])),right:Math.max(...l.map(u=>u[0])),bottom:Math.min(...l.map(u=>u[1])),top:Math.max(...l.map(u=>u[1])),near:Math.min(...l.map(u=>-u[2])),far:Math.max(...l.map(u=>-u[2]))});n.push(c.multiplyRight(o))}return n}function V9(t,e){const{shadowEnabled:n=!0}=t;if(!n||!t.shadowMatrices||!t.shadowMatrices.length)return{shadow_uDrawShadowMap:!1,shadow_uUseShadowMap:!1};const r={shadow_uDrawShadowMap:!!t.drawToShadowMap,shadow_uUseShadowMap:t.shadowMaps?t.shadowMaps.length>0:!1,shadow_uColor:t.shadowColor||Q9,shadow_uLightId:t.shadowLightId||0,shadow_uLightCount:t.shadowMatrices.length},i=D9({viewport:t.viewport,center:e.project_uCenter}),s=[],o=k9({shadowMatrices:t.shadowMatrices,viewport:t.viewport}).slice();for(let a=0;a<t.shadowMatrices.length;a++){const l=o[a],c=l.clone().translate(new re(t.viewport.center).negate());e.project_uCoordinateSystem===me.LNGLAT&&e.project_uProjectionMode===gr.WEB_MERCATOR?(o[a]=c,s[a]=i):(o[a]=l.clone().multiplyRight(F9),s[a]=c.transform(i))}for(let a=0;a<o.length;a++)r["shadow_uViewProjectionMatrices[".concat(a,"]")]=o[a],r["shadow_uProjectCenters[".concat(a,"]")]=s[a],t.shadowMaps&&t.shadowMaps.length>0?r["shadow_uShadowMap".concat(a)]=t.shadowMaps[a]:r["shadow_uShadowMap".concat(a)]=t.dummyShadowMap;return r}const qA={name:"shadow",dependencies:[Py],vs:N9,fs:O9,inject:{"vs:DECKGL_FILTER_GL_POSITION":`
    position = shadow_setVertexPosition(geometry.position);
    `,"fs:DECKGL_FILTER_COLOR":`
    color = shadow_filterShadowColor(color);
    `},getUniforms:(t={},e={})=>"viewport"in t&&(t.drawToShadowMap||t.shadowMaps&&t.shadowMaps.length>0)?V9(t,e):{}},j9={color:[255,255,255],intensity:1},oC=[{color:[255,255,255],intensity:1,direction:[-1,3,-1]},{color:[255,255,255],intensity:.9,direction:[1,-8,-2.5]}],H9=[0,0,0,200/255];class UT{constructor(e={}){v(this,"id","lighting-effect"),v(this,"props",void 0),v(this,"shadowColor",H9),v(this,"shadow",void 0),v(this,"ambientLight",void 0),v(this,"directionalLights",void 0),v(this,"pointLights",void 0),v(this,"shadowPasses",[]),v(this,"shadowMaps",[]),v(this,"dummyShadowMap",null),v(this,"programManager",void 0),v(this,"shadowMatrices",void 0),this.setProps(e)}setProps(e){this.ambientLight=null,this.directionalLights=[],this.pointLights=[];for(const n in e){const r=e[n];switch(r.type){case"ambient":this.ambientLight=r;break;case"directional":this.directionalLights.push(r);break;case"point":this.pointLights.push(r);break}}this._applyDefaultLights(),this.shadow=this.directionalLights.some(n=>n.shadow),this.props=e}preRender(e,{layers:n,layerFilter:r,viewports:i,onViewportActive:s,views:o}){if(this.shadow){this.shadowMatrices=this._calculateMatrices(),this.shadowPasses.length===0&&this._createShadowPasses(e),this.programManager||(this.programManager=wo.getDefaultProgramManager(e),qA&&this.programManager.addDefaultModule(qA)),this.dummyShadowMap||(this.dummyShadowMap=new _n(e,{width:1,height:1}));for(let a=0;a<this.shadowPasses.length;a++)this.shadowPasses[a].render({layers:n,layerFilter:r,viewports:i,onViewportActive:s,views:o,moduleParameters:{shadowLightId:a,dummyShadowMap:this.dummyShadowMap,shadowMatrices:this.shadowMatrices}})}}getModuleParameters(e){const n=this.shadow?{shadowMaps:this.shadowMaps,dummyShadowMap:this.dummyShadowMap,shadowColor:this.shadowColor,shadowMatrices:this.shadowMatrices}:{};return n.lightSources={ambientLight:this.ambientLight,directionalLights:this.directionalLights.map(r=>r.getProjectedLight({layer:e})),pointLights:this.pointLights.map(r=>r.getProjectedLight({layer:e}))},n}cleanup(){for(const e of this.shadowPasses)e.delete();this.shadowPasses.length=0,this.shadowMaps.length=0,this.dummyShadowMap&&(this.dummyShadowMap.delete(),this.dummyShadowMap=null),this.shadow&&this.programManager&&(this.programManager.removeDefaultModule(qA),this.programManager=null)}_calculateMatrices(){const e=[];for(const n of this.directionalLights){const r=new Ze().lookAt({eye:new re(n.direction).negate()});e.push(r)}return e}_createShadowPasses(e){for(let n=0;n<this.directionalLights.length;n++){const r=new o9(e);this.shadowPasses[n]=r,this.shadowMaps[n]=r.shadowMap}}_applyDefaultLights(){const{ambientLight:e,pointLights:n,directionalLights:r}=this;!e&&n.length===0&&r.length===0&&(this.ambientLight=new ZU(j9),this.directionalLights.push(new eC(oC[0]),new eC(oC[1])))}}class W9{constructor(e={}){v(this,"_pool",[]),v(this,"opts",{overAlloc:2,poolSize:100}),this.setOptions(e)}setOptions(e){Object.assign(this.opts,e)}allocate(e,n,{size:r=1,type:i,padding:s=0,copy:o=!1,initialize:a=!1,maxCount:l}){const c=i||e&&e.constructor||Float32Array,u=n*r+s;if(ArrayBuffer.isView(e)){if(u<=e.length)return e;if(u*e.BYTES_PER_ELEMENT<=e.buffer.byteLength)return new c(e.buffer,0,u)}let f=1/0;l&&(f=l*r+s);const d=this._allocate(c,u,a,f);return e&&o?d.set(e):a||d.fill(0,0,4),this._release(e),d}release(e){this._release(e)}_allocate(e,n,r,i){let s=Math.max(Math.ceil(n*this.opts.overAlloc),1);s>i&&(s=i);const o=this._pool,a=e.BYTES_PER_ELEMENT*s,l=o.findIndex(c=>c.byteLength>=a);if(l>=0){const c=new e(o.splice(l,1)[0],0,s);return r&&c.fill(0),c}return new e(s)}_release(e){if(!ArrayBuffer.isView(e))return;const n=this._pool,{buffer:r}=e,{byteLength:i}=r,s=n.findIndex(o=>o.byteLength>=i);s<0?n.push(r):(s>0||n.length<this.opts.poolSize)&&n.splice(s,0,r),n.length>this.opts.poolSize&&n.shift()}}const ka=new W9;function Dl(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function Y9(t,e){const n=t%e;return n<0?e+n:n}function $9(t){return[t[12],t[13],t[14]]}function K9(t){return{left:Go(t[3]+t[0],t[7]+t[4],t[11]+t[8],t[15]+t[12]),right:Go(t[3]-t[0],t[7]-t[4],t[11]-t[8],t[15]-t[12]),bottom:Go(t[3]+t[1],t[7]+t[5],t[11]+t[9],t[15]+t[13]),top:Go(t[3]-t[1],t[7]-t[5],t[11]-t[9],t[15]-t[13]),near:Go(t[3]+t[2],t[7]+t[6],t[11]+t[10],t[15]+t[14]),far:Go(t[3]-t[2],t[7]-t[6],t[11]-t[10],t[15]-t[14])}}const aC=new re;function Go(t,e,n,r){aC.set(t,e,n);const i=aC.len();return{distance:r/i,normal:new re(-t/i,-e/i,-n/i)}}function q9(t){return t-Math.fround(t)}let Il;function XA(t,e){const{size:n=1,startIndex:r=0}=e,i=e.endIndex!==void 0?e.endIndex:t.length,s=(i-r)/n;Il=ka.allocate(Il,s,{type:Float32Array,size:n*2});let o=r,a=0;for(;o<i;){for(let l=0;l<n;l++){const c=t[o++];Il[a+l]=c,Il[a+l+n]=q9(c)}a+=n*2}return Il.subarray(0,s*n*2)}function X9(t){let e=null,n=!1;for(const r of t)r&&(e?(n||(e=[[e[0][0],e[0][1]],[e[1][0],e[1][1]]],n=!0),e[0][0]=Math.min(e[0][0],r[0][0]),e[0][1]=Math.min(e[0][1],r[0][1]),e[1][0]=Math.max(e[1][0],r[1][0]),e[1][1]=Math.max(e[1][1],r[1][1])):e=r);return e}const Z9=Math.PI/180,J9=Dl(),lC=[0,0,0],eG={unitsPerMeter:[1,1,1],metersPerUnit:[1,1,1]};function tG({width:t,height:e,orthographic:n,fovyRadians:r,focalDistance:i,padding:s,near:o,far:a}){const l=t/e,c=n?new Ze().orthographic({fovy:r,aspect:l,focalDistance:i,near:o,far:a}):new Ze().perspective({fovy:r,aspect:l,near:o,far:a});if(s){const{left:u=0,right:f=0,top:d=0,bottom:h=0}=s,g=Pt((u+t-f)/2,0,t)-t/2,A=Pt((d+e-h)/2,0,e)-e/2;c[8]-=g*2/t,c[9]+=A*2/e}return c}class bs{constructor(e={}){v(this,"id",void 0),v(this,"x",void 0),v(this,"y",void 0),v(this,"width",void 0),v(this,"height",void 0),v(this,"padding",void 0),v(this,"isGeospatial",void 0),v(this,"zoom",void 0),v(this,"focalDistance",void 0),v(this,"position",void 0),v(this,"modelMatrix",void 0),v(this,"distanceScales",void 0),v(this,"scale",void 0),v(this,"center",void 0),v(this,"cameraPosition",void 0),v(this,"projectionMatrix",void 0),v(this,"viewMatrix",void 0),v(this,"viewMatrixUncentered",void 0),v(this,"viewMatrixInverse",void 0),v(this,"viewProjectionMatrix",void 0),v(this,"pixelProjectionMatrix",void 0),v(this,"pixelUnprojectionMatrix",void 0),v(this,"resolution",void 0),v(this,"_frustumPlanes",{}),this.id=e.id||this.constructor.displayName||"viewport",this.x=e.x||0,this.y=e.y||0,this.width=e.width||1,this.height=e.height||1,this.zoom=e.zoom||0,this.padding=e.padding,this.distanceScales=e.distanceScales||eG,this.focalDistance=e.focalDistance||1,this.position=e.position||lC,this.modelMatrix=e.modelMatrix||null;const{longitude:n,latitude:r}=e;this.isGeospatial=Number.isFinite(r)&&Number.isFinite(n),this._initProps(e),this._initMatrices(e),this.equals=this.equals.bind(this),this.project=this.project.bind(this),this.unproject=this.unproject.bind(this),this.projectPosition=this.projectPosition.bind(this),this.unprojectPosition=this.unprojectPosition.bind(this),this.projectFlat=this.projectFlat.bind(this),this.unprojectFlat=this.unprojectFlat.bind(this)}get subViewports(){return null}get metersPerPixel(){return this.distanceScales.metersPerUnit[2]/this.scale}get projectionMode(){return this.isGeospatial?this.zoom<12?gr.WEB_MERCATOR:gr.WEB_MERCATOR_AUTO_OFFSET:gr.IDENTITY}equals(e){return e instanceof bs?this===e?!0:e.width===this.width&&e.height===this.height&&e.scale===this.scale&&ci(e.projectionMatrix,this.projectionMatrix)&&ci(e.viewMatrix,this.viewMatrix):!1}project(e,{topLeft:n=!0}={}){const r=this.projectPosition(e),i=FT(r,this.pixelProjectionMatrix),[s,o]=i,a=n?o:this.height-o;return e.length===2?[s,a]:[s,a,i[2]]}unproject(e,{topLeft:n=!0,targetZ:r}={}){const[i,s,o]=e,a=n?s:this.height-s,l=r&&r*this.distanceScales.unitsPerMeter[2],c=ng([i,a,o],this.pixelUnprojectionMatrix,l),[u,f,d]=this.unprojectPosition(c);return Number.isFinite(o)?[u,f,d]:Number.isFinite(r)?[u,f,r]:[u,f]}projectPosition(e){const[n,r]=this.projectFlat(e),i=(e[2]||0)*this.distanceScales.unitsPerMeter[2];return[n,r,i]}unprojectPosition(e){const[n,r]=this.unprojectFlat(e),i=(e[2]||0)*this.distanceScales.metersPerUnit[2];return[n,r,i]}projectFlat(e){if(this.isGeospatial){const n=ms(e);return n[1]=Pt(n[1],-318,830),n}return e}unprojectFlat(e){return this.isGeospatial?Da(e):e}getBounds(e={}){const n={targetZ:e.z||0},r=this.unproject([0,0],n),i=this.unproject([this.width,0],n),s=this.unproject([0,this.height],n),o=this.unproject([this.width,this.height],n);return[Math.min(r[0],i[0],s[0],o[0]),Math.min(r[1],i[1],s[1],o[1]),Math.max(r[0],i[0],s[0],o[0]),Math.max(r[1],i[1],s[1],o[1])]}getDistanceScales(e){return e?Z0({longitude:e[0],latitude:e[1],highPrecision:!0}):this.distanceScales}containsPixel({x:e,y:n,width:r=1,height:i=1}){return e<this.x+this.width&&this.x<e+r&&n<this.y+this.height&&this.y<n+i}getFrustumPlanes(){return this._frustumPlanes.near?this._frustumPlanes:(Object.assign(this._frustumPlanes,K9(this.viewProjectionMatrix)),this._frustumPlanes)}panByPosition(e,n){return null}_initProps(e){const n=e.longitude,r=e.latitude;this.isGeospatial&&(Number.isFinite(e.zoom)||(this.zoom=b9({latitude:r})+Math.log2(this.focalDistance)),this.distanceScales=e.distanceScales||Z0({latitude:r,longitude:n}));const i=Math.pow(2,this.zoom);this.scale=i;const{position:s,modelMatrix:o}=e;let a=lC;if(s&&(a=o?new Ze(o).transformAsVector(s,[]):s),this.isGeospatial){const l=this.projectPosition([n,r,0]);this.center=new re(a).scale(this.distanceScales.unitsPerMeter).add(l)}else this.center=this.projectPosition(a)}_initMatrices(e){const{viewMatrix:n=J9,projectionMatrix:r=null,orthographic:i=!1,fovyRadians:s,fovy:o=75,near:a=.1,far:l=1e3,padding:c=null,focalDistance:u=1}=e;this.viewMatrixUncentered=n,this.viewMatrix=new Ze().multiplyRight(n).translate(new re(this.center).negate()),this.projectionMatrix=r||tG({width:this.width,height:this.height,orthographic:i,fovyRadians:s||o*Z9,focalDistance:u,padding:c,near:a,far:l});const f=Dl();to(f,f,this.projectionMatrix),to(f,f,this.viewMatrix),this.viewProjectionMatrix=f,this.viewMatrixInverse=$0([],this.viewMatrix)||this.viewMatrix,this.cameraPosition=$9(this.viewMatrixInverse);const d=Dl(),h=Dl();by(d,d,[this.width/2,-this.height/2,1]),jd(d,d,[1,-1,0]),to(h,d,this.viewProjectionMatrix),this.pixelProjectionMatrix=h,this.pixelUnprojectionMatrix=$0(Dl(),this.pixelProjectionMatrix),this.pixelUnprojectionMatrix||be.warn("Pixel project matrix not invertible")()}}v(bs,"displayName","Viewport");class vs extends bs{constructor(e={}){const{latitude:n=0,longitude:r=0,zoom:i=0,pitch:s=0,bearing:o=0,nearZMultiplier:a=.1,farZMultiplier:l=1.01,nearZ:c,farZ:u,orthographic:f=!1,projectionMatrix:d,repeat:h=!1,worldOffset:g=0,position:A,padding:E,legacyMeterSizes:p=!1}=e;let{width:m,height:y,altitude:_=1.5}=e;const I=Math.pow(2,i);m=m||1,y=y||1;let C,b=null;if(d)_=d[5]/2,C=Yd(_);else{e.fovy?(C=e.fovy,_=QT(C)):C=Yd(_);let R;if(E){const{top:M=0,bottom:U=0}=E;R=[0,Pt((M+y-U)/2,0,y)-y/2]}b=B9({width:m,height:y,scale:I,center:A&&[0,0,A[2]*KA(n)],offset:R,pitch:s,fovy:C,nearZMultiplier:a,farZMultiplier:l}),Number.isFinite(c)&&(b.near=c),Number.isFinite(u)&&(b.far=u)}let B=T9({height:y,pitch:s,bearing:o,scale:I,altitude:_});g&&(B=new Ze().translate([512*g,0,0]).multiplyLeft(B)),super({...e,width:m,height:y,viewMatrix:B,longitude:r,latitude:n,zoom:i,...b,fovy:C,focalDistance:_}),v(this,"longitude",void 0),v(this,"latitude",void 0),v(this,"pitch",void 0),v(this,"bearing",void 0),v(this,"altitude",void 0),v(this,"fovy",void 0),v(this,"orthographic",void 0),v(this,"_subViewports",void 0),v(this,"_pseudoMeters",void 0),this.latitude=n,this.longitude=r,this.zoom=i,this.pitch=s,this.bearing=o,this.altitude=_,this.fovy=C,this.orthographic=f,this._subViewports=h?[]:null,this._pseudoMeters=p,Object.freeze(this)}get subViewports(){if(this._subViewports&&!this._subViewports.length){const e=this.getBounds(),n=Math.floor((e[0]+180)/360),r=Math.ceil((e[2]-180)/360);for(let i=n;i<=r;i++){const s=i?new vs({...this,worldOffset:i}):this;this._subViewports.push(s)}}return this._subViewports}projectPosition(e){if(this._pseudoMeters)return super.projectPosition(e);const[n,r]=this.projectFlat(e),i=(e[2]||0)*KA(e[1]);return[n,r,i]}unprojectPosition(e){if(this._pseudoMeters)return super.unprojectPosition(e);const[n,r]=this.unprojectFlat(e),i=(e[2]||0)/KA(r);return[n,r,i]}addMetersToLngLat(e,n){return kT(e,n)}panByPosition(e,n){const r=ng(n,this.pixelUnprojectionMatrix),i=this.projectFlat(e),s=Vd([],i,dT([],r)),o=Vd([],this.center,s),[a,l]=this.unprojectFlat(o);return{longitude:a,latitude:l}}getBounds(e={}){const n=L9(this,e.z||0);return[Math.min(n[0][0],n[1][0],n[2][0],n[3][0]),Math.min(n[0][1],n[1][1],n[2][1],n[3][1]),Math.max(n[0][0],n[1][0],n[2][0],n[3][0]),Math.max(n[0][1],n[1][1],n[2][1],n[3][1])]}fitBounds(e,n={}){const{width:r,height:i}=this,{longitude:s,latitude:o,zoom:a}=R9({width:r,height:i,bounds:e,...n});return new vs({width:r,height:i,longitude:s,latitude:o,zoom:a})}}v(vs,"displayName","WebMercatorViewport");const cC=[0,0,0];function ZA(t,e,n=!1){const r=e.projectPosition(t);if(n&&e instanceof vs){const[i,s,o=0]=t,a=e.getDistanceScales([i,s]);r[2]=o*a.unitsPerMeter[2]}return r}function nG(t){const{viewport:e,modelMatrix:n,coordinateOrigin:r}=t;let{coordinateSystem:i,fromCoordinateSystem:s,fromCoordinateOrigin:o}=t;return i===me.DEFAULT&&(i=e.isGeospatial?me.LNGLAT:me.CARTESIAN),s===void 0&&(s=i),o===void 0&&(o=r),{viewport:e,coordinateSystem:i,coordinateOrigin:r,modelMatrix:n,fromCoordinateSystem:s,fromCoordinateOrigin:o}}function GT(t,{viewport:e,modelMatrix:n,coordinateSystem:r,coordinateOrigin:i,offsetMode:s}){let[o,a,l=0]=t;switch(n&&([o,a,l]=Wa([],[o,a,l,1],n)),r){case me.LNGLAT:return ZA([o,a,l],e,s);case me.LNGLAT_OFFSETS:return ZA([o+i[0],a+i[1],l+(i[2]||0)],e,s);case me.METER_OFFSETS:return ZA(kT(i,[o,a,l]),e,s);case me.CARTESIAN:default:return e.isGeospatial?[o+i[0],a+i[1],l+i[2]]:e.projectPosition([o,a,l])}}function rG(t,e){const{viewport:n,coordinateSystem:r,coordinateOrigin:i,modelMatrix:s,fromCoordinateSystem:o,fromCoordinateOrigin:a}=nG(e),{autoOffset:l=!0}=e,{geospatialOrigin:c=cC,shaderCoordinateOrigin:u=cC,offsetMode:f=!1}=l?OT(n,r,i):{},d=GT(t,{viewport:n,modelMatrix:s,coordinateSystem:o,coordinateOrigin:a,offsetMode:f});if(f){const h=n.projectPosition(c||u);ET(d,d,h)}return d}const uC={blendFunc:[1,0,32771,0],blendEquation:32774};class zT extends Ry{constructor(...e){super(...e),v(this,"pickZ",void 0),v(this,"_colorEncoderState",null)}render(e){return"pickingFBO"in e?this._drawPickingBuffer(e):super.render(e)}_drawPickingBuffer({layers:e,layerFilter:n,views:r,viewports:i,onViewportActive:s,pickingFBO:o,deviceRect:{x:a,y:l,width:c,height:u},cullRect:f,effects:d,pass:h="picking",pickZ:g,moduleParameters:A}){const E=this.gl;this.pickZ=g;const p=this._resetColorEncoder(g),m=_r(E,{scissorTest:!0,scissor:[a,l,c,u],clearColor:[0,0,0,0],depthMask:!0,depthTest:!0,depthRange:[0,1],colorMask:[!0,!0,!0,!0],...uC,blend:!g},()=>super.render({target:o,layers:e,layerFilter:n,views:r,viewports:i,onViewportActive:s,cullRect:f,effects:d==null?void 0:d.filter(_=>_.useInPicking),pass:h,isPicking:!0,moduleParameters:A}));return this._colorEncoderState=null,{decodePickingColor:p&&sG.bind(null,p),stats:m}}shouldDrawLayer(e){const{pickable:n,operation:r}=e.props;return n&&r.includes("draw")||r.includes("terrain")||r.includes("mask")}getModuleParameters(){return{pickingActive:1,pickingAttribute:this.pickZ,lightSources:{}}}getLayerParameters(e,n,r){const i={...e.props.parameters},{pickable:s,operation:o}=e.props;return this._colorEncoderState?s&&o.includes("draw")&&(Object.assign(i,uC),i.blend=!0,i.blendColor=iG(this._colorEncoderState,e,r)):i.blend=!1,o.includes("terrain")&&(i.blend=!1),i}_resetColorEncoder(e){return this._colorEncoderState=e?null:{byLayer:new Map,byAlpha:[]},this._colorEncoderState}}function iG(t,e,n){const{byLayer:r,byAlpha:i}=t;let s,o=r.get(e);return o?(o.viewports.push(n),s=o.a):(s=r.size+1,s<=255?(o={a:s,layer:e,viewports:[n]},r.set(e,o),i[s]=o):(be.warn("Too many pickable layers, only picking the first 255")(),s=0)),[0,0,0,s/255]}function sG(t,e){const n=t.byAlpha[e[3]];return n&&{pickedLayer:n.layer,pickedViewports:n.viewports,pickedObjectIndex:n.layer.decodePickingColor(e)}}const jo={NO_STATE:"Awaiting state",MATCHED:"Matched. State transferred from previous layer",INITIALIZED:"Initialized",AWAITING_GC:"Discarded. Awaiting garbage collection",AWAITING_FINALIZATION:"No longer matched. Awaiting garbage collection",FINALIZED:"Finalized! Awaiting garbage collection"},$d=Symbol.for("component"),cs=Symbol.for("propTypes"),JA=Symbol.for("deprecatedProps"),ya=Symbol.for("asyncPropDefaults"),uo=Symbol.for("asyncPropOriginal"),Xi=Symbol.for("asyncPropResolved");function rg(t,e=()=>!0){return Array.isArray(t)?VT(t,e,[]):e(t)?[t]:[]}function VT(t,e,n){let r=-1;for(;++r<t.length;){const i=t[r];Array.isArray(i)?VT(i,e,n):e(i)&&n.push(i)}return n}function oG({target:t,source:e,start:n=0,count:r=1}){const i=e.length,s=r*i;let o=0;for(let a=n;o<i;o++)t[a++]=e[o];for(;o<s;)o<s-o?(t.copyWithin(n+o,n,n+o),o*=2):(t.copyWithin(n+o,n,n+s-o),o=s);return t}class aG{constructor(e,n,r){v(this,"id",void 0),v(this,"context",void 0),v(this,"isLoaded",void 0),v(this,"persistent",void 0),v(this,"_loadCount",0),v(this,"_subscribers",new Set),v(this,"_data",void 0),v(this,"_loader",void 0),v(this,"_error",void 0),v(this,"_content",void 0),this.id=e,this.context=r,this.setData(n)}subscribe(e){this._subscribers.add(e)}unsubscribe(e){this._subscribers.delete(e)}inUse(){return this._subscribers.size>0}delete(){}getData(){return this.isLoaded?this._error?Promise.reject(this._error):this._content:this._loader.then(()=>this.getData())}setData(e,n){if(e===this._data&&!n)return;this._data=e;const r=++this._loadCount;let i=e;typeof e=="string"&&(i=Qd(e)),i instanceof Promise?(this.isLoaded=!1,this._loader=i.then(s=>{this._loadCount===r&&(this.isLoaded=!0,this._error=void 0,this._content=s)}).catch(s=>{this._loadCount===r&&(this.isLoaded=!0,this._error=s||!0)})):(this.isLoaded=!0,this._error=void 0,this._content=e);for(const s of this._subscribers)s.onChange(this.getData())}}class lG{constructor({gl:e,protocol:n}){v(this,"protocol",void 0),v(this,"_context",void 0),v(this,"_resources",void 0),v(this,"_consumers",void 0),v(this,"_pruneRequest",void 0),this.protocol=n||"resource://",this._context={gl:e,resourceManager:this},this._resources={},this._consumers={},this._pruneRequest=null}contains(e){return e.startsWith(this.protocol)?!0:e in this._resources}add({resourceId:e,data:n,forceUpdate:r=!1,persistent:i=!0}){let s=this._resources[e];s?s.setData(n,r):(s=new aG(e,n,this._context),this._resources[e]=s),s.persistent=i}remove(e){const n=this._resources[e];n&&(n.delete(),delete this._resources[e])}unsubscribe({consumerId:e}){const n=this._consumers[e];if(n){for(const r in n){const i=n[r],s=this._resources[i.resourceId];s&&s.unsubscribe(i)}delete this._consumers[e],this.prune()}}subscribe({resourceId:e,onChange:n,consumerId:r,requestId:i="default"}){const{_resources:s,protocol:o}=this;e.startsWith(o)&&(e=e.replace(o,""),s[e]||this.add({resourceId:e,data:null,persistent:!1}));const a=s[e];if(this._track(r,i,a,n),a)return a.getData()}prune(){this._pruneRequest||(this._pruneRequest=setTimeout(()=>this._prune(),0))}finalize(){for(const e in this._resources)this._resources[e].delete()}_track(e,n,r,i){const s=this._consumers,o=s[e]=s[e]||{},a=o[n]||{},l=a.resourceId&&this._resources[a.resourceId];l&&(l.unsubscribe(a),this.prune()),r&&(o[n]=a,a.onChange=i,a.resourceId=r.id,r.subscribe(a))}_prune(){this._pruneRequest=null;for(const e of Object.keys(this._resources)){const n=this._resources[e];!n.persistent&&!n.inUse()&&(n.delete(),delete this._resources[e])}}}const cG=`
vec4 project_position_to_clipspace(
  vec3 position, vec3 position64Low, vec3 offset, out vec4 commonPosition
) {
  vec3 projectedPosition = project_position(position, position64Low);
  mat3 rotation;
  if (project_needs_rotation(projectedPosition, rotation)) {
    // offset is specified as ENU
    // when in globe projection, rotate offset so that the ground alighs with the surface of the globe
    offset = rotation * offset;
  }
  commonPosition = vec4(projectedPosition + offset, 1.0);
  return project_common_position_to_clipspace(commonPosition);
}

vec4 project_position_to_clipspace(
  vec3 position, vec3 position64Low, vec3 offset
) {
  vec4 commonPosition;
  return project_position_to_clipspace(position, position64Low, offset, commonPosition);
}
`,Ts={name:"project32",dependencies:[Py],vs:cG},Bs={inject:{"vs:DECKGL_FILTER_GL_POSITION":`
    // for picking depth values
    picking_setPickingAttribute(position.z / position.w);
  `,"vs:DECKGL_FILTER_COLOR":`
  picking_setPickingColor(geometry.pickingColor);
  `,"fs:#decl":`
uniform bool picking_uAttribute;
  `,"fs:DECKGL_FILTER_COLOR":{order:99,injection:`
  // use highlight color if this fragment belongs to the selected object.
  color = picking_filterHighlightColor(color);

  // use picking color if rendering to picking FBO.
  color = picking_filterPickingColor(color);
    `}},...yU},uG=[Py],fG=["vs:DECKGL_FILTER_SIZE(inout vec3 size, VertexGeometry geometry)","vs:DECKGL_FILTER_GL_POSITION(inout vec4 position, VertexGeometry geometry)","vs:DECKGL_FILTER_COLOR(inout vec4 color, VertexGeometry geometry)","fs:DECKGL_FILTER_COLOR(inout vec4 color, FragmentGeometry geometry)"];function dG(t){const e=wo.getDefaultProgramManager(t);for(const n of uG)e.addDefaultModule(n);for(const n of fG)e.addShaderHook(n);return e}const hG="layerManager.setLayers",gG="layerManager.activateViewport";class AG{constructor(e,{deck:n,stats:r,viewport:i,timeline:s}={}){v(this,"layers",void 0),v(this,"context",void 0),v(this,"resourceManager",void 0),v(this,"_lastRenderedLayers",[]),v(this,"_needsRedraw",!1),v(this,"_needsUpdate",!1),v(this,"_nextLayers",null),v(this,"_debug",!1),v(this,"activateViewport",o=>{qt(gG,this,o),o&&(this.context.viewport=o)}),this.layers=[],this.resourceManager=new lG({gl:e,protocol:"deck://"}),this.context={mousePosition:null,userData:{},layerManager:this,gl:e,deck:n,programManager:e&&dG(e),stats:r||new my({id:"deck.gl"}),viewport:i||new bs({id:"DEFAULT-INITIAL-VIEWPORT"}),timeline:s||new RT,resourceManager:this.resourceManager,onError:void 0},Object.seal(this)}finalize(){this.resourceManager.finalize();for(const e of this.layers)this._finalizeLayer(e)}needsRedraw(e={clearRedrawFlags:!1}){let n=this._needsRedraw;e.clearRedrawFlags&&(this._needsRedraw=!1);for(const r of this.layers){const i=r.getNeedsRedraw(e);n=n||i}return n}needsUpdate(){return this._nextLayers&&this._nextLayers!==this._lastRenderedLayers?"layers changed":this._needsUpdate}setNeedsRedraw(e){this._needsRedraw=this._needsRedraw||e}setNeedsUpdate(e){this._needsUpdate=this._needsUpdate||e}getLayers({layerIds:e}={}){return e?this.layers.filter(n=>e.find(r=>n.id.indexOf(r)===0)):this.layers}setProps(e){"debug"in e&&(this._debug=e.debug),"userData"in e&&(this.context.userData=e.userData),"layers"in e&&(this._nextLayers=e.layers),"onError"in e&&(this.context.onError=e.onError)}setLayers(e,n){qt(hG,this,n,e),this._lastRenderedLayers=e;const r=rg(e,Boolean);for(const i of r)i.context=this.context;this._updateLayers(this.layers,r)}updateLayers(){const e=this.needsUpdate();e&&(this.setNeedsRedraw("updating layers: ".concat(e)),this.setLayers(this._nextLayers||this._lastRenderedLayers,e)),this._nextLayers=null}_handleError(e,n,r){r.raiseError(n,"".concat(e," of ").concat(r))}_updateLayers(e,n){const r={};for(const o of e)r[o.id]?be.warn("Multiple old layers with same id ".concat(o.id))():r[o.id]=o;const i=[];this._updateSublayersRecursively(n,r,i),this._finalizeOldLayers(r);let s=!1;for(const o of i)if(o.hasUniformTransition()){s="Uniform transition in ".concat(o);break}this._needsUpdate=s,this.layers=i}_updateSublayersRecursively(e,n,r){for(const i of e){i.context=this.context;const s=n[i.id];s===null&&be.warn("Multiple new layers with same id ".concat(i.id))(),n[i.id]=null;let o=null;try{this._debug&&s!==i&&i.validateProps(),s?(this._transferLayerState(s,i),this._updateLayer(i)):this._initializeLayer(i),r.push(i),o=i.isComposite?i.getSubLayers():null}catch(a){this._handleError("matching",a,i)}o&&this._updateSublayersRecursively(o,n,r)}}_finalizeOldLayers(e){for(const n in e){const r=e[n];r&&this._finalizeLayer(r)}}_initializeLayer(e){try{e._initialize(),e.lifecycle=jo.INITIALIZED}catch(n){this._handleError("initialization",n,e)}}_transferLayerState(e,n){n._transferState(e),n.lifecycle=jo.MATCHED,n!==e&&(e.lifecycle=jo.AWAITING_GC)}_updateLayer(e){try{e._update()}catch(n){this._handleError("update",n,e)}}_finalizeLayer(e){this._needsRedraw=this._needsRedraw||"finalized ".concat(e),e.lifecycle=jo.AWAITING_FINALIZATION;try{e._finalize(),e.lifecycle=jo.FINALIZED}catch(n){this._handleError("finalization",n,e)}}}function pr(t,e,n){if(t===e)return!0;if(!n||!t||!e)return!1;if(Array.isArray(t)){if(!Array.isArray(e)||t.length!==e.length)return!1;for(let r=0;r<t.length;r++)if(!pr(t[r],e[r],n-1))return!1;return!0}if(Array.isArray(e))return!1;if(typeof t=="object"&&typeof e=="object"){const r=Object.keys(t),i=Object.keys(e);if(r.length!==i.length)return!1;for(const s of r)if(!e.hasOwnProperty(s)||!pr(t[s],e[s],n-1))return!1;return!0}return!1}class pG{constructor(e){v(this,"width",void 0),v(this,"height",void 0),v(this,"views",void 0),v(this,"viewState",void 0),v(this,"controllers",void 0),v(this,"timeline",void 0),v(this,"_viewports",void 0),v(this,"_viewportMap",void 0),v(this,"_isUpdating",void 0),v(this,"_needsRedraw",void 0),v(this,"_needsUpdate",void 0),v(this,"_eventManager",void 0),v(this,"_eventCallbacks",void 0),this.views=[],this.width=100,this.height=100,this.viewState={},this.controllers={},this.timeline=e.timeline,this._viewports=[],this._viewportMap={},this._isUpdating=!1,this._needsRedraw="First render",this._needsUpdate="Initialize",this._eventManager=e.eventManager,this._eventCallbacks={onViewStateChange:e.onViewStateChange,onInteractionStateChange:e.onInteractionStateChange},Object.seal(this),this.setProps(e)}finalize(){for(const e in this.controllers){const n=this.controllers[e];n&&n.finalize()}this.controllers={}}needsRedraw(e={clearRedrawFlags:!1}){const n=this._needsRedraw;return e.clearRedrawFlags&&(this._needsRedraw=!1),n}setNeedsUpdate(e){this._needsUpdate=this._needsUpdate||e,this._needsRedraw=this._needsRedraw||e}updateViewStates(){for(const e in this.controllers){const n=this.controllers[e];n&&n.updateTransition()}}getViewports(e){return e?this._viewports.filter(n=>n.containsPixel(e)):this._viewports}getViews(){const e={};return this.views.forEach(n=>{e[n.id]=n}),e}getView(e){return this.views.find(n=>n.id===e)}getViewState(e){const n=typeof e=="string"?this.getView(e):e,r=n&&this.viewState[n.getViewStateId()]||this.viewState;return n?n.filterViewState(r):r}getViewport(e){return this._viewportMap[e]}unproject(e,n){const r=this.getViewports(),i={x:e[0],y:e[1]};for(let s=r.length-1;s>=0;--s){const o=r[s];if(o.containsPixel(i)){const a=e.slice();return a[0]-=o.x,a[1]-=o.y,o.unproject(a,n)}}return null}setProps(e){e.views&&this._setViews(e.views),e.viewState&&this._setViewState(e.viewState),("width"in e||"height"in e)&&this._setSize(e.width,e.height),this._isUpdating||this._update()}_update(){this._isUpdating=!0,this._needsUpdate&&(this._needsUpdate=!1,this._rebuildViewports()),this._needsUpdate&&(this._needsUpdate=!1,this._rebuildViewports()),this._isUpdating=!1}_setSize(e,n){(e!==this.width||n!==this.height)&&(this.width=e,this.height=n,this.setNeedsUpdate("Size changed"))}_setViews(e){e=rg(e,Boolean),this._diffViews(e,this.views)&&this.setNeedsUpdate("views changed"),this.views=e}_setViewState(e){e?(!pr(e,this.viewState,3)&&this.setNeedsUpdate("viewState changed"),this.viewState=e):be.warn("missing `viewState` or `initialViewState`")()}_onViewStateChange(e,n){this._eventCallbacks.onViewStateChange&&this._eventCallbacks.onViewStateChange({...n,viewId:e})}_createController(e,n){const r=n.type;return new r({timeline:this.timeline,eventManager:this._eventManager,onViewStateChange:this._onViewStateChange.bind(this,n.id),onStateChange:this._eventCallbacks.onInteractionStateChange,makeViewport:s=>{var o;return(o=this.getView(e.id))===null||o===void 0?void 0:o.makeViewport({viewState:s,width:this.width,height:this.height})}})}_updateController(e,n,r,i){const s=e.controller;if(s&&r){const o={...n,...s,id:e.id,x:r.x,y:r.y,width:r.width,height:r.height};return(!i||i.constructor!==s.type)&&(i=this._createController(e,o)),i&&i.setProps(o),i}return null}_rebuildViewports(){const{views:e}=this,n=this.controllers;this._viewports=[],this.controllers={};let r=!1;for(let i=e.length;i--;){const s=e[i],o=this.getViewState(s),a=s.makeViewport({viewState:o,width:this.width,height:this.height});let l=n[s.id];const c=!!s.controller;c&&!l&&(r=!0),(r||!c)&&l&&(l.finalize(),l=null),this.controllers[s.id]=this._updateController(s,o,a,l),a&&this._viewports.unshift(a)}for(const i in n){const s=n[i];s&&!this.controllers[i]&&s.finalize()}this._buildViewportMap()}_buildViewportMap(){this._viewportMap={},this._viewports.forEach(e=>{e.id&&(this._viewportMap[e.id]=this._viewportMap[e.id]||e)})}_diffViews(e,n){return e.length!==n.length?!0:e.some((r,i)=>!e[i].equals(n[i]))}}const mG=/([0-9]+\.?[0-9]*)(%|px)/;function Fi(t){switch(typeof t){case"number":return{position:t,relative:!1};case"string":const e=mG.exec(t);if(e&&e.length>=3){const n=e[2]==="%",r=parseFloat(e[1]);return{position:n?r/100:r,relative:n}}default:throw new Error("Could not parse position string ".concat(t))}}function Ui(t,e){return t.relative?Math.round(t.position*e):t.position}function Rt(t,e){if(!t)throw new Error(e||"deck.gl: assertion failed.")}class fo{constructor(e){v(this,"id",void 0),v(this,"viewportInstance",void 0),v(this,"_x",void 0),v(this,"_y",void 0),v(this,"_width",void 0),v(this,"_height",void 0),v(this,"_padding",void 0),v(this,"props",void 0);const{id:n,x:r=0,y:i=0,width:s="100%",height:o="100%",padding:a=null,viewportInstance:l}=e||{};Rt(!l||l instanceof bs),this.viewportInstance=l,this.id=n||this.constructor.displayName||"view",this.props={...e,id:this.id},this._x=Fi(r),this._y=Fi(i),this._width=Fi(s),this._height=Fi(o),this._padding=a&&{left:Fi(a.left||0),right:Fi(a.right||0),top:Fi(a.top||0),bottom:Fi(a.bottom||0)},this.equals=this.equals.bind(this),Object.seal(this)}equals(e){return this===e?!0:this.viewportInstance?e.viewportInstance?this.viewportInstance.equals(e.viewportInstance):!1:this.ViewportType===e.ViewportType&&pr(this.props,e.props,2)}makeViewport({width:e,height:n,viewState:r}){if(this.viewportInstance)return this.viewportInstance;r=this.filterViewState(r);const i=this.getDimensions({width:e,height:n});return!i.height||!i.width?null:new this.ViewportType({...r,...this.props,...i})}getViewStateId(){const{viewState:e}=this.props;return typeof e=="string"?e:(e==null?void 0:e.id)||this.id}filterViewState(e){if(this.props.viewState&&typeof this.props.viewState=="object"){if(!this.props.viewState.id)return this.props.viewState;const n={...e};for(const r in this.props.viewState)r!=="id"&&(n[r]=this.props.viewState[r]);return n}return e}getDimensions({width:e,height:n}){const r={x:Ui(this._x,e),y:Ui(this._y,n),width:Ui(this._width,e),height:Ui(this._height,n)};return this._padding&&(r.padding={left:Ui(this._padding.left,e),top:Ui(this._padding.top,n),right:Ui(this._padding.right,e),bottom:Ui(this._padding.bottom,n)}),r}get controller(){const e=this.props.controller;return e?e===!0?{type:this.ControllerType}:typeof e=="function"?{type:e}:{type:this.ControllerType,...e}:null}}class cu{constructor(e){v(this,"_inProgress",void 0),v(this,"_handle",void 0),v(this,"_timeline",void 0),v(this,"time",void 0),v(this,"settings",void 0),this._inProgress=!1,this._handle=null,this._timeline=e,this.time=0,this.settings={duration:0}}get inProgress(){return this._inProgress}start(e){var n,r;this.cancel(),this.settings=e,this._inProgress=!0,(n=(r=this.settings).onStart)===null||n===void 0||n.call(r,this)}end(){if(this._inProgress){var e,n;this._timeline.removeChannel(this._handle),this._handle=null,this._inProgress=!1,(e=(n=this.settings).onEnd)===null||e===void 0||e.call(n,this)}}cancel(){if(this._inProgress){var e,n;(e=(n=this.settings).onInterrupt)===null||e===void 0||e.call(n,this),this._timeline.removeChannel(this._handle),this._handle=null,this._inProgress=!1}}update(){var e,n;if(!this._inProgress)return!1;if(this._handle===null){const{_timeline:r,settings:i}=this;this._handle=r.addChannel({delay:r.getTime(),duration:i.duration})}return this.time=this._timeline.getTime(this._handle),this._onUpdate(),(e=(n=this.settings).onUpdate)===null||e===void 0||e.call(n,this),this._timeline.isFinished(this._handle)&&this.end(),!0}_onUpdate(){}}const fC=()=>{},J0={BREAK:1,SNAP_TO_END:2,IGNORE:3},vG=t=>t,yG=J0.BREAK;class EG{constructor(e){v(this,"getControllerState",void 0),v(this,"props",void 0),v(this,"propsInTransition",void 0),v(this,"transition",void 0),v(this,"onViewStateChange",void 0),v(this,"onStateChange",void 0),v(this,"_onTransitionUpdate",n=>{const{time:r,settings:{interpolator:i,startProps:s,endProps:o,duration:a,easing:l}}=n,c=l(r/a),u=i.interpolateProps(s,o,c);this.propsInTransition=this.getControllerState({...this.props,...u}).getViewportProps(),this.onViewStateChange({viewState:this.propsInTransition,oldViewState:this.props})}),this.getControllerState=e.getControllerState,this.propsInTransition=null,this.transition=new cu(e.timeline),this.onViewStateChange=e.onViewStateChange||fC,this.onStateChange=e.onStateChange||fC}finalize(){this.transition.cancel()}getViewportInTransition(){return this.propsInTransition}processViewStateChange(e){let n=!1;const r=this.props;if(this.props=e,!r||this._shouldIgnoreViewportChange(r,e))return!1;if(this._isTransitionEnabled(e)){let i=r;if(this.transition.inProgress){const{interruption:s,endProps:o}=this.transition.settings;i={...r,...s===J0.SNAP_TO_END?o:this.propsInTransition||r}}this._triggerTransition(i,e),n=!0}else this.transition.cancel();return n}updateTransition(){this.transition.update()}_isTransitionEnabled(e){const{transitionDuration:n,transitionInterpolator:r}=e;return(n>0||n==="auto")&&!!r}_isUpdateDueToCurrentTransition(e){return this.transition.inProgress&&this.propsInTransition?this.transition.settings.interpolator.arePropsEqual(e,this.propsInTransition):!1}_shouldIgnoreViewportChange(e,n){return this.transition.inProgress?this.transition.settings.interruption===J0.IGNORE||this._isUpdateDueToCurrentTransition(n):this._isTransitionEnabled(n)?n.transitionInterpolator.arePropsEqual(e,n):!0}_triggerTransition(e,n){const r=this.getControllerState(e),i=this.getControllerState(n).shortestPathFrom(r),s=n.transitionInterpolator,o=s.getDuration?s.getDuration(e,n):n.transitionDuration;if(o===0)return;const a=s.initializeProps(e,i);this.propsInTransition={};const l={duration:o,easing:n.transitionEasing||vG,interpolator:s,interruption:n.transitionInterruption||yG,startProps:a.start,endProps:a.end,onStart:n.onTransitionStart,onUpdate:this._onTransitionUpdate,onInterrupt:this._onTransitionEnd(n.onTransitionInterrupt),onEnd:this._onTransitionEnd(n.onTransitionEnd)};this.transition.start(l),this.onStateChange({inTransition:!0}),this.updateTransition()}_onTransitionEnd(e){return n=>{this.propsInTransition=null,this.onStateChange({inTransition:!1,isZooming:!1,isPanning:!1,isRotating:!1}),e==null||e(n)}}}class _G{constructor(e){v(this,"_propsToCompare",void 0),v(this,"_propsToExtract",void 0),v(this,"_requiredProps",void 0);const{compare:n,extract:r,required:i}=e;this._propsToCompare=n,this._propsToExtract=r||n,this._requiredProps=i}arePropsEqual(e,n){for(const r of this._propsToCompare)if(!(r in e)||!(r in n)||!ci(e[r],n[r]))return!1;return!0}initializeProps(e,n){const r={},i={};for(const s of this._propsToExtract)(s in e||s in n)&&(r[s]=e[s],i[s]=n[s]);return this._checkRequiredProps(r),this._checkRequiredProps(i),{start:r,end:i}}getDuration(e,n){return n.transitionDuration}_checkRequiredProps(e){this._requiredProps&&this._requiredProps.forEach(n=>{const r=e[n];Rt(Number.isFinite(r)||Array.isArray(r),"".concat(n," is required for transition"))})}}const xG=["longitude","latitude","zoom","bearing","pitch"],CG=["longitude","latitude","zoom"];class My extends _G{constructor(e={}){const n=Array.isArray(e)?e:e.transitionProps,r=Array.isArray(e)?{}:e;r.transitionProps=Array.isArray(n)?{compare:n,required:n}:n||{compare:xG,required:CG},super(r.transitionProps),v(this,"opts",void 0),this.opts=r}initializeProps(e,n){const r=super.initializeProps(e,n),{makeViewport:i,around:s}=this.opts;if(i&&s){const o=i(e),a=i(n),l=o.unproject(s);r.start.around=s,Object.assign(r.end,{around:a.project(l),aroundPosition:l,width:n.width,height:n.height})}return r}interpolateProps(e,n,r){const i={};for(const s of this._propsToExtract)i[s]=eo(e[s]||0,n[s]||0,r);if(n.aroundPosition&&this.opts.makeViewport){const s=this.opts.makeViewport({...n,...i});Object.assign(i,s.panByPosition(n.aroundPosition,eo(e.around,n.around,r)))}return i}}const Gi={transitionDuration:0},IG=300,hf=t=>1-(1-t)*(1-t),zo={WHEEL:["wheel"],PAN:["panstart","panmove","panend"],PINCH:["pinchstart","pinchmove","pinchend"],TRIPLE_PAN:["tripanstart","tripanmove","tripanend"],DOUBLE_TAP:["doubletap"],KEYBOARD:["keydown"]},Ns={};class jT{constructor(e){v(this,"props",void 0),v(this,"state",{}),v(this,"transitionManager",void 0),v(this,"eventManager",void 0),v(this,"onViewStateChange",void 0),v(this,"onStateChange",void 0),v(this,"makeViewport",void 0),v(this,"_controllerState",void 0),v(this,"_events",{}),v(this,"_interactionState",{isDragging:!1}),v(this,"_customEvents",[]),v(this,"_eventStartBlocked",null),v(this,"_panMove",!1),v(this,"invertPan",!1),v(this,"dragMode","rotate"),v(this,"inertia",0),v(this,"scrollZoom",!0),v(this,"dragPan",!0),v(this,"dragRotate",!0),v(this,"doubleClickZoom",!0),v(this,"touchZoom",!0),v(this,"touchRotate",!1),v(this,"keyboard",!0),this.transitionManager=new EG({...e,getControllerState:n=>new this.ControllerState(n),onViewStateChange:this._onTransition.bind(this),onStateChange:this._setInteractionState.bind(this)}),this.handleEvent=this.handleEvent.bind(this),this.eventManager=e.eventManager,this.onViewStateChange=e.onViewStateChange||(()=>{}),this.onStateChange=e.onStateChange||(()=>{}),this.makeViewport=e.makeViewport}set events(e){this.toggleEvents(this._customEvents,!1),this.toggleEvents(e,!0),this._customEvents=e,this.props&&this.setProps(this.props)}finalize(){for(const n in this._events)if(this._events[n]){var e;(e=this.eventManager)===null||e===void 0||e.off(n,this.handleEvent)}this.transitionManager.finalize()}handleEvent(e){this._controllerState=void 0;const n=this._eventStartBlocked;switch(e.type){case"panstart":return n?!1:this._onPanStart(e);case"panmove":return this._onPan(e);case"panend":return this._onPanEnd(e);case"pinchstart":return n?!1:this._onPinchStart(e);case"pinchmove":return this._onPinch(e);case"pinchend":return this._onPinchEnd(e);case"tripanstart":return n?!1:this._onTriplePanStart(e);case"tripanmove":return this._onTriplePan(e);case"tripanend":return this._onTriplePanEnd(e);case"doubletap":return this._onDoubleTap(e);case"wheel":return this._onWheel(e);case"keydown":return this._onKeyDown(e);default:return!1}}get controllerState(){return this._controllerState=this._controllerState||new this.ControllerState({makeViewport:this.makeViewport,...this.props,...this.state}),this._controllerState}getCenter(e){const{x:n,y:r}=this.props,{offsetCenter:i}=e;return[i.x-n,i.y-r]}isPointInBounds(e,n){const{width:r,height:i}=this.props;if(n&&n.handled)return!1;const s=e[0]>=0&&e[0]<=r&&e[1]>=0&&e[1]<=i;return s&&n&&n.stopPropagation(),s}isFunctionKeyPressed(e){const{srcEvent:n}=e;return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}isDragging(){return this._interactionState.isDragging||!1}blockEvents(e){const n=setTimeout(()=>{this._eventStartBlocked===n&&(this._eventStartBlocked=null)},e);this._eventStartBlocked=n}setProps(e){e.dragMode&&(this.dragMode=e.dragMode),this.props=e,"transitionInterpolator"in e||(e.transitionInterpolator=this._getTransitionProps().transitionInterpolator),this.transitionManager.processViewStateChange(e);const{inertia:n}=e;this.inertia=Number.isFinite(n)?n:n===!0?IG:0;const{scrollZoom:r=!0,dragPan:i=!0,dragRotate:s=!0,doubleClickZoom:o=!0,touchZoom:a=!0,touchRotate:l=!1,keyboard:c=!0}=e,u=!!this.onViewStateChange;this.toggleEvents(zo.WHEEL,u&&r),this.toggleEvents(zo.PAN,u),this.toggleEvents(zo.PINCH,u&&(a||l)),this.toggleEvents(zo.TRIPLE_PAN,u&&l),this.toggleEvents(zo.DOUBLE_TAP,u&&o),this.toggleEvents(zo.KEYBOARD,u&&c),this.scrollZoom=r,this.dragPan=i,this.dragRotate=s,this.doubleClickZoom=o,this.touchZoom=a,this.touchRotate=l,this.keyboard=c}updateTransition(){this.transitionManager.updateTransition()}toggleEvents(e,n){this.eventManager&&e.forEach(r=>{this._events[r]!==n&&(this._events[r]=n,n?this.eventManager.on(r,this.handleEvent):this.eventManager.off(r,this.handleEvent))})}updateViewport(e,n=null,r={}){const i={...e.getViewportProps(),...n},s=this.controllerState!==e;if(this.state=e.getState(),this._setInteractionState(r),s){const o=this.controllerState&&this.controllerState.getViewportProps();this.onViewStateChange&&this.onViewStateChange({viewState:i,interactionState:this._interactionState,oldViewState:o})}}_onTransition(e){this.onViewStateChange({...e,interactionState:this._interactionState})}_setInteractionState(e){Object.assign(this._interactionState,e),this.onStateChange(this._interactionState)}_onPanStart(e){const n=this.getCenter(e);if(!this.isPointInBounds(n,e))return!1;let r=this.isFunctionKeyPressed(e)||e.rightButton||!1;(this.invertPan||this.dragMode==="pan")&&(r=!r);const i=this.controllerState[r?"panStart":"rotateStart"]({pos:n});return this._panMove=r,this.updateViewport(i,Gi,{isDragging:!0}),!0}_onPan(e){return this.isDragging()?this._panMove?this._onPanMove(e):this._onPanRotate(e):!1}_onPanEnd(e){return this.isDragging()?this._panMove?this._onPanMoveEnd(e):this._onPanRotateEnd(e):!1}_onPanMove(e){if(!this.dragPan)return!1;const n=this.getCenter(e),r=this.controllerState.pan({pos:n});return this.updateViewport(r,Gi,{isDragging:!0,isPanning:!0}),!0}_onPanMoveEnd(e){const{inertia:n}=this;if(this.dragPan&&n&&e.velocity){const r=this.getCenter(e),i=[r[0]+e.velocityX*n/2,r[1]+e.velocityY*n/2],s=this.controllerState.pan({pos:i}).panEnd();this.updateViewport(s,{...this._getTransitionProps(),transitionDuration:n,transitionEasing:hf},{isDragging:!1,isPanning:!0})}else{const r=this.controllerState.panEnd();this.updateViewport(r,null,{isDragging:!1,isPanning:!1})}return!0}_onPanRotate(e){if(!this.dragRotate)return!1;const n=this.getCenter(e),r=this.controllerState.rotate({pos:n});return this.updateViewport(r,Gi,{isDragging:!0,isRotating:!0}),!0}_onPanRotateEnd(e){const{inertia:n}=this;if(this.dragRotate&&n&&e.velocity){const r=this.getCenter(e),i=[r[0]+e.velocityX*n/2,r[1]+e.velocityY*n/2],s=this.controllerState.rotate({pos:i}).rotateEnd();this.updateViewport(s,{...this._getTransitionProps(),transitionDuration:n,transitionEasing:hf},{isDragging:!1,isRotating:!0})}else{const r=this.controllerState.rotateEnd();this.updateViewport(r,null,{isDragging:!1,isRotating:!1})}return!0}_onWheel(e){if(!this.scrollZoom)return!1;const n=this.getCenter(e);if(!this.isPointInBounds(n,e))return!1;e.srcEvent.preventDefault();const{speed:r=.01,smooth:i=!1}=this.scrollZoom===!0?{}:this.scrollZoom,{delta:s}=e;let o=2/(1+Math.exp(-Math.abs(s*r)));s<0&&o!==0&&(o=1/o);const a=this.controllerState.zoom({pos:n,scale:o});return this.updateViewport(a,{...this._getTransitionProps({around:n}),transitionDuration:i?250:1},{isZooming:!0,isPanning:!0}),!0}_onTriplePanStart(e){const n=this.getCenter(e);if(!this.isPointInBounds(n,e))return!1;const r=this.controllerState.rotateStart({pos:n});return this.updateViewport(r,Gi,{isDragging:!0}),!0}_onTriplePan(e){if(!this.touchRotate||!this.isDragging())return!1;const n=this.getCenter(e);n[0]-=e.deltaX;const r=this.controllerState.rotate({pos:n});return this.updateViewport(r,Gi,{isDragging:!0,isRotating:!0}),!0}_onTriplePanEnd(e){if(!this.isDragging())return!1;const{inertia:n}=this;if(this.touchRotate&&n&&e.velocityY){const r=this.getCenter(e),i=[r[0],r[1]+=e.velocityY*n/2],s=this.controllerState.rotate({pos:i});this.updateViewport(s,{...this._getTransitionProps(),transitionDuration:n,transitionEasing:hf},{isDragging:!1,isRotating:!0}),this.blockEvents(n)}else{const r=this.controllerState.rotateEnd();this.updateViewport(r,null,{isDragging:!1,isRotating:!1})}return!0}_onPinchStart(e){const n=this.getCenter(e);if(!this.isPointInBounds(n,e))return!1;const r=this.controllerState.zoomStart({pos:n}).rotateStart({pos:n});return Ns._startPinchRotation=e.rotation,Ns._lastPinchEvent=e,this.updateViewport(r,Gi,{isDragging:!0}),!0}_onPinch(e){if(!this.touchZoom&&!this.touchRotate||!this.isDragging())return!1;let n=this.controllerState;if(this.touchZoom){const{scale:r}=e,i=this.getCenter(e);n=n.zoom({pos:i,scale:r})}if(this.touchRotate){const{rotation:r}=e;n=n.rotate({deltaAngleX:Ns._startPinchRotation-r})}return this.updateViewport(n,Gi,{isDragging:!0,isPanning:this.touchZoom,isZooming:this.touchZoom,isRotating:this.touchRotate}),Ns._lastPinchEvent=e,!0}_onPinchEnd(e){if(!this.isDragging())return!1;const{inertia:n}=this,{_lastPinchEvent:r}=Ns;if(this.touchZoom&&n&&r&&e.scale!==r.scale){const i=this.getCenter(e);let s=this.controllerState.rotateEnd();const o=Math.log2(e.scale),a=(o-Math.log2(r.scale))/(e.deltaTime-r.deltaTime),l=Math.pow(2,o+a*n/2);s=s.zoom({pos:i,scale:l}).zoomEnd(),this.updateViewport(s,{...this._getTransitionProps({around:i}),transitionDuration:n,transitionEasing:hf},{isDragging:!1,isPanning:this.touchZoom,isZooming:this.touchZoom,isRotating:!1}),this.blockEvents(n)}else{const i=this.controllerState.zoomEnd().rotateEnd();this.updateViewport(i,null,{isDragging:!1,isPanning:!1,isZooming:!1,isRotating:!1})}return Ns._startPinchRotation=null,Ns._lastPinchEvent=null,!0}_onDoubleTap(e){if(!this.doubleClickZoom)return!1;const n=this.getCenter(e);if(!this.isPointInBounds(n,e))return!1;const r=this.isFunctionKeyPressed(e),i=this.controllerState.zoom({pos:n,scale:r?.5:2});return this.updateViewport(i,this._getTransitionProps({around:n}),{isZooming:!0,isPanning:!0}),this.blockEvents(100),!0}_onKeyDown(e){if(!this.keyboard)return!1;const n=this.isFunctionKeyPressed(e),{zoomSpeed:r,moveSpeed:i,rotateSpeedX:s,rotateSpeedY:o}=this.keyboard===!0?{}:this.keyboard,{controllerState:a}=this;let l;const c={};switch(e.srcEvent.code){case"Minus":l=n?a.zoomOut(r).zoomOut(r):a.zoomOut(r),c.isZooming=!0;break;case"Equal":l=n?a.zoomIn(r).zoomIn(r):a.zoomIn(r),c.isZooming=!0;break;case"ArrowLeft":n?(l=a.rotateLeft(s),c.isRotating=!0):(l=a.moveLeft(i),c.isPanning=!0);break;case"ArrowRight":n?(l=a.rotateRight(s),c.isRotating=!0):(l=a.moveRight(i),c.isPanning=!0);break;case"ArrowUp":n?(l=a.rotateUp(o),c.isRotating=!0):(l=a.moveUp(i),c.isPanning=!0);break;case"ArrowDown":n?(l=a.rotateDown(o),c.isRotating=!0):(l=a.moveDown(i),c.isPanning=!0);break;default:return!1}return this.updateViewport(l,this._getTransitionProps(),c),!0}_getTransitionProps(e){const{transition:n}=this;return!n||!n.transitionInterpolator?Gi:e?{...n,transitionInterpolator:new My({...e,...n.transitionInterpolator.opts,makeViewport:this.controllerState.makeViewport})}:n}}class HT{constructor(e,n){v(this,"_viewportProps",void 0),v(this,"_state",void 0),this._viewportProps=this.applyConstraints(e),this._state=n}getViewportProps(){return this._viewportProps}getState(){return this._state}}const dC=5,wG=1.2;class SG extends HT{constructor(e){const{width:n,height:r,latitude:i,longitude:s,zoom:o,bearing:a=0,pitch:l=0,altitude:c=1.5,position:u=[0,0,0],maxZoom:f=20,minZoom:d=0,maxPitch:h=60,minPitch:g=0,startPanLngLat:A,startZoomLngLat:E,startRotatePos:p,startBearing:m,startPitch:y,startZoom:_,normalize:I=!0}=e;Rt(Number.isFinite(s)),Rt(Number.isFinite(i)),Rt(Number.isFinite(o)),super({width:n,height:r,latitude:i,longitude:s,zoom:o,bearing:a,pitch:l,altitude:c,maxZoom:f,minZoom:d,maxPitch:h,minPitch:g,normalize:I,position:u},{startPanLngLat:A,startZoomLngLat:E,startRotatePos:p,startBearing:m,startPitch:y,startZoom:_}),v(this,"makeViewport",void 0),this.makeViewport=e.makeViewport}panStart({pos:e}){return this._getUpdatedState({startPanLngLat:this._unproject(e)})}pan({pos:e,startPos:n}){const r=this.getState().startPanLngLat||this._unproject(n);if(!r)return this;const s=this.makeViewport(this.getViewportProps()).panByPosition(r,e);return this._getUpdatedState(s)}panEnd(){return this._getUpdatedState({startPanLngLat:null})}rotateStart({pos:e}){return this._getUpdatedState({startRotatePos:e,startBearing:this.getViewportProps().bearing,startPitch:this.getViewportProps().pitch})}rotate({pos:e,deltaAngleX:n=0,deltaAngleY:r=0}){const{startRotatePos:i,startBearing:s,startPitch:o}=this.getState();if(!i||s===void 0||o===void 0)return this;let a;return e?a=this._getNewRotation(e,i,o,s):a={bearing:s+n,pitch:o+r},this._getUpdatedState(a)}rotateEnd(){return this._getUpdatedState({startBearing:null,startPitch:null})}zoomStart({pos:e}){return this._getUpdatedState({startZoomLngLat:this._unproject(e),startZoom:this.getViewportProps().zoom})}zoom({pos:e,startPos:n,scale:r}){let{startZoom:i,startZoomLngLat:s}=this.getState();if(s||(i=this.getViewportProps().zoom,s=this._unproject(n)||this._unproject(e)),!s)return this;const{maxZoom:o,minZoom:a}=this.getViewportProps();let l=i+Math.log2(r);l=Pt(l,a,o);const c=this.makeViewport({...this.getViewportProps(),zoom:l});return this._getUpdatedState({zoom:l,...c.panByPosition(s,e)})}zoomEnd(){return this._getUpdatedState({startZoomLngLat:null,startZoom:null})}zoomIn(e=2){return this._zoomFromCenter(e)}zoomOut(e=2){return this._zoomFromCenter(1/e)}moveLeft(e=100){return this._panFromCenter([e,0])}moveRight(e=100){return this._panFromCenter([-e,0])}moveUp(e=100){return this._panFromCenter([0,e])}moveDown(e=100){return this._panFromCenter([0,-e])}rotateLeft(e=15){return this._getUpdatedState({bearing:this.getViewportProps().bearing-e})}rotateRight(e=15){return this._getUpdatedState({bearing:this.getViewportProps().bearing+e})}rotateUp(e=10){return this._getUpdatedState({pitch:this.getViewportProps().pitch+e})}rotateDown(e=10){return this._getUpdatedState({pitch:this.getViewportProps().pitch-e})}shortestPathFrom(e){const n=e.getViewportProps(),r={...this.getViewportProps()},{bearing:i,longitude:s}=r;return Math.abs(i-n.bearing)>180&&(r.bearing=i<0?i+360:i-360),Math.abs(s-n.longitude)>180&&(r.longitude=s<0?s+360:s-360),r}applyConstraints(e){const{maxZoom:n,minZoom:r,zoom:i}=e;e.zoom=Pt(i,r,n);const{maxPitch:s,minPitch:o,pitch:a}=e;e.pitch=Pt(a,o,s);const{normalize:l=!0}=e;return l&&Object.assign(e,M9(e)),e}_zoomFromCenter(e){const{width:n,height:r}=this.getViewportProps();return this.zoom({pos:[n/2,r/2],scale:e})}_panFromCenter(e){const{width:n,height:r}=this.getViewportProps();return this.pan({startPos:[n/2,r/2],pos:[n/2+e[0],r/2+e[1]]})}_getUpdatedState(e){return new this.constructor({makeViewport:this.makeViewport,...this.getViewportProps(),...this.getState(),...e})}_unproject(e){const n=this.makeViewport(this.getViewportProps());return e&&n.unproject(e)}_getNewRotation(e,n,r,i){const s=e[0]-n[0],o=e[1]-n[1],a=e[1],l=n[1],{width:c,height:u}=this.getViewportProps(),f=s/c;let d=0;o>0?Math.abs(u-l)>dC&&(d=o/(l-u)*wG):o<0&&l>dC&&(d=1-a/l),d=Pt(d,-1,1);const{minPitch:h,maxPitch:g}=this.getViewportProps(),A=i+180*f;let E=r;return d>0?E=r+d*(g-r):d<0&&(E=r-d*(h-r)),{pitch:E,bearing:A}}}class bG extends jT{constructor(...e){super(...e),v(this,"ControllerState",SG),v(this,"transition",{transitionDuration:300,transitionInterpolator:new My({transitionProps:{compare:["longitude","latitude","zoom","bearing","pitch","position"],required:["longitude","latitude","zoom"]}})}),v(this,"dragMode","pan")}setProps(e){e.position=e.position||[0,0,0];const n=this.props;super.setProps(e),(!n||n.height!==e.height)&&this.updateViewport(new this.ControllerState({makeViewport:this.makeViewport,...e,...this.state}))}}class WT extends fo{get ViewportType(){return vs}get ControllerType(){return bG}}v(WT,"displayName","MapView");const TG=new UT;function BG(t,e){var n,r;const i=(n=t.order)!==null&&n!==void 0?n:1/0,s=(r=e.order)!==null&&r!==void 0?r:1/0;return i-s}class RG{constructor(){v(this,"effects",void 0),v(this,"_resolvedEffects",[]),v(this,"_defaultEffects",[]),v(this,"_needsRedraw",void 0),this.effects=[],this._needsRedraw="Initial render",this._setEffects([])}addDefaultEffect(e){const n=this._defaultEffects;if(!n.find(r=>r.id===e.id)){const r=n.findIndex(i=>BG(i,e)>0);r<0?n.push(e):n.splice(r,0,e),this._setEffects(this.effects)}}setProps(e){"effects"in e&&(pr(e.effects,this.effects,1)||this._setEffects(e.effects))}needsRedraw(e={clearRedrawFlags:!1}){const n=this._needsRedraw;return e.clearRedrawFlags&&(this._needsRedraw=!1),n}getEffects(){return this._resolvedEffects}_setEffects(e){const n={};for(const i of this.effects)n[i.id]=i;const r=[];for(const i of e){const s=n[i.id];s&&s!==i?s.setProps?(s.setProps(i.props),r.push(s)):(s.cleanup(),r.push(i)):r.push(i),delete n[i.id]}for(const i in n)n[i].cleanup();this.effects=r,this._resolvedEffects=r.concat(this._defaultEffects),e.some(i=>i instanceof UT)||this._resolvedEffects.push(TG),this._needsRedraw="effects changed"}finalize(){for(const e of this._resolvedEffects)e.cleanup();this.effects.length=0,this._resolvedEffects.length=0,this._defaultEffects.length=0}}class PG extends Ry{shouldDrawLayer(e){const{operation:n}=e.props;return n.includes("draw")||n.includes("terrain")}}const LG="deckRenderer.renderLayers";class MG{constructor(e){v(this,"gl",void 0),v(this,"layerFilter",void 0),v(this,"drawPickingColors",void 0),v(this,"drawLayersPass",void 0),v(this,"pickLayersPass",void 0),v(this,"renderCount",void 0),v(this,"_needsRedraw",void 0),v(this,"renderBuffers",void 0),v(this,"lastPostProcessEffect",void 0),this.gl=e,this.layerFilter=null,this.drawPickingColors=!1,this.drawLayersPass=new PG(e),this.pickLayersPass=new zT(e),this.renderCount=0,this._needsRedraw="Initial render",this.renderBuffers=[],this.lastPostProcessEffect=null}setProps(e){this.layerFilter!==e.layerFilter&&(this.layerFilter=e.layerFilter,this._needsRedraw="layerFilter changed"),this.drawPickingColors!==e.drawPickingColors&&(this.drawPickingColors=e.drawPickingColors,this._needsRedraw="drawPickingColors changed")}renderLayers(e){if(!e.viewports.length)return;const n=this.drawPickingColors?this.pickLayersPass:this.drawLayersPass,r={layerFilter:this.layerFilter,isPicking:this.drawPickingColors,...e,target:e.target||bt.getDefaultFramebuffer(this.gl)};r.effects&&this._preRender(r.effects,r);const i=this.lastPostProcessEffect?this.renderBuffers[0]:r.target,s=n.render({...r,target:i});r.effects&&this._postRender(r.effects,r),this.renderCount++,qt(LG,this,s,e)}needsRedraw(e={clearRedrawFlags:!1}){const n=this._needsRedraw;return e.clearRedrawFlags&&(this._needsRedraw=!1),n}finalize(){const{renderBuffers:e}=this;for(const n of e)n.delete();e.length=0}_preRender(e,n){this.lastPostProcessEffect=null,n.preRenderStats=n.preRenderStats||{};for(const r of e)n.preRenderStats[r.id]=r.preRender(this.gl,n),r.postRender&&(this.lastPostProcessEffect=r.id);this.lastPostProcessEffect&&this._resizeRenderBuffers()}_resizeRenderBuffers(){const{renderBuffers:e}=this;e.length===0&&e.push(new bt(this.gl),new bt(this.gl));for(const n of e)n.resize()}_postRender(e,n){const{renderBuffers:r}=this,i={...n,inputBuffer:r[0],swapBuffer:r[1],target:null};for(const s of e)if(s.postRender){if(s.id===this.lastPostProcessEffect){i.target=n.target,s.postRender(this.gl,i);break}const o=s.postRender(this.gl,i);i.inputBuffer=o,i.swapBuffer=o===r[0]?r[1]:r[0]}}}const NG={pickedColor:null,pickedObjectIndex:-1};function OG({pickedColors:t,decodePickingColor:e,deviceX:n,deviceY:r,deviceRadius:i,deviceRect:s}){const{x:o,y:a,width:l,height:c}=s;let u=i*i,f=-1,d=0;for(let h=0;h<c;h++){const g=h+a-r,A=g*g;if(A>u)d+=4*l;else for(let E=0;E<l;E++){if(t[d+3]-1>=0){const m=E+o-n,y=m*m+A;y<=u&&(u=y,f=d)}d+=4}}if(f>=0){const h=t.slice(f,f+4),g=e(h);if(g){const A=Math.floor(f/4/l),E=f/4-A*l;return{...g,pickedColor:h,pickedX:o+E,pickedY:a+A}}be.error("Picked non-existent layer. Is picking buffer corrupt?")()}return NG}function DG({pickedColors:t,decodePickingColor:e}){const n=new Map;if(t){for(let r=0;r<t.length;r+=4)if(t[r+3]-1>=0){const s=t.slice(r,r+4),o=s.join(",");if(!n.has(o)){const a=e(s);a?n.set(o,{...a,color:s}):be.error("Picked non-existent layer. Is picking buffer corrupt?")()}}}return Array.from(n.values())}function YT({pickInfo:t,viewports:e,pixelRatio:n,x:r,y:i,z:s}){let o=e[0];e.length>1&&(o=QG((t==null?void 0:t.pickedViewports)||e,{x:r,y:i}));let a;if(o){const l=[r-o.x,i-o.y];s!==void 0&&(l[2]=s),a=o.unproject(l)}return{color:null,layer:null,viewport:o,index:-1,picked:!1,x:r,y:i,pixel:[r,i],coordinate:a,devicePixel:t&&"pickedX"in t?[t.pickedX,t.pickedY]:void 0,pixelRatio:n}}function kG(t){const{pickInfo:e,lastPickedInfo:n,mode:r,layers:i}=t,{pickedColor:s,pickedLayer:o,pickedObjectIndex:a}=e,l=o?[o]:[];if(r==="hover"){const f=n.index,d=n.layerId,h=o?o.props.id:null;if(h!==d||a!==f){if(h!==d){const g=i.find(A=>A.props.id===d);g&&l.unshift(g)}n.layerId=h,n.index=a,n.info=null}}const c=YT(t),u=new Map;return u.set(null,c),l.forEach(f=>{let d={...c};f===o&&(d.color=s,d.index=a,d.picked=!0),d=$T({layer:f,info:d,mode:r});const h=d.layer;f===o&&r==="hover"&&(n.info=d),u.set(h.id,d),r==="hover"&&h.updateAutoHighlight(d)}),u}function $T({layer:t,info:e,mode:n}){for(;t&&e;){const r=e.layer||null;e.sourceLayer=r,e.layer=t,e=t.getPickingInfo({info:e,mode:n,sourceLayer:r}),t=t.parent}return e}function QG(t,e){for(let n=t.length-1;n>=0;n--){const r=t[n];if(r.containsPixel(e))return r}return t[0]}class FG{constructor(e){v(this,"gl",void 0),v(this,"pickingFBO",void 0),v(this,"depthFBO",void 0),v(this,"pickLayersPass",void 0),v(this,"layerFilter",void 0),v(this,"lastPickedInfo",void 0),v(this,"_pickable",!0),this.gl=e,this.pickLayersPass=new zT(e),this.lastPickedInfo={index:-1,layerId:null,info:null}}setProps(e){"layerFilter"in e&&(this.layerFilter=e.layerFilter),"_pickable"in e&&(this._pickable=e._pickable)}finalize(){this.pickingFBO&&this.pickingFBO.delete(),this.depthFBO&&(this.depthFBO.color.delete(),this.depthFBO.delete())}pickObject(e){return this._pickClosestObject(e)}pickObjects(e){return this._pickVisibleObjects(e)}getLastPickedObject({x:e,y:n,layers:r,viewports:i},s=this.lastPickedInfo.info){const o=s&&s.layer&&s.layer.id,a=s&&s.viewport&&s.viewport.id,l=o?r.find(d=>d.id===o):null,c=a&&i.find(d=>d.id===a)||i[0],u=c&&c.unproject([e-c.x,n-c.y]);return{...s,...{x:e,y:n,viewport:c,coordinate:u,layer:l}}}_resizeBuffer(){var e,n;const{gl:r}=this;if(!this.pickingFBO&&(this.pickingFBO=new bt(r),bt.isSupported(r,{colorBufferFloat:!0}))){const i=new bt(r);i.attach({36064:new _n(r,{format:Te(r)?34836:6408,type:5126})}),this.depthFBO=i}(e=this.pickingFBO)===null||e===void 0||e.resize({width:r.canvas.width,height:r.canvas.height}),(n=this.depthFBO)===null||n===void 0||n.resize({width:r.canvas.width,height:r.canvas.height})}_getPickable(e){if(this._pickable===!1)return null;const n=e.filter(r=>this.pickLayersPass.shouldDrawLayer(r)&&!r.isComposite);return n.length?n:null}_pickClosestObject({layers:e,views:n,viewports:r,x:i,y:s,radius:o=0,depth:a=1,mode:l="query",unproject3D:c,onViewportActive:u,effects:f}){const d=this._getPickable(e),h=La(this.gl);if(!d)return{result:[],emptyInfo:YT({viewports:r,x:i,y:s,pixelRatio:h})};this._resizeBuffer();const g=OA(this.gl,[i,s],!0),A=[g.x+Math.floor(g.width/2),g.y+Math.floor(g.height/2)],E=Math.round(o*h),{width:p,height:m}=this.pickingFBO,y=this._getPickingRect({deviceX:A[0],deviceY:A[1],deviceRadius:E,deviceWidth:p,deviceHeight:m}),_={x:i-o,y:s-o,width:o*2+1,height:o*2+1};let I;const C=[],b=new Set;for(let B=0;B<a;B++){let R;if(y){const U=this._drawAndSample({layers:d,views:n,viewports:r,onViewportActive:u,deviceRect:y,cullRect:_,effects:f,pass:"picking:".concat(l)});R=OG({...U,deviceX:A[0],deviceY:A[1],deviceRadius:E,deviceRect:y})}else R={pickedColor:null,pickedObjectIndex:-1};let M;if(R.pickedLayer&&c&&this.depthFBO){const{pickedColors:U}=this._drawAndSample({layers:[R.pickedLayer],views:n,viewports:r,onViewportActive:u,deviceRect:{x:R.pickedX,y:R.pickedY,width:1,height:1},cullRect:_,effects:f,pass:"picking:".concat(l,":z")},!0);U[3]&&(M=U[0])}R.pickedLayer&&B+1<a&&(b.add(R.pickedLayer),R.pickedLayer.disablePickingIndex(R.pickedObjectIndex)),I=kG({pickInfo:R,lastPickedInfo:this.lastPickedInfo,mode:l,layers:d,viewports:r,x:i,y:s,z:M,pixelRatio:h});for(const U of I.values())U.layer&&C.push(U);if(!R.pickedColor)break}for(const B of b)B.restorePickingColors();return{result:C,emptyInfo:I.get(null)}}_pickVisibleObjects({layers:e,views:n,viewports:r,x:i,y:s,width:o=1,height:a=1,mode:l="query",maxObjects:c=null,onViewportActive:u,effects:f}){const d=this._getPickable(e);if(!d)return[];this._resizeBuffer();const h=La(this.gl),g=OA(this.gl,[i,s],!0),A=g.x,E=g.y+g.height,p=OA(this.gl,[i+o,s+a],!0),m=p.x+p.width,y=p.y,_={x:A,y,width:m-A,height:E-y},I=this._drawAndSample({layers:d,views:n,viewports:r,onViewportActive:u,deviceRect:_,cullRect:{x:i,y:s,width:o,height:a},effects:f,pass:"picking:".concat(l)}),C=DG(I),b=new Map,B=Number.isFinite(c);for(let M=0;M<C.length;M++){var R;if(B&&c&&b.size>=c)break;const U=C[M];let G={color:U.pickedColor,layer:null,index:U.pickedObjectIndex,picked:!0,x:i,y:s,pixelRatio:h};G=$T({layer:U.pickedLayer,info:G,mode:l});const Y=(R=G.object)!==null&&R!==void 0?R:"".concat(G.layer.id,"[").concat(G.index,"]");b.has(Y)||b.set(Y,G)}return Array.from(b.values())}_drawAndSample({layers:e,views:n,viewports:r,onViewportActive:i,deviceRect:s,cullRect:o,effects:a,pass:l},c=!1){const u=c?this.depthFBO:this.pickingFBO,f={layers:e,layerFilter:this.layerFilter,views:n,viewports:r,onViewportActive:i,pickingFBO:u,deviceRect:s,cullRect:o,effects:a,pass:l,pickZ:c,preRenderStats:{}};for(const m of a)m.useInPicking&&(f.preRenderStats[m.id]=m.preRender(this.gl,f));const{decodePickingColor:d}=this.pickLayersPass.render(f),{x:h,y:g,width:A,height:E}=s,p=new(c?Float32Array:Uint8Array)(A*E*4);return tg(u,{sourceX:h,sourceY:g,sourceWidth:A,sourceHeight:E,target:p}),{pickedColors:p,decodePickingColor:d}}_getPickingRect({deviceX:e,deviceY:n,deviceRadius:r,deviceWidth:i,deviceHeight:s}){const o=Math.max(0,e-r),a=Math.max(0,n-r),l=Math.min(i,e+r+1)-o,c=Math.min(s,n+r+1)-a;return l<=0||c<=0?null:{x:o,y:a,width:l,height:c}}}const UG={zIndex:"1",position:"absolute",pointerEvents:"none",color:"#a0a7b4",backgroundColor:"#29323c",padding:"10px",top:"0",left:"0",display:"none"};class GG{constructor(e){v(this,"el",null),v(this,"isVisible",!1);const n=e.parentElement;n&&(this.el=document.createElement("div"),this.el.className="deck-tooltip",Object.assign(this.el.style,UG),n.appendChild(this.el))}setTooltip(e,n,r){const i=this.el;if(i){if(typeof e=="string")i.innerText=e;else if(e)e.text&&(i.innerText=e.text),e.html&&(i.innerHTML=e.html),e.className&&(i.className=e.className);else{this.isVisible=!1,i.style.display="none";return}this.isVisible=!0,i.style.display="block",i.style.transform="translate(".concat(n,"px, ").concat(r,"px)"),e&&typeof e=="object"&&"style"in e&&Object.assign(i.style,e.style)}}remove(){this.el&&(this.el.remove(),this.el=null)}}var KT={exports:{}};/*! Hammer.JS - v2.0.7 - 2016-04-22
 * http://hammerjs.github.io/
 *
 * Copyright (c) 2016 Jorik Tangelder;
 * Licensed under the MIT license */(function(t){(function(e,n,r,i){var s=["","webkit","Moz","MS","ms","o"],o=n.createElement("div"),a="function",l=Math.round,c=Math.abs,u=Date.now;function f(x,w,T){return setTimeout(y(x,T),w)}function d(x,w,T){return Array.isArray(x)?(h(x,T[w],T),!0):!1}function h(x,w,T){var N;if(x)if(x.forEach)x.forEach(w,T);else if(x.length!==i)for(N=0;N<x.length;)w.call(T,x[N],N,x),N++;else for(N in x)x.hasOwnProperty(N)&&w.call(T,x[N],N,x)}function g(x,w,T){var N="DEPRECATED METHOD: "+w+`
`+T+` AT 
`;return function(){var W=new Error("get-stack-trace"),te=W&&W.stack?W.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",Be=e.console&&(e.console.warn||e.console.log);return Be&&Be.call(e.console,N,te),x.apply(this,arguments)}}var A;typeof Object.assign!="function"?A=function(w){if(w===i||w===null)throw new TypeError("Cannot convert undefined or null to object");for(var T=Object(w),N=1;N<arguments.length;N++){var W=arguments[N];if(W!==i&&W!==null)for(var te in W)W.hasOwnProperty(te)&&(T[te]=W[te])}return T}:A=Object.assign;var E=g(function(w,T,N){for(var W=Object.keys(T),te=0;te<W.length;)(!N||N&&w[W[te]]===i)&&(w[W[te]]=T[W[te]]),te++;return w},"extend","Use `assign`."),p=g(function(w,T){return E(w,T,!0)},"merge","Use `assign`.");function m(x,w,T){var N=w.prototype,W;W=x.prototype=Object.create(N),W.constructor=x,W._super=N,T&&A(W,T)}function y(x,w){return function(){return x.apply(w,arguments)}}function _(x,w){return typeof x==a?x.apply(w&&w[0]||i,w):x}function I(x,w){return x===i?w:x}function C(x,w,T){h(M(w),function(N){x.addEventListener(N,T,!1)})}function b(x,w,T){h(M(w),function(N){x.removeEventListener(N,T,!1)})}function B(x,w){for(;x;){if(x==w)return!0;x=x.parentNode}return!1}function R(x,w){return x.indexOf(w)>-1}function M(x){return x.trim().split(/\s+/g)}function U(x,w,T){if(x.indexOf&&!T)return x.indexOf(w);for(var N=0;N<x.length;){if(T&&x[N][T]==w||!T&&x[N]===w)return N;N++}return-1}function G(x){return Array.prototype.slice.call(x,0)}function Y(x,w,T){for(var N=[],W=[],te=0;te<x.length;){var Be=w?x[te][w]:x[te];U(W,Be)<0&&N.push(x[te]),W[te]=Be,te++}return T&&(w?N=N.sort(function(Ot,nn){return Ot[w]>nn[w]}):N=N.sort()),N}function Z(x,w){for(var T,N,W=w[0].toUpperCase()+w.slice(1),te=0;te<s.length;){if(T=s[te],N=T?T+W:w,N in x)return N;te++}return i}var oe=1;function ue(){return oe++}function Ee(x){var w=x.ownerDocument||x;return w.defaultView||w.parentWindow||e}var D=/mobile|tablet|ip(ad|hone|od)|android/i,X="ontouchstart"in e,P=Z(e,"PointerEvent")!==i,L=X&&D.test(navigator.userAgent),O="touch",z="pen",F="mouse",V="kinect",Q=25,j=1,ge=2,ae=4,ve=8,fe=1,Ie=2,Se=4,we=8,_t=16,he=Ie|Se,Me=we|_t,Vt=he|Me,ht=["x","y"],gt=["clientX","clientY"];function Fe(x,w){var T=this;this.manager=x,this.callback=w,this.element=x.element,this.target=x.options.inputTarget,this.domHandler=function(N){_(x.options.enable,[x])&&T.handler(N)},this.init()}Fe.prototype={handler:function(){},init:function(){this.evEl&&C(this.element,this.evEl,this.domHandler),this.evTarget&&C(this.target,this.evTarget,this.domHandler),this.evWin&&C(Ee(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&b(this.element,this.evEl,this.domHandler),this.evTarget&&b(this.target,this.evTarget,this.domHandler),this.evWin&&b(Ee(this.element),this.evWin,this.domHandler)}};function Pe(x){var w,T=x.options.inputClass;return T?w=T:P?w=ir:L?w=Ae:X?w=An:w=gn,new w(x,We)}function We(x,w,T){var N=T.pointers.length,W=T.changedPointers.length,te=w&j&&N-W===0,Be=w&(ae|ve)&&N-W===0;T.isFirst=!!te,T.isFinal=!!Be,te&&(x.session={}),T.eventType=w,rt(x,T),x.emit("hammer.input",T),x.recognize(T),x.session.prevInput=T}function rt(x,w){var T=x.session,N=w.pointers,W=N.length;T.firstInput||(T.firstInput=Pi(w)),W>1&&!T.firstMultiple?T.firstMultiple=Pi(w):W===1&&(T.firstMultiple=!1);var te=T.firstInput,Be=T.firstMultiple,Tt=Be?Be.center:te.center,Ot=w.center=Ct(N);w.timeStamp=u(),w.deltaTime=w.timeStamp-te.timeStamp,w.angle=nr(Tt,Ot),w.distance=vt(Tt,Ot),tn(T,w),w.offsetDirection=tr(w.deltaX,w.deltaY);var nn=De(w.deltaTime,w.deltaX,w.deltaY);w.overallVelocityX=nn.x,w.overallVelocityY=nn.y,w.overallVelocity=c(nn.x)>c(nn.y)?nn.x:nn.y,w.scale=Be?tl(Be.pointers,N):1,w.rotation=Be?rr(Be.pointers,N):0,w.maxPointers=T.prevInput?w.pointers.length>T.prevInput.maxPointers?w.pointers.length:T.prevInput.maxPointers:w.pointers.length,jt(T,w);var br=x.element;B(w.srcEvent.target,br)&&(br=w.srcEvent.target),w.target=br}function tn(x,w){var T=w.center,N=x.offsetDelta||{},W=x.prevDelta||{},te=x.prevInput||{};(w.eventType===j||te.eventType===ae)&&(W=x.prevDelta={x:te.deltaX||0,y:te.deltaY||0},N=x.offsetDelta={x:T.x,y:T.y}),w.deltaX=W.x+(T.x-N.x),w.deltaY=W.y+(T.y-N.y)}function jt(x,w){var T=x.lastInterval||w,N=w.timeStamp-T.timeStamp,W,te,Be,Tt;if(w.eventType!=ve&&(N>Q||T.velocity===i)){var Ot=w.deltaX-T.deltaX,nn=w.deltaY-T.deltaY,br=De(N,Ot,nn);te=br.x,Be=br.y,W=c(br.x)>c(br.y)?br.x:br.y,Tt=tr(Ot,nn),x.lastInterval=w}else W=T.velocity,te=T.velocityX,Be=T.velocityY,Tt=T.direction;w.velocity=W,w.velocityX=te,w.velocityY=Be,w.direction=Tt}function Pi(x){for(var w=[],T=0;T<x.pointers.length;)w[T]={clientX:l(x.pointers[T].clientX),clientY:l(x.pointers[T].clientY)},T++;return{timeStamp:u(),pointers:w,center:Ct(w),deltaX:x.deltaX,deltaY:x.deltaY}}function Ct(x){var w=x.length;if(w===1)return{x:l(x[0].clientX),y:l(x[0].clientY)};for(var T=0,N=0,W=0;W<w;)T+=x[W].clientX,N+=x[W].clientY,W++;return{x:l(T/w),y:l(N/w)}}function De(x,w,T){return{x:w/x||0,y:T/x||0}}function tr(x,w){return x===w?fe:c(x)>=c(w)?x<0?Ie:Se:w<0?we:_t}function vt(x,w,T){T||(T=ht);var N=w[T[0]]-x[T[0]],W=w[T[1]]-x[T[1]];return Math.sqrt(N*N+W*W)}function nr(x,w,T){T||(T=ht);var N=w[T[0]]-x[T[0]],W=w[T[1]]-x[T[1]];return Math.atan2(W,N)*180/Math.PI}function rr(x,w){return nr(w[1],w[0],gt)+nr(x[1],x[0],gt)}function tl(x,w){return vt(w[0],w[1],gt)/vt(x[0],x[1],gt)}var nl={mousedown:j,mousemove:ge,mouseup:ae},rl="mousedown",ye="mousemove mouseup";function gn(){this.evEl=rl,this.evWin=ye,this.pressed=!1,Fe.apply(this,arguments)}m(gn,Fe,{handler:function(w){var T=nl[w.type];T&j&&w.button===0&&(this.pressed=!0),T&ge&&w.which!==1&&(T=ae),this.pressed&&(T&ae&&(this.pressed=!1),this.callback(this.manager,T,{pointers:[w],changedPointers:[w],pointerType:F,srcEvent:w}))}});var il={pointerdown:j,pointermove:ge,pointerup:ae,pointercancel:ve,pointerout:ve},Rs={2:O,3:z,4:F,5:V},Un="pointerdown",Ps="pointermove pointerup pointercancel";e.MSPointerEvent&&!e.PointerEvent&&(Un="MSPointerDown",Ps="MSPointerMove MSPointerUp MSPointerCancel");function ir(){this.evEl=Un,this.evWin=Ps,Fe.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}m(ir,Fe,{handler:function(w){var T=this.store,N=!1,W=w.type.toLowerCase().replace("ms",""),te=il[W],Be=Rs[w.pointerType]||w.pointerType,Tt=Be==O,Ot=U(T,w.pointerId,"pointerId");te&j&&(w.button===0||Tt)?Ot<0&&(T.push(w),Ot=T.length-1):te&(ae|ve)&&(N=!0),!(Ot<0)&&(T[Ot]=w,this.callback(this.manager,te,{pointers:T,changedPointers:[w],pointerType:Be,srcEvent:w}),N&&T.splice(Ot,1))}});var Yr={touchstart:j,touchmove:ge,touchend:ae,touchcancel:ve},sl="touchstart",yg="touchstart touchmove touchend touchcancel";function ol(){this.evTarget=sl,this.evWin=yg,this.started=!1,Fe.apply(this,arguments)}m(ol,Fe,{handler:function(w){var T=Yr[w.type];if(T===j&&(this.started=!0),!!this.started){var N=Eg.call(this,w,T);T&(ae|ve)&&N[0].length-N[1].length===0&&(this.started=!1),this.callback(this.manager,T,{pointers:N[0],changedPointers:N[1],pointerType:O,srcEvent:w})}}});function Eg(x,w){var T=G(x.touches),N=G(x.changedTouches);return w&(ae|ve)&&(T=Y(T.concat(N),"identifier",!0)),[T,N]}var _g={touchstart:j,touchmove:ge,touchend:ae,touchcancel:ve},ce="touchstart touchmove touchend touchcancel";function Ae(){this.evTarget=ce,this.targetIds={},Fe.apply(this,arguments)}m(Ae,Fe,{handler:function(w){var T=_g[w.type],N=it.call(this,w,T);N&&this.callback(this.manager,T,{pointers:N[0],changedPointers:N[1],pointerType:O,srcEvent:w})}});function it(x,w){var T=G(x.touches),N=this.targetIds;if(w&(j|ge)&&T.length===1)return N[T[0].identifier]=!0,[T,T];var W,te,Be=G(x.changedTouches),Tt=[],Ot=this.target;if(te=T.filter(function(nn){return B(nn.target,Ot)}),w===j)for(W=0;W<te.length;)N[te[W].identifier]=!0,W++;for(W=0;W<Be.length;)N[Be[W].identifier]&&Tt.push(Be[W]),w&(ae|ve)&&delete N[Be[W].identifier],W++;if(Tt.length)return[Y(te.concat(Tt),"identifier",!0),Tt]}var lt=2500,ze=25;function An(){Fe.apply(this,arguments);var x=y(this.handler,this);this.touch=new Ae(this.manager,x),this.mouse=new gn(this.manager,x),this.primaryTouch=null,this.lastTouches=[]}m(An,Fe,{handler:function(w,T,N){var W=N.pointerType==O,te=N.pointerType==F;if(!(te&&N.sourceCapabilities&&N.sourceCapabilities.firesTouchEvents)){if(W)Ye.call(this,T,N);else if(te&&Li.call(this,N))return;this.callback(w,T,N)}},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});function Ye(x,w){x&j?(this.primaryTouch=w.changedPointers[0].identifier,bo.call(this,w)):x&(ae|ve)&&bo.call(this,w)}function bo(x){var w=x.changedPointers[0];if(w.identifier===this.primaryTouch){var T={x:w.clientX,y:w.clientY};this.lastTouches.push(T);var N=this.lastTouches,W=function(){var te=N.indexOf(T);te>-1&&N.splice(te,1)};setTimeout(W,lt)}}function Li(x){for(var w=x.srcEvent.clientX,T=x.srcEvent.clientY,N=0;N<this.lastTouches.length;N++){var W=this.lastTouches[N],te=Math.abs(w-W.x),Be=Math.abs(T-W.y);if(te<=ze&&Be<=ze)return!0}return!1}var To=Z(o.style,"touchAction"),Bo=To!==i,Eu="compute",_u="auto",$r="manipulation",yt="none",Mi="pan-x",Ls="pan-y",sr=SB();function al(x,w){this.manager=x,this.set(w)}al.prototype={set:function(x){x==Eu&&(x=this.compute()),Bo&&this.manager.element.style&&sr[x]&&(this.manager.element.style[To]=x),this.actions=x.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var x=[];return h(this.manager.recognizers,function(w){_(w.options.enable,[w])&&(x=x.concat(w.getTouchAction()))}),xg(x.join(" "))},preventDefaults:function(x){var w=x.srcEvent,T=x.offsetDirection;if(this.manager.session.prevented){w.preventDefault();return}var N=this.actions,W=R(N,yt)&&!sr[yt],te=R(N,Ls)&&!sr[Ls],Be=R(N,Mi)&&!sr[Mi];if(W){var Tt=x.pointers.length===1,Ot=x.distance<2,nn=x.deltaTime<250;if(Tt&&Ot&&nn)return}if(!(Be&&te)&&(W||te&&T&he||Be&&T&Me))return this.preventSrc(w)},preventSrc:function(x){this.manager.session.prevented=!0,x.preventDefault()}};function xg(x){if(R(x,yt))return yt;var w=R(x,Mi),T=R(x,Ls);return w&&T?yt:w||T?w?Mi:Ls:R(x,$r)?$r:_u}function SB(){if(!Bo)return!1;var x={},w=e.CSS&&e.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach(function(T){x[T]=w?e.CSS.supports("touch-action",T):!0}),x}var xu=1,Gn=2,Ro=4,Ni=8,Kr=Ni,ll=16,Sr=32;function qr(x){this.options=A({},this.defaults,x||{}),this.id=ue(),this.manager=null,this.options.enable=I(this.options.enable,!0),this.state=xu,this.simultaneous={},this.requireFail=[]}qr.prototype={defaults:{},set:function(x){return A(this.options,x),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(x){if(d(x,"recognizeWith",this))return this;var w=this.simultaneous;return x=Cu(x,this),w[x.id]||(w[x.id]=x,x.recognizeWith(this)),this},dropRecognizeWith:function(x){return d(x,"dropRecognizeWith",this)?this:(x=Cu(x,this),delete this.simultaneous[x.id],this)},requireFailure:function(x){if(d(x,"requireFailure",this))return this;var w=this.requireFail;return x=Cu(x,this),U(w,x)===-1&&(w.push(x),x.requireFailure(this)),this},dropRequireFailure:function(x){if(d(x,"dropRequireFailure",this))return this;x=Cu(x,this);var w=U(this.requireFail,x);return w>-1&&this.requireFail.splice(w,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(x){return!!this.simultaneous[x.id]},emit:function(x){var w=this,T=this.state;function N(W){w.manager.emit(W,x)}T<Ni&&N(w.options.event+SE(T)),N(w.options.event),x.additionalEvent&&N(x.additionalEvent),T>=Ni&&N(w.options.event+SE(T))},tryEmit:function(x){if(this.canEmit())return this.emit(x);this.state=Sr},canEmit:function(){for(var x=0;x<this.requireFail.length;){if(!(this.requireFail[x].state&(Sr|xu)))return!1;x++}return!0},recognize:function(x){var w=A({},x);if(!_(this.options.enable,[this,w])){this.reset(),this.state=Sr;return}this.state&(Kr|ll|Sr)&&(this.state=xu),this.state=this.process(w),this.state&(Gn|Ro|Ni|ll)&&this.tryEmit(w)},process:function(x){},getTouchAction:function(){},reset:function(){}};function SE(x){return x&ll?"cancel":x&Ni?"end":x&Ro?"move":x&Gn?"start":""}function bE(x){return x==_t?"down":x==we?"up":x==Ie?"left":x==Se?"right":""}function Cu(x,w){var T=w.manager;return T?T.get(x):x}function or(){qr.apply(this,arguments)}m(or,qr,{defaults:{pointers:1},attrTest:function(x){var w=this.options.pointers;return w===0||x.pointers.length===w},process:function(x){var w=this.state,T=x.eventType,N=w&(Gn|Ro),W=this.attrTest(x);return N&&(T&ve||!W)?w|ll:N||W?T&ae?w|Ni:w&Gn?w|Ro:Gn:Sr}});function Iu(){or.apply(this,arguments),this.pX=null,this.pY=null}m(Iu,or,{defaults:{event:"pan",threshold:10,pointers:1,direction:Vt},getTouchAction:function(){var x=this.options.direction,w=[];return x&he&&w.push(Ls),x&Me&&w.push(Mi),w},directionTest:function(x){var w=this.options,T=!0,N=x.distance,W=x.direction,te=x.deltaX,Be=x.deltaY;return W&w.direction||(w.direction&he?(W=te===0?fe:te<0?Ie:Se,T=te!=this.pX,N=Math.abs(x.deltaX)):(W=Be===0?fe:Be<0?we:_t,T=Be!=this.pY,N=Math.abs(x.deltaY))),x.direction=W,T&&N>w.threshold&&W&w.direction},attrTest:function(x){return or.prototype.attrTest.call(this,x)&&(this.state&Gn||!(this.state&Gn)&&this.directionTest(x))},emit:function(x){this.pX=x.deltaX,this.pY=x.deltaY;var w=bE(x.direction);w&&(x.additionalEvent=this.options.event+w),this._super.emit.call(this,x)}});function Cg(){or.apply(this,arguments)}m(Cg,or,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[yt]},attrTest:function(x){return this._super.attrTest.call(this,x)&&(Math.abs(x.scale-1)>this.options.threshold||this.state&Gn)},emit:function(x){if(x.scale!==1){var w=x.scale<1?"in":"out";x.additionalEvent=this.options.event+w}this._super.emit.call(this,x)}});function Ig(){qr.apply(this,arguments),this._timer=null,this._input=null}m(Ig,qr,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return[_u]},process:function(x){var w=this.options,T=x.pointers.length===w.pointers,N=x.distance<w.threshold,W=x.deltaTime>w.time;if(this._input=x,!N||!T||x.eventType&(ae|ve)&&!W)this.reset();else if(x.eventType&j)this.reset(),this._timer=f(function(){this.state=Kr,this.tryEmit()},w.time,this);else if(x.eventType&ae)return Kr;return Sr},reset:function(){clearTimeout(this._timer)},emit:function(x){this.state===Kr&&(x&&x.eventType&ae?this.manager.emit(this.options.event+"up",x):(this._input.timeStamp=u(),this.manager.emit(this.options.event,this._input)))}});function wg(){or.apply(this,arguments)}m(wg,or,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[yt]},attrTest:function(x){return this._super.attrTest.call(this,x)&&(Math.abs(x.rotation)>this.options.threshold||this.state&Gn)}});function Sg(){or.apply(this,arguments)}m(Sg,or,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:he|Me,pointers:1},getTouchAction:function(){return Iu.prototype.getTouchAction.call(this)},attrTest:function(x){var w=this.options.direction,T;return w&(he|Me)?T=x.overallVelocity:w&he?T=x.overallVelocityX:w&Me&&(T=x.overallVelocityY),this._super.attrTest.call(this,x)&&w&x.offsetDirection&&x.distance>this.options.threshold&&x.maxPointers==this.options.pointers&&c(T)>this.options.velocity&&x.eventType&ae},emit:function(x){var w=bE(x.offsetDirection);w&&this.manager.emit(this.options.event+w,x),this.manager.emit(this.options.event,x)}});function wu(){qr.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}m(wu,qr,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[$r]},process:function(x){var w=this.options,T=x.pointers.length===w.pointers,N=x.distance<w.threshold,W=x.deltaTime<w.time;if(this.reset(),x.eventType&j&&this.count===0)return this.failTimeout();if(N&&W&&T){if(x.eventType!=ae)return this.failTimeout();var te=this.pTime?x.timeStamp-this.pTime<w.interval:!0,Be=!this.pCenter||vt(this.pCenter,x.center)<w.posThreshold;this.pTime=x.timeStamp,this.pCenter=x.center,!Be||!te?this.count=1:this.count+=1,this._input=x;var Tt=this.count%w.taps;if(Tt===0)return this.hasRequireFailures()?(this._timer=f(function(){this.state=Kr,this.tryEmit()},w.interval,this),Gn):Kr}return Sr},failTimeout:function(){return this._timer=f(function(){this.state=Sr},this.options.interval,this),Sr},reset:function(){clearTimeout(this._timer)},emit:function(){this.state==Kr&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}});function Xr(x,w){return w=w||{},w.recognizers=I(w.recognizers,Xr.defaults.preset),new bg(x,w)}Xr.VERSION="2.0.7",Xr.defaults={domEvents:!1,touchAction:Eu,enable:!0,inputTarget:null,inputClass:null,preset:[[wg,{enable:!1}],[Cg,{enable:!1},["rotate"]],[Sg,{direction:he}],[Iu,{direction:he},["swipe"]],[wu],[wu,{event:"doubletap",taps:2},["tap"]],[Ig]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}};var bB=1,TE=2;function bg(x,w){this.options=A({},Xr.defaults,w||{}),this.options.inputTarget=this.options.inputTarget||x,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=x,this.input=Pe(this),this.touchAction=new al(this,this.options.touchAction),BE(this,!0),h(this.options.recognizers,function(T){var N=this.add(new T[0](T[1]));T[2]&&N.recognizeWith(T[2]),T[3]&&N.requireFailure(T[3])},this)}bg.prototype={set:function(x){return A(this.options,x),x.touchAction&&this.touchAction.update(),x.inputTarget&&(this.input.destroy(),this.input.target=x.inputTarget,this.input.init()),this},stop:function(x){this.session.stopped=x?TE:bB},recognize:function(x){var w=this.session;if(!w.stopped){this.touchAction.preventDefaults(x);var T,N=this.recognizers,W=w.curRecognizer;(!W||W&&W.state&Kr)&&(W=w.curRecognizer=null);for(var te=0;te<N.length;)T=N[te],w.stopped!==TE&&(!W||T==W||T.canRecognizeWith(W))?T.recognize(x):T.reset(),!W&&T.state&(Gn|Ro|Ni)&&(W=w.curRecognizer=T),te++}},get:function(x){if(x instanceof qr)return x;for(var w=this.recognizers,T=0;T<w.length;T++)if(w[T].options.event==x)return w[T];return null},add:function(x){if(d(x,"add",this))return this;var w=this.get(x.options.event);return w&&this.remove(w),this.recognizers.push(x),x.manager=this,this.touchAction.update(),x},remove:function(x){if(d(x,"remove",this))return this;if(x=this.get(x),x){var w=this.recognizers,T=U(w,x);T!==-1&&(w.splice(T,1),this.touchAction.update())}return this},on:function(x,w){if(x!==i&&w!==i){var T=this.handlers;return h(M(x),function(N){T[N]=T[N]||[],T[N].push(w)}),this}},off:function(x,w){if(x!==i){var T=this.handlers;return h(M(x),function(N){w?T[N]&&T[N].splice(U(T[N],w),1):delete T[N]}),this}},emit:function(x,w){this.options.domEvents&&TB(x,w);var T=this.handlers[x]&&this.handlers[x].slice();if(!(!T||!T.length)){w.type=x,w.preventDefault=function(){w.srcEvent.preventDefault()};for(var N=0;N<T.length;)T[N](w),N++}},destroy:function(){this.element&&BE(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}};function BE(x,w){var T=x.element;if(T.style){var N;h(x.options.cssProps,function(W,te){N=Z(T.style,te),w?(x.oldCssProps[N]=T.style[N],T.style[N]=W):T.style[N]=x.oldCssProps[N]||""}),w||(x.oldCssProps={})}}function TB(x,w){var T=n.createEvent("Event");T.initEvent(x,!0,!0),T.gesture=w,w.target.dispatchEvent(T)}A(Xr,{INPUT_START:j,INPUT_MOVE:ge,INPUT_END:ae,INPUT_CANCEL:ve,STATE_POSSIBLE:xu,STATE_BEGAN:Gn,STATE_CHANGED:Ro,STATE_ENDED:Ni,STATE_RECOGNIZED:Kr,STATE_CANCELLED:ll,STATE_FAILED:Sr,DIRECTION_NONE:fe,DIRECTION_LEFT:Ie,DIRECTION_RIGHT:Se,DIRECTION_UP:we,DIRECTION_DOWN:_t,DIRECTION_HORIZONTAL:he,DIRECTION_VERTICAL:Me,DIRECTION_ALL:Vt,Manager:bg,Input:Fe,TouchAction:al,TouchInput:Ae,MouseInput:gn,PointerEventInput:ir,TouchMouseInput:An,SingleTouchInput:ol,Recognizer:qr,AttrRecognizer:or,Tap:wu,Pan:Iu,Swipe:Sg,Pinch:Cg,Rotate:wg,Press:Ig,on:C,off:b,each:h,merge:p,extend:E,assign:A,inherit:m,bindFn:y,prefixed:Z});var BB=typeof e<"u"?e:typeof self<"u"?self:{};BB.Hammer=Xr,typeof i=="function"&&i.amd?i(function(){return Xr}):t.exports?t.exports=Xr:e[r]=Xr})(window,document,"Hammer")})(KT);var uu=KT.exports;const zG=Fc(uu),Rr=LB({__proto__:null,default:zG},[uu]),qT=1,XT=2,em=4,VG={mousedown:qT,mousemove:XT,mouseup:em};function jG(t,e){for(let n=0;n<t.length;n++)if(e(t[n]))return!0;return!1}function HG(t){const e=t.prototype.handler;t.prototype.handler=function(r){const i=this.store;r.button>0&&r.type==="pointerdown"&&(jG(i,s=>s.pointerId===r.pointerId)||i.push(r)),e.call(this,r)}}function WG(t){t.prototype.handler=function(n){let r=VG[n.type];r&qT&&n.button>=0&&(this.pressed=!0),r&XT&&n.which===0&&(r=em),this.pressed&&(r&em&&(this.pressed=!1),this.callback(this.manager,r,{pointers:[n],changedPointers:[n],pointerType:"mouse",srcEvent:n}))}}HG(uu.PointerEventInput);WG(uu.MouseInput);const YG=uu.Manager;class ig{constructor(e,n,r){this.element=e,this.callback=n,this.options={enable:!0,...r}}}const $G=Rr?[[Rr.Pan,{event:"tripan",pointers:3,threshold:0,enable:!1}],[Rr.Rotate,{enable:!1}],[Rr.Pinch,{enable:!1}],[Rr.Swipe,{enable:!1}],[Rr.Pan,{threshold:0,enable:!1}],[Rr.Press,{enable:!1}],[Rr.Tap,{event:"doubletap",taps:2,enable:!1}],[Rr.Tap,{event:"anytap",enable:!1}],[Rr.Tap,{enable:!1}]]:null,hC={tripan:["rotate","pinch","pan"],rotate:["pinch"],pinch:["pan"],pan:["press","doubletap","anytap","tap"],doubletap:["anytap"],anytap:["tap"]},KG={doubletap:["tap"]},qG={pointerdown:"pointerdown",pointermove:"pointermove",pointerup:"pointerup",touchstart:"pointerdown",touchmove:"pointermove",touchend:"pointerup",mousedown:"pointerdown",mousemove:"pointermove",mouseup:"pointerup"},Ny={KEY_EVENTS:["keydown","keyup"],MOUSE_EVENTS:["mousedown","mousemove","mouseup","mouseover","mouseout","mouseleave"],WHEEL_EVENTS:["wheel","mousewheel"]},XG={tap:"tap",anytap:"anytap",doubletap:"doubletap",press:"press",pinch:"pinch",pinchin:"pinch",pinchout:"pinch",pinchstart:"pinch",pinchmove:"pinch",pinchend:"pinch",pinchcancel:"pinch",rotate:"rotate",rotatestart:"rotate",rotatemove:"rotate",rotateend:"rotate",rotatecancel:"rotate",tripan:"tripan",tripanstart:"tripan",tripanmove:"tripan",tripanup:"tripan",tripandown:"tripan",tripanleft:"tripan",tripanright:"tripan",tripanend:"tripan",tripancancel:"tripan",pan:"pan",panstart:"pan",panmove:"pan",panup:"pan",pandown:"pan",panleft:"pan",panright:"pan",panend:"pan",pancancel:"pan",swipe:"swipe",swipeleft:"swipe",swiperight:"swipe",swipeup:"swipe",swipedown:"swipe"},gC={click:"tap",anyclick:"anytap",dblclick:"doubletap",mousedown:"pointerdown",mousemove:"pointermove",mouseup:"pointerup",mouseover:"pointerover",mouseout:"pointerout",mouseleave:"pointerleave"},ZG=typeof navigator<"u"&&navigator.userAgent?navigator.userAgent.toLowerCase():"",aa=typeof window<"u"?window:global;let tm=!1;try{const t={get passive(){return tm=!0,!0}};aa.addEventListener("test",null,t),aa.removeEventListener("test",null)}catch{tm=!1}const JG=ZG.indexOf("firefox")!==-1,{WHEEL_EVENTS:ez}=Ny,AC="wheel",pC=4.000244140625,tz=40,nz=.25;class rz extends ig{constructor(e,n,r){super(e,n,r),this.handleEvent=i=>{if(!this.options.enable)return;let s=i.deltaY;aa.WheelEvent&&(JG&&i.deltaMode===aa.WheelEvent.DOM_DELTA_PIXEL&&(s/=aa.devicePixelRatio),i.deltaMode===aa.WheelEvent.DOM_DELTA_LINE&&(s*=tz)),s!==0&&s%pC===0&&(s=Math.floor(s/pC)),i.shiftKey&&s&&(s=s*nz),this.callback({type:AC,center:{x:i.clientX,y:i.clientY},delta:-s,srcEvent:i,pointerType:"mouse",target:i.target})},this.events=(this.options.events||[]).concat(ez),this.events.forEach(i=>e.addEventListener(i,this.handleEvent,tm?{passive:!1}:!1))}destroy(){this.events.forEach(e=>this.element.removeEventListener(e,this.handleEvent))}enableEventType(e,n){e===AC&&(this.options.enable=n)}}const{MOUSE_EVENTS:iz}=Ny,mC="pointermove",vC="pointerover",yC="pointerout",EC="pointerenter",_C="pointerleave";class sz extends ig{constructor(e,n,r){super(e,n,r),this.handleEvent=s=>{this.handleOverEvent(s),this.handleOutEvent(s),this.handleEnterEvent(s),this.handleLeaveEvent(s),this.handleMoveEvent(s)},this.pressed=!1;const{enable:i}=this.options;this.enableMoveEvent=i,this.enableLeaveEvent=i,this.enableEnterEvent=i,this.enableOutEvent=i,this.enableOverEvent=i,this.events=(this.options.events||[]).concat(iz),this.events.forEach(s=>e.addEventListener(s,this.handleEvent))}destroy(){this.events.forEach(e=>this.element.removeEventListener(e,this.handleEvent))}enableEventType(e,n){e===mC&&(this.enableMoveEvent=n),e===vC&&(this.enableOverEvent=n),e===yC&&(this.enableOutEvent=n),e===EC&&(this.enableEnterEvent=n),e===_C&&(this.enableLeaveEvent=n)}handleOverEvent(e){this.enableOverEvent&&e.type==="mouseover"&&this._emit(vC,e)}handleOutEvent(e){this.enableOutEvent&&e.type==="mouseout"&&this._emit(yC,e)}handleEnterEvent(e){this.enableEnterEvent&&e.type==="mouseenter"&&this._emit(EC,e)}handleLeaveEvent(e){this.enableLeaveEvent&&e.type==="mouseleave"&&this._emit(_C,e)}handleMoveEvent(e){if(this.enableMoveEvent)switch(e.type){case"mousedown":e.button>=0&&(this.pressed=!0);break;case"mousemove":e.which===0&&(this.pressed=!1),this.pressed||this._emit(mC,e);break;case"mouseup":this.pressed=!1;break}}_emit(e,n){this.callback({type:e,center:{x:n.clientX,y:n.clientY},srcEvent:n,pointerType:"mouse",target:n.target})}}const{KEY_EVENTS:oz}=Ny,xC="keydown",CC="keyup";class az extends ig{constructor(e,n,r){super(e,n,r),this.handleEvent=i=>{const s=i.target||i.srcElement;s.tagName==="INPUT"&&s.type==="text"||s.tagName==="TEXTAREA"||(this.enableDownEvent&&i.type==="keydown"&&this.callback({type:xC,srcEvent:i,key:i.key,target:i.target}),this.enableUpEvent&&i.type==="keyup"&&this.callback({type:CC,srcEvent:i,key:i.key,target:i.target}))},this.enableDownEvent=this.options.enable,this.enableUpEvent=this.options.enable,this.events=(this.options.events||[]).concat(oz),e.tabIndex=this.options.tabIndex||0,e.style.outline="none",this.events.forEach(i=>e.addEventListener(i,this.handleEvent))}destroy(){this.events.forEach(e=>this.element.removeEventListener(e,this.handleEvent))}enableEventType(e,n){e===xC&&(this.enableDownEvent=n),e===CC&&(this.enableUpEvent=n)}}const IC="contextmenu";class lz extends ig{constructor(e,n,r){super(e,n,r),this.handleEvent=i=>{this.options.enable&&this.callback({type:IC,center:{x:i.clientX,y:i.clientY},srcEvent:i,pointerType:"mouse",target:i.target})},e.addEventListener("contextmenu",this.handleEvent)}destroy(){this.element.removeEventListener("contextmenu",this.handleEvent)}enableEventType(e,n){e===IC&&(this.options.enable=n)}}const nm=1,Kd=2,rm=4,cz={pointerdown:nm,pointermove:Kd,pointerup:rm,mousedown:nm,mousemove:Kd,mouseup:rm},uz=1,fz=2,dz=3,hz=0,gz=1,Az=2,pz=1,mz=2,vz=4;function yz(t){const e=cz[t.srcEvent.type];if(!e)return null;const{buttons:n,button:r,which:i}=t.srcEvent;let s=!1,o=!1,a=!1;return e===rm||e===Kd&&!Number.isFinite(n)?(s=i===uz,o=i===fz,a=i===dz):e===Kd?(s=!!(n&pz),o=!!(n&vz),a=!!(n&mz)):e===nm&&(s=r===hz,o=r===gz,a=r===Az),{leftButton:s,middleButton:o,rightButton:a}}function Ez(t,e){const n=t.center;if(!n)return null;const r=e.getBoundingClientRect(),i=r.width/e.offsetWidth||1,s=r.height/e.offsetHeight||1,o={x:(n.x-r.left-e.clientLeft)/i,y:(n.y-r.top-e.clientTop)/s};return{center:n,offsetCenter:o}}const ep={srcElement:"root",priority:0};class _z{constructor(e){this.handleEvent=n=>{if(this.isEmpty())return;const r=this._normalizeEvent(n);let i=n.srcEvent.target;for(;i&&i!==r.rootElement;){if(this._emit(r,i),r.handled)return;i=i.parentNode}this._emit(r,"root")},this.eventManager=e,this.handlers=[],this.handlersByElement=new Map,this._active=!1}isEmpty(){return!this._active}add(e,n,r,i=!1,s=!1){const{handlers:o,handlersByElement:a}=this;let l=ep;typeof r=="string"||r&&r.addEventListener?l={...ep,srcElement:r}:r&&(l={...ep,...r});let c=a.get(l.srcElement);c||(c=[],a.set(l.srcElement,c));const u={type:e,handler:n,srcElement:l.srcElement,priority:l.priority};i&&(u.once=!0),s&&(u.passive=!0),o.push(u),this._active=this._active||!u.passive;let f=c.length-1;for(;f>=0&&!(c[f].priority>=u.priority);)f--;c.splice(f+1,0,u)}remove(e,n){const{handlers:r,handlersByElement:i}=this;for(let s=r.length-1;s>=0;s--){const o=r[s];if(o.type===e&&o.handler===n){r.splice(s,1);const a=i.get(o.srcElement);a.splice(a.indexOf(o),1),a.length===0&&i.delete(o.srcElement)}}this._active=r.some(s=>!s.passive)}_emit(e,n){const r=this.handlersByElement.get(n);if(r){let i=!1;const s=()=>{e.handled=!0},o=()=>{e.handled=!0,i=!0},a=[];for(let l=0;l<r.length;l++){const{type:c,handler:u,once:f}=r[l];if(u({...e,type:c,stopPropagation:s,stopImmediatePropagation:o}),f&&a.push(r[l]),i)break}for(let l=0;l<a.length;l++){const{type:c,handler:u}=a[l];this.remove(c,u)}}}_normalizeEvent(e){const n=this.eventManager.getElement();return{...e,...yz(e),...Ez(e,n),preventDefault:()=>{e.srcEvent.preventDefault()},stopImmediatePropagation:null,stopPropagation:null,handled:!1,rootElement:n}}}const xz={events:null,recognizers:null,recognizerOptions:{},Manager:YG,touchAction:"none",tabIndex:0};class Cz{constructor(e=null,n){this._onBasicInput=i=>{const{srcEvent:s}=i,o=qG[s.type];o&&this.manager.emit(o,i)},this._onOtherEvent=i=>{this.manager.emit(i.type,i)},this.options={...xz,...n},this.events=new Map,this.setElement(e);const{events:r}=this.options;r&&this.on(r)}getElement(){return this.element}setElement(e){if(this.element&&this.destroy(),this.element=e,!e)return;const{options:n}=this,r=n.Manager;this.manager=new r(e,{touchAction:n.touchAction,recognizers:n.recognizers||$G}).on("hammer.input",this._onBasicInput),n.recognizers||Object.keys(hC).forEach(i=>{const s=this.manager.get(i);s&&hC[i].forEach(o=>{s.recognizeWith(o)})});for(const i in n.recognizerOptions){const s=this.manager.get(i);if(s){const o=n.recognizerOptions[i];delete o.enable,s.set(o)}}this.wheelInput=new rz(e,this._onOtherEvent,{enable:!1}),this.moveInput=new sz(e,this._onOtherEvent,{enable:!1}),this.keyInput=new az(e,this._onOtherEvent,{enable:!1,tabIndex:n.tabIndex}),this.contextmenuInput=new lz(e,this._onOtherEvent,{enable:!1});for(const[i,s]of this.events)s.isEmpty()||(this._toggleRecognizer(s.recognizerName,!0),this.manager.on(i,s.handleEvent))}destroy(){this.element&&(this.wheelInput.destroy(),this.moveInput.destroy(),this.keyInput.destroy(),this.contextmenuInput.destroy(),this.manager.destroy(),this.wheelInput=null,this.moveInput=null,this.keyInput=null,this.contextmenuInput=null,this.manager=null,this.element=null)}on(e,n,r){this._addEventHandler(e,n,r,!1)}once(e,n,r){this._addEventHandler(e,n,r,!0)}watch(e,n,r){this._addEventHandler(e,n,r,!1,!0)}off(e,n){this._removeEventHandler(e,n)}_toggleRecognizer(e,n){const{manager:r}=this;if(!r)return;const i=r.get(e);if(i&&i.options.enable!==n){i.set({enable:n});const s=KG[e];s&&!this.options.recognizers&&s.forEach(o=>{const a=r.get(o);n?(a.requireFailure(e),i.dropRequireFailure(o)):a.dropRequireFailure(e)})}this.wheelInput.enableEventType(e,n),this.moveInput.enableEventType(e,n),this.keyInput.enableEventType(e,n),this.contextmenuInput.enableEventType(e,n)}_addEventHandler(e,n,r,i,s){if(typeof e!="string"){r=n;for(const u in e)this._addEventHandler(u,e[u],r,i,s);return}const{manager:o,events:a}=this,l=gC[e]||e;let c=a.get(l);c||(c=new _z(this),a.set(l,c),c.recognizerName=XG[l]||l,o&&o.on(l,c.handleEvent)),c.add(e,n,r,i,s),c.isEmpty()||this._toggleRecognizer(c.recognizerName,!0)}_removeEventHandler(e,n){if(typeof e!="string"){for(const o in e)this._removeEventHandler(o,e[o]);return}const{events:r}=this,i=gC[e]||e,s=r.get(i);if(s&&(s.remove(e,n),s.isEmpty())){const{recognizerName:o}=s;let a=!1;for(const l of r.values())if(l.recognizerName===o&&!l.isEmpty()){a=!0;break}a||this._toggleRecognizer(o,!1)}}}function Os(){}const Iz=({isDragging:t})=>t?"grabbing":"grab",ZT={id:"",width:"100%",height:"100%",style:null,viewState:null,initialViewState:null,pickingRadius:0,layerFilter:null,glOptions:{},parameters:{},parent:null,gl:null,canvas:null,layers:[],effects:[],views:null,controller:null,useDevicePixels:!0,touchAction:"none",eventRecognizerOptions:{},_framebuffer:null,_animate:!1,_pickable:!0,_typedArrayManagerProps:{},_customRender:null,onWebGLInitialized:Os,onResize:Os,onViewStateChange:Os,onInteractionStateChange:Os,onBeforeRender:Os,onAfterRender:Os,onLoad:Os,onError:t=>be.error(t.message,t.cause)(),onHover:null,onClick:null,onDragStart:null,onDrag:null,onDragEnd:null,_onMetrics:null,getCursor:Iz,getTooltip:null,debug:!1,drawPickingColors:!1};class sg{constructor(e){v(this,"props",void 0),v(this,"width",0),v(this,"height",0),v(this,"userData",{}),v(this,"canvas",null),v(this,"viewManager",null),v(this,"layerManager",null),v(this,"effectManager",null),v(this,"deckRenderer",null),v(this,"deckPicker",null),v(this,"eventManager",null),v(this,"tooltip",null),v(this,"metrics",void 0),v(this,"animationLoop",void 0),v(this,"stats",void 0),v(this,"viewState",void 0),v(this,"cursorState",void 0),v(this,"_needsRedraw",void 0),v(this,"_pickRequest",void 0),v(this,"_lastPointerDownInfo",null),v(this,"_metricsCounter",void 0),v(this,"_onPointerMove",n=>{const{_pickRequest:r}=this;if(n.type==="pointerleave")r.x=-1,r.y=-1,r.radius=0;else{if(n.leftButton||n.rightButton)return;{const i=n.offsetCenter;if(!i)return;r.x=i.x,r.y=i.y,r.radius=this.props.pickingRadius}}this.layerManager&&(this.layerManager.context.mousePosition={x:r.x,y:r.y}),r.event=n}),v(this,"_onEvent",n=>{const r=rx[n.type],i=n.offsetCenter;if(!r||!i||!this.layerManager)return;const s=this.layerManager.getLayers(),o=this.deckPicker.getLastPickedObject({x:i.x,y:i.y,layers:s,viewports:this.getViewports(i)},this._lastPointerDownInfo),{layer:a}=o,l=a&&(a[r.handler]||a.props[r.handler]),c=this.props[r.handler];let u=!1;l&&(u=l.call(a,o,n)),!u&&c&&c(o,n)}),v(this,"_onPointerDown",n=>{const r=n.offsetCenter,i=this._pick("pickObject","pickObject Time",{x:r.x,y:r.y,radius:this.props.pickingRadius});this._lastPointerDownInfo=i.result[0]||i.emptyInfo}),this.props={...ZT,...e},e=this.props,this._needsRedraw="Initial render",this._pickRequest={mode:"hover",x:-1,y:-1,radius:0,event:null},this.cursorState={isHovering:!1,isDragging:!1},e.viewState&&e.initialViewState&&be.warn("View state tracking is disabled. Use either `initialViewState` for auto update or `viewState` for manual update.")(),Nb()==="IE"&&be.warn("IE 11 is not supported")(),this.viewState=e.initialViewState,e.gl||typeof document<"u"&&(this.canvas=this._createCanvas(e)),this.animationLoop=this._createAnimationLoop(e),this.stats=new my({id:"deck.gl"}),this.metrics={fps:0,setPropsTime:0,updateAttributesTime:0,framesRedrawn:0,pickTime:0,pickCount:0,gpuTime:0,gpuTimePerFrame:0,cpuTime:0,cpuTimePerFrame:0,bufferMemory:0,textureMemory:0,renderbufferMemory:0,gpuMemory:0},this._metricsCounter=0,this.setProps(e),e._typedArrayManagerProps&&ka.setOptions(e._typedArrayManagerProps),this.animationLoop.start()}finalize(){var e,n,r,i,s,o,a,l;if((e=this.animationLoop)===null||e===void 0||e.stop(),this.animationLoop=null,this._lastPointerDownInfo=null,(n=this.layerManager)===null||n===void 0||n.finalize(),this.layerManager=null,(r=this.viewManager)===null||r===void 0||r.finalize(),this.viewManager=null,(i=this.effectManager)===null||i===void 0||i.finalize(),this.effectManager=null,(s=this.deckRenderer)===null||s===void 0||s.finalize(),this.deckRenderer=null,(o=this.deckPicker)===null||o===void 0||o.finalize(),this.deckPicker=null,(a=this.eventManager)===null||a===void 0||a.destroy(),this.eventManager=null,(l=this.tooltip)===null||l===void 0||l.remove(),this.tooltip=null,!this.props.canvas&&!this.props.gl&&this.canvas){var c;(c=this.canvas.parentElement)===null||c===void 0||c.removeChild(this.canvas),this.canvas=null}}setProps(e){this.stats.get("setProps Time").timeStart(),"onLayerHover"in e&&be.removed("onLayerHover","onHover")(),"onLayerClick"in e&&be.removed("onLayerClick","onClick")(),e.initialViewState&&!pr(this.props.initialViewState,e.initialViewState,3)&&(this.viewState=e.initialViewState),Object.assign(this.props,e),this._setCanvasSize(this.props);const n=Object.create(this.props);Object.assign(n,{views:this._getViews(),width:this.width,height:this.height,viewState:this._getViewState()}),this.animationLoop.setProps(n),this.layerManager&&(this.viewManager.setProps(n),this.layerManager.activateViewport(this.getViewports()[0]),this.layerManager.setProps(n),this.effectManager.setProps(n),this.deckRenderer.setProps(n),this.deckPicker.setProps(n)),this.stats.get("setProps Time").timeEnd()}needsRedraw(e={clearRedrawFlags:!1}){if(!this.layerManager)return!1;if(this.props._animate)return"Deck._animate";let n=this._needsRedraw;e.clearRedrawFlags&&(this._needsRedraw=!1);const r=this.viewManager.needsRedraw(e),i=this.layerManager.needsRedraw(e),s=this.effectManager.needsRedraw(e),o=this.deckRenderer.needsRedraw(e);return n=n||r||i||s||o,n}redraw(e){if(!this.layerManager)return;let n=this.needsRedraw({clearRedrawFlags:!0});n=e||n,n&&(this.stats.get("Redraw Count").incrementCount(),this.props._customRender?this.props._customRender(n):this._drawLayers(n))}get isInitialized(){return this.viewManager!==null}getViews(){return Rt(this.viewManager),this.viewManager.views}getViewports(e){return Rt(this.viewManager),this.viewManager.getViewports(e)}getCanvas(){return this.canvas}pickObject(e){const n=this._pick("pickObject","pickObject Time",e).result;return n.length?n[0]:null}pickMultipleObjects(e){return e.depth=e.depth||10,this._pick("pickObject","pickMultipleObjects Time",e).result}pickObjects(e){return this._pick("pickObjects","pickObjects Time",e)}_addResources(e,n=!1){for(const r in e)this.layerManager.resourceManager.add({resourceId:r,data:e[r],forceUpdate:n})}_removeResources(e){for(const n of e)this.layerManager.resourceManager.remove(n)}_addDefaultEffect(e){this.effectManager.addDefaultEffect(e)}_pick(e,n,r){Rt(this.deckPicker);const{stats:i}=this;i.get("Pick Count").incrementCount(),i.get(n).timeStart();const s=this.deckPicker[e]({layers:this.layerManager.getLayers(r),views:this.viewManager.getViews(),viewports:this.getViewports(r),onViewportActive:this.layerManager.activateViewport,effects:this.effectManager.getEffects(),...r});return i.get(n).timeEnd(),s}_createCanvas(e){let n=e.canvas;return typeof n=="string"&&(n=document.getElementById(n),Rt(n)),n||(n=document.createElement("canvas"),n.id=e.id||"deckgl-overlay",(e.parent||document.body).appendChild(n)),Object.assign(n.style,e.style),n}_setCanvasSize(e){if(!this.canvas)return;const{width:n,height:r}=e;if(n||n===0){const s=Number.isFinite(n)?"".concat(n,"px"):n;this.canvas.style.width=s}if(r||r===0){var i;const s=Number.isFinite(r)?"".concat(r,"px"):r;this.canvas.style.position=((i=e.style)===null||i===void 0?void 0:i.position)||"absolute",this.canvas.style.height=s}}_updateCanvasSize(){var e,n;const{canvas:r}=this;if(!r)return;const i=(e=r.clientWidth)!==null&&e!==void 0?e:r.width,s=(n=r.clientHeight)!==null&&n!==void 0?n:r.height;if(i!==this.width||s!==this.height){var o,a;this.width=i,this.height=s,(o=this.viewManager)===null||o===void 0||o.setProps({width:i,height:s}),(a=this.layerManager)===null||a===void 0||a.activateViewport(this.getViewports()[0]),this.props.onResize({width:i,height:s})}}_createAnimationLoop(e){const{width:n,height:r,gl:i,glOptions:s,debug:o,onError:a,onBeforeRender:l,onAfterRender:c,useDevicePixels:u}=e;return new JQ({width:n,height:r,useDevicePixels:u,autoResizeDrawingBuffer:!i,autoResizeViewport:!1,gl:i,onCreateContext:f=>Gb({...s,...f,canvas:this.canvas,debug:o,onContextLost:()=>this._onContextLost()}),onInitialize:f=>this._setGLContext(f.gl),onRender:this._onRenderFrame.bind(this),onBeforeRender:l,onAfterRender:c,onError:a})}_getViewState(){return this.props.viewState||this.viewState}_getViews(){let e=this.props.views||[new WT({id:"default-view"})];return e=Array.isArray(e)?e:[e],e.length&&this.props.controller&&(e[0].props.controller=this.props.controller),e}_onContextLost(){const{onError:e}=this.props;this.animationLoop&&e&&e(new Error("WebGL context is lost"))}_pickAndCallback(){const{_pickRequest:e}=this;if(e.event){const{result:r,emptyInfo:i}=this._pick("pickObject","pickObject Time",e);this.cursorState.isHovering=r.length>0;let s=i,o=!1;for(const a of r){var n;s=a,o=((n=a.layer)===null||n===void 0?void 0:n.onHover(a,e.event))||o}if(!o&&this.props.onHover&&this.props.onHover(s,e.event),this.props.getTooltip&&this.tooltip){const a=this.props.getTooltip(s);this.tooltip.setTooltip(a,s.x,s.y)}e.event=null}}_updateCursor(){const e=this.props.parent||this.canvas;e&&(e.style.cursor=this.props.getCursor(this.cursorState))}_setGLContext(e){if(this.layerManager)return;this.canvas||(this.canvas=e.canvas,py(e,{enable:!0,copyState:!0})),this.tooltip=new GG(this.canvas),yi(e,{blend:!0,blendFunc:[770,771,1,771],polygonOffsetFill:!0,depthTest:!0,depthFunc:515}),this.props.onWebGLInitialized(e);const n=new RT;n.play(),this.animationLoop.attachTimeline(n),this.eventManager=new Cz(this.props.parent||e.canvas,{touchAction:this.props.touchAction,recognizerOptions:this.props.eventRecognizerOptions,events:{pointerdown:this._onPointerDown,pointermove:this._onPointerMove,pointerleave:this._onPointerMove}});for(const i in rx)this.eventManager.on(i,this._onEvent);this.viewManager=new pG({timeline:n,eventManager:this.eventManager,onViewStateChange:this._onViewStateChange.bind(this),onInteractionStateChange:this._onInteractionStateChange.bind(this),views:this._getViews(),viewState:this._getViewState(),width:this.width,height:this.height});const r=this.viewManager.getViewports()[0];this.layerManager=new AG(e,{deck:this,stats:this.stats,viewport:r,timeline:n}),this.effectManager=new RG,this.deckRenderer=new MG(e),this.deckPicker=new FG(e),this.setProps(this.props),this._updateCanvasSize(),this.props.onLoad()}_drawLayers(e,n){const{gl:r}=this.layerManager.context;yi(r,this.props.parameters),this.props.onBeforeRender({gl:r}),this.deckRenderer.renderLayers({target:this.props._framebuffer,layers:this.layerManager.getLayers(),viewports:this.viewManager.getViewports(),onViewportActive:this.layerManager.activateViewport,views:this.viewManager.getViews(),pass:"screen",effects:this.effectManager.getEffects(),...n}),this.props.onAfterRender({gl:r})}_onRenderFrame(e){this._getFrameStats(),this._metricsCounter++%60===0&&(this._getMetrics(),this.stats.reset(),be.table(4,this.metrics)(),this.props._onMetrics&&this.props._onMetrics(this.metrics)),this._updateCanvasSize(),this._updateCursor(),this.tooltip.isVisible&&this.viewManager.needsRedraw()&&this.tooltip.setTooltip(null),this.layerManager.updateLayers(),this._pickAndCallback(),this.redraw(),this.viewManager&&this.viewManager.updateViewStates()}_onViewStateChange(e){const n=this.props.onViewStateChange(e)||e.viewState;this.viewState&&(this.viewState={...this.viewState,[e.viewId]:n},this.props.viewState||this.viewManager&&this.viewManager.setProps({viewState:this.viewState}))}_onInteractionStateChange(e){this.cursorState.isDragging=e.isDragging||!1,this.props.onInteractionStateChange(e)}_getFrameStats(){const{stats:e}=this;e.get("frameRate").timeEnd(),e.get("frameRate").timeStart();const n=this.animationLoop.stats;e.get("GPU Time").addTime(n.get("GPU Time").lastTiming),e.get("CPU Time").addTime(n.get("CPU Time").lastTiming)}_getMetrics(){const{metrics:e,stats:n}=this;e.fps=n.get("frameRate").getHz(),e.setPropsTime=n.get("setProps Time").time,e.updateAttributesTime=n.get("Update Attributes").time,e.framesRedrawn=n.get("Redraw Count").count,e.pickTime=n.get("pickObject Time").time+n.get("pickMultipleObjects Time").time+n.get("pickObjects Time").time,e.pickCount=n.get("Pick Count").count,e.gpuTime=n.get("GPU Time").time,e.cpuTime=n.get("CPU Time").time,e.gpuTimePerFrame=n.get("GPU Time").getAverageTime(),e.cpuTimePerFrame=n.get("CPU Time").getAverageTime();const r=$s.get("Memory Usage");e.bufferMemory=r.get("Buffer Memory").count,e.textureMemory=r.get("Texture Memory").count,e.renderbufferMemory=r.get("Renderbuffer Memory").count,e.gpuMemory=r.get("GPU Memory").count}}v(sg,"defaultProps",ZT);v(sg,"VERSION",ok);class tp{constructor(e,n){v(this,"opts",void 0),v(this,"source",void 0),this.opts=n,this.source=e}get value(){return this.source.value}getValue(){const e=this.source.getBuffer(),n=this.getAccessor();if(e)return[e,n];const{value:r}=this.source,{size:i}=n;let s=r;if(r&&r.length!==i){s=new Float32Array(i);const o=n.elementOffset||0;for(let a=0;a<i;++a)s[a]=r[o+a]}return s}getAccessor(){return{...this.source.getAccessor(),...this.opts}}}function wz(t){switch(t){case 5126:return Float32Array;case 5130:return Float64Array;case 5123:case 33635:case 32819:case 32820:return Uint16Array;case 5125:return Uint32Array;case 5121:return Uint8ClampedArray;case 5120:return Int8Array;case 5122:return Int16Array;case 5124:return Int32Array;default:throw new Error("Unknown GL type")}}function Kf(t){return t.stride||t.size*t.bytesPerElement}function JT(t,e){e.offset&&be.removed("shaderAttribute.offset","vertexOffset, elementOffset")();const n=Kf(t),r=e.vertexOffset!==void 0?e.vertexOffset:t.vertexOffset||0,i=e.elementOffset||0,s=r*n+i*t.bytesPerElement+(t.offset||0);return{...e,offset:s,stride:n}}function Sz(t,e){const n=JT(t,e);return{high:n,low:{...n,offset:n.offset+t.size*4}}}class bz{constructor(e,n,r){v(this,"gl",void 0),v(this,"id",void 0),v(this,"size",void 0),v(this,"settings",void 0),v(this,"value",void 0),v(this,"doublePrecision",void 0),v(this,"_buffer",void 0),v(this,"state",void 0),this.gl=e,this.id=n.id||"",this.size=n.size||1;const i=n.logicalType||n.type,s=i===5130;let{defaultValue:o}=n;o=Number.isFinite(o)?[o]:o||new Array(this.size).fill(0);let a;s?a=5126:!i&&n.isIndexed?a=e&&z0(e,je.ELEMENT_INDEX_UINT32)?5125:5123:a=i||5126;let l=wz(i||a||5126);this.doublePrecision=s,s&&n.fp64===!1&&(l=Float32Array),this.value=null,this.settings={...n,defaultType:l,defaultValue:o,logicalType:i,type:a,size:this.size,bytesPerElement:l.BYTES_PER_ELEMENT},this.state={...r,externalBuffer:null,bufferAccessor:this.settings,allocatedValue:null,numInstances:0,bounds:null,constant:!1},this._buffer=null}get isConstant(){return this.state.constant}get buffer(){if(!this._buffer){const{isIndexed:e,type:n}=this.settings;this._buffer=new Ve(this.gl,{id:this.id,target:e?34963:34962,accessor:{type:n}})}return this._buffer}get byteOffset(){const e=this.getAccessor();return e.vertexOffset?e.vertexOffset*Kf(e):0}get numInstances(){return this.state.numInstances}set numInstances(e){this.state.numInstances=e}delete(){this._buffer&&(this._buffer.delete(),this._buffer=null),ka.release(this.state.allocatedValue)}getShaderAttributes(e,n){if(this.doublePrecision){const r={},i=this.value instanceof Float64Array,s=Sz(this.getAccessor(),n||{});return r[e]=new tp(this,s.high),r["".concat(e,"64Low")]=i?new tp(this,s.low):new Float32Array(this.size),r}if(n){const r=JT(this.getAccessor(),n);return{[e]:new tp(this,r)}}return{[e]:this}}getBuffer(){return this.state.constant?null:this.state.externalBuffer||this._buffer}getValue(){return this.state.constant?this.value:[this.getBuffer(),this.getAccessor()]}getAccessor(){return this.state.bufferAccessor}getBounds(){if(this.state.bounds)return this.state.bounds;let e=null;if(this.state.constant&&this.value){const n=Array.from(this.value);e=[n,n]}else{const{value:n,numInstances:r,size:i}=this,s=r*i;if(n&&s&&n.length>=s){const o=new Array(i).fill(1/0),a=new Array(i).fill(-1/0);for(let l=0;l<s;)for(let c=0;c<i;c++){const u=n[l++];u<o[c]&&(o[c]=u),u>a[c]&&(a[c]=u)}e=[o,a]}}return this.state.bounds=e,e}setData(e){const{state:n}=this;let r;ArrayBuffer.isView(e)?r={value:e}:e instanceof Ve?r={buffer:e}:r=e;const i={...this.settings,...r};if(n.bufferAccessor=i,n.bounds=null,r.constant){let s=r.value;if(s=this._normalizeValue(s,[],0),this.settings.normalized&&(s=this.normalizeConstant(s)),!(!n.constant||!this._areValuesEqual(s,this.value)))return!1;n.externalBuffer=null,n.constant=!0,this.value=s}else if(r.buffer){const s=r.buffer;n.externalBuffer=s,n.constant=!1,this.value=r.value||null;const o=r.value instanceof Float64Array;i.type=r.type||s.accessor.type,i.bytesPerElement=s.accessor.BYTES_PER_ELEMENT*(o?2:1),i.stride=Kf(i)}else if(r.value){this._checkExternalBuffer(r);let s=r.value;n.externalBuffer=null,n.constant=!1,this.value=s,i.bytesPerElement=s.BYTES_PER_ELEMENT,i.stride=Kf(i);const{buffer:o,byteOffset:a}=this;this.doublePrecision&&s instanceof Float64Array&&(s=XA(s,i));const l=s.byteLength+a+i.stride*2;o.byteLength<l&&o.reallocate(l),o.setAccessor(null),o.subData({data:s,offset:a}),i.type=r.type||o.accessor.type}return!0}updateSubBuffer(e={}){this.state.bounds=null;const n=this.value,{startOffset:r=0,endOffset:i}=e;this.buffer.subData({data:this.doublePrecision&&n instanceof Float64Array?XA(n,{size:this.size,startIndex:r,endIndex:i}):n.subarray(r,i),offset:r*n.BYTES_PER_ELEMENT+this.byteOffset})}allocate(e,n=!1){const{state:r}=this,i=r.allocatedValue,s=ka.allocate(i,e+1,{size:this.size,type:this.settings.defaultType,copy:n});this.value=s;const{buffer:o,byteOffset:a}=this;return o.byteLength<s.byteLength+a&&(o.reallocate(s.byteLength+a),n&&i&&o.subData({data:i instanceof Float64Array?XA(i,this):i,offset:a})),r.allocatedValue=s,r.constant=!1,r.externalBuffer=null,r.bufferAccessor=this.settings,!0}_checkExternalBuffer(e){const{value:n}=e;if(!ArrayBuffer.isView(n))throw new Error("Attribute ".concat(this.id," value is not TypedArray"));const r=this.settings.defaultType;let i=!1;if(this.doublePrecision&&(i=n.BYTES_PER_ELEMENT<4),i)throw new Error("Attribute ".concat(this.id," does not support ").concat(n.constructor.name));!(n instanceof r)&&this.settings.normalized&&!("normalized"in e)&&be.warn("Attribute ".concat(this.id," is normalized"))()}normalizeConstant(e){switch(this.settings.type){case 5120:return new Float32Array(e).map(n=>(n+128)/255*2-1);case 5122:return new Float32Array(e).map(n=>(n+32768)/65535*2-1);case 5121:return new Float32Array(e).map(n=>n/255);case 5123:return new Float32Array(e).map(n=>n/65535);default:return e}}_normalizeValue(e,n,r){const{defaultValue:i,size:s}=this.settings;if(Number.isFinite(e))return n[r]=e,n;if(!e){let o=s;for(;--o>=0;)n[r+o]=i[o];return n}switch(s){case 4:n[r+3]=Number.isFinite(e[3])?e[3]:i[3];case 3:n[r+2]=Number.isFinite(e[2])?e[2]:i[2];case 2:n[r+1]=Number.isFinite(e[1])?e[1]:i[1];case 1:n[r+0]=Number.isFinite(e[0])?e[0]:i[0];break;default:let o=s;for(;--o>=0;)n[r+o]=Number.isFinite(e[o])?e[o]:i[o]}return n}_areValuesEqual(e,n){if(!e||!n)return!1;const{size:r}=this;for(let i=0;i<r;i++)if(e[i]!==n[i])return!1;return!0}}const wC=[],SC=[];function fu(t,e=0,n=1/0){let r=wC;const i={index:-1,data:t,target:[]};return t?typeof t[Symbol.iterator]=="function"?r=t:t.length>0&&(SC.length=t.length,r=SC):r=wC,(e>0||Number.isFinite(n))&&(r=(Array.isArray(r)?r:Array.from(r)).slice(e,n),i.index=e-1),{iterable:r,objectInfo:i}}function e3(t){return t&&t[Symbol.asyncIterator]}function t3(t,e){const{size:n,stride:r,offset:i,startIndices:s,nested:o}=e,a=t.BYTES_PER_ELEMENT,l=r?r/a:n,c=i?i/a:0,u=Math.floor((t.length-c)/l);return(f,{index:d,target:h})=>{if(!s){const p=d*l+c;for(let m=0;m<n;m++)h[m]=t[p+m];return h}const g=s[d],A=s[d+1]||u;let E;if(o){E=new Array(A-g);for(let p=g;p<A;p++){const m=p*l+c;h=new Array(n);for(let y=0;y<n;y++)h[y]=t[m+y];E[p-g]=h}}else if(l===n)E=t.subarray(g*n+c,A*n+c);else{E=new t.constructor((A-g)*n);let p=0;for(let m=g;m<A;m++){const y=m*l+c;for(let _=0;_<n;_++)E[p++]=t[y+_]}}return E}}const Tz=[],qf=[[0,1/0]];function Bz(t,e){if(t===qf||(e[0]<0&&(e[0]=0),e[0]>=e[1]))return t;const n=[],r=t.length;let i=0;for(let s=0;s<r;s++){const o=t[s];o[1]<e[0]?(n.push(o),i=s+1):o[0]>e[1]?n.push(o):e=[Math.min(o[0],e[0]),Math.max(o[1],e[1])]}return n.splice(i,0,e),n}function np(t){const{source:e,target:n,start:r=0,size:i,getData:s}=t,o=t.end||n.length,a=e.length,l=o-r;if(a>l){n.set(e.subarray(0,l),r);return}if(n.set(e,r),!s)return;let c=a;for(;c<l;){const u=s(c,e);for(let f=0;f<i;f++)n[r+c]=u[f]||0,c++}}function Rz({source:t,target:e,size:n,getData:r,sourceStartIndices:i,targetStartIndices:s}){if(!Array.isArray(s))return np({source:t,target:e,size:n,getData:r}),e;let o=0,a=0;const l=r&&((u,f)=>r(u+a,f)),c=Math.min(i.length,s.length);for(let u=1;u<c;u++){const f=i[u]*n,d=s[u]*n;np({source:t.subarray(o,f),target:e,start:a,end:d,size:n,getData:l}),o=f,a=d}return a<e.length&&np({source:[],target:e,start:a,size:n,getData:l}),e}const Pz={interpolation:{duration:0,easing:t=>t},spring:{stiffness:.05,damping:.5}};function n3(t,e){if(!t)return null;Number.isFinite(t)&&(t={type:"interpolation",duration:t});const n=t.type||"interpolation";return{...Pz[n],...e,...t,type:n}}function r3(t,e){const n=e.getBuffer();return n?[n,{divisor:0,size:e.size,normalized:e.settings.normalized}]:e.value}function i3(t){switch(t){case 1:return"float";case 2:return"vec2";case 3:return"vec3";case 4:return"vec4";default:throw new Error('No defined attribute type for size "'.concat(t,'"'))}}function s3(t){t.push(t.shift())}function Oy(t,e){const{doublePrecision:n,settings:r,value:i,size:s}=t,o=n&&i instanceof Float64Array?2:1;return(r.noAlloc?i.length:e*s)*o}function o3({buffer:t,numInstances:e,attribute:n,fromLength:r,fromStartIndices:i,getData:s=o=>o}){const o=n.doublePrecision&&n.value instanceof Float64Array?2:1,a=n.size*o,l=n.byteOffset,c=n.startIndices,u=i&&c,f=Oy(n,e),d=n.isConstant;if(!u&&r>=f)return;const h=d?n.value:n.getBuffer().getData({srcByteOffset:l});if(n.settings.normalized&&!d){const p=s;s=(m,y)=>n.normalizeConstant(p(m,y))}const g=d?(p,m)=>s(h,m):(p,m)=>s(h.subarray(p,p+a),m),A=t.getData({length:r}),E=new Float32Array(f);Rz({source:A,target:E,sourceStartIndices:i,targetStartIndices:c,size:a,getData:g}),t.byteLength<E.byteLength+l&&t.reallocate(E.byteLength+l),t.subData({data:E,offset:l})}class Dy extends bz{constructor(e,n){super(e,n,{startIndices:null,lastExternalBuffer:null,binaryValue:null,binaryAccessor:null,needsUpdate:!0,needsRedraw:!1,updateRanges:qf}),v(this,"constant",!1),this.settings.update=n.update||(n.accessor?this._autoUpdater:void 0),Object.seal(this.settings),Object.seal(this.state),this._validateAttributeUpdaters()}get startIndices(){return this.state.startIndices}set startIndices(e){this.state.startIndices=e}needsUpdate(){return this.state.needsUpdate}needsRedraw({clearChangedFlags:e=!1}={}){const n=this.state.needsRedraw;return this.state.needsRedraw=n&&!e,n}getUpdateTriggers(){const{accessor:e}=this.settings;return[this.id].concat(typeof e!="function"&&e||[])}supportsTransition(){return!!this.settings.transition}getTransitionSetting(e){if(!e||!this.supportsTransition())return null;const{accessor:n}=this.settings,r=this.settings.transition,i=Array.isArray(n)?e[n.find(s=>e[s])]:e[n];return n3(i,r)}setNeedsUpdate(e=this.id,n){if(this.state.needsUpdate=this.state.needsUpdate||e,this.setNeedsRedraw(e),n){const{startRow:r=0,endRow:i=1/0}=n;this.state.updateRanges=Bz(this.state.updateRanges,[r,i])}else this.state.updateRanges=qf}clearNeedsUpdate(){this.state.needsUpdate=!1,this.state.updateRanges=Tz}setNeedsRedraw(e=this.id){this.state.needsRedraw=this.state.needsRedraw||e}allocate(e){const{state:n,settings:r}=this;return r.noAlloc?!1:r.update?(super.allocate(e,n.updateRanges!==qf),!0):!1}updateBuffer({numInstances:e,data:n,props:r,context:i}){if(!this.needsUpdate())return!1;const{state:{updateRanges:s},settings:{update:o,noAlloc:a}}=this;let l=!0;if(o){for(const[c,u]of s)o.call(i,this,{data:n,startRow:c,endRow:u,props:r,numInstances:e});if(this.value)if(this.constant||this.buffer.byteLength<this.value.byteLength+this.byteOffset)this.setData({value:this.value,constant:this.constant}),this.constant=!1;else for(const[c,u]of s){const f=Number.isFinite(c)?this.getVertexOffset(c):0,d=Number.isFinite(u)?this.getVertexOffset(u):a||!Number.isFinite(e)?this.value.length:e*this.size;super.updateSubBuffer({startOffset:f,endOffset:d})}this._checkAttributeArray()}else l=!1;return this.clearNeedsUpdate(),this.setNeedsRedraw(),l}setConstantValue(e){return e===void 0||typeof e=="function"?!1:(this.setData({constant:!0,value:e})&&this.setNeedsRedraw(),this.clearNeedsUpdate(),!0)}setExternalBuffer(e){const{state:n}=this;return e?(this.clearNeedsUpdate(),n.lastExternalBuffer===e||(n.lastExternalBuffer=e,this.setNeedsRedraw(),this.setData(e)),!0):(n.lastExternalBuffer=null,!1)}setBinaryValue(e,n=null){const{state:r,settings:i}=this;if(!e)return r.binaryValue=null,r.binaryAccessor=null,!1;if(i.noAlloc)return!1;if(r.binaryValue===e)return this.clearNeedsUpdate(),!0;if(r.binaryValue=e,this.setNeedsRedraw(),i.transform||n!==this.startIndices){ArrayBuffer.isView(e)&&(e={value:e});const o=e;Rt(ArrayBuffer.isView(o.value),"invalid ".concat(i.accessor));const a=!!o.size&&o.size!==this.size;return r.binaryAccessor=t3(o.value,{size:o.size||this.size,stride:o.stride,offset:o.offset,startIndices:n,nested:a}),!1}return this.clearNeedsUpdate(),this.setData(e),!0}getVertexOffset(e){const{startIndices:n}=this;return(n?e<n.length?n[e]:this.numInstances:e)*this.size}getShaderAttributes(){const e=this.settings.shaderAttributes||{[this.id]:null},n={};for(const r in e)Object.assign(n,super.getShaderAttributes(r,e[r]));return n}_autoUpdater(e,{data:n,startRow:r,endRow:i,props:s,numInstances:o}){if(e.constant)return;const{settings:a,state:l,value:c,size:u,startIndices:f}=e,{accessor:d,transform:h}=a,g=l.binaryAccessor||(typeof d=="function"?d:s[d]);Rt(typeof g=="function",'accessor "'.concat(d,'" is not a function'));let A=e.getVertexOffset(r);const{iterable:E,objectInfo:p}=fu(n,r,i);for(const m of E){p.index++;let y=g(m,p);if(h&&(y=h.call(this,y)),f){const _=(p.index<f.length-1?f[p.index+1]:o)-f[p.index];if(y&&Array.isArray(y[0])){let I=A;for(const C of y)e._normalizeValue(C,c,I),I+=u}else y&&y.length>u?c.set(y,A):(e._normalizeValue(y,p.target,0),oG({target:c,source:p.target,start:A,count:_}));A+=_*u}else e._normalizeValue(y,c,A),A+=u}}_validateAttributeUpdaters(){const{settings:e}=this;if(!(e.noAlloc||typeof e.update=="function"))throw new Error("Attribute ".concat(this.id," missing update or accessor"))}_checkAttributeArray(){const{value:e}=this,n=Math.min(4,this.size);if(e&&e.length>=n){let r=!0;switch(n){case 4:r=r&&Number.isFinite(e[3]);case 3:r=r&&Number.isFinite(e[2]);case 2:r=r&&Number.isFinite(e[1]);case 1:r=r&&Number.isFinite(e[0]);break;default:r=!1}if(!r)throw new Error("Illegal attribute generated for ".concat(this.id))}}}class Lz{constructor({gl:e,attribute:n,timeline:r}){v(this,"gl",void 0),v(this,"type","interpolation"),v(this,"attributeInTransition",void 0),v(this,"settings",void 0),v(this,"attribute",void 0),v(this,"transition",void 0),v(this,"currentStartIndices",void 0),v(this,"currentLength",void 0),v(this,"transform",void 0),v(this,"buffers",void 0),this.gl=e,this.transition=new cu(r),this.attribute=n,this.attributeInTransition=new Dy(e,n.settings),this.currentStartIndices=n.startIndices,this.currentLength=0,this.transform=Nz(e,n);const i={byteLength:0,usage:35050};this.buffers=[new Ve(e,i),new Ve(e,i)]}get inProgress(){return this.transition.inProgress}start(e,n){if(e.duration<=0){this.transition.cancel();return}this.settings=e;const{gl:r,buffers:i,attribute:s}=this;s3(i);const o={numInstances:n,attribute:s,fromLength:this.currentLength,fromStartIndices:this.currentStartIndices,getData:e.enter};for(const a of i)o3({buffer:a,...o});this.currentStartIndices=s.startIndices,this.currentLength=Oy(s,n),this.attributeInTransition.setData({buffer:i[1],value:s.value}),this.transition.start(e),this.transform.update({elementCount:Math.floor(this.currentLength/s.size),sourceBuffers:{aFrom:i[0],aTo:r3(r,s)},feedbackBuffers:{vCurrent:i[1]}})}update(){const e=this.transition.update();if(e){const{duration:n,easing:r}=this.settings,{time:i}=this.transition;let s=i/n;r&&(s=r(s)),this.transform.run({uniforms:{time:s}})}return e}cancel(){this.transition.cancel(),this.transform.delete();for(const e of this.buffers)e.delete();this.buffers.length=0}}const Mz=`
#define SHADER_NAME interpolation-transition-vertex-shader

uniform float time;
attribute ATTRIBUTE_TYPE aFrom;
attribute ATTRIBUTE_TYPE aTo;
varying ATTRIBUTE_TYPE vCurrent;

void main(void) {
  vCurrent = mix(aFrom, aTo, time);
  gl_Position = vec4(0.0);
}
`;function Nz(t,e){const n=i3(e.size);return new By(t,{vs:Mz,defines:{ATTRIBUTE_TYPE:n},varyings:["vCurrent"]})}class Oz{constructor({gl:e,attribute:n,timeline:r}){v(this,"gl",void 0),v(this,"type","spring"),v(this,"attributeInTransition",void 0),v(this,"settings",void 0),v(this,"attribute",void 0),v(this,"transition",void 0),v(this,"currentStartIndices",void 0),v(this,"currentLength",void 0),v(this,"texture",void 0),v(this,"framebuffer",void 0),v(this,"transform",void 0),v(this,"buffers",void 0),this.gl=e,this.type="spring",this.transition=new cu(r),this.attribute=n,this.attributeInTransition=new Dy(e,{...n.settings,normalized:!1}),this.currentStartIndices=n.startIndices,this.currentLength=0,this.texture=kz(e),this.framebuffer=Qz(e,this.texture),this.transform=Dz(e,n,this.framebuffer);const i={byteLength:0,usage:35050};this.buffers=[new Ve(e,i),new Ve(e,i),new Ve(e,i)]}get inProgress(){return this.transition.inProgress}start(e,n){const{gl:r,buffers:i,attribute:s}=this,o={numInstances:n,attribute:s,fromLength:this.currentLength,fromStartIndices:this.currentStartIndices,getData:e.enter};for(const a of i)o3({buffer:a,...o});this.settings=e,this.currentStartIndices=s.startIndices,this.currentLength=Oy(s,n),this.attributeInTransition.setData({buffer:i[1],value:s.value}),this.transition.start({...e,duration:1/0}),this.transform.update({elementCount:Math.floor(this.currentLength/s.size),sourceBuffers:{aTo:r3(r,s)}})}update(){const{buffers:e,transform:n,framebuffer:r,transition:i}=this;if(!i.update())return!1;const o=this.settings;return n.update({sourceBuffers:{aPrev:e[0],aCur:e[1]},feedbackBuffers:{vNext:e[2]}}),n.run({framebuffer:r,discard:!1,clearRenderTarget:!0,uniforms:{stiffness:o.stiffness,damping:o.damping},parameters:{depthTest:!1,blend:!0,viewport:[0,0,1,1],blendFunc:[1,1],blendEquation:[32776,32776]}}),s3(e),this.attributeInTransition.setData({buffer:e[1],value:this.attribute.value}),tg(r)[0]>0||i.end(),!0}cancel(){this.transition.cancel(),this.transform.delete();for(const e of this.buffers)e.delete();this.buffers.length=0,this.texture.delete(),this.framebuffer.delete()}}function Dz(t,e,n){const r=i3(e.size);return new By(t,{framebuffer:n,vs:`
#define SHADER_NAME spring-transition-vertex-shader

#define EPSILON 0.00001

uniform float stiffness;
uniform float damping;
attribute ATTRIBUTE_TYPE aPrev;
attribute ATTRIBUTE_TYPE aCur;
attribute ATTRIBUTE_TYPE aTo;
varying ATTRIBUTE_TYPE vNext;
varying float vIsTransitioningFlag;

ATTRIBUTE_TYPE getNextValue(ATTRIBUTE_TYPE cur, ATTRIBUTE_TYPE prev, ATTRIBUTE_TYPE dest) {
  ATTRIBUTE_TYPE velocity = cur - prev;
  ATTRIBUTE_TYPE delta = dest - cur;
  ATTRIBUTE_TYPE spring = delta * stiffness;
  ATTRIBUTE_TYPE damper = velocity * -1.0 * damping;
  return spring + damper + velocity + cur;
}

void main(void) {
  bool isTransitioning = length(aCur - aPrev) > EPSILON || length(aTo - aCur) > EPSILON;
  vIsTransitioningFlag = isTransitioning ? 1.0 : 0.0;

  vNext = getNextValue(aCur, aPrev, aTo);
  gl_Position = vec4(0, 0, 0, 1);
  gl_PointSize = 100.0;
}
`,fs:`
#define SHADER_NAME spring-transition-is-transitioning-fragment-shader

varying float vIsTransitioningFlag;

void main(void) {
  if (vIsTransitioningFlag == 0.0) {
    discard;
  }
  gl_FragColor = vec4(1.0);
}`,defines:{ATTRIBUTE_TYPE:r},varyings:["vNext"]})}function kz(t){return new _n(t,{data:new Uint8Array(4),format:6408,type:5121,border:0,mipmaps:!1,dataFormat:6408,width:1,height:1})}function Qz(t,e){return new bt(t,{id:"spring-transition-is-transitioning-framebuffer",width:1,height:1,attachments:{36064:e}})}const Fz={interpolation:Lz,spring:Oz};class Uz{constructor(e,{id:n,timeline:r}){v(this,"id",void 0),v(this,"isSupported",void 0),v(this,"gl",void 0),v(this,"timeline",void 0),v(this,"transitions",void 0),v(this,"needsRedraw",void 0),v(this,"numInstances",void 0),this.id=n,this.gl=e,this.timeline=r,this.transitions={},this.needsRedraw=!1,this.numInstances=1,this.isSupported=By.isSupported(e)}finalize(){for(const e in this.transitions)this._removeTransition(e)}update({attributes:e,transitions:n,numInstances:r}){this.numInstances=r||1;for(const i in e){const s=e[i],o=s.getTransitionSetting(n);o&&this._updateAttribute(i,s,o)}for(const i in this.transitions){const s=e[i];(!s||!s.getTransitionSetting(n))&&this._removeTransition(i)}}hasAttribute(e){const n=this.transitions[e];return n&&n.inProgress}getAttributes(){const e={};for(const n in this.transitions){const r=this.transitions[n];r.inProgress&&(e[n]=r.attributeInTransition)}return e}run(){if(!this.isSupported||this.numInstances===0)return!1;for(const n in this.transitions)this.transitions[n].update()&&(this.needsRedraw=!0);const e=this.needsRedraw;return this.needsRedraw=!1,e}_removeTransition(e){this.transitions[e].cancel(),delete this.transitions[e]}_updateAttribute(e,n,r){const i=this.transitions[e];let s=!i||i.type!==r.type;if(s){if(!this.isSupported){be.warn("WebGL2 not supported by this browser. Transition for ".concat(e," is disabled."))();return}i&&this._removeTransition(e);const o=Fz[r.type];o?this.transitions[e]=new o({attribute:n,timeline:this.timeline,gl:this.gl}):(be.error("unsupported transition type '".concat(r.type,"'"))(),s=!1)}(s||n.needsRedraw())&&(this.needsRedraw=!0,this.transitions[e].start(r,this.numInstances))}}const bC="attributeManager.invalidate",Gz="attributeManager.updateStart",zz="attributeManager.updateEnd",Vz="attribute.updateStart",jz="attribute.allocate",Hz="attribute.updateEnd";class Wz{constructor(e,{id:n="attribute-manager",stats:r,timeline:i}={}){v(this,"id",void 0),v(this,"gl",void 0),v(this,"attributes",void 0),v(this,"updateTriggers",void 0),v(this,"needsRedraw",void 0),v(this,"userData",void 0),v(this,"stats",void 0),v(this,"attributeTransitionManager",void 0),v(this,"mergeBoundsMemoized",lu(X9)),this.id=n,this.gl=e,this.attributes={},this.updateTriggers={},this.needsRedraw=!0,this.userData={},this.stats=r,this.attributeTransitionManager=new Uz(e,{id:"".concat(n,"-transitions"),timeline:i}),Object.seal(this)}finalize(){for(const e in this.attributes)this.attributes[e].delete();this.attributeTransitionManager.finalize()}getNeedsRedraw(e={clearRedrawFlags:!1}){const n=this.needsRedraw;return this.needsRedraw=this.needsRedraw&&!e.clearRedrawFlags,n&&this.id}setNeedsRedraw(){this.needsRedraw=!0}add(e){this._add(e)}addInstanced(e){this._add(e,{instanced:1})}remove(e){for(const n of e)this.attributes[n]!==void 0&&(this.attributes[n].delete(),delete this.attributes[n])}invalidate(e,n){const r=this._invalidateTrigger(e,n);qt(bC,this,e,r)}invalidateAll(e){for(const n in this.attributes)this.attributes[n].setNeedsUpdate(n,e);qt(bC,this,"all")}update({data:e,numInstances:n,startIndices:r=null,transitions:i,props:s={},buffers:o={},context:a={}}){let l=!1;qt(Gz,this),this.stats&&this.stats.get("Update Attributes").timeStart();for(const c in this.attributes){const u=this.attributes[c],f=u.settings.accessor;u.startIndices=r,u.numInstances=n,s[c]&&be.removed("props.".concat(c),"data.attributes.".concat(c))(),u.setExternalBuffer(o[c])||u.setBinaryValue(typeof f=="string"?o[f]:void 0,e.startIndices)||typeof f=="string"&&!o[f]&&u.setConstantValue(s[f])||u.needsUpdate()&&(l=!0,this._updateAttribute({attribute:u,numInstances:n,data:e,props:s,context:a})),this.needsRedraw=this.needsRedraw||u.needsRedraw()}l&&qt(zz,this,n),this.stats&&this.stats.get("Update Attributes").timeEnd(),this.attributeTransitionManager.update({attributes:this.attributes,numInstances:n,transitions:i})}updateTransition(){const{attributeTransitionManager:e}=this,n=e.run();return this.needsRedraw=this.needsRedraw||n,n}getAttributes(){return this.attributes}getBounds(e){const n=e.map(r=>{var i;return(i=this.attributes[r])===null||i===void 0?void 0:i.getBounds()});return this.mergeBoundsMemoized(n)}getChangedAttributes(e={clearChangedFlags:!1}){const{attributes:n,attributeTransitionManager:r}=this,i={...r.getAttributes()};for(const s in n){const o=n[s];o.needsRedraw(e)&&!r.hasAttribute(s)&&(i[s]=o)}return i}getShaderAttributes(e,n={}){e||(e=this.getAttributes());const r={};for(const i in e)n[i]||Object.assign(r,e[i].getShaderAttributes());return r}_add(e,n={}){for(const r in e){const i=e[r];this.attributes[r]=this._createAttribute(r,i,n)}this._mapUpdateTriggersToAttributes()}_createAttribute(e,n,r){const i={...n,id:e,size:n.isIndexed&&1||n.size||1,divisor:r.instanced?1:n.divisor||0};return new Dy(this.gl,i)}_mapUpdateTriggersToAttributes(){const e={};for(const n in this.attributes)this.attributes[n].getUpdateTriggers().forEach(i=>{e[i]||(e[i]=[]),e[i].push(n)});this.updateTriggers=e}_invalidateTrigger(e,n){const{attributes:r,updateTriggers:i}=this,s=i[e];return s&&s.forEach(o=>{const a=r[o];a&&a.setNeedsUpdate(a.id,n)}),s}_updateAttribute(e){const{attribute:n,numInstances:r}=e;if(qt(Vz,n),n.constant){n.setConstantValue(n.value);return}n.allocate(r)&&qt(jz,n,r),n.updateBuffer(e)&&(this.needsRedraw=!0,qt(Hz,n,r))}}class Yz extends cu{get value(){return this._value}_onUpdate(){const{time:e,settings:{fromValue:n,toValue:r,duration:i,easing:s}}=this,o=s(e/i);this._value=eo(n,r,o)}}const TC=1e-5;function BC(t,e,n,r,i){const s=e-t,a=(n-e)*i,l=-s*r;return a+l+s+e}function $z(t,e,n,r,i){if(Array.isArray(n)){const s=[];for(let o=0;o<n.length;o++)s[o]=BC(t[o],e[o],n[o],r,i);return s}return BC(t,e,n,r,i)}function RC(t,e){if(Array.isArray(t)){let n=0;for(let r=0;r<t.length;r++){const i=t[r]-e[r];n+=i*i}return Math.sqrt(n)}return Math.abs(t-e)}class Kz extends cu{get value(){return this._currValue}_onUpdate(){const{fromValue:e,toValue:n,damping:r,stiffness:i}=this.settings,{_prevValue:s=e,_currValue:o=e}=this;let a=$z(s,o,n,r,i);const l=RC(a,n),c=RC(a,o);l<TC&&c<TC&&(a=n,this.end()),this._prevValue=o,this._currValue=a}}const qz={interpolation:Yz,spring:Kz};class Xz{constructor(e){this.transitions=new Map,this.timeline=e}get active(){return this.transitions.size>0}add(e,n,r,i){const{transitions:s}=this;if(s.has(e)){const l=s.get(e),{value:c=l.settings.fromValue}=l;n=c,this.remove(e)}if(i=n3(i),!i)return;const o=qz[i.type];if(!o){be.error("unsupported transition type '".concat(i.type,"'"))();return}const a=new o(this.timeline);a.start({...i,fromValue:n,toValue:r}),s.set(e,a)}remove(e){const{transitions:n}=this;n.has(e)&&(n.get(e).cancel(),n.delete(e))}update(){const e={};for(const[n,r]of this.transitions)r.update(),e[n]=r.value,r.inProgress||this.remove(n);return e}clear(){for(const e of this.transitions.keys())this.remove(e)}}function Zz(t){const e=t[cs];for(const n in e){const r=e[n],{validate:i}=r;if(i&&!i(t[n],r))throw new Error("Invalid prop ".concat(n,": ").concat(t[n]))}}function Jz(t,e){const n=a3({newProps:t,oldProps:e,propTypes:t[cs],ignoreProps:{data:null,updateTriggers:null,extensions:null,transitions:null}}),r=tV(t,e);let i=!1;return r||(i=nV(t,e)),{dataChanged:r,propsChanged:n,updateTriggersChanged:i,extensionsChanged:rV(t,e),transitionsChanged:eV(t,e)}}function eV(t,e){if(!t.transitions)return!1;const n={},r=t[cs];let i=!1;for(const s in t.transitions){const o=r[s],a=o&&o.type;(a==="number"||a==="color"||a==="array")&&im(t[s],e[s],o)&&(n[s]=!0,i=!0)}return i?n:!1}function a3({newProps:t,oldProps:e,ignoreProps:n={},propTypes:r={},triggerName:i="props"}){if(e===t)return!1;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return"".concat(i," changed shallowly");for(const s of Object.keys(t))if(!(s in n)){if(!(s in e))return"".concat(i,".").concat(s," added");const o=im(t[s],e[s],r[s]);if(o)return"".concat(i,".").concat(s," ").concat(o)}for(const s of Object.keys(e))if(!(s in n)){if(!(s in t))return"".concat(i,".").concat(s," dropped");if(!Object.hasOwnProperty.call(t,s)){const o=im(t[s],e[s],r[s]);if(o)return"".concat(i,".").concat(s," ").concat(o)}}return!1}function im(t,e,n){let r=n&&n.equal;return r&&!r(t,e,n)||!r&&(r=t&&e&&t.equals,r&&!r.call(t,e))?"changed deeply":!r&&e!==t?"changed shallowly":null}function tV(t,e){if(e===null)return"oldProps is null, initial diff";let n=!1;const{dataComparator:r,_dataDiff:i}=t;return r?r(t.data,e.data)||(n="Data comparator detected a change"):t.data!==e.data&&(n="A new data container was supplied"),n&&i&&(n=i(t.data,e.data)||n),n}function nV(t,e){if(e===null)return{all:!0};if("all"in t.updateTriggers&&PC(t,e,"all"))return{all:!0};const n={};let r=!1;for(const i in t.updateTriggers)i!=="all"&&PC(t,e,i)&&(n[i]=!0,r=!0);return r?n:!1}function rV(t,e){if(e===null)return!0;const n=e.extensions,{extensions:r}=t;if(r===n)return!1;if(!n||!r||r.length!==n.length)return!0;for(let i=0;i<r.length;i++)if(!r[i].equals(n[i]))return!0;return!1}function PC(t,e,n){let r=t.updateTriggers[n];r=r??{};let i=e.updateTriggers[n];return i=i??{},a3({oldProps:i,newProps:r,triggerName:n})}const iV="count(): argument not an object",sV="count(): argument not a container";function oV(t){if(!lV(t))throw new Error(iV);if(typeof t.count=="function")return t.count();if(Number.isFinite(t.size))return t.size;if(Number.isFinite(t.length))return t.length;if(aV(t))return Object.keys(t).length;throw new Error(sV)}function aV(t){return t!==null&&typeof t=="object"&&t.constructor===Object}function lV(t){return t!==null&&typeof t=="object"}function cV(t,e){if(!e)return t;const n={...t,...e};if("defines"in e&&(n.defines={...t.defines,...e.defines}),"modules"in e&&(n.modules=(t.modules||[]).concat(e.modules),e.modules.some(r=>r.name==="project64"))){const r=n.modules.findIndex(i=>i.name==="project32");r>=0&&n.modules.splice(r,1)}if("inject"in e)if(!t.inject)n.inject=e.inject;else{const r={...t.inject};for(const i in e.inject)r[i]=(r[i]||"")+e.inject[i];n.inject=r}return n}const uV={10241:9987,10240:9729,10242:33071,10243:33071},sm={};function fV(t,e,n,r){if(n instanceof _n)return n;n.constructor&&n.constructor.name!=="Object"&&(n={data:n});let i=null;n.compressed&&(i={10241:n.data.length>1?9985:9729});const s=new _n(e,{...n,parameters:{...uV,...i,...r}});return sm[s.id]=t,s}function dV(t,e){!e||!(e instanceof _n)||sm[e.id]===t&&(e.delete(),delete sm[e.id])}const hV={boolean:{validate(t,e){return!0},equal(t,e,n){return!!t==!!e}},number:{validate(t,e){return Number.isFinite(t)&&(!("max"in e)||t<=e.max)&&(!("min"in e)||t>=e.min)}},color:{validate(t,e){return e.optional&&!t||om(t)&&(t.length===3||t.length===4)},equal(t,e,n){return pr(t,e,1)}},accessor:{validate(t,e){const n=qd(t);return n==="function"||n===qd(e.value)},equal(t,e,n){return typeof e=="function"?!0:pr(t,e,1)}},array:{validate(t,e){return e.optional&&!t||om(t)},equal(t,e,n){const{compare:r}=n,i=Number.isInteger(r)?r:r?1:0;return r?pr(t,e,i):t===e}},object:{equal(t,e,n){if(n.ignore)return!0;const{compare:r}=n,i=Number.isInteger(r)?r:r?1:0;return r?pr(t,e,i):t===e}},function:{validate(t,e){return e.optional&&!t||typeof t=="function"},equal(t,e,n){return!n.compare&&n.ignore!==!1||t===e}},data:{transform:(t,e,n)=>{const{dataTransform:r}=n.props;return r&&t?r(t):t}},image:{transform:(t,e,n)=>{const r=n.context;return!r||!r.gl?null:fV(n.id,r.gl,t,{...e.parameters,...n.props.textureParameters})},release:(t,e,n)=>{dV(n.id,t)}}};function gV(t){const e={},n={},r={};for(const[i,s]of Object.entries(t)){const o=s==null?void 0:s.deprecatedFor;if(o)r[i]=Array.isArray(o)?o:[o];else{const a=AV(i,s);e[i]=a,n[i]=a.value}}return{propTypes:e,defaultProps:n,deprecatedProps:r}}function AV(t,e){switch(qd(e)){case"object":return wl(t,e);case"array":return wl(t,{type:"array",value:e,compare:!1});case"boolean":return wl(t,{type:"boolean",value:e});case"number":return wl(t,{type:"number",value:e});case"function":return wl(t,{type:"function",value:e,compare:!0});default:return{name:t,type:"unknown",value:e}}}function wl(t,e){return"type"in e?{name:t,...hV[e.type],...e}:"value"in e?{name:t,type:qd(e.value),...e}:{name:t,type:"object",value:e}}function om(t){return Array.isArray(t)||ArrayBuffer.isView(t)}function qd(t){return om(t)?"array":t===null?"null":typeof t}function pV(t,e){let n;for(let s=e.length-1;s>=0;s--){const o=e[s];"extensions"in o&&(n=o.extensions)}const r=am(t.constructor,n),i=Object.create(r);i[$d]=t,i[uo]={},i[Xi]={};for(let s=0;s<e.length;++s){const o=e[s];for(const a in o)i[a]=o[a]}return Object.freeze(i),i}const mV="_mergedDefaultProps";function am(t,e){let n=mV;if(e)for(const i of e){const s=i.constructor;s&&(n+=":".concat(s.extensionName||s.name))}const r=l3(t,n);return r||(t[n]=vV(t,e||[]))}function vV(t,e){if(!t.prototype)return null;const r=Object.getPrototypeOf(t),i=am(r),s=l3(t,"defaultProps")||{},o=gV(s),a=Object.assign(Object.create(null),i,o.defaultProps),l=Object.assign(Object.create(null),i==null?void 0:i[cs],o.propTypes),c=Object.assign(Object.create(null),i==null?void 0:i[JA],o.deprecatedProps);for(const u of e){const f=am(u.constructor);f&&(Object.assign(a,f),Object.assign(l,f[cs]),Object.assign(c,f[JA]))}return yV(a,t),_V(a,l),EV(a,c),a[cs]=l,a[JA]=c,e.length===0&&!ky(t,"_propTypes")&&(t._propTypes=l),a}function yV(t,e){const n=CV(e);Object.defineProperties(t,{id:{writable:!0,value:n}})}function EV(t,e){for(const n in e)Object.defineProperty(t,n,{enumerable:!1,set(r){const i="".concat(this.id,": ").concat(n);for(const s of e[n])ky(this,s)||(this[s]=r);be.deprecated(i,e[n].join("/"))()}})}function _V(t,e){const n={},r={};for(const i in e){const s=e[i],{name:o,value:a}=s;s.async&&(n[o]=a,r[o]=xV(o))}t[ya]=n,t[uo]={},Object.defineProperties(t,r)}function xV(t){return{enumerable:!0,set(e){typeof e=="string"||e instanceof Promise||e3(e)?this[uo][t]=e:this[Xi][t]=e},get(){if(this[Xi]){if(t in this[Xi])return this[Xi][t]||this[ya][t];if(t in this[uo]){const e=this[$d]&&this[$d].internalState;if(e&&e.hasAsyncProp(t))return e.getAsyncProp(t)||this[ya][t]}}return this[ya][t]}}}function ky(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function l3(t,e){return ky(t,e)&&t[e]}function CV(t){const e=t.componentName;return e||be.warn("".concat(t.name,".componentName not specified"))(),e||t.name}let IV=0;class Qy{constructor(...e){v(this,"id",void 0),v(this,"props",void 0),v(this,"count",void 0),this.props=pV(this,e),this.id=this.props.id,this.count=IV++}clone(e){const{props:n}=this,r={};for(const i in n[ya])i in n[Xi]?r[i]=n[Xi][i]:i in n[uo]&&(r[i]=n[uo][i]);return new this.constructor({...n,...r,...e})}}v(Qy,"componentName","Component");v(Qy,"defaultProps",{});const wV=Object.freeze({});class SV{constructor(e){v(this,"component",void 0),v(this,"onAsyncPropUpdated",void 0),v(this,"asyncProps",void 0),v(this,"oldProps",void 0),v(this,"oldAsyncProps",void 0),this.component=e,this.asyncProps={},this.onAsyncPropUpdated=()=>{},this.oldProps=null,this.oldAsyncProps=null}finalize(){for(const e in this.asyncProps){const n=this.asyncProps[e];n&&n.type&&n.type.release&&n.type.release(n.resolvedValue,n.type,this.component)}this.asyncProps={},this.component=null,this.resetOldProps()}getOldProps(){return this.oldAsyncProps||this.oldProps||wV}resetOldProps(){this.oldAsyncProps=null,this.oldProps=this.component?this.component.props:null}hasAsyncProp(e){return e in this.asyncProps}getAsyncProp(e){const n=this.asyncProps[e];return n&&n.resolvedValue}isAsyncPropLoading(e){if(e){const n=this.asyncProps[e];return!!(n&&n.pendingLoadCount>0&&n.pendingLoadCount!==n.resolvedLoadCount)}for(const n in this.asyncProps)if(this.isAsyncPropLoading(n))return!0;return!1}reloadAsyncProp(e,n){this._watchPromise(e,Promise.resolve(n))}setAsyncProps(e){this.component=e[$d]||this.component;const n=e[Xi]||{},r=e[uo]||e,i=e[ya]||{};for(const s in n){const o=n[s];this._createAsyncPropData(s,i[s]),this._updateAsyncProp(s,o),n[s]=this.getAsyncProp(s)}for(const s in r){const o=r[s];this._createAsyncPropData(s,i[s]),this._updateAsyncProp(s,o)}}_fetch(e,n){return null}_onResolve(e,n){}_onError(e,n){}_updateAsyncProp(e,n){if(this._didAsyncInputValueChange(e,n)){if(typeof n=="string"&&(n=this._fetch(e,n)),n instanceof Promise){this._watchPromise(e,n);return}if(e3(n)){this._resolveAsyncIterable(e,n);return}this._setPropValue(e,n)}}_freezeAsyncOldProps(){if(!this.oldAsyncProps&&this.oldProps){this.oldAsyncProps=Object.create(this.oldProps);for(const e in this.asyncProps)Object.defineProperty(this.oldAsyncProps,e,{enumerable:!0,value:this.oldProps[e]})}}_didAsyncInputValueChange(e,n){const r=this.asyncProps[e];return n===r.resolvedValue||n===r.lastValue?!1:(r.lastValue=n,!0)}_setPropValue(e,n){this._freezeAsyncOldProps();const r=this.asyncProps[e];r&&(n=this._postProcessValue(r,n),r.resolvedValue=n,r.pendingLoadCount++,r.resolvedLoadCount=r.pendingLoadCount)}_setAsyncPropValue(e,n,r){const i=this.asyncProps[e];i&&r>=i.resolvedLoadCount&&n!==void 0&&(this._freezeAsyncOldProps(),i.resolvedValue=n,i.resolvedLoadCount=r,this.onAsyncPropUpdated(e,n))}_watchPromise(e,n){const r=this.asyncProps[e];if(r){r.pendingLoadCount++;const i=r.pendingLoadCount;n.then(s=>{this.component&&(s=this._postProcessValue(r,s),this._setAsyncPropValue(e,s,i),this._onResolve(e,s))}).catch(s=>{this._onError(e,s)})}}async _resolveAsyncIterable(e,n){if(e!=="data"){this._setPropValue(e,n);return}const r=this.asyncProps[e];if(!r)return;r.pendingLoadCount++;const i=r.pendingLoadCount;let s=[],o=0;for await(const a of n){if(!this.component)return;const{dataTransform:l}=this.component.props;l?s=l(a,s):s=s.concat(a),Object.defineProperty(s,"__diff",{enumerable:!1,value:[{startRow:o,endRow:s.length}]}),o=s.length,this._setAsyncPropValue(e,s,i)}this._onResolve(e,s)}_postProcessValue(e,n){const r=e.type;return r&&this.component&&(r.release&&r.release(e.resolvedValue,r,this.component),r.transform)?r.transform(n,r,this.component):n}_createAsyncPropData(e,n){if(!this.asyncProps[e]){const i=this.component&&this.component.props[cs];this.asyncProps[e]={type:i&&i[e],lastValue:null,resolvedValue:n,pendingLoadCount:0,resolvedLoadCount:0}}}}class bV extends SV{constructor({attributeManager:e,layer:n}){super(n),v(this,"attributeManager",void 0),v(this,"needsRedraw",void 0),v(this,"needsUpdate",void 0),v(this,"subLayers",void 0),v(this,"usesPickingColorCache",void 0),v(this,"hasPickingBuffer",void 0),v(this,"changeFlags",void 0),v(this,"viewport",void 0),v(this,"uniformTransitions",void 0),v(this,"propsInTransition",void 0),this.attributeManager=e,this.needsRedraw=!0,this.needsUpdate=!0,this.subLayers=null,this.usesPickingColorCache=!1}get layer(){return this.component}_fetch(e,n){const r=this.layer,i=r==null?void 0:r.props.fetch;return i?i(n,{propName:e,layer:r}):super._fetch(e,n)}_onResolve(e,n){const r=this.layer;if(r){const i=r.props.onDataLoad;e==="data"&&i&&i(n,{propName:e,layer:r})}}_onError(e,n){const r=this.layer;r&&r.raiseError(n,"loading ".concat(e," of ").concat(this.layer))}}const TV="layer.changeFlag",BV="layer.initialize",RV="layer.update",PV="layer.finalize",LV="layer.matched",LC=2**24-1,MV=Object.freeze([]),NV=lu(({oldViewport:t,viewport:e})=>t.equals(e));let Pr=new Uint8ClampedArray(0);const OV={data:{type:"data",value:MV,async:!0},dataComparator:{type:"function",value:null,optional:!0},_dataDiff:{type:"function",value:t=>t&&t.__diff,optional:!0},dataTransform:{type:"function",value:null,optional:!0},onDataLoad:{type:"function",value:null,optional:!0},onError:{type:"function",value:null,optional:!0},fetch:{type:"function",value:(t,{propName:e,layer:n,loaders:r,loadOptions:i,signal:s})=>{const{resourceManager:o}=n.context;if(i=i||n.getLoadOptions(),r=r||n.props.loaders,s){var a;i={...i,fetch:{...(a=i)===null||a===void 0?void 0:a.fetch,signal:s}}}let l=o.contains(t);return!l&&!i&&(o.add({resourceId:t,data:Qd(t,r),persistent:!1}),l=!0),l?o.subscribe({resourceId:t,onChange:c=>{var u;return(u=n.internalState)===null||u===void 0?void 0:u.reloadAsyncProp(e,c)},consumerId:n.id,requestId:e}):Qd(t,r,i)}},updateTriggers:{},visible:!0,pickable:!1,opacity:{type:"number",min:0,max:1,value:1},operation:"draw",onHover:{type:"function",value:null,optional:!0},onClick:{type:"function",value:null,optional:!0},onDragStart:{type:"function",value:null,optional:!0},onDrag:{type:"function",value:null,optional:!0},onDragEnd:{type:"function",value:null,optional:!0},coordinateSystem:me.DEFAULT,coordinateOrigin:{type:"array",value:[0,0,0],compare:!0},modelMatrix:{type:"array",value:null,compare:!0,optional:!0},wrapLongitude:!1,positionFormat:"XYZ",colorFormat:"RGBA",parameters:{type:"object",value:{},optional:!0,compare:2},loadOptions:{type:"object",value:null,optional:!0,ignore:!0},transitions:null,extensions:[],loaders:{type:"array",value:[],optional:!0,ignore:!0},getPolygonOffset:{type:"function",value:({layerIndex:t})=>[0,-t*100]},highlightedObjectIndex:null,autoHighlight:!1,highlightColor:{type:"accessor",value:[0,0,128,128]}};class Fn extends Qy{constructor(...e){super(...e),v(this,"internalState",null),v(this,"lifecycle",jo.NO_STATE),v(this,"context",void 0),v(this,"state",void 0),v(this,"parent",null)}static get componentName(){return Object.prototype.hasOwnProperty.call(this,"layerName")?this.layerName:""}get root(){let e=this;for(;e.parent;)e=e.parent;return e}toString(){const e=this.constructor.layerName||this.constructor.name;return"".concat(e,"({id: '").concat(this.props.id,"'})")}project(e){Rt(this.internalState);const n=this.internalState.viewport||this.context.viewport,r=GT(e,{viewport:n,modelMatrix:this.props.modelMatrix,coordinateOrigin:this.props.coordinateOrigin,coordinateSystem:this.props.coordinateSystem}),[i,s,o]=FT(r,n.pixelProjectionMatrix);return e.length===2?[i,s]:[i,s,o]}unproject(e){return Rt(this.internalState),(this.internalState.viewport||this.context.viewport).unproject(e)}projectPosition(e,n){Rt(this.internalState);const r=this.internalState.viewport||this.context.viewport;return rG(e,{viewport:r,modelMatrix:this.props.modelMatrix,coordinateOrigin:this.props.coordinateOrigin,coordinateSystem:this.props.coordinateSystem,...n})}get isComposite(){return!1}setState(e){this.setChangeFlags({stateChanged:!0}),Object.assign(this.state,e),this.setNeedsRedraw()}setNeedsRedraw(){this.internalState&&(this.internalState.needsRedraw=!0)}setNeedsUpdate(){this.internalState&&(this.context.layerManager.setNeedsUpdate(String(this)),this.internalState.needsUpdate=!0)}get isLoaded(){return this.internalState?!this.internalState.isAsyncPropLoading():!1}get wrapLongitude(){return this.props.wrapLongitude}isPickable(){return this.props.pickable&&this.props.visible}getModels(){return this.state&&(this.state.models||this.state.model&&[this.state.model])||[]}setModuleParameters(e){for(const n of this.getModels())n.updateModuleSettings(e)}getAttributeManager(){return this.internalState&&this.internalState.attributeManager}getCurrentLayer(){return this.internalState&&this.internalState.layer}getLoadOptions(){return this.props.loadOptions}use64bitPositions(){const{coordinateSystem:e}=this.props;return e===me.DEFAULT||e===me.LNGLAT||e===me.CARTESIAN}onHover(e,n){return this.props.onHover&&this.props.onHover(e,n)||!1}onClick(e,n){return this.props.onClick&&this.props.onClick(e,n)||!1}nullPickingColor(){return[0,0,0]}encodePickingColor(e,n=[]){return n[0]=e+1&255,n[1]=e+1>>8&255,n[2]=e+1>>8>>8&255,n}decodePickingColor(e){Rt(e instanceof Uint8Array);const[n,r,i]=e;return n+r*256+i*65536-1}getNumInstances(){return Number.isFinite(this.props.numInstances)?this.props.numInstances:this.state&&this.state.numInstances!==void 0?this.state.numInstances:oV(this.props.data)}getStartIndices(){return this.props.startIndices?this.props.startIndices:this.state&&this.state.startIndices?this.state.startIndices:null}getBounds(){var e;return(e=this.getAttributeManager())===null||e===void 0?void 0:e.getBounds(["positions","instancePositions"])}getShaders(e){for(const n of this.props.extensions)e=cV(e,n.getShaders.call(this,n));return e}shouldUpdateState(e){return e.changeFlags.propsOrDataChanged}updateState(e){const n=this.getAttributeManager(),{dataChanged:r}=e.changeFlags;if(r&&n)if(Array.isArray(r))for(const i of r)n.invalidateAll(i);else n.invalidateAll();if(n){const{props:i}=e,s=this.internalState.hasPickingBuffer,o=Number.isInteger(i.highlightedObjectIndex)||i.pickable||i.extensions.some(a=>a.getNeedsPickingBuffer.call(this,a));if(s!==o){this.internalState.hasPickingBuffer=o;const{pickingColors:a,instancePickingColors:l}=n.attributes,c=a||l;c&&(o&&c.constant&&(c.constant=!1,n.invalidate(c.id)),!c.value&&!o&&(c.constant=!0,c.value=[0,0,0]))}}}finalizeState(e){for(const r of this.getModels())r.delete();const n=this.getAttributeManager();n&&n.finalize(),this.context&&this.context.resourceManager.unsubscribe({consumerId:this.id}),this.internalState&&(this.internalState.uniformTransitions.clear(),this.internalState.finalize())}draw(e){for(const n of this.getModels())n.draw(e)}getPickingInfo({info:e,mode:n,sourceLayer:r}){const{index:i}=e;return i>=0&&Array.isArray(this.props.data)&&(e.object=this.props.data[i]),e}raiseError(e,n){var r,i;if(n&&(e=new Error("".concat(n,": ").concat(e.message),{cause:e})),!((r=(i=this.props).onError)!==null&&r!==void 0&&r.call(i,e))){var s,o;(s=this.context)===null||s===void 0||(o=s.onError)===null||o===void 0||o.call(s,e,this)}}getNeedsRedraw(e={clearRedrawFlags:!1}){return this._getNeedsRedraw(e)}needsUpdate(){return this.internalState?this.internalState.needsUpdate||this.hasUniformTransition()||this.shouldUpdateState(this._getUpdateParams()):!1}hasUniformTransition(){var e;return((e=this.internalState)===null||e===void 0?void 0:e.uniformTransitions.active)||!1}activateViewport(e){if(!this.internalState)return;const n=this.internalState.viewport;this.internalState.viewport=e,(!n||!NV({oldViewport:n,viewport:e}))&&(this.setChangeFlags({viewportChanged:!0}),this.isComposite?this.needsUpdate()&&this.setNeedsUpdate():this._update())}invalidateAttribute(e="all"){const n=this.getAttributeManager();n&&(e==="all"?n.invalidateAll():n.invalidate(e))}updateAttributes(e){for(const n of this.getModels())this._setModelAttributes(n,e)}_updateAttributes(){const e=this.getAttributeManager();if(!e)return;const n=this.props,r=this.getNumInstances(),i=this.getStartIndices();e.update({data:n.data,numInstances:r,startIndices:i,props:n,transitions:n.transitions,buffers:n.data.attributes,context:this});const s=e.getChangedAttributes({clearChangedFlags:!0});this.updateAttributes(s)}_updateAttributeTransition(){const e=this.getAttributeManager();e&&e.updateTransition()}_updateUniformTransition(){const{uniformTransitions:e}=this.internalState;if(e.active){const n=e.update(),r=Object.create(this.props);for(const i in n)Object.defineProperty(r,i,{value:n[i]});return r}return this.props}calculateInstancePickingColors(e,{numInstances:n}){if(e.constant)return;const r=Math.floor(Pr.length/3);if(this.internalState.usesPickingColorCache=!0,r<n){n>LC&&be.warn("Layer has too many data objects. Picking might not be able to distinguish all objects.")(),Pr=ka.allocate(Pr,n,{size:3,copy:!0,maxCount:Math.max(n,LC)});const i=Math.floor(Pr.length/3),s=[];for(let o=r;o<i;o++)this.encodePickingColor(o,s),Pr[o*3+0]=s[0],Pr[o*3+1]=s[1],Pr[o*3+2]=s[2]}e.value=Pr.subarray(0,n*3)}_setModelAttributes(e,n){const r=this.getAttributeManager(),i=e.userData.excludeAttributes||{},s=r.getShaderAttributes(n,i);e.setAttributes(s)}disablePickingIndex(e){const n=this.props.data;if(!("attributes"in n)){this._disablePickingIndex(e);return}const{pickingColors:r,instancePickingColors:i}=this.getAttributeManager().attributes,s=r||i,o=s&&n.attributes&&n.attributes[s.id];if(o&&o.value){const a=o.value,l=this.encodePickingColor(e);for(let c=0;c<n.length;c++){const u=s.getVertexOffset(c);a[u]===l[0]&&a[u+1]===l[1]&&a[u+2]===l[2]&&this._disablePickingIndex(c)}}else this._disablePickingIndex(e)}_disablePickingIndex(e){const{pickingColors:n,instancePickingColors:r}=this.getAttributeManager().attributes,i=n||r;if(!i)return;const s=i.getVertexOffset(e),o=i.getVertexOffset(e+1);i.buffer.subData({data:new Uint8Array(o-s),offset:s})}restorePickingColors(){const{pickingColors:e,instancePickingColors:n}=this.getAttributeManager().attributes,r=e||n;r&&(this.internalState.usesPickingColorCache&&r.value.buffer!==Pr.buffer&&(r.value=Pr.subarray(0,r.value.length)),r.updateSubBuffer({startOffset:0}))}_initialize(){Rt(!this.internalState),Rt(Number.isFinite(this.props.coordinateSystem)),qt(BV,this);const e=this._getAttributeManager();e&&e.addInstanced({instancePickingColors:{type:5121,size:3,noAlloc:!0,update:this.calculateInstancePickingColors}}),this.internalState=new bV({attributeManager:e,layer:this}),this._clearChangeFlags(),this.state={},Object.defineProperty(this.state,"attributeManager",{get:()=>(be.deprecated("layer.state.attributeManager","layer.getAttributeManager()")(),e)}),this.internalState.uniformTransitions=new Xz(this.context.timeline),this.internalState.onAsyncPropUpdated=this._onAsyncPropUpdated.bind(this),this.internalState.setAsyncProps(this.props),this.initializeState(this.context);for(const n of this.props.extensions)n.initializeState.call(this,this.context,n);this.setChangeFlags({dataChanged:"init",propsChanged:"init",viewportChanged:!0,extensionsChanged:!0}),this._update()}_transferState(e){qt(LV,this,this===e);const{state:n,internalState:r}=e;this!==e&&(this.internalState=r,this.state=n,this.internalState.setAsyncProps(this.props),this._diffProps(this.props,this.internalState.getOldProps()))}_update(){const e=this.needsUpdate();if(qt(RV,this,e),!e)return;const n=this.props,r=this.context,i=this.internalState,s=r.viewport,o=this._updateUniformTransition();i.propsInTransition=o,r.viewport=i.viewport||s,this.props=o;try{const a=this._getUpdateParams(),l=this.getModels();if(r.gl)this.updateState(a);else try{this.updateState(a)}catch{}for(const u of this.props.extensions)u.updateState.call(this,a,u);const c=this.getModels()[0]!==l[0];this._postUpdate(a,c)}finally{r.viewport=s,this.props=n,this._clearChangeFlags(),i.needsUpdate=!1,i.resetOldProps()}}_finalize(){qt(PV,this),this.finalizeState(this.context);for(const e of this.props.extensions)e.finalizeState.call(this,this.context,e)}_drawLayer({moduleParameters:e=null,uniforms:n={},parameters:r={}}){this._updateAttributeTransition();const i=this.props,s=this.context;this.props=this.internalState.propsInTransition||i;const o=this.props.opacity;n.opacity=Math.pow(o,1/2.2);try{e&&this.setModuleParameters(e);const{getPolygonOffset:a}=this.props,l=a&&a(n)||[0,0];yi(s.gl,{polygonOffset:l}),_r(s.gl,r,()=>{const c={moduleParameters:e,uniforms:n,parameters:r,context:s};for(const u of this.props.extensions)u.draw.call(this,c,u);this.draw(c)})}finally{this.props=i}}getChangeFlags(){var e;return(e=this.internalState)===null||e===void 0?void 0:e.changeFlags}setChangeFlags(e){if(!this.internalState)return;const{changeFlags:n}=this.internalState;for(const i in e)if(e[i]){let s=!1;switch(i){case"dataChanged":const o=e[i],a=n[i];o&&Array.isArray(a)&&(n.dataChanged=Array.isArray(o)?a.concat(o):o,s=!0);default:n[i]||(n[i]=e[i],s=!0)}s&&qt(TV,this,i,e)}const r=!!(n.dataChanged||n.updateTriggersChanged||n.propsChanged||n.extensionsChanged);n.propsOrDataChanged=r,n.somethingChanged=r||n.viewportChanged||n.stateChanged}_clearChangeFlags(){this.internalState.changeFlags={dataChanged:!1,propsChanged:!1,updateTriggersChanged:!1,viewportChanged:!1,stateChanged:!1,extensionsChanged:!1,propsOrDataChanged:!1,somethingChanged:!1}}_diffProps(e,n){const r=Jz(e,n);if(r.updateTriggersChanged)for(const s in r.updateTriggersChanged)r.updateTriggersChanged[s]&&this.invalidateAttribute(s);if(r.transitionsChanged)for(const s in r.transitionsChanged){var i;this.internalState.uniformTransitions.add(s,n[s],e[s],(i=e.transitions)===null||i===void 0?void 0:i[s])}return this.setChangeFlags(r)}validateProps(){Zz(this.props)}updateAutoHighlight(e){this.props.autoHighlight&&!Number.isInteger(this.props.highlightedObjectIndex)&&this._updateAutoHighlight(e)}_updateAutoHighlight(e){const n={pickingSelectedColor:e.picked?e.color:null},{highlightColor:r}=this.props;e.picked&&typeof r=="function"&&(n.pickingHighlightColor=r(e)),this.setModuleParameters(n),this.setNeedsRedraw()}_getAttributeManager(){const e=this.context;return new Wz(e.gl,{id:this.props.id,stats:e.stats,timeline:e.timeline})}_postUpdate(e,n){const{props:r,oldProps:i}=e;this.setNeedsRedraw(),this._updateAttributes();const{model:s}=this.state;s==null||s.setInstanceCount(this.getNumInstances());const{autoHighlight:o,highlightedObjectIndex:a,highlightColor:l}=r;if(n||i.autoHighlight!==o||i.highlightedObjectIndex!==a||i.highlightColor!==l){const c={};o||(c.pickingSelectedColor=null),Array.isArray(l)&&(c.pickingHighlightColor=l),(n||a!==i.highlightedObjectIndex)&&(c.pickingSelectedColor=Number.isFinite(a)&&a>=0?this.encodePickingColor(a):null),this.setModuleParameters(c)}}_getUpdateParams(){return{props:this.props,oldProps:this.internalState.getOldProps(),context:this.context,changeFlags:this.internalState.changeFlags}}_getNeedsRedraw(e){if(!this.internalState)return!1;let n=!1;n=n||this.internalState.needsRedraw&&this.id;const r=this.getAttributeManager(),i=r?r.getNeedsRedraw(e):!1;if(n=n||i,n)for(const s of this.props.extensions)s.onNeedsRedraw.call(this,s);return this.internalState.needsRedraw=this.internalState.needsRedraw&&!e.clearRedrawFlags,n}_onAsyncPropUpdated(){this._diffProps(this.props,this.internalState.getOldProps()),this.setNeedsUpdate()}}v(Fn,"defaultProps",OV);v(Fn,"layerName","Layer");const DV="compositeLayer.renderLayers";class er extends Fn{get isComposite(){return!0}get isLoaded(){return super.isLoaded&&this.getSubLayers().every(e=>e.isLoaded)}getSubLayers(){return this.internalState&&this.internalState.subLayers||[]}initializeState(e){}setState(e){super.setState(e),this.setNeedsUpdate()}getPickingInfo({info:e}){const{object:n}=e;return n&&n.__source&&n.__source.parent&&n.__source.parent.id===this.id&&(e.object=n.__source.object,e.index=n.__source.index),e}filterSubLayer(e){return!0}shouldRenderSubLayer(e,n){return n&&n.length}getSubLayerClass(e,n){const{_subLayerProps:r}=this.props;return r&&r[e]&&r[e].type||n}getSubLayerRow(e,n,r){return e.__source={parent:this,object:n,index:r},e}getSubLayerAccessor(e){if(typeof e=="function"){const n={index:-1,data:this.props.data,target:[]};return(r,i)=>r&&r.__source?(n.index=r.__source.index,e(r.__source.object,n)):e(r,i)}return e}getSubLayerProps(e={}){var n;const{opacity:r,pickable:i,visible:s,parameters:o,getPolygonOffset:a,highlightedObjectIndex:l,autoHighlight:c,highlightColor:u,coordinateSystem:f,coordinateOrigin:d,wrapLongitude:h,positionFormat:g,modelMatrix:A,extensions:E,fetch:p,operation:m,_subLayerProps:y}=this.props,_={id:"",updateTriggers:{},opacity:r,pickable:i,visible:s,parameters:o,getPolygonOffset:a,highlightedObjectIndex:l,autoHighlight:c,highlightColor:u,coordinateSystem:f,coordinateOrigin:d,wrapLongitude:h,positionFormat:g,modelMatrix:A,extensions:E,fetch:p,operation:m},I=y&&e.id&&y[e.id],C=I&&I.updateTriggers,b=e.id||"sublayer";if(I){const B=this.props[cs],R=e.type?e.type._propTypes:{};for(const M in I){const U=R[M]||B[M];U&&U.type==="accessor"&&(I[M]=this.getSubLayerAccessor(I[M]))}}Object.assign(_,e,I),_.id="".concat(this.props.id,"-").concat(b),_.updateTriggers={all:(n=this.props.updateTriggers)===null||n===void 0?void 0:n.all,...e.updateTriggers,...C};for(const B of E){const R=B.getSubLayerProps.call(this,B);R&&Object.assign(_,R,{updateTriggers:Object.assign(_.updateTriggers,R.updateTriggers)})}return _}_updateAutoHighlight(e){for(const n of this.getSubLayers())n.updateAutoHighlight(e)}_getAttributeManager(){return null}_postUpdate(e,n){let r=this.internalState.subLayers;const i=!r||this.needsUpdate();if(i){const s=this.renderLayers();r=rg(s,Boolean),this.internalState.subLayers=r}qt(DV,this,i,r);for(const s of r)s.parent=this}}v(er,"layerName","CompositeLayer");const gf=Math.PI/180,MC=180/Math.PI,Xf=6370972,la=256;function kV(){const t=la/Xf,e=Math.PI/180*la;return{unitsPerMeter:[t,t,t],unitsPerMeter2:[0,0,0],metersPerUnit:[1/t,1/t,1/t],unitsPerDegree:[e,e,t],unitsPerDegree2:[0,0,0],degreesPerUnit:[1/e,1/e,1/t]}}class QV extends bs{constructor(e={}){const{latitude:n=0,longitude:r=0,zoom:i=0,nearZMultiplier:s=.1,farZMultiplier:o=2,resolution:a=10}=e;let{height:l,altitude:c=1.5}=e;l=l||1,c=Math.max(.75,c);const u=new Ze().lookAt({eye:[0,-c,0],up:[0,0,1]}),f=Math.pow(2,i);u.rotateX(n*gf),u.rotateZ(-r*gf),u.scale(f/l);const d=Math.atan(.5/c),h=la*2*f/l;super({...e,height:l,viewMatrix:u,longitude:r,latitude:n,zoom:i,distanceScales:kV(),fovyRadians:d*2,focalDistance:c,near:s,far:Math.min(2,1/h+1)*c*o}),v(this,"longitude",void 0),v(this,"latitude",void 0),v(this,"resolution",void 0),this.latitude=n,this.longitude=r,this.resolution=a}get projectionMode(){return gr.GLOBE}getDistanceScales(){return this.distanceScales}getBounds(e={}){const n={targetZ:e.z||0},r=this.unproject([0,this.height/2],n),i=this.unproject([this.width/2,0],n),s=this.unproject([this.width,this.height/2],n),o=this.unproject([this.width/2,this.height],n);return s[0]<this.longitude&&(s[0]+=360),r[0]>this.longitude&&(r[0]-=360),[Math.min(r[0],s[0],i[0],o[0]),Math.min(r[1],s[1],i[1],o[1]),Math.max(r[0],s[0],i[0],o[0]),Math.max(r[1],s[1],i[1],o[1])]}unproject(e,{topLeft:n=!0,targetZ:r}={}){const[i,s,o]=e,a=n?s:this.height-s,{pixelUnprojectionMatrix:l}=this;let c;if(Number.isFinite(o))c=rp(l,[i,a,o,1]);else{const h=rp(l,[i,a,-1,1]),g=rp(l,[i,a,1,1]),A=((r||0)/Xf+1)*la,E=jA(ET([],h,g)),p=jA(h),m=jA(g),_=4*((4*p*m-(E-p-m)**2)/16)/E,I=Math.sqrt(p-_),C=Math.sqrt(Math.max(0,A*A-_)),b=(I-C)/Math.sqrt(E);c=l7([],h,g,b)}const[u,f,d]=this.unprojectPosition(c);return Number.isFinite(o)?[u,f,d]:Number.isFinite(r)?[u,f,r]:[u,f]}projectPosition(e){const[n,r,i=0]=e,s=n*gf,o=r*gf,a=Math.cos(o),l=(i/Xf+1)*la;return[Math.sin(s)*a*l,-Math.cos(s)*a*l,Math.sin(o)*l]}unprojectPosition(e){const[n,r,i]=e,s=_T(e),o=Math.asin(i/s),l=Math.atan2(n,-r)*MC,c=o*MC,u=(s/la-1)*Xf;return[l,c,u]}projectFlat(e){return e}unprojectFlat(e){return e}panByPosition(e,n){const r=this.unproject(n);return{longitude:e[0]-r[0]+this.longitude,latitude:e[1]-r[1]+this.latitude}}}function rp(t,e){const n=Wa([],e,t);return Ty(n,n,1/n[3]),n}const FV=new Ze().lookAt({eye:[0,0,1]});function UV({width:t,height:e,near:n,far:r,padding:i}){let s=-t/2,o=t/2,a=-e/2,l=e/2;if(i){const{left:c=0,right:u=0,top:f=0,bottom:d=0}=i,h=Pt((c+t-u)/2,0,t)-t/2,g=Pt((f+e-d)/2,0,e)-e/2;s-=h,o-=h,a+=g,l+=g}return new Ze().ortho({left:s,right:o,bottom:a,top:l,near:n,far:r})}class GV extends bs{constructor(e){const{width:n,height:r,near:i=.1,far:s=1e3,zoom:o=0,target:a=[0,0,0],padding:l=null,flipY:c=!0}=e,u=Array.isArray(o)?o[0]:o,f=Array.isArray(o)?o[1]:o,d=Math.min(u,f),h=Math.pow(2,d);let g;if(u!==f){const A=Math.pow(2,u),E=Math.pow(2,f);g={unitsPerMeter:[A/h,E/h,1],metersPerUnit:[h/A,h/E,1]}}super({...e,longitude:void 0,position:a,viewMatrix:FV.clone().scale([h,h*(c?-1:1),h]),projectionMatrix:UV({width:n||1,height:r||1,padding:l,near:i,far:s}),zoom:d,distanceScales:g})}projectFlat([e,n]){const{unitsPerMeter:r}=this.distanceScales;return[e*r[0],n*r[1]]}unprojectFlat([e,n]){const{metersPerUnit:r}=this.distanceScales;return[e*r[0],n*r[1]]}panByPosition(e,n){const r=ng(n,this.pixelUnprojectionMatrix),i=this.projectFlat(e),s=Vd([],i,dT([],r)),o=Vd([],this.center,s);return{target:this.unprojectFlat(o)}}}class zV extends HT{constructor(e){const{width:n,height:r,rotationX:i=0,rotationOrbit:s=0,target:o=[0,0,0],zoom:a=0,minRotationX:l=-90,maxRotationX:c=90,minZoom:u=-1/0,maxZoom:f=1/0,startPanPosition:d,startRotatePos:h,startRotationX:g,startRotationOrbit:A,startZoomPosition:E,startZoom:p}=e;super({width:n,height:r,rotationX:i,rotationOrbit:s,target:o,zoom:a,minRotationX:l,maxRotationX:c,minZoom:u,maxZoom:f},{startPanPosition:d,startRotatePos:h,startRotationX:g,startRotationOrbit:A,startZoomPosition:E,startZoom:p}),v(this,"makeViewport",void 0),this.makeViewport=e.makeViewport}panStart({pos:e}){return this._getUpdatedState({startPanPosition:this._unproject(e)})}pan({pos:e,startPosition:n}){const r=this.getState().startPanPosition||n;if(!r)return this;const s=this.makeViewport(this.getViewportProps()).panByPosition(r,e);return this._getUpdatedState(s)}panEnd(){return this._getUpdatedState({startPanPosition:null})}rotateStart({pos:e}){return this._getUpdatedState({startRotatePos:e,startRotationX:this.getViewportProps().rotationX,startRotationOrbit:this.getViewportProps().rotationOrbit})}rotate({pos:e,deltaAngleX:n=0,deltaAngleY:r=0}){const{startRotatePos:i,startRotationX:s,startRotationOrbit:o}=this.getState(),{width:a,height:l}=this.getViewportProps();if(!i||s===void 0||o===void 0)return this;let c;if(e){let u=(e[0]-i[0])/a;const f=(e[1]-i[1])/l;(s<-90||s>90)&&(u*=-1),c={rotationX:s+f*180,rotationOrbit:o+u*180}}else c={rotationX:s+r,rotationOrbit:o+n};return this._getUpdatedState(c)}rotateEnd(){return this._getUpdatedState({startRotationX:null,startRotationOrbit:null})}shortestPathFrom(e){const n=e.getViewportProps(),r={...this.getViewportProps()},{rotationOrbit:i}=r;return Math.abs(i-n.rotationOrbit)>180&&(r.rotationOrbit=i<0?i+360:i-360),r}zoomStart({pos:e}){return this._getUpdatedState({startZoomPosition:this._unproject(e),startZoom:this.getViewportProps().zoom})}zoom({pos:e,startPos:n,scale:r}){let{startZoom:i,startZoomPosition:s}=this.getState();if(s||(i=this.getViewportProps().zoom,s=this._unproject(n)||this._unproject(e)),!s)return this;const o=this._calculateNewZoom({scale:r,startZoom:i}),a=this.makeViewport({...this.getViewportProps(),zoom:o});return this._getUpdatedState({zoom:o,...a.panByPosition(s,e)})}zoomEnd(){return this._getUpdatedState({startZoomPosition:null,startZoom:null})}zoomIn(e=2){return this._getUpdatedState({zoom:this._calculateNewZoom({scale:e})})}zoomOut(e=2){return this._getUpdatedState({zoom:this._calculateNewZoom({scale:1/e})})}moveLeft(e=50){return this._panFromCenter([-e,0])}moveRight(e=50){return this._panFromCenter([e,0])}moveUp(e=50){return this._panFromCenter([0,-e])}moveDown(e=50){return this._panFromCenter([0,e])}rotateLeft(e=15){return this._getUpdatedState({rotationOrbit:this.getViewportProps().rotationOrbit-e})}rotateRight(e=15){return this._getUpdatedState({rotationOrbit:this.getViewportProps().rotationOrbit+e})}rotateUp(e=10){return this._getUpdatedState({rotationX:this.getViewportProps().rotationX-e})}rotateDown(e=10){return this._getUpdatedState({rotationX:this.getViewportProps().rotationX+e})}_unproject(e){const n=this.makeViewport(this.getViewportProps());return e&&n.unproject(e)}_calculateNewZoom({scale:e,startZoom:n}){const{maxZoom:r,minZoom:i}=this.getViewportProps();n===void 0&&(n=this.getViewportProps().zoom);const s=n+Math.log2(e);return Pt(s,i,r)}_panFromCenter(e){const{width:n,height:r,target:i}=this.getViewportProps();return this.pan({startPosition:i,pos:[n/2+e[0],r/2+e[1]]})}_getUpdatedState(e){return new this.constructor({makeViewport:this.makeViewport,...this.getViewportProps(),...this.getState(),...e})}applyConstraints(e){const{maxZoom:n,minZoom:r,zoom:i,maxRotationX:s,minRotationX:o,rotationOrbit:a}=e;return e.zoom=Array.isArray(i)?[Pt(i[0],r,n),Pt(i[1],r,n)]:Pt(i,r,n),e.rotationX=Pt(e.rotationX,o,s),(a<-180||a>180)&&(e.rotationOrbit=Y9(a+180,360)-180),e}}class VV extends zV{constructor(e){super(e),v(this,"zoomAxis",void 0),this.zoomAxis=e.zoomAxis||"all"}_calculateNewZoom({scale:e,startZoom:n}){const{maxZoom:r,minZoom:i}=this.getViewportProps();n===void 0&&(n=this.getViewportProps().zoom);let s=Math.log2(e);if(Array.isArray(n)){let[o,a]=n;switch(this.zoomAxis){case"X":o=Pt(o+s,i,r);break;case"Y":a=Pt(a+s,i,r);break;default:let l=Math.min(o+s,a+s);l<i&&(s+=i-l),l=Math.max(o+s,a+s),l>r&&(s+=r-l),o+=s,a+=s}return[o,a]}return Pt(n+s,i,r)}}class jV extends jT{constructor(...e){super(...e),v(this,"ControllerState",VV),v(this,"transition",{transitionDuration:300,transitionInterpolator:new My(["target","zoom"])}),v(this,"dragMode","pan")}_onPanRotate(){return!1}}class Fy extends fo{get ViewportType(){return GV}get ControllerType(){return jV}}v(Fy,"displayName","OrthographicView");class So{static get componentName(){return Object.prototype.hasOwnProperty.call(this,"extensionName")?this.extensionName:""}constructor(e){v(this,"opts",void 0),e&&(this.opts=e)}equals(e){return this===e?!0:this.constructor===e.constructor&&pr(this.opts,e.opts,1)}getShaders(e){return null}getSubLayerProps(e){const{defaultProps:n}=e.constructor,r={updateTriggers:{}};for(const i in n)if(i in this.props){const s=n[i],o=this.props[i];r[i]=o,s&&s.type==="accessor"&&(r.updateTriggers[i]=this.props.updateTriggers[i],typeof o=="function"&&(r[i]=this.getSubLayerAccessor(o)))}return r}initializeState(e,n){}updateState(e,n){}onNeedsRedraw(e){}getNeedsPickingBuffer(e){return!1}draw(e,n){}finalizeState(e,n){}}v(So,"defaultProps",{});v(So,"extensionName","LayerExtension");class c3{constructor(e){v(this,"opts",void 0),v(this,"typedArrayManager",void 0),v(this,"indexStarts",[0]),v(this,"vertexStarts",[0]),v(this,"vertexCount",0),v(this,"instanceCount",0),v(this,"attributes",void 0),v(this,"_attributeDefs",void 0),v(this,"data",void 0),v(this,"getGeometry",void 0),v(this,"geometryBuffer",void 0),v(this,"buffers",void 0),v(this,"positionSize",void 0),v(this,"normalize",void 0);const{attributes:n={}}=e;this.typedArrayManager=ka,this.attributes={},this._attributeDefs=n,this.opts=e,this.updateGeometry(e)}updateGeometry(e){Object.assign(this.opts,e);const{data:n,buffers:r={},getGeometry:i,geometryBuffer:s,positionFormat:o,dataChanged:a,normalize:l=!0}=this.opts;if(this.data=n,this.getGeometry=i,this.positionSize=s&&s.size||(o==="XY"?2:3),this.buffers=r,this.normalize=l,s&&(Rt(n.startIndices),this.getGeometry=this.getGeometryFromBuffer(s),l||(r.positions=s)),this.geometryBuffer=r.positions,Array.isArray(a))for(const c of a)this._rebuildGeometry(c);else this._rebuildGeometry()}updatePartialGeometry({startRow:e,endRow:n}){this._rebuildGeometry({startRow:e,endRow:n})}getGeometryFromBuffer(e){const n=e.value||e;return ArrayBuffer.isView(n)?t3(n,{size:this.positionSize,offset:e.offset,stride:e.stride,startIndices:this.data.startIndices}):null}_allocate(e,n){const{attributes:r,buffers:i,_attributeDefs:s,typedArrayManager:o}=this;for(const a in s)if(a in i)o.release(r[a]),r[a]=null;else{const l=s[a];l.copy=n,r[a]=o.allocate(r[a],e,l)}}_forEachGeometry(e,n,r){const{data:i,getGeometry:s}=this,{iterable:o,objectInfo:a}=fu(i,n,r);for(const l of o){a.index++;const c=s?s(l,a):null;e(c,a.index)}}_rebuildGeometry(e){if(!this.data)return;let{indexStarts:n,vertexStarts:r,instanceCount:i}=this;const{data:s,geometryBuffer:o}=this,{startRow:a=0,endRow:l=1/0}=e||{},c={};if(e||(n=[0],r=[0]),this.normalize||!o)this._forEachGeometry((f,d)=>{const h=f&&this.normalizeGeometry(f);c[d]=h,r[d+1]=r[d]+(h?this.getGeometrySize(h):0)},a,l),i=r[r.length-1];else if(r=s.startIndices,i=r[s.length]||0,ArrayBuffer.isView(o))i=i||o.length/this.positionSize;else if(o instanceof Ve){const f=o.accessor.stride||this.positionSize*4;i=i||o.byteLength/f}else if(o.buffer){const f=o.stride||this.positionSize*4;i=i||o.buffer.byteLength/f}else if(o.value){const f=o.value,d=o.stride/f.BYTES_PER_ELEMENT||this.positionSize;i=i||f.length/d}this._allocate(i,!!e),this.indexStarts=n,this.vertexStarts=r,this.instanceCount=i;const u={};this._forEachGeometry((f,d)=>{const h=c[d]||f;u.vertexStart=r[d],u.indexStart=n[d];const g=d<r.length-1?r[d+1]:i;u.geometrySize=g-r[d],u.geometryIndex=d,this.updateGeometryAttributes(h,u)},a,l),this.vertexCount=n[n.length-1]}}const ee={DEPTH_BUFFER_BIT:256,STENCIL_BUFFER_BIT:1024,COLOR_BUFFER_BIT:16384,POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6,ZERO:0,ONE:1,SRC_COLOR:768,ONE_MINUS_SRC_COLOR:769,SRC_ALPHA:770,ONE_MINUS_SRC_ALPHA:771,DST_ALPHA:772,ONE_MINUS_DST_ALPHA:773,DST_COLOR:774,ONE_MINUS_DST_COLOR:775,SRC_ALPHA_SATURATE:776,CONSTANT_COLOR:32769,ONE_MINUS_CONSTANT_COLOR:32770,CONSTANT_ALPHA:32771,ONE_MINUS_CONSTANT_ALPHA:32772,FUNC_ADD:32774,FUNC_SUBTRACT:32778,FUNC_REVERSE_SUBTRACT:32779,BLEND_EQUATION:32777,BLEND_EQUATION_RGB:32777,BLEND_EQUATION_ALPHA:34877,BLEND_DST_RGB:32968,BLEND_SRC_RGB:32969,BLEND_DST_ALPHA:32970,BLEND_SRC_ALPHA:32971,BLEND_COLOR:32773,ARRAY_BUFFER_BINDING:34964,ELEMENT_ARRAY_BUFFER_BINDING:34965,LINE_WIDTH:2849,ALIASED_POINT_SIZE_RANGE:33901,ALIASED_LINE_WIDTH_RANGE:33902,CULL_FACE_MODE:2885,FRONT_FACE:2886,DEPTH_RANGE:2928,DEPTH_WRITEMASK:2930,DEPTH_CLEAR_VALUE:2931,DEPTH_FUNC:2932,STENCIL_CLEAR_VALUE:2961,STENCIL_FUNC:2962,STENCIL_FAIL:2964,STENCIL_PASS_DEPTH_FAIL:2965,STENCIL_PASS_DEPTH_PASS:2966,STENCIL_REF:2967,STENCIL_VALUE_MASK:2963,STENCIL_WRITEMASK:2968,STENCIL_BACK_FUNC:34816,STENCIL_BACK_FAIL:34817,STENCIL_BACK_PASS_DEPTH_FAIL:34818,STENCIL_BACK_PASS_DEPTH_PASS:34819,STENCIL_BACK_REF:36003,STENCIL_BACK_VALUE_MASK:36004,STENCIL_BACK_WRITEMASK:36005,VIEWPORT:2978,SCISSOR_BOX:3088,COLOR_CLEAR_VALUE:3106,COLOR_WRITEMASK:3107,UNPACK_ALIGNMENT:3317,PACK_ALIGNMENT:3333,MAX_TEXTURE_SIZE:3379,MAX_VIEWPORT_DIMS:3386,SUBPIXEL_BITS:3408,RED_BITS:3410,GREEN_BITS:3411,BLUE_BITS:3412,ALPHA_BITS:3413,DEPTH_BITS:3414,STENCIL_BITS:3415,POLYGON_OFFSET_UNITS:10752,POLYGON_OFFSET_FACTOR:32824,TEXTURE_BINDING_2D:32873,SAMPLE_BUFFERS:32936,SAMPLES:32937,SAMPLE_COVERAGE_VALUE:32938,SAMPLE_COVERAGE_INVERT:32939,COMPRESSED_TEXTURE_FORMATS:34467,VENDOR:7936,RENDERER:7937,VERSION:7938,IMPLEMENTATION_COLOR_READ_TYPE:35738,IMPLEMENTATION_COLOR_READ_FORMAT:35739,BROWSER_DEFAULT_WEBGL:37444,STATIC_DRAW:35044,STREAM_DRAW:35040,DYNAMIC_DRAW:35048,ARRAY_BUFFER:34962,ELEMENT_ARRAY_BUFFER:34963,BUFFER_SIZE:34660,BUFFER_USAGE:34661,CURRENT_VERTEX_ATTRIB:34342,VERTEX_ATTRIB_ARRAY_ENABLED:34338,VERTEX_ATTRIB_ARRAY_SIZE:34339,VERTEX_ATTRIB_ARRAY_STRIDE:34340,VERTEX_ATTRIB_ARRAY_TYPE:34341,VERTEX_ATTRIB_ARRAY_NORMALIZED:34922,VERTEX_ATTRIB_ARRAY_POINTER:34373,VERTEX_ATTRIB_ARRAY_BUFFER_BINDING:34975,CULL_FACE:2884,FRONT:1028,BACK:1029,FRONT_AND_BACK:1032,BLEND:3042,DEPTH_TEST:2929,DITHER:3024,POLYGON_OFFSET_FILL:32823,SAMPLE_ALPHA_TO_COVERAGE:32926,SAMPLE_COVERAGE:32928,SCISSOR_TEST:3089,STENCIL_TEST:2960,NO_ERROR:0,INVALID_ENUM:1280,INVALID_VALUE:1281,INVALID_OPERATION:1282,OUT_OF_MEMORY:1285,CONTEXT_LOST_WEBGL:37442,CW:2304,CCW:2305,DONT_CARE:4352,FASTEST:4353,NICEST:4354,GENERATE_MIPMAP_HINT:33170,BYTE:5120,UNSIGNED_BYTE:5121,SHORT:5122,UNSIGNED_SHORT:5123,INT:5124,UNSIGNED_INT:5125,FLOAT:5126,DOUBLE:5130,DEPTH_COMPONENT:6402,ALPHA:6406,RGB:6407,RGBA:6408,LUMINANCE:6409,LUMINANCE_ALPHA:6410,UNSIGNED_SHORT_4_4_4_4:32819,UNSIGNED_SHORT_5_5_5_1:32820,UNSIGNED_SHORT_5_6_5:33635,FRAGMENT_SHADER:35632,VERTEX_SHADER:35633,COMPILE_STATUS:35713,DELETE_STATUS:35712,LINK_STATUS:35714,VALIDATE_STATUS:35715,ATTACHED_SHADERS:35717,ACTIVE_ATTRIBUTES:35721,ACTIVE_UNIFORMS:35718,MAX_VERTEX_ATTRIBS:34921,MAX_VERTEX_UNIFORM_VECTORS:36347,MAX_VARYING_VECTORS:36348,MAX_COMBINED_TEXTURE_IMAGE_UNITS:35661,MAX_VERTEX_TEXTURE_IMAGE_UNITS:35660,MAX_TEXTURE_IMAGE_UNITS:34930,MAX_FRAGMENT_UNIFORM_VECTORS:36349,SHADER_TYPE:35663,SHADING_LANGUAGE_VERSION:35724,CURRENT_PROGRAM:35725,NEVER:512,ALWAYS:519,LESS:513,EQUAL:514,LEQUAL:515,GREATER:516,GEQUAL:518,NOTEQUAL:517,KEEP:7680,REPLACE:7681,INCR:7682,DECR:7683,INVERT:5386,INCR_WRAP:34055,DECR_WRAP:34056,NEAREST:9728,LINEAR:9729,NEAREST_MIPMAP_NEAREST:9984,LINEAR_MIPMAP_NEAREST:9985,NEAREST_MIPMAP_LINEAR:9986,LINEAR_MIPMAP_LINEAR:9987,TEXTURE_MAG_FILTER:10240,TEXTURE_MIN_FILTER:10241,TEXTURE_WRAP_S:10242,TEXTURE_WRAP_T:10243,TEXTURE_2D:3553,TEXTURE:5890,TEXTURE_CUBE_MAP:34067,TEXTURE_BINDING_CUBE_MAP:34068,TEXTURE_CUBE_MAP_POSITIVE_X:34069,TEXTURE_CUBE_MAP_NEGATIVE_X:34070,TEXTURE_CUBE_MAP_POSITIVE_Y:34071,TEXTURE_CUBE_MAP_NEGATIVE_Y:34072,TEXTURE_CUBE_MAP_POSITIVE_Z:34073,TEXTURE_CUBE_MAP_NEGATIVE_Z:34074,MAX_CUBE_MAP_TEXTURE_SIZE:34076,TEXTURE0:33984,ACTIVE_TEXTURE:34016,REPEAT:10497,CLAMP_TO_EDGE:33071,MIRRORED_REPEAT:33648,TEXTURE_WIDTH:4096,TEXTURE_HEIGHT:4097,FLOAT_VEC2:35664,FLOAT_VEC3:35665,FLOAT_VEC4:35666,INT_VEC2:35667,INT_VEC3:35668,INT_VEC4:35669,BOOL:35670,BOOL_VEC2:35671,BOOL_VEC3:35672,BOOL_VEC4:35673,FLOAT_MAT2:35674,FLOAT_MAT3:35675,FLOAT_MAT4:35676,SAMPLER_2D:35678,SAMPLER_CUBE:35680,LOW_FLOAT:36336,MEDIUM_FLOAT:36337,HIGH_FLOAT:36338,LOW_INT:36339,MEDIUM_INT:36340,HIGH_INT:36341,FRAMEBUFFER:36160,RENDERBUFFER:36161,RGBA4:32854,RGB5_A1:32855,RGB565:36194,DEPTH_COMPONENT16:33189,STENCIL_INDEX:6401,STENCIL_INDEX8:36168,DEPTH_STENCIL:34041,RENDERBUFFER_WIDTH:36162,RENDERBUFFER_HEIGHT:36163,RENDERBUFFER_INTERNAL_FORMAT:36164,RENDERBUFFER_RED_SIZE:36176,RENDERBUFFER_GREEN_SIZE:36177,RENDERBUFFER_BLUE_SIZE:36178,RENDERBUFFER_ALPHA_SIZE:36179,RENDERBUFFER_DEPTH_SIZE:36180,RENDERBUFFER_STENCIL_SIZE:36181,FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE:36048,FRAMEBUFFER_ATTACHMENT_OBJECT_NAME:36049,FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL:36050,FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE:36051,COLOR_ATTACHMENT0:36064,DEPTH_ATTACHMENT:36096,STENCIL_ATTACHMENT:36128,DEPTH_STENCIL_ATTACHMENT:33306,NONE:0,FRAMEBUFFER_COMPLETE:36053,FRAMEBUFFER_INCOMPLETE_ATTACHMENT:36054,FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:36055,FRAMEBUFFER_INCOMPLETE_DIMENSIONS:36057,FRAMEBUFFER_UNSUPPORTED:36061,FRAMEBUFFER_BINDING:36006,RENDERBUFFER_BINDING:36007,READ_FRAMEBUFFER:36008,DRAW_FRAMEBUFFER:36009,MAX_RENDERBUFFER_SIZE:34024,INVALID_FRAMEBUFFER_OPERATION:1286,UNPACK_FLIP_Y_WEBGL:37440,UNPACK_PREMULTIPLY_ALPHA_WEBGL:37441,UNPACK_COLORSPACE_CONVERSION_WEBGL:37443,READ_BUFFER:3074,UNPACK_ROW_LENGTH:3314,UNPACK_SKIP_ROWS:3315,UNPACK_SKIP_PIXELS:3316,PACK_ROW_LENGTH:3330,PACK_SKIP_ROWS:3331,PACK_SKIP_PIXELS:3332,TEXTURE_BINDING_3D:32874,UNPACK_SKIP_IMAGES:32877,UNPACK_IMAGE_HEIGHT:32878,MAX_3D_TEXTURE_SIZE:32883,MAX_ELEMENTS_VERTICES:33e3,MAX_ELEMENTS_INDICES:33001,MAX_TEXTURE_LOD_BIAS:34045,MAX_FRAGMENT_UNIFORM_COMPONENTS:35657,MAX_VERTEX_UNIFORM_COMPONENTS:35658,MAX_ARRAY_TEXTURE_LAYERS:35071,MIN_PROGRAM_TEXEL_OFFSET:35076,MAX_PROGRAM_TEXEL_OFFSET:35077,MAX_VARYING_COMPONENTS:35659,FRAGMENT_SHADER_DERIVATIVE_HINT:35723,RASTERIZER_DISCARD:35977,VERTEX_ARRAY_BINDING:34229,MAX_VERTEX_OUTPUT_COMPONENTS:37154,MAX_FRAGMENT_INPUT_COMPONENTS:37157,MAX_SERVER_WAIT_TIMEOUT:37137,MAX_ELEMENT_INDEX:36203,RED:6403,RGB8:32849,RGBA8:32856,RGB10_A2:32857,TEXTURE_3D:32879,TEXTURE_WRAP_R:32882,TEXTURE_MIN_LOD:33082,TEXTURE_MAX_LOD:33083,TEXTURE_BASE_LEVEL:33084,TEXTURE_MAX_LEVEL:33085,TEXTURE_COMPARE_MODE:34892,TEXTURE_COMPARE_FUNC:34893,SRGB:35904,SRGB8:35905,SRGB8_ALPHA8:35907,COMPARE_REF_TO_TEXTURE:34894,RGBA32F:34836,RGB32F:34837,RGBA16F:34842,RGB16F:34843,TEXTURE_2D_ARRAY:35866,TEXTURE_BINDING_2D_ARRAY:35869,R11F_G11F_B10F:35898,RGB9_E5:35901,RGBA32UI:36208,RGB32UI:36209,RGBA16UI:36214,RGB16UI:36215,RGBA8UI:36220,RGB8UI:36221,RGBA32I:36226,RGB32I:36227,RGBA16I:36232,RGB16I:36233,RGBA8I:36238,RGB8I:36239,RED_INTEGER:36244,RGB_INTEGER:36248,RGBA_INTEGER:36249,R8:33321,RG8:33323,R16F:33325,R32F:33326,RG16F:33327,RG32F:33328,R8I:33329,R8UI:33330,R16I:33331,R16UI:33332,R32I:33333,R32UI:33334,RG8I:33335,RG8UI:33336,RG16I:33337,RG16UI:33338,RG32I:33339,RG32UI:33340,R8_SNORM:36756,RG8_SNORM:36757,RGB8_SNORM:36758,RGBA8_SNORM:36759,RGB10_A2UI:36975,TEXTURE_IMMUTABLE_FORMAT:37167,TEXTURE_IMMUTABLE_LEVELS:33503,UNSIGNED_INT_2_10_10_10_REV:33640,UNSIGNED_INT_10F_11F_11F_REV:35899,UNSIGNED_INT_5_9_9_9_REV:35902,FLOAT_32_UNSIGNED_INT_24_8_REV:36269,UNSIGNED_INT_24_8:34042,HALF_FLOAT:5131,RG:33319,RG_INTEGER:33320,INT_2_10_10_10_REV:36255,CURRENT_QUERY:34917,QUERY_RESULT:34918,QUERY_RESULT_AVAILABLE:34919,ANY_SAMPLES_PASSED:35887,ANY_SAMPLES_PASSED_CONSERVATIVE:36202,MAX_DRAW_BUFFERS:34852,DRAW_BUFFER0:34853,DRAW_BUFFER1:34854,DRAW_BUFFER2:34855,DRAW_BUFFER3:34856,DRAW_BUFFER4:34857,DRAW_BUFFER5:34858,DRAW_BUFFER6:34859,DRAW_BUFFER7:34860,DRAW_BUFFER8:34861,DRAW_BUFFER9:34862,DRAW_BUFFER10:34863,DRAW_BUFFER11:34864,DRAW_BUFFER12:34865,DRAW_BUFFER13:34866,DRAW_BUFFER14:34867,DRAW_BUFFER15:34868,MAX_COLOR_ATTACHMENTS:36063,COLOR_ATTACHMENT1:36065,COLOR_ATTACHMENT2:36066,COLOR_ATTACHMENT3:36067,COLOR_ATTACHMENT4:36068,COLOR_ATTACHMENT5:36069,COLOR_ATTACHMENT6:36070,COLOR_ATTACHMENT7:36071,COLOR_ATTACHMENT8:36072,COLOR_ATTACHMENT9:36073,COLOR_ATTACHMENT10:36074,COLOR_ATTACHMENT11:36075,COLOR_ATTACHMENT12:36076,COLOR_ATTACHMENT13:36077,COLOR_ATTACHMENT14:36078,COLOR_ATTACHMENT15:36079,SAMPLER_3D:35679,SAMPLER_2D_SHADOW:35682,SAMPLER_2D_ARRAY:36289,SAMPLER_2D_ARRAY_SHADOW:36292,SAMPLER_CUBE_SHADOW:36293,INT_SAMPLER_2D:36298,INT_SAMPLER_3D:36299,INT_SAMPLER_CUBE:36300,INT_SAMPLER_2D_ARRAY:36303,UNSIGNED_INT_SAMPLER_2D:36306,UNSIGNED_INT_SAMPLER_3D:36307,UNSIGNED_INT_SAMPLER_CUBE:36308,UNSIGNED_INT_SAMPLER_2D_ARRAY:36311,MAX_SAMPLES:36183,SAMPLER_BINDING:35097,PIXEL_PACK_BUFFER:35051,PIXEL_UNPACK_BUFFER:35052,PIXEL_PACK_BUFFER_BINDING:35053,PIXEL_UNPACK_BUFFER_BINDING:35055,COPY_READ_BUFFER:36662,COPY_WRITE_BUFFER:36663,COPY_READ_BUFFER_BINDING:36662,COPY_WRITE_BUFFER_BINDING:36663,FLOAT_MAT2x3:35685,FLOAT_MAT2x4:35686,FLOAT_MAT3x2:35687,FLOAT_MAT3x4:35688,FLOAT_MAT4x2:35689,FLOAT_MAT4x3:35690,UNSIGNED_INT_VEC2:36294,UNSIGNED_INT_VEC3:36295,UNSIGNED_INT_VEC4:36296,UNSIGNED_NORMALIZED:35863,SIGNED_NORMALIZED:36764,VERTEX_ATTRIB_ARRAY_INTEGER:35069,VERTEX_ATTRIB_ARRAY_DIVISOR:35070,TRANSFORM_FEEDBACK_BUFFER_MODE:35967,MAX_TRANSFORM_FEEDBACK_SEPARATE_COMPONENTS:35968,TRANSFORM_FEEDBACK_VARYINGS:35971,TRANSFORM_FEEDBACK_BUFFER_START:35972,TRANSFORM_FEEDBACK_BUFFER_SIZE:35973,TRANSFORM_FEEDBACK_PRIMITIVES_WRITTEN:35976,MAX_TRANSFORM_FEEDBACK_INTERLEAVED_COMPONENTS:35978,MAX_TRANSFORM_FEEDBACK_SEPARATE_ATTRIBS:35979,INTERLEAVED_ATTRIBS:35980,SEPARATE_ATTRIBS:35981,TRANSFORM_FEEDBACK_BUFFER:35982,TRANSFORM_FEEDBACK_BUFFER_BINDING:35983,TRANSFORM_FEEDBACK:36386,TRANSFORM_FEEDBACK_PAUSED:36387,TRANSFORM_FEEDBACK_ACTIVE:36388,TRANSFORM_FEEDBACK_BINDING:36389,FRAMEBUFFER_ATTACHMENT_COLOR_ENCODING:33296,FRAMEBUFFER_ATTACHMENT_COMPONENT_TYPE:33297,FRAMEBUFFER_ATTACHMENT_RED_SIZE:33298,FRAMEBUFFER_ATTACHMENT_GREEN_SIZE:33299,FRAMEBUFFER_ATTACHMENT_BLUE_SIZE:33300,FRAMEBUFFER_ATTACHMENT_ALPHA_SIZE:33301,FRAMEBUFFER_ATTACHMENT_DEPTH_SIZE:33302,FRAMEBUFFER_ATTACHMENT_STENCIL_SIZE:33303,FRAMEBUFFER_DEFAULT:33304,DEPTH24_STENCIL8:35056,DRAW_FRAMEBUFFER_BINDING:36006,READ_FRAMEBUFFER_BINDING:36010,RENDERBUFFER_SAMPLES:36011,FRAMEBUFFER_ATTACHMENT_TEXTURE_LAYER:36052,FRAMEBUFFER_INCOMPLETE_MULTISAMPLE:36182,UNIFORM_BUFFER:35345,UNIFORM_BUFFER_BINDING:35368,UNIFORM_BUFFER_START:35369,UNIFORM_BUFFER_SIZE:35370,MAX_VERTEX_UNIFORM_BLOCKS:35371,MAX_FRAGMENT_UNIFORM_BLOCKS:35373,MAX_COMBINED_UNIFORM_BLOCKS:35374,MAX_UNIFORM_BUFFER_BINDINGS:35375,MAX_UNIFORM_BLOCK_SIZE:35376,MAX_COMBINED_VERTEX_UNIFORM_COMPONENTS:35377,MAX_COMBINED_FRAGMENT_UNIFORM_COMPONENTS:35379,UNIFORM_BUFFER_OFFSET_ALIGNMENT:35380,ACTIVE_UNIFORM_BLOCKS:35382,UNIFORM_TYPE:35383,UNIFORM_SIZE:35384,UNIFORM_BLOCK_INDEX:35386,UNIFORM_OFFSET:35387,UNIFORM_ARRAY_STRIDE:35388,UNIFORM_MATRIX_STRIDE:35389,UNIFORM_IS_ROW_MAJOR:35390,UNIFORM_BLOCK_BINDING:35391,UNIFORM_BLOCK_DATA_SIZE:35392,UNIFORM_BLOCK_ACTIVE_UNIFORMS:35394,UNIFORM_BLOCK_ACTIVE_UNIFORM_INDICES:35395,UNIFORM_BLOCK_REFERENCED_BY_VERTEX_SHADER:35396,UNIFORM_BLOCK_REFERENCED_BY_FRAGMENT_SHADER:35398,OBJECT_TYPE:37138,SYNC_CONDITION:37139,SYNC_STATUS:37140,SYNC_FLAGS:37141,SYNC_FENCE:37142,SYNC_GPU_COMMANDS_COMPLETE:37143,UNSIGNALED:37144,SIGNALED:37145,ALREADY_SIGNALED:37146,TIMEOUT_EXPIRED:37147,CONDITION_SATISFIED:37148,WAIT_FAILED:37149,SYNC_FLUSH_COMMANDS_BIT:1,COLOR:6144,DEPTH:6145,STENCIL:6146,MIN:32775,MAX:32776,DEPTH_COMPONENT24:33190,STREAM_READ:35041,STREAM_COPY:35042,STATIC_READ:35045,STATIC_COPY:35046,DYNAMIC_READ:35049,DYNAMIC_COPY:35050,DEPTH_COMPONENT32F:36012,DEPTH32F_STENCIL8:36013,INVALID_INDEX:4294967295,TIMEOUT_IGNORED:-1,MAX_CLIENT_WAIT_TIMEOUT_WEBGL:37447,VERTEX_ATTRIB_ARRAY_DIVISOR_ANGLE:35070,UNMASKED_VENDOR_WEBGL:37445,UNMASKED_RENDERER_WEBGL:37446,MAX_TEXTURE_MAX_ANISOTROPY_EXT:34047,TEXTURE_MAX_ANISOTROPY_EXT:34046,COMPRESSED_RGB_S3TC_DXT1_EXT:33776,COMPRESSED_RGBA_S3TC_DXT1_EXT:33777,COMPRESSED_RGBA_S3TC_DXT3_EXT:33778,COMPRESSED_RGBA_S3TC_DXT5_EXT:33779,COMPRESSED_R11_EAC:37488,COMPRESSED_SIGNED_R11_EAC:37489,COMPRESSED_RG11_EAC:37490,COMPRESSED_SIGNED_RG11_EAC:37491,COMPRESSED_RGB8_ETC2:37492,COMPRESSED_RGBA8_ETC2_EAC:37493,COMPRESSED_SRGB8_ETC2:37494,COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:37495,COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2:37496,COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2:37497,COMPRESSED_RGB_PVRTC_4BPPV1_IMG:35840,COMPRESSED_RGBA_PVRTC_4BPPV1_IMG:35842,COMPRESSED_RGB_PVRTC_2BPPV1_IMG:35841,COMPRESSED_RGBA_PVRTC_2BPPV1_IMG:35843,COMPRESSED_RGB_ETC1_WEBGL:36196,COMPRESSED_RGB_ATC_WEBGL:35986,COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL:35986,COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL:34798,UNSIGNED_INT_24_8_WEBGL:34042,HALF_FLOAT_OES:36193,RGBA32F_EXT:34836,RGB32F_EXT:34837,FRAMEBUFFER_ATTACHMENT_COMPONENT_TYPE_EXT:33297,UNSIGNED_NORMALIZED_EXT:35863,MIN_EXT:32775,MAX_EXT:32776,SRGB_EXT:35904,SRGB_ALPHA_EXT:35906,SRGB8_ALPHA8_EXT:35907,FRAMEBUFFER_ATTACHMENT_COLOR_ENCODING_EXT:33296,FRAGMENT_SHADER_DERIVATIVE_HINT_OES:35723,COLOR_ATTACHMENT0_WEBGL:36064,COLOR_ATTACHMENT1_WEBGL:36065,COLOR_ATTACHMENT2_WEBGL:36066,COLOR_ATTACHMENT3_WEBGL:36067,COLOR_ATTACHMENT4_WEBGL:36068,COLOR_ATTACHMENT5_WEBGL:36069,COLOR_ATTACHMENT6_WEBGL:36070,COLOR_ATTACHMENT7_WEBGL:36071,COLOR_ATTACHMENT8_WEBGL:36072,COLOR_ATTACHMENT9_WEBGL:36073,COLOR_ATTACHMENT10_WEBGL:36074,COLOR_ATTACHMENT11_WEBGL:36075,COLOR_ATTACHMENT12_WEBGL:36076,COLOR_ATTACHMENT13_WEBGL:36077,COLOR_ATTACHMENT14_WEBGL:36078,COLOR_ATTACHMENT15_WEBGL:36079,DRAW_BUFFER0_WEBGL:34853,DRAW_BUFFER1_WEBGL:34854,DRAW_BUFFER2_WEBGL:34855,DRAW_BUFFER3_WEBGL:34856,DRAW_BUFFER4_WEBGL:34857,DRAW_BUFFER5_WEBGL:34858,DRAW_BUFFER6_WEBGL:34859,DRAW_BUFFER7_WEBGL:34860,DRAW_BUFFER8_WEBGL:34861,DRAW_BUFFER9_WEBGL:34862,DRAW_BUFFER10_WEBGL:34863,DRAW_BUFFER11_WEBGL:34864,DRAW_BUFFER12_WEBGL:34865,DRAW_BUFFER13_WEBGL:34866,DRAW_BUFFER14_WEBGL:34867,DRAW_BUFFER15_WEBGL:34868,MAX_COLOR_ATTACHMENTS_WEBGL:36063,MAX_DRAW_BUFFERS_WEBGL:34852,VERTEX_ARRAY_BINDING_OES:34229,QUERY_COUNTER_BITS_EXT:34916,CURRENT_QUERY_EXT:34917,QUERY_RESULT_EXT:34918,QUERY_RESULT_AVAILABLE_EXT:34919,TIME_ELAPSED_EXT:35007,TIMESTAMP_EXT:36392,GPU_DISJOINT_EXT:36795},HV=new Uint16Array([0,2,1,0,3,2]),WV=new Float32Array([0,1,0,0,1,0,1,1]);function YV(t,e){if(!e)return $V(t);const n=Math.max(Math.abs(t[0][0]-t[3][0]),Math.abs(t[1][0]-t[2][0])),r=Math.max(Math.abs(t[1][1]-t[0][1]),Math.abs(t[2][1]-t[3][1])),i=Math.ceil(n/e)+1,s=Math.ceil(r/e)+1,o=(i-1)*(s-1)*6,a=new Uint32Array(o),l=new Float32Array(i*s*2),c=new Float64Array(i*s*3);let u=0,f=0;for(let d=0;d<i;d++){const h=d/(i-1);for(let g=0;g<s;g++){const A=g/(s-1),E=KV(t,h,A);c[u*3+0]=E[0],c[u*3+1]=E[1],c[u*3+2]=E[2]||0,l[u*2+0]=h,l[u*2+1]=1-A,d>0&&g>0&&(a[f++]=u-s,a[f++]=u-s-1,a[f++]=u-1,a[f++]=u-s,a[f++]=u-1,a[f++]=u),u++}}return{vertexCount:o,positions:c,indices:a,texCoords:l}}function $V(t){const e=new Float64Array(12);for(let n=0;n<t.length;n++)e[n*3+0]=t[n][0],e[n*3+1]=t[n][1],e[n*3+2]=t[n][2]||0;return{vertexCount:6,positions:e,indices:HV,texCoords:WV}}function KV(t,e,n){return eo(eo(t[0],t[1],n),eo(t[3],t[2],n),e)}const qV=`
#define SHADER_NAME bitmap-layer-vertex-shader

attribute vec2 texCoords;
attribute vec3 positions;
attribute vec3 positions64Low;

varying vec2 vTexCoord;
varying vec2 vTexPos;

uniform float coordinateConversion;

const vec3 pickingColor = vec3(1.0, 0.0, 0.0);

void main(void) {
  geometry.worldPosition = positions;
  geometry.uv = texCoords;
  geometry.pickingColor = pickingColor;

  gl_Position = project_position_to_clipspace(positions, positions64Low, vec3(0.0), geometry.position);
  DECKGL_FILTER_GL_POSITION(gl_Position, geometry);

  vTexCoord = texCoords;

  if (coordinateConversion < -0.5) {
    vTexPos = geometry.position.xy + project_uCommonOrigin.xy;
  } else if (coordinateConversion > 0.5) {
    vTexPos = geometry.worldPosition.xy;
  }

  vec4 color = vec4(0.0);
  DECKGL_FILTER_COLOR(color, geometry);
}
`,XV=`
vec3 packUVsIntoRGB(vec2 uv) {
  // Extract the top 8 bits. We want values to be truncated down so we can add a fraction
  vec2 uv8bit = floor(uv * 256.);

  // Calculate the normalized remainders of u and v parts that do not fit into 8 bits
  // Scale and clamp to 0-1 range
  vec2 uvFraction = fract(uv * 256.);
  vec2 uvFraction4bit = floor(uvFraction * 16.);

  // Remainder can be encoded in blue channel, encode as 4 bits for pixel coordinates
  float fractions = uvFraction4bit.x + uvFraction4bit.y * 16.;

  return vec3(uv8bit, fractions) / 255.;
}
`,ZV=`
#define SHADER_NAME bitmap-layer-fragment-shader

#ifdef GL_ES
precision highp float;
#endif

uniform sampler2D bitmapTexture;

varying vec2 vTexCoord;
varying vec2 vTexPos;

uniform float desaturate;
uniform vec4 transparentColor;
uniform vec3 tintColor;
uniform float opacity;

uniform float coordinateConversion;
uniform vec4 bounds;

/* projection utils */
const float TILE_SIZE = 512.0;
const float PI = 3.1415926536;
const float WORLD_SCALE = TILE_SIZE / PI / 2.0;

// from degrees to Web Mercator
vec2 lnglat_to_mercator(vec2 lnglat) {
  float x = lnglat.x;
  float y = clamp(lnglat.y, -89.9, 89.9);
  return vec2(
    radians(x) + PI,
    PI + log(tan(PI * 0.25 + radians(y) * 0.5))
  ) * WORLD_SCALE;
}

// from Web Mercator to degrees
vec2 mercator_to_lnglat(vec2 xy) {
  xy /= WORLD_SCALE;
  return degrees(vec2(
    xy.x - PI,
    atan(exp(xy.y - PI)) * 2.0 - PI * 0.5
  ));
}
/* End projection utils */

// apply desaturation
vec3 color_desaturate(vec3 color) {
  float luminance = (color.r + color.g + color.b) * 0.333333333;
  return mix(color, vec3(luminance), desaturate);
}

// apply tint
vec3 color_tint(vec3 color) {
  return color * tintColor;
}

// blend with background color
vec4 apply_opacity(vec3 color, float alpha) {
  if (transparentColor.a == 0.0) {
    return vec4(color, alpha);
  }
  float blendedAlpha = alpha + transparentColor.a * (1.0 - alpha);
  float highLightRatio = alpha / blendedAlpha;
  vec3 blendedRGB = mix(transparentColor.rgb, color, highLightRatio);
  return vec4(blendedRGB, blendedAlpha);
}

vec2 getUV(vec2 pos) {
  return vec2(
    (pos.x - bounds[0]) / (bounds[2] - bounds[0]),
    (pos.y - bounds[3]) / (bounds[1] - bounds[3])
  );
}

`.concat(XV,`

void main(void) {
  vec2 uv = vTexCoord;
  if (coordinateConversion < -0.5) {
    vec2 lnglat = mercator_to_lnglat(vTexPos);
    uv = getUV(lnglat);
  } else if (coordinateConversion > 0.5) {
    vec2 commonPos = lnglat_to_mercator(vTexPos);
    uv = getUV(commonPos);
  }
  vec4 bitmapColor = texture2D(bitmapTexture, uv);

  gl_FragColor = apply_opacity(color_tint(color_desaturate(bitmapColor.rgb)), bitmapColor.a * opacity);

  geometry.uv = uv;
  DECKGL_FILTER_COLOR(gl_FragColor, geometry);

  if (picking_uActive && !picking_uAttribute) {
    // Since instance information is not used, we can use picking color for pixel index
    gl_FragColor.rgb = packUVsIntoRGB(uv);
  }
}
`),JV={image:{type:"image",value:null,async:!0},bounds:{type:"array",value:[1,0,0,1],compare:!0},_imageCoordinateSystem:me.DEFAULT,desaturate:{type:"number",min:0,max:1,value:0},transparentColor:{type:"color",value:[0,0,0,0]},tintColor:{type:"color",value:[255,255,255]},textureParameters:{type:"object",ignore:!0}};let og=class extends Fn{constructor(...e){super(...e),v(this,"state",void 0)}getShaders(){return super.getShaders({vs:qV,fs:ZV,modules:[Ts,Bs]})}initializeState(){const e=this.getAttributeManager();e.remove(["instancePickingColors"]);const n=!0;e.add({indices:{size:1,isIndexed:!0,update:r=>r.value=this.state.mesh.indices,noAlloc:n},positions:{size:3,type:5130,fp64:this.use64bitPositions(),update:r=>r.value=this.state.mesh.positions,noAlloc:n},texCoords:{size:2,update:r=>r.value=this.state.mesh.texCoords,noAlloc:n}})}updateState({props:e,oldProps:n,changeFlags:r}){const i=this.getAttributeManager();if(r.extensionsChanged){var s;const{gl:o}=this.context;(s=this.state.model)===null||s===void 0||s.delete(),this.state.model=this._getModel(o),i.invalidateAll()}if(e.bounds!==n.bounds){const o=this.state.mesh,a=this._createMesh();this.state.model.setVertexCount(a.vertexCount);for(const l in a)o&&o[l]!==a[l]&&i.invalidate(l);this.setState({mesh:a,...this._getCoordinateUniforms()})}else e._imageCoordinateSystem!==n._imageCoordinateSystem&&this.setState(this._getCoordinateUniforms())}getPickingInfo(e){const{image:n}=this.props,r=e.info;if(!r.color||!n)return r.bitmap=null,r;const{width:i,height:s}=n;r.index=0;const o=ej(r.color),a=[Math.floor(o[0]*i),Math.floor(o[1]*s)];return r.bitmap={size:{width:i,height:s},uv:o,pixel:a},r}disablePickingIndex(){this.setState({disablePicking:!0})}restorePickingColors(){this.setState({disablePicking:!1})}_updateAutoHighlight(e){super._updateAutoHighlight({...e,color:this.encodePickingColor(0)})}_createMesh(){const{bounds:e}=this.props;let n=e;return NC(e)&&(n=[[e[0],e[1]],[e[0],e[3]],[e[2],e[3]],[e[2],e[1]]]),YV(n,this.context.viewport.resolution)}_getModel(e){return e?new Jn(e,{...this.getShaders(),id:this.props.id,geometry:new Wr({drawMode:4,vertexCount:6}),isInstanced:!1}):null}draw(e){const{uniforms:n,moduleParameters:r}=e,{model:i,coordinateConversion:s,bounds:o,disablePicking:a}=this.state,{image:l,desaturate:c,transparentColor:u,tintColor:f}=this.props;r.pickingActive&&a||l&&i&&i.setUniforms(n).setUniforms({bitmapTexture:l,desaturate:c,transparentColor:u.map(d=>d/255),tintColor:f.slice(0,3).map(d=>d/255),coordinateConversion:s,bounds:o}).draw()}_getCoordinateUniforms(){const{LNGLAT:e,CARTESIAN:n,DEFAULT:r}=me;let{_imageCoordinateSystem:i}=this.props;if(i!==r){const{bounds:s}=this.props;if(!NC(s))throw new Error("_imageCoordinateSystem only supports rectangular bounds");const o=this.context.viewport.resolution?e:n;if(i=i===e?e:n,i===e&&o===n)return{coordinateConversion:-1,bounds:s};if(i===n&&o===e){const a=ms([s[0],s[1]]),l=ms([s[2],s[3]]);return{coordinateConversion:1,bounds:[a[0],a[1],l[0],l[1]]}}}return{coordinateConversion:0,bounds:[0,0,0,0]}}};v(og,"layerName","BitmapLayer");v(og,"defaultProps",JV);function ej(t){const[e,n,r]=t,i=(r&240)/256,s=(r&15)/16;return[(e+s)/256,(n+i)/256]}function NC(t){return Number.isFinite(t[0])}const tj=`#define SHADER_NAME icon-layer-vertex-shader

attribute vec2 positions;

attribute vec3 instancePositions;
attribute vec3 instancePositions64Low;
attribute float instanceSizes;
attribute float instanceAngles;
attribute vec4 instanceColors;
attribute vec3 instancePickingColors;
attribute vec4 instanceIconFrames;
attribute float instanceColorModes;
attribute vec2 instanceOffsets;
attribute vec2 instancePixelOffset;

uniform float sizeScale;
uniform vec2 iconsTextureDim;
uniform float sizeMinPixels;
uniform float sizeMaxPixels;
uniform bool billboard;
uniform int sizeUnits;

varying float vColorMode;
varying vec4 vColor;
varying vec2 vTextureCoords;
varying vec2 uv;

vec2 rotate_by_angle(vec2 vertex, float angle) {
  float angle_radian = angle * PI / 180.0;
  float cos_angle = cos(angle_radian);
  float sin_angle = sin(angle_radian);
  mat2 rotationMatrix = mat2(cos_angle, -sin_angle, sin_angle, cos_angle);
  return rotationMatrix * vertex;
}

void main(void) {
  geometry.worldPosition = instancePositions;
  geometry.uv = positions;
  geometry.pickingColor = instancePickingColors;
  uv = positions;

  vec2 iconSize = instanceIconFrames.zw;
  float sizePixels = clamp(
    project_size_to_pixel(instanceSizes * sizeScale, sizeUnits), 
    sizeMinPixels, sizeMaxPixels
  );
  float instanceScale = iconSize.y == 0.0 ? 0.0 : sizePixels / iconSize.y;
  vec2 pixelOffset = positions / 2.0 * iconSize + instanceOffsets;
  pixelOffset = rotate_by_angle(pixelOffset, instanceAngles) * instanceScale;
  pixelOffset += instancePixelOffset;
  pixelOffset.y *= -1.0;

  if (billboard)  {
    gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, vec3(0.0), geometry.position);
    DECKGL_FILTER_GL_POSITION(gl_Position, geometry);
    vec3 offset = vec3(pixelOffset, 0.0);
    DECKGL_FILTER_SIZE(offset, geometry);
    gl_Position.xy += project_pixel_size_to_clipspace(offset.xy);

  } else {
    vec3 offset_common = vec3(project_pixel_size(pixelOffset), 0.0);
    DECKGL_FILTER_SIZE(offset_common, geometry);
    gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, offset_common, geometry.position); 
    DECKGL_FILTER_GL_POSITION(gl_Position, geometry);
  }

  vTextureCoords = mix(
    instanceIconFrames.xy,
    instanceIconFrames.xy + iconSize,
    (positions.xy + 1.0) / 2.0
  ) / iconsTextureDim;

  vColor = instanceColors;
  DECKGL_FILTER_COLOR(vColor, geometry);

  vColorMode = instanceColorModes;
}
`,nj=`#define SHADER_NAME icon-layer-fragment-shader

precision highp float;

uniform float opacity;
uniform sampler2D iconsTexture;
uniform float alphaCutoff;

varying float vColorMode;
varying vec4 vColor;
varying vec2 vTextureCoords;
varying vec2 uv;

void main(void) {
  geometry.uv = uv;

  vec4 texColor = texture2D(iconsTexture, vTextureCoords);
  vec3 color = mix(texColor.rgb, vColor.rgb, vColorMode);
  float a = texColor.a * opacity * vColor.a;

  if (a < alphaCutoff) {
    discard;
  }

  gl_FragColor = vec4(color, a);
  DECKGL_FILTER_COLOR(gl_FragColor, geometry);
}
`,rj=1024,ij=4,OC=()=>{},DC={10241:9987,10240:9729,10242:33071,10243:33071};function sj(t){return Math.pow(2,Math.ceil(Math.log2(t)))}function oj(t,e,n,r){const i=Math.min(n/e.width,r/e.height),s=Math.floor(e.width*i),o=Math.floor(e.height*i);return i===1?{data:e,width:s,height:o}:(t.canvas.height=o,t.canvas.width=s,t.clearRect(0,0,s,o),t.drawImage(e,0,0,e.width,e.height,0,0,s,o),{data:t.canvas,width:s,height:o})}function Bc(t){return t&&(t.id||t.url)}function aj(t,e,n,r){const i=t.width,s=t.height,o=new _n(t.gl,{width:e,height:n,parameters:r});return S6(t,o,{targetY:0,width:i,height:s}),t.delete(),o}function kC(t,e,n){for(let r=0;r<e.length;r++){const{icon:i,xOffset:s}=e[r],o=Bc(i);t[o]={...i,x:s,y:n}}}function lj({icons:t,buffer:e,mapping:n={},xOffset:r=0,yOffset:i=0,rowHeight:s=0,canvasWidth:o}){let a=[];for(let l=0;l<t.length;l++){const c=t[l],u=Bc(c);if(!n[u]){const{height:f,width:d}=c;r+d+e>o&&(kC(n,a,i),r=0,i=s+i+e,s=0,a=[]),a.push({icon:c,xOffset:r}),r=r+d+e,s=Math.max(s,f)}}return a.length>0&&kC(n,a,i),{mapping:n,rowHeight:s,xOffset:r,yOffset:i,canvasWidth:o,canvasHeight:sj(s+i+e)}}function cj(t,e,n){if(!t||!e)return null;n=n||{};const r={},{iterable:i,objectInfo:s}=fu(t);for(const o of i){s.index++;const a=e(o,s),l=Bc(a);if(!a)throw new Error("Icon is missing.");if(!a.url)throw new Error("Icon url is missing.");!r[l]&&(!n[l]||a.url!==n[l].url)&&(r[l]={...a,source:o,sourceIndex:s.index})}return r}class uj{constructor(e,{onUpdate:n=OC,onError:r=OC}){v(this,"gl",void 0),v(this,"onUpdate",void 0),v(this,"onError",void 0),v(this,"_loadOptions",null),v(this,"_texture",null),v(this,"_externalTexture",null),v(this,"_mapping",{}),v(this,"_textureParameters",null),v(this,"_pendingCount",0),v(this,"_autoPacking",!1),v(this,"_xOffset",0),v(this,"_yOffset",0),v(this,"_rowHeight",0),v(this,"_buffer",ij),v(this,"_canvasWidth",rj),v(this,"_canvasHeight",0),v(this,"_canvas",null),this.gl=e,this.onUpdate=n,this.onError=r}finalize(){var e;(e=this._texture)===null||e===void 0||e.delete()}getTexture(){return this._texture||this._externalTexture}getIconMapping(e){const n=this._autoPacking?Bc(e):e;return this._mapping[n]||{}}setProps({loadOptions:e,autoPacking:n,iconAtlas:r,iconMapping:i,textureParameters:s}){if(e&&(this._loadOptions=e),n!==void 0&&(this._autoPacking=n),i&&(this._mapping=i),r){var o;(o=this._texture)===null||o===void 0||o.delete(),this._texture=null,this._externalTexture=r}s&&(this._textureParameters=s)}get isLoaded(){return this._pendingCount===0}packIcons(e,n){if(!this._autoPacking||typeof document>"u")return;const r=Object.values(cj(e,n,this._mapping)||{});if(r.length>0){const{mapping:i,xOffset:s,yOffset:o,rowHeight:a,canvasHeight:l}=lj({icons:r,buffer:this._buffer,canvasWidth:this._canvasWidth,mapping:this._mapping,rowHeight:this._rowHeight,xOffset:this._xOffset,yOffset:this._yOffset});this._rowHeight=a,this._mapping=i,this._xOffset=s,this._yOffset=o,this._canvasHeight=l,this._texture||(this._texture=new _n(this.gl,{width:this._canvasWidth,height:this._canvasHeight,parameters:this._textureParameters||DC})),this._texture.height!==this._canvasHeight&&(this._texture=aj(this._texture,this._canvasWidth,this._canvasHeight,this._textureParameters||DC)),this.onUpdate(),this._canvas=this._canvas||document.createElement("canvas"),this._loadIcons(r)}}_loadIcons(e){const n=this._canvas.getContext("2d",{willReadFrequently:!0});for(const r of e)this._pendingCount++,Qd(r.url,this._loadOptions).then(i=>{const s=Bc(r),o=this._mapping[s],{x:a,y:l,width:c,height:u}=o,{data:f,width:d,height:h}=oj(n,i,c,u);this._texture.setSubImageData({data:f,x:a+(c-d)/2,y:l+(u-h)/2,width:d,height:h}),o.width=d,o.height=h,this._texture.generateMipmap(),this.onUpdate()}).catch(i=>{this.onError({url:r.url,source:r.source,sourceIndex:r.sourceIndex,loadOptions:this._loadOptions,error:i})}).finally(()=>{this._pendingCount--})}}const u3=[0,0,0,255],fj={iconAtlas:{type:"image",value:null,async:!0},iconMapping:{type:"object",value:{},async:!0},sizeScale:{type:"number",value:1,min:0},billboard:!0,sizeUnits:"pixels",sizeMinPixels:{type:"number",min:0,value:0},sizeMaxPixels:{type:"number",min:0,value:Number.MAX_SAFE_INTEGER},alphaCutoff:{type:"number",value:.05,min:0,max:1},getPosition:{type:"accessor",value:t=>t.position},getIcon:{type:"accessor",value:t=>t.icon},getColor:{type:"accessor",value:u3},getSize:{type:"accessor",value:1},getAngle:{type:"accessor",value:0},getPixelOffset:{type:"accessor",value:[0,0]},onIconError:{type:"function",value:null,optional:!0},textureParameters:{type:"object",ignore:!0}};class ag extends Fn{constructor(...e){super(...e),v(this,"state",void 0)}getShaders(){return super.getShaders({vs:tj,fs:nj,modules:[Ts,Bs]})}initializeState(){this.state={iconManager:new uj(this.context.gl,{onUpdate:this._onUpdate.bind(this),onError:this._onError.bind(this)})},this.getAttributeManager().addInstanced({instancePositions:{size:3,type:5130,fp64:this.use64bitPositions(),transition:!0,accessor:"getPosition"},instanceSizes:{size:1,transition:!0,accessor:"getSize",defaultValue:1},instanceOffsets:{size:2,accessor:"getIcon",transform:this.getInstanceOffset},instanceIconFrames:{size:4,accessor:"getIcon",transform:this.getInstanceIconFrame},instanceColorModes:{size:1,type:5121,accessor:"getIcon",transform:this.getInstanceColorMode},instanceColors:{size:this.props.colorFormat.length,type:5121,normalized:!0,transition:!0,accessor:"getColor",defaultValue:u3},instanceAngles:{size:1,transition:!0,accessor:"getAngle"},instancePixelOffset:{size:2,transition:!0,accessor:"getPixelOffset"}})}updateState(e){super.updateState(e);const{props:n,oldProps:r,changeFlags:i}=e,s=this.getAttributeManager(),{iconAtlas:o,iconMapping:a,data:l,getIcon:c,textureParameters:u}=n,{iconManager:f}=this.state,d=o||this.internalState.isAsyncPropLoading("iconAtlas");if(f.setProps({loadOptions:n.loadOptions,autoPacking:!d,iconAtlas:o,iconMapping:d?a:null,textureParameters:u}),d?r.iconMapping!==n.iconMapping&&s.invalidate("getIcon"):(i.dataChanged||i.updateTriggersChanged&&(i.updateTriggersChanged.all||i.updateTriggersChanged.getIcon))&&f.packIcons(l,c),i.extensionsChanged){var h;const{gl:g}=this.context;(h=this.state.model)===null||h===void 0||h.delete(),this.state.model=this._getModel(g),s.invalidateAll()}}get isLoaded(){return super.isLoaded&&this.state.iconManager.isLoaded}finalizeState(e){super.finalizeState(e),this.state.iconManager.finalize()}draw({uniforms:e}){const{sizeScale:n,sizeMinPixels:r,sizeMaxPixels:i,sizeUnits:s,billboard:o,alphaCutoff:a}=this.props,{iconManager:l}=this.state,c=l.getTexture();c&&this.state.model.setUniforms(e).setUniforms({iconsTexture:c,iconsTextureDim:[c.width,c.height],sizeUnits:As[s],sizeScale:n,sizeMinPixels:r,sizeMaxPixels:i,billboard:o,alphaCutoff:a}).draw()}_getModel(e){const n=[-1,-1,-1,1,1,1,1,-1];return new Jn(e,{...this.getShaders(),id:this.props.id,geometry:new Wr({drawMode:6,attributes:{positions:{size:2,value:new Float32Array(n)}}}),isInstanced:!0})}_onUpdate(){this.setNeedsRedraw()}_onError(e){var n;const r=(n=this.getCurrentLayer())===null||n===void 0?void 0:n.props.onIconError;r?r(e):be.error(e.error.message)()}getInstanceOffset(e){const{width:n,height:r,anchorX:i=n/2,anchorY:s=r/2}=this.state.iconManager.getIconMapping(e);return[n/2-i,r/2-s]}getInstanceColorMode(e){return this.state.iconManager.getIconMapping(e).mask?1:0}getInstanceIconFrame(e){const{x:n,y:r,width:i,height:s}=this.state.iconManager.getIconMapping(e);return[n,r,i,s]}}v(ag,"defaultProps",fj);v(ag,"layerName","IconLayer");const dj=`#define SHADER_NAME line-layer-vertex-shader

attribute vec3 positions;
attribute vec3 instanceSourcePositions;
attribute vec3 instanceTargetPositions;
attribute vec3 instanceSourcePositions64Low;
attribute vec3 instanceTargetPositions64Low;
attribute vec4 instanceColors;
attribute vec3 instancePickingColors;
attribute float instanceWidths;

uniform float opacity;
uniform float widthScale;
uniform float widthMinPixels;
uniform float widthMaxPixels;
uniform float useShortestPath;
uniform int widthUnits;

varying vec4 vColor;
varying vec2 uv;
vec2 getExtrusionOffset(vec2 line_clipspace, float offset_direction, float width) {
  vec2 dir_screenspace = normalize(line_clipspace * project_uViewportSize);
  dir_screenspace = vec2(-dir_screenspace.y, dir_screenspace.x);

  return dir_screenspace * offset_direction * width / 2.0;
}

vec3 splitLine(vec3 a, vec3 b, float x) {
  float t = (x - a.x) / (b.x - a.x);
  return vec3(x, mix(a.yz, b.yz, t));
}

void main(void) {
  geometry.worldPosition = instanceSourcePositions;
  geometry.worldPositionAlt = instanceTargetPositions;

  vec3 source_world = instanceSourcePositions;
  vec3 target_world = instanceTargetPositions;
  vec3 source_world_64low = instanceSourcePositions64Low;
  vec3 target_world_64low = instanceTargetPositions64Low;

  if (useShortestPath > 0.5 || useShortestPath < -0.5) {
    source_world.x = mod(source_world.x + 180., 360.0) - 180.;
    target_world.x = mod(target_world.x + 180., 360.0) - 180.;
    float deltaLng = target_world.x - source_world.x;

    if (deltaLng * useShortestPath > 180.) {
      source_world.x += 360. * useShortestPath;
      source_world = splitLine(source_world, target_world, 180. * useShortestPath);
      source_world_64low = vec3(0.0);
    } else if (deltaLng * useShortestPath < -180.) {
      target_world.x += 360. * useShortestPath;
      target_world = splitLine(source_world, target_world, 180. * useShortestPath);
      target_world_64low = vec3(0.0);
    } else if (useShortestPath < 0.) {
      gl_Position = vec4(0.);
      return;
    }
  }
  vec4 source_commonspace;
  vec4 target_commonspace;
  vec4 source = project_position_to_clipspace(source_world, source_world_64low, vec3(0.), source_commonspace);
  vec4 target = project_position_to_clipspace(target_world, target_world_64low, vec3(0.), target_commonspace);
  float segmentIndex = positions.x;
  vec4 p = mix(source, target, segmentIndex);
  geometry.position = mix(source_commonspace, target_commonspace, segmentIndex);
  uv = positions.xy;
  geometry.uv = uv;
  geometry.pickingColor = instancePickingColors;
  float widthPixels = clamp(
    project_size_to_pixel(instanceWidths * widthScale, widthUnits),
    widthMinPixels, widthMaxPixels
  );
  vec3 offset = vec3(
    getExtrusionOffset(target.xy - source.xy, positions.y, widthPixels),
    0.0);
  DECKGL_FILTER_SIZE(offset, geometry);
  DECKGL_FILTER_GL_POSITION(p, geometry);
  gl_Position = p + vec4(project_pixel_size_to_clipspace(offset.xy), 0.0, 0.0);
  vColor = vec4(instanceColors.rgb, instanceColors.a * opacity);
  DECKGL_FILTER_COLOR(vColor, geometry);
}
`,hj=`#define SHADER_NAME line-layer-fragment-shader

precision highp float;

varying vec4 vColor;
varying vec2 uv;

void main(void) {
  geometry.uv = uv;

  gl_FragColor = vColor;

  DECKGL_FILTER_COLOR(gl_FragColor, geometry);
}
`,gj=[0,0,0,255],Aj={getSourcePosition:{type:"accessor",value:t=>t.sourcePosition},getTargetPosition:{type:"accessor",value:t=>t.targetPosition},getColor:{type:"accessor",value:gj},getWidth:{type:"accessor",value:1},widthUnits:"pixels",widthScale:{type:"number",value:1,min:0},widthMinPixels:{type:"number",value:0,min:0},widthMaxPixels:{type:"number",value:Number.MAX_SAFE_INTEGER,min:0}};class tc extends Fn{getBounds(){var e;return(e=this.getAttributeManager())===null||e===void 0?void 0:e.getBounds(["instanceSourcePositions","instanceTargetPositions"])}getShaders(){return super.getShaders({vs:dj,fs:hj,modules:[Ts,Bs]})}get wrapLongitude(){return!1}initializeState(){this.getAttributeManager().addInstanced({instanceSourcePositions:{size:3,type:5130,fp64:this.use64bitPositions(),transition:!0,accessor:"getSourcePosition"},instanceTargetPositions:{size:3,type:5130,fp64:this.use64bitPositions(),transition:!0,accessor:"getTargetPosition"},instanceColors:{size:this.props.colorFormat.length,type:5121,normalized:!0,transition:!0,accessor:"getColor",defaultValue:[0,0,0,255]},instanceWidths:{size:1,transition:!0,accessor:"getWidth",defaultValue:1}})}updateState(e){if(super.updateState(e),e.changeFlags.extensionsChanged){var n;const{gl:r}=this.context;(n=this.state.model)===null||n===void 0||n.delete(),this.state.model=this._getModel(r),this.getAttributeManager().invalidateAll()}}draw({uniforms:e}){const{widthUnits:n,widthScale:r,widthMinPixels:i,widthMaxPixels:s,wrapLongitude:o}=this.props;this.state.model.setUniforms(e).setUniforms({widthUnits:As[n],widthScale:r,widthMinPixels:i,widthMaxPixels:s,useShortestPath:o?1:0}).draw(),o&&this.state.model.setUniforms({useShortestPath:-1}).draw()}_getModel(e){const n=[0,-1,0,0,1,0,1,-1,0,1,1,0];return new Jn(e,{...this.getShaders(),id:this.props.id,geometry:new Wr({drawMode:5,attributes:{positions:new Float32Array(n)}}),isInstanced:!0})}}v(tc,"layerName","LineLayer");v(tc,"defaultProps",Aj);const pj=`#define SHADER_NAME scatterplot-layer-vertex-shader

attribute vec3 positions;

attribute vec3 instancePositions;
attribute vec3 instancePositions64Low;
attribute float instanceRadius;
attribute float instanceLineWidths;
attribute vec4 instanceFillColors;
attribute vec4 instanceLineColors;
attribute vec3 instancePickingColors;

uniform float opacity;
uniform float radiusScale;
uniform float radiusMinPixels;
uniform float radiusMaxPixels;
uniform float lineWidthScale;
uniform float lineWidthMinPixels;
uniform float lineWidthMaxPixels;
uniform float stroked;
uniform bool filled;
uniform bool antialiasing;
uniform bool billboard;
uniform int radiusUnits;
uniform int lineWidthUnits;

varying vec4 vFillColor;
varying vec4 vLineColor;
varying vec2 unitPosition;
varying float innerUnitRadius;
varying float outerRadiusPixels;


void main(void) {
  geometry.worldPosition = instancePositions;
  outerRadiusPixels = clamp(
    project_size_to_pixel(radiusScale * instanceRadius, radiusUnits),
    radiusMinPixels, radiusMaxPixels
  );
  float lineWidthPixels = clamp(
    project_size_to_pixel(lineWidthScale * instanceLineWidths, lineWidthUnits),
    lineWidthMinPixels, lineWidthMaxPixels
  );
  outerRadiusPixels += stroked * lineWidthPixels / 2.0;
  float edgePadding = antialiasing ? (outerRadiusPixels + SMOOTH_EDGE_RADIUS) / outerRadiusPixels : 1.0;
  unitPosition = edgePadding * positions.xy;
  geometry.uv = unitPosition;
  geometry.pickingColor = instancePickingColors;

  innerUnitRadius = 1.0 - stroked * lineWidthPixels / outerRadiusPixels;
  
  if (billboard) {
    gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, vec3(0.0), geometry.position);
    DECKGL_FILTER_GL_POSITION(gl_Position, geometry);
    vec3 offset = edgePadding * positions * outerRadiusPixels;
    DECKGL_FILTER_SIZE(offset, geometry);
    gl_Position.xy += project_pixel_size_to_clipspace(offset.xy);
  } else {
    vec3 offset = edgePadding * positions * project_pixel_size(outerRadiusPixels);
    DECKGL_FILTER_SIZE(offset, geometry);
    gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, offset, geometry.position);
    DECKGL_FILTER_GL_POSITION(gl_Position, geometry);
  }
  vFillColor = vec4(instanceFillColors.rgb, instanceFillColors.a * opacity);
  DECKGL_FILTER_COLOR(vFillColor, geometry);
  vLineColor = vec4(instanceLineColors.rgb, instanceLineColors.a * opacity);
  DECKGL_FILTER_COLOR(vLineColor, geometry);
}
`,mj=`#define SHADER_NAME scatterplot-layer-fragment-shader

precision highp float;

uniform bool filled;
uniform float stroked;
uniform bool antialiasing;

varying vec4 vFillColor;
varying vec4 vLineColor;
varying vec2 unitPosition;
varying float innerUnitRadius;
varying float outerRadiusPixels;

void main(void) {
  geometry.uv = unitPosition;

  float distToCenter = length(unitPosition) * outerRadiusPixels;
  float inCircle = antialiasing ? 
    smoothedge(distToCenter, outerRadiusPixels) : 
    step(distToCenter, outerRadiusPixels);

  if (inCircle == 0.0) {
    discard;
  }

  if (stroked > 0.5) {
    float isLine = antialiasing ? 
      smoothedge(innerUnitRadius * outerRadiusPixels, distToCenter) :
      step(innerUnitRadius * outerRadiusPixels, distToCenter);

    if (filled) {
      gl_FragColor = mix(vFillColor, vLineColor, isLine);
    } else {
      if (isLine == 0.0) {
        discard;
      }
      gl_FragColor = vec4(vLineColor.rgb, vLineColor.a * isLine);
    }
  } else if (!filled) {
    discard;
  } else {
    gl_FragColor = vFillColor;
  }

  gl_FragColor.a *= inCircle;
  DECKGL_FILTER_COLOR(gl_FragColor, geometry);
}
`,QC=[0,0,0,255],vj={radiusUnits:"meters",radiusScale:{type:"number",min:0,value:1},radiusMinPixels:{type:"number",min:0,value:0},radiusMaxPixels:{type:"number",min:0,value:Number.MAX_SAFE_INTEGER},lineWidthUnits:"meters",lineWidthScale:{type:"number",min:0,value:1},lineWidthMinPixels:{type:"number",min:0,value:0},lineWidthMaxPixels:{type:"number",min:0,value:Number.MAX_SAFE_INTEGER},stroked:!1,filled:!0,billboard:!1,antialiasing:!0,getPosition:{type:"accessor",value:t=>t.position},getRadius:{type:"accessor",value:1},getFillColor:{type:"accessor",value:QC},getLineColor:{type:"accessor",value:QC},getLineWidth:{type:"accessor",value:1},strokeWidth:{deprecatedFor:"getLineWidth"},outline:{deprecatedFor:"stroked"},getColor:{deprecatedFor:["getFillColor","getLineColor"]}};class Uy extends Fn{getShaders(){return super.getShaders({vs:pj,fs:mj,modules:[Ts,Bs]})}initializeState(){this.getAttributeManager().addInstanced({instancePositions:{size:3,type:5130,fp64:this.use64bitPositions(),transition:!0,accessor:"getPosition"},instanceRadius:{size:1,transition:!0,accessor:"getRadius",defaultValue:1},instanceFillColors:{size:this.props.colorFormat.length,transition:!0,normalized:!0,type:5121,accessor:"getFillColor",defaultValue:[0,0,0,255]},instanceLineColors:{size:this.props.colorFormat.length,transition:!0,normalized:!0,type:5121,accessor:"getLineColor",defaultValue:[0,0,0,255]},instanceLineWidths:{size:1,transition:!0,accessor:"getLineWidth",defaultValue:1}})}updateState(e){if(super.updateState(e),e.changeFlags.extensionsChanged){var n;const{gl:r}=this.context;(n=this.state.model)===null||n===void 0||n.delete(),this.state.model=this._getModel(r),this.getAttributeManager().invalidateAll()}}draw({uniforms:e}){const{radiusUnits:n,radiusScale:r,radiusMinPixels:i,radiusMaxPixels:s,stroked:o,filled:a,billboard:l,antialiasing:c,lineWidthUnits:u,lineWidthScale:f,lineWidthMinPixels:d,lineWidthMaxPixels:h}=this.props;this.state.model.setUniforms(e).setUniforms({stroked:o?1:0,filled:a,billboard:l,antialiasing:c,radiusUnits:As[n],radiusScale:r,radiusMinPixels:i,radiusMaxPixels:s,lineWidthUnits:As[u],lineWidthScale:f,lineWidthMinPixels:d,lineWidthMaxPixels:h}).draw()}_getModel(e){const n=[-1,-1,0,1,-1,0,1,1,0,-1,1,0];return new Jn(e,{...this.getShaders(),id:this.props.id,geometry:new Wr({drawMode:6,vertexCount:4,attributes:{positions:{size:3,value:new Float32Array(n)}}}),isInstanced:!0})}}v(Uy,"defaultProps",vj);v(Uy,"layerName","ScatterplotLayer");const f3={CLOCKWISE:1,COUNTER_CLOCKWISE:-1};function d3(t,e,n={}){return yj(t,n)!==e?(_j(t,n),!0):!1}function yj(t,e={}){return Math.sign(Ej(t,e))}function Ej(t,e={}){const{start:n=0,end:r=t.length}=e,i=e.size||2;let s=0;for(let o=n,a=r-i;o<r;o+=i)s+=(t[o]-t[a])*(t[o+1]+t[a+1]),a=o;return s/2}function _j(t,e){const{start:n=0,end:r=t.length,size:i=2}=e,s=(r-n)/i,o=Math.floor(s/2);for(let a=0;a<o;++a){const l=n+a*i,c=n+(s-1-a)*i;for(let u=0;u<i;++u){const f=t[l+u];t[l+u]=t[c+u],t[c+u]=f}}}function mr(t,e){const n=e.length,r=t.length;if(r>0){let i=!0;for(let s=0;s<n;s++)if(t[r-n+s]!==e[s]){i=!1;break}if(i)return!1}for(let i=0;i<n;i++)t[r+i]=e[i];return!0}function lm(t,e){const n=e.length;for(let r=0;r<n;r++)t[r]=e[r]}function Rc(t,e,n,r,i=[]){const s=r+e*n;for(let o=0;o<n;o++)i[o]=t[s+o];return i}function cm(t,e,n,r,i=[]){let s,o;if(n&8)s=(r[3]-t[1])/(e[1]-t[1]),o=3;else if(n&4)s=(r[1]-t[1])/(e[1]-t[1]),o=1;else if(n&2)s=(r[2]-t[0])/(e[0]-t[0]),o=2;else if(n&1)s=(r[0]-t[0])/(e[0]-t[0]),o=0;else return null;for(let a=0;a<t.length;a++)i[a]=(o&1)===a?r[o]:s*(e[a]-t[a])+t[a];return i}function Zf(t,e){let n=0;return t[0]<e[0]?n|=1:t[0]>e[2]&&(n|=2),t[1]<e[1]?n|=4:t[1]>e[3]&&(n|=8),n}function h3(t,e){const{size:n=2,broken:r=!1,gridResolution:i=10,gridOffset:s=[0,0],startIndex:o=0,endIndex:a=t.length}=e||{},l=(a-o)/n;let c=[];const u=[c],f=Rc(t,0,n,o);let d,h;const g=A3(f,i,s,[]),A=[];mr(c,f);for(let E=1;E<l;E++){for(d=Rc(t,E,n,o,d),h=Zf(d,g);h;){cm(f,d,h,g,A);const p=Zf(A,g);p&&(cm(f,A,p,g,A),h=p),mr(c,A),lm(f,A),Cj(g,i,h),r&&c.length>n&&(c=[],u.push(c),mr(c,f)),h=Zf(d,g)}mr(c,d),lm(f,d)}return r?u:u[0]}const FC=0,xj=1;function Af(t,e){for(let n=0;n<e.length;n++)t.push(e[n]);return t}function g3(t,e=null,n){if(!t.length)return[];const{size:r=2,gridResolution:i=10,gridOffset:s=[0,0],edgeTypes:o=!1}=n||{},a=[],l=[{pos:t,types:o?new Array(t.length/r).fill(xj):null,holes:e||[]}],c=[[],[]];let u=[];for(;l.length;){const{pos:f,types:d,holes:h}=l.shift();Ij(f,r,h[0]||f.length,c),u=A3(c[0],i,s,u);const g=Zf(c[1],u);if(g){let A=UC(f,d,r,0,h[0]||f.length,u,g);const E={pos:A[0].pos,types:A[0].types,holes:[]},p={pos:A[1].pos,types:A[1].types,holes:[]};l.push(E,p);for(let m=0;m<h.length;m++)A=UC(f,d,r,h[m],h[m+1]||f.length,u,g),A[0]&&(E.holes.push(E.pos.length),E.pos=Af(E.pos,A[0].pos),o&&(E.types=Af(E.types,A[0].types))),A[1]&&(p.holes.push(p.pos.length),p.pos=Af(p.pos,A[1].pos),o&&(p.types=Af(p.types,A[1].types)))}else{const A={positions:f};o&&(A.edgeTypes=d),h.length&&(A.holeIndices=h),a.push(A)}}return a}function UC(t,e,n,r,i,s,o){const a=(i-r)/n,l=[],c=[],u=[],f=[],d=[];let h,g,A;const E=Rc(t,a-1,n,r);let p=Math.sign(o&8?E[1]-s[3]:E[0]-s[2]),m=e&&e[a-1],y=0,_=0;for(let I=0;I<a;I++)h=Rc(t,I,n,r,h),g=Math.sign(o&8?h[1]-s[3]:h[0]-s[2]),A=e&&e[r/n+I],g&&p&&p!==g&&(cm(E,h,o,s,d),mr(l,d)&&u.push(m),mr(c,d)&&f.push(m)),g<=0?(mr(l,h)&&u.push(A),y-=g):u.length&&(u[u.length-1]=FC),g>=0?(mr(c,h)&&f.push(A),_+=g):f.length&&(f[f.length-1]=FC),lm(E,h),p=g,m=A;return[y?{pos:l,types:e&&u}:null,_?{pos:c,types:e&&f}:null]}function A3(t,e,n,r){const i=Math.floor((t[0]-n[0])/e)*e+n[0],s=Math.floor((t[1]-n[1])/e)*e+n[1];return r[0]=i,r[1]=s,r[2]=i+e,r[3]=s+e,r}function Cj(t,e,n){n&8?(t[1]+=e,t[3]+=e):n&4?(t[1]-=e,t[3]-=e):n&2?(t[0]+=e,t[2]+=e):n&1&&(t[0]-=e,t[2]-=e)}function Ij(t,e,n,r){let i=1/0,s=-1/0,o=1/0,a=-1/0;for(let l=0;l<n;l+=e){const c=t[l],u=t[l+1];i=c<i?c:i,s=c>s?c:s,o=u<o?u:o,a=u>a?u:a}return r[0][0]=i,r[0][1]=o,r[1][0]=s,r[1][1]=a,r}const wj=85.051129;function Sj(t,e){const{size:n=2,startIndex:r=0,endIndex:i=t.length,normalize:s=!0}=e||{},o=t.slice(r,i);p3(o,n,0,i-r);const a=h3(o,{size:n,broken:!0,gridResolution:360,gridOffset:[-180,-180]});if(s)for(const l of a)m3(l,n);return a}function bj(t,e=null,n){const{size:r=2,normalize:i=!0,edgeTypes:s=!1}=n||{};e=e||[];const o=[],a=[];let l=0,c=0;for(let f=0;f<=e.length;f++){const d=e[f]||t.length,h=c,g=Tj(t,r,l,d);for(let A=g;A<d;A++)o[c++]=t[A];for(let A=l;A<g;A++)o[c++]=t[A];p3(o,r,h,c),Bj(o,r,h,c,n==null?void 0:n.maxLatitude),l=d,a[f]=c}a.pop();const u=g3(o,a,{size:r,gridResolution:360,gridOffset:[-180,-180],edgeTypes:s});if(i)for(const f of u)m3(f.positions,r);return u}function Tj(t,e,n,r){let i=-1,s=-1;for(let o=n+1;o<r;o+=e){const a=Math.abs(t[o]);a>i&&(i=a,s=o-1)}return s}function Bj(t,e,n,r,i=wj){const s=t[n],o=t[r-e];if(Math.abs(s-o)>180){const a=Rc(t,0,e,n);a[0]+=Math.round((o-s)/360)*360,mr(t,a),a[1]=Math.sign(a[1])*i,mr(t,a),a[0]=s,mr(t,a)}}function p3(t,e,n,r){let i=t[0],s;for(let o=n;o<r;o+=e){s=t[o];const a=s-i;(a>180||a<-180)&&(s-=Math.round(a/360)*360),t[o]=i=s}}function m3(t,e){let n;const r=t.length/e;for(let s=0;s<r&&(n=t[s*e],(n+180)%360===0);s++);const i=-Math.round(n/360)*360;if(i!==0)for(let s=0;s<r;s++)t[s*e]+=i}function Rj(t,e,n,r){let i;if(Array.isArray(t[0])){const s=t.length*e;i=new Array(s);for(let o=0;o<t.length;o++)for(let a=0;a<e;a++)i[o*e+a]=t[o][a]||0}else i=t;return n?h3(i,{size:e,gridResolution:n}):r?Sj(i,{size:e}):i}const Pj=1,Lj=2,ip=4;class Mj extends c3{constructor(e){super({...e,attributes:{positions:{size:3,padding:18,initialize:!0,type:e.fp64?Float64Array:Float32Array},segmentTypes:{size:1,type:Uint8ClampedArray}}})}get(e){return this.attributes[e]}getGeometryFromBuffer(e){return this.normalize?super.getGeometryFromBuffer(e):null}normalizeGeometry(e){return this.normalize?Rj(e,this.positionSize,this.opts.resolution,this.opts.wrapLongitude):e}getGeometrySize(e){if(GC(e)){let r=0;for(const i of e)r+=this.getGeometrySize(i);return r}const n=this.getPathLength(e);return n<2?0:this.isClosed(e)?n<3?0:n+2:n}updateGeometryAttributes(e,n){if(n.geometrySize!==0)if(e&&GC(e))for(const r of e){const i=this.getGeometrySize(r);n.geometrySize=i,this.updateGeometryAttributes(r,n),n.vertexStart+=i}else this._updateSegmentTypes(e,n),this._updatePositions(e,n)}_updateSegmentTypes(e,n){const r=this.attributes.segmentTypes,i=e?this.isClosed(e):!1,{vertexStart:s,geometrySize:o}=n;r.fill(0,s,s+o),i?(r[s]=ip,r[s+o-2]=ip):(r[s]+=Pj,r[s+o-2]+=Lj),r[s+o-1]=ip}_updatePositions(e,n){const{positions:r}=this.attributes;if(!r||!e)return;const{vertexStart:i,geometrySize:s}=n,o=new Array(3);for(let a=i,l=0;l<s;a++,l++)this.getPointOnPath(e,l,o),r[a*3]=o[0],r[a*3+1]=o[1],r[a*3+2]=o[2]}getPathLength(e){return e.length/this.positionSize}getPointOnPath(e,n,r=[]){const{positionSize:i}=this;n*i>=e.length&&(n+=1-e.length/i);const s=n*i;return r[0]=e[s],r[1]=e[s+1],r[2]=i===3&&e[s+2]||0,r}isClosed(e){if(!this.normalize)return!!this.opts.loop;const{positionSize:n}=this,r=e.length-n;return e[0]===e[r]&&e[1]===e[r+1]&&(n===2||e[2]===e[r+2])}}function GC(t){return Array.isArray(t[0])}const Nj=`#define SHADER_NAME path-layer-vertex-shader

attribute vec2 positions;

attribute float instanceTypes;
attribute vec3 instanceStartPositions;
attribute vec3 instanceEndPositions;
attribute vec3 instanceLeftPositions;
attribute vec3 instanceRightPositions;
attribute vec3 instanceLeftPositions64Low;
attribute vec3 instanceStartPositions64Low;
attribute vec3 instanceEndPositions64Low;
attribute vec3 instanceRightPositions64Low;
attribute float instanceStrokeWidths;
attribute vec4 instanceColors;
attribute vec3 instancePickingColors;

uniform float widthScale;
uniform float widthMinPixels;
uniform float widthMaxPixels;
uniform float jointType;
uniform float capType;
uniform float miterLimit;
uniform bool billboard;
uniform int widthUnits;

uniform float opacity;

varying vec4 vColor;
varying vec2 vCornerOffset;
varying float vMiterLength;
varying vec2 vPathPosition;
varying float vPathLength;
varying float vJointType;

const float EPSILON = 0.001;
const vec3 ZERO_OFFSET = vec3(0.0);

float flipIfTrue(bool flag) {
  return -(float(flag) * 2. - 1.);
}
vec3 getLineJoinOffset(
  vec3 prevPoint, vec3 currPoint, vec3 nextPoint,
  vec2 width
) {
  bool isEnd = positions.x > 0.0;
  float sideOfPath = positions.y;
  float isJoint = float(sideOfPath == 0.0);

  vec3 deltaA3 = (currPoint - prevPoint);
  vec3 deltaB3 = (nextPoint - currPoint);

  mat3 rotationMatrix;
  bool needsRotation = !billboard && project_needs_rotation(currPoint, rotationMatrix);
  if (needsRotation) {
    deltaA3 = deltaA3 * rotationMatrix;
    deltaB3 = deltaB3 * rotationMatrix;
  }
  vec2 deltaA = deltaA3.xy / width;
  vec2 deltaB = deltaB3.xy / width;

  float lenA = length(deltaA);
  float lenB = length(deltaB);

  vec2 dirA = lenA > 0. ? normalize(deltaA) : vec2(0.0, 0.0);
  vec2 dirB = lenB > 0. ? normalize(deltaB) : vec2(0.0, 0.0);

  vec2 perpA = vec2(-dirA.y, dirA.x);
  vec2 perpB = vec2(-dirB.y, dirB.x);
  vec2 tangent = dirA + dirB;
  tangent = length(tangent) > 0. ? normalize(tangent) : perpA;
  vec2 miterVec = vec2(-tangent.y, tangent.x);
  vec2 dir = isEnd ? dirA : dirB;
  vec2 perp = isEnd ? perpA : perpB;
  float L = isEnd ? lenA : lenB;
  float sinHalfA = abs(dot(miterVec, perp));
  float cosHalfA = abs(dot(dirA, miterVec));
  float turnDirection = flipIfTrue(dirA.x * dirB.y >= dirA.y * dirB.x);
  float cornerPosition = sideOfPath * turnDirection;

  float miterSize = 1.0 / max(sinHalfA, EPSILON);
  miterSize = mix(
    min(miterSize, max(lenA, lenB) / max(cosHalfA, EPSILON)),
    miterSize,
    step(0.0, cornerPosition)
  );

  vec2 offsetVec = mix(miterVec * miterSize, perp, step(0.5, cornerPosition))
    * (sideOfPath + isJoint * turnDirection);
  bool isStartCap = lenA == 0.0 || (!isEnd && (instanceTypes == 1.0 || instanceTypes == 3.0));
  bool isEndCap = lenB == 0.0 || (isEnd && (instanceTypes == 2.0 || instanceTypes == 3.0));
  bool isCap = isStartCap || isEndCap;
  if (isCap) {
    offsetVec = mix(perp * sideOfPath, dir * capType * 4.0 * flipIfTrue(isStartCap), isJoint);
    vJointType = capType;
  } else {
    vJointType = jointType;
  }
  vPathLength = L;
  vCornerOffset = offsetVec;
  vMiterLength = dot(vCornerOffset, miterVec * turnDirection);
  vMiterLength = isCap ? isJoint : vMiterLength;

  vec2 offsetFromStartOfPath = vCornerOffset + deltaA * float(isEnd);
  vPathPosition = vec2(
    dot(offsetFromStartOfPath, perp),
    dot(offsetFromStartOfPath, dir)
  );
  geometry.uv = vPathPosition;

  float isValid = step(instanceTypes, 3.5);
  vec3 offset = vec3(offsetVec * width * isValid, 0.0);

  if (needsRotation) {
    offset = rotationMatrix * offset;
  }
  return offset;
}
void clipLine(inout vec4 position, vec4 refPosition) {
  if (position.w < EPSILON) {
    float r = (EPSILON - refPosition.w) / (position.w - refPosition.w);
    position = refPosition + (position - refPosition) * r;
  }
}

void main() {
  geometry.pickingColor = instancePickingColors;

  vColor = vec4(instanceColors.rgb, instanceColors.a * opacity);

  float isEnd = positions.x;

  vec3 prevPosition = mix(instanceLeftPositions, instanceStartPositions, isEnd);
  vec3 prevPosition64Low = mix(instanceLeftPositions64Low, instanceStartPositions64Low, isEnd);

  vec3 currPosition = mix(instanceStartPositions, instanceEndPositions, isEnd);
  vec3 currPosition64Low = mix(instanceStartPositions64Low, instanceEndPositions64Low, isEnd);

  vec3 nextPosition = mix(instanceEndPositions, instanceRightPositions, isEnd);
  vec3 nextPosition64Low = mix(instanceEndPositions64Low, instanceRightPositions64Low, isEnd);

  geometry.worldPosition = currPosition;
  vec2 widthPixels = vec2(clamp(
    project_size_to_pixel(instanceStrokeWidths * widthScale, widthUnits),
    widthMinPixels, widthMaxPixels) / 2.0);
  vec3 width;

  if (billboard) {
    vec4 prevPositionScreen = project_position_to_clipspace(prevPosition, prevPosition64Low, ZERO_OFFSET);
    vec4 currPositionScreen = project_position_to_clipspace(currPosition, currPosition64Low, ZERO_OFFSET, geometry.position);
    vec4 nextPositionScreen = project_position_to_clipspace(nextPosition, nextPosition64Low, ZERO_OFFSET);

    clipLine(prevPositionScreen, currPositionScreen);
    clipLine(nextPositionScreen, currPositionScreen);
    clipLine(currPositionScreen, mix(nextPositionScreen, prevPositionScreen, isEnd));

    width = vec3(widthPixels, 0.0);
    DECKGL_FILTER_SIZE(width, geometry);

    vec3 offset = getLineJoinOffset(
      prevPositionScreen.xyz / prevPositionScreen.w,
      currPositionScreen.xyz / currPositionScreen.w,
      nextPositionScreen.xyz / nextPositionScreen.w,
      project_pixel_size_to_clipspace(width.xy)
    );

    DECKGL_FILTER_GL_POSITION(currPositionScreen, geometry);
    gl_Position = vec4(currPositionScreen.xyz + offset * currPositionScreen.w, currPositionScreen.w);
  } else {
    prevPosition = project_position(prevPosition, prevPosition64Low);
    currPosition = project_position(currPosition, currPosition64Low);
    nextPosition = project_position(nextPosition, nextPosition64Low);

    width = vec3(project_pixel_size(widthPixels), 0.0);
    DECKGL_FILTER_SIZE(width, geometry);

    vec3 offset = getLineJoinOffset(prevPosition, currPosition, nextPosition, width.xy);
    geometry.position = vec4(currPosition + offset, 1.0);
    gl_Position = project_common_position_to_clipspace(geometry.position);
    DECKGL_FILTER_GL_POSITION(gl_Position, geometry);
  }
  DECKGL_FILTER_COLOR(vColor, geometry);
}
`,Oj=`#define SHADER_NAME path-layer-fragment-shader

precision highp float;

uniform float miterLimit;

varying vec4 vColor;
varying vec2 vCornerOffset;
varying float vMiterLength;
varying vec2 vPathPosition;
varying float vPathLength;
varying float vJointType;

void main(void) {
  geometry.uv = vPathPosition;

  if (vPathPosition.y < 0.0 || vPathPosition.y > vPathLength) {
    if (vJointType > 0.5 && length(vCornerOffset) > 1.0) {
      discard;
    }
    if (vJointType < 0.5 && vMiterLength > miterLimit + 1.0) {
      discard;
    }
  }
  gl_FragColor = vColor;

  DECKGL_FILTER_COLOR(gl_FragColor, geometry);
}
`,v3=[0,0,0,255],Dj={widthUnits:"meters",widthScale:{type:"number",min:0,value:1},widthMinPixels:{type:"number",min:0,value:0},widthMaxPixels:{type:"number",min:0,value:Number.MAX_SAFE_INTEGER},jointRounded:!1,capRounded:!1,miterLimit:{type:"number",min:0,value:4},billboard:!1,_pathType:null,getPath:{type:"accessor",value:t=>t.path},getColor:{type:"accessor",value:v3},getWidth:{type:"accessor",value:1},rounded:{deprecatedFor:["jointRounded","capRounded"]}},sp={enter:(t,e)=>e.length?e.subarray(e.length-t.length):t};class lg extends Fn{constructor(...e){super(...e),v(this,"state",void 0)}getShaders(){return super.getShaders({vs:Nj,fs:Oj,modules:[Ts,Bs]})}get wrapLongitude(){return!1}initializeState(){this.getAttributeManager().addInstanced({positions:{size:3,vertexOffset:1,type:5130,fp64:this.use64bitPositions(),transition:sp,accessor:"getPath",update:this.calculatePositions,noAlloc:!0,shaderAttributes:{instanceLeftPositions:{vertexOffset:0},instanceStartPositions:{vertexOffset:1},instanceEndPositions:{vertexOffset:2},instanceRightPositions:{vertexOffset:3}}},instanceTypes:{size:1,type:5121,update:this.calculateSegmentTypes,noAlloc:!0},instanceStrokeWidths:{size:1,accessor:"getWidth",transition:sp,defaultValue:1},instanceColors:{size:this.props.colorFormat.length,type:5121,normalized:!0,accessor:"getColor",transition:sp,defaultValue:v3},instancePickingColors:{size:3,type:5121,accessor:(r,{index:i,target:s})=>this.encodePickingColor(r&&r.__source?r.__source.index:i,s)}}),this.setState({pathTesselator:new Mj({fp64:this.use64bitPositions()})})}updateState(e){super.updateState(e);const{props:n,changeFlags:r}=e,i=this.getAttributeManager();if(r.dataChanged||r.updateTriggersChanged&&(r.updateTriggersChanged.all||r.updateTriggersChanged.getPath)){const{pathTesselator:a}=this.state,l=n.data.attributes||{};a.updateGeometry({data:n.data,geometryBuffer:l.getPath,buffers:l,normalize:!n._pathType,loop:n._pathType==="loop",getGeometry:n.getPath,positionFormat:n.positionFormat,wrapLongitude:n.wrapLongitude,resolution:this.context.viewport.resolution,dataChanged:r.dataChanged}),this.setState({numInstances:a.instanceCount,startIndices:a.vertexStarts}),r.dataChanged||i.invalidateAll()}if(r.extensionsChanged){var o;const{gl:a}=this.context;(o=this.state.model)===null||o===void 0||o.delete(),this.state.model=this._getModel(a),i.invalidateAll()}}getPickingInfo(e){const n=super.getPickingInfo(e),{index:r}=n,{data:i}=this.props;return i[0]&&i[0].__source&&(n.object=i.find(s=>s.__source.index===r)),n}disablePickingIndex(e){const{data:n}=this.props;if(n[0]&&n[0].__source)for(let r=0;r<n.length;r++)n[r].__source.index===e&&this._disablePickingIndex(r);else super.disablePickingIndex(e)}draw({uniforms:e}){const{jointRounded:n,capRounded:r,billboard:i,miterLimit:s,widthUnits:o,widthScale:a,widthMinPixels:l,widthMaxPixels:c}=this.props;this.state.model.setUniforms(e).setUniforms({jointType:Number(n),capType:Number(r),billboard:i,widthUnits:As[o],widthScale:a,miterLimit:s,widthMinPixels:l,widthMaxPixels:c}).draw()}_getModel(e){const n=[0,1,2,1,4,2,1,3,4,3,5,4],r=[0,0,0,-1,0,1,1,-1,1,1,1,0];return new Jn(e,{...this.getShaders(),id:this.props.id,geometry:new Wr({drawMode:4,attributes:{indices:new Uint16Array(n),positions:{value:new Float32Array(r),size:2}}}),isInstanced:!0})}calculatePositions(e){const{pathTesselator:n}=this.state;e.startIndices=n.vertexStarts,e.value=n.get("positions")}calculateSegmentTypes(e){const{pathTesselator:n}=this.state;e.startIndices=n.vertexStarts,e.value=n.get("segmentTypes")}}v(lg,"defaultProps",Dj);v(lg,"layerName","PathLayer");var Gy={exports:{}};Gy.exports=cg;Gy.exports.default=cg;function cg(t,e,n){n=n||2;var r=e&&e.length,i=r?e[0]*n:t.length,s=y3(t,0,i,n,!0),o=[];if(!s||s.next===s.prev)return o;var a,l,c,u,f,d,h;if(r&&(s=Gj(t,e,s,n)),t.length>80*n){a=c=t[0],l=u=t[1];for(var g=n;g<i;g+=n)f=t[g],d=t[g+1],f<a&&(a=f),d<l&&(l=d),f>c&&(c=f),d>u&&(u=d);h=Math.max(c-a,u-l),h=h!==0?32767/h:0}return Pc(s,o,n,a,l,h,0),o}function y3(t,e,n,r,i){var s,o;if(i===dm(t,e,n,r)>0)for(s=e;s<n;s+=r)o=zC(s,t[s],t[s+1],o);else for(s=n-r;s>=e;s-=r)o=zC(s,t[s],t[s+1],o);return o&&ug(o,o.next)&&(Mc(o),o=o.next),o}function ho(t,e){if(!t)return t;e||(e=t);var n=t,r;do if(r=!1,!n.steiner&&(ug(n,n.next)||ut(n.prev,n,n.next)===0)){if(Mc(n),n=e=n.prev,n===n.next)break;r=!0}else n=n.next;while(r||n!==e);return e}function Pc(t,e,n,r,i,s,o){if(t){!o&&s&&Wj(t,r,i,s);for(var a=t,l,c;t.prev!==t.next;){if(l=t.prev,c=t.next,s?Qj(t,r,i,s):kj(t)){e.push(l.i/n|0),e.push(t.i/n|0),e.push(c.i/n|0),Mc(t),t=c.next,a=c.next;continue}if(t=c,t===a){o?o===1?(t=Fj(ho(t),e,n),Pc(t,e,n,r,i,s,2)):o===2&&Uj(t,e,n,r,i,s):Pc(ho(t),e,n,r,i,s,1);break}}}}function kj(t){var e=t.prev,n=t,r=t.next;if(ut(e,n,r)>=0)return!1;for(var i=e.x,s=n.x,o=r.x,a=e.y,l=n.y,c=r.y,u=i<s?i<o?i:o:s<o?s:o,f=a<l?a<c?a:c:l<c?l:c,d=i>s?i>o?i:o:s>o?s:o,h=a>l?a>c?a:c:l>c?l:c,g=r.next;g!==e;){if(g.x>=u&&g.x<=d&&g.y>=f&&g.y<=h&&ca(i,a,s,l,o,c,g.x,g.y)&&ut(g.prev,g,g.next)>=0)return!1;g=g.next}return!0}function Qj(t,e,n,r){var i=t.prev,s=t,o=t.next;if(ut(i,s,o)>=0)return!1;for(var a=i.x,l=s.x,c=o.x,u=i.y,f=s.y,d=o.y,h=a<l?a<c?a:c:l<c?l:c,g=u<f?u<d?u:d:f<d?f:d,A=a>l?a>c?a:c:l>c?l:c,E=u>f?u>d?u:d:f>d?f:d,p=um(h,g,e,n,r),m=um(A,E,e,n,r),y=t.prevZ,_=t.nextZ;y&&y.z>=p&&_&&_.z<=m;){if(y.x>=h&&y.x<=A&&y.y>=g&&y.y<=E&&y!==i&&y!==o&&ca(a,u,l,f,c,d,y.x,y.y)&&ut(y.prev,y,y.next)>=0||(y=y.prevZ,_.x>=h&&_.x<=A&&_.y>=g&&_.y<=E&&_!==i&&_!==o&&ca(a,u,l,f,c,d,_.x,_.y)&&ut(_.prev,_,_.next)>=0))return!1;_=_.nextZ}for(;y&&y.z>=p;){if(y.x>=h&&y.x<=A&&y.y>=g&&y.y<=E&&y!==i&&y!==o&&ca(a,u,l,f,c,d,y.x,y.y)&&ut(y.prev,y,y.next)>=0)return!1;y=y.prevZ}for(;_&&_.z<=m;){if(_.x>=h&&_.x<=A&&_.y>=g&&_.y<=E&&_!==i&&_!==o&&ca(a,u,l,f,c,d,_.x,_.y)&&ut(_.prev,_,_.next)>=0)return!1;_=_.nextZ}return!0}function Fj(t,e,n){var r=t;do{var i=r.prev,s=r.next.next;!ug(i,s)&&E3(i,r,r.next,s)&&Lc(i,s)&&Lc(s,i)&&(e.push(i.i/n|0),e.push(r.i/n|0),e.push(s.i/n|0),Mc(r),Mc(r.next),r=t=s),r=r.next}while(r!==t);return ho(r)}function Uj(t,e,n,r,i,s){var o=t;do{for(var a=o.next.next;a!==o.prev;){if(o.i!==a.i&&Kj(o,a)){var l=_3(o,a);o=ho(o,o.next),l=ho(l,l.next),Pc(o,e,n,r,i,s,0),Pc(l,e,n,r,i,s,0);return}a=a.next}o=o.next}while(o!==t)}function Gj(t,e,n,r){var i=[],s,o,a,l,c;for(s=0,o=e.length;s<o;s++)a=e[s]*r,l=s<o-1?e[s+1]*r:t.length,c=y3(t,a,l,r,!1),c===c.next&&(c.steiner=!0),i.push($j(c));for(i.sort(zj),s=0;s<i.length;s++)n=Vj(i[s],n);return n}function zj(t,e){return t.x-e.x}function Vj(t,e){var n=jj(t,e);if(!n)return e;var r=_3(n,t);return ho(r,r.next),ho(n,n.next)}function jj(t,e){var n=e,r=t.x,i=t.y,s=-1/0,o;do{if(i<=n.y&&i>=n.next.y&&n.next.y!==n.y){var a=n.x+(i-n.y)*(n.next.x-n.x)/(n.next.y-n.y);if(a<=r&&a>s&&(s=a,o=n.x<n.next.x?n:n.next,a===r))return o}n=n.next}while(n!==e);if(!o)return null;var l=o,c=o.x,u=o.y,f=1/0,d;n=o;do r>=n.x&&n.x>=c&&r!==n.x&&ca(i<u?r:s,i,c,u,i<u?s:r,i,n.x,n.y)&&(d=Math.abs(i-n.y)/(r-n.x),Lc(n,t)&&(d<f||d===f&&(n.x>o.x||n.x===o.x&&Hj(o,n)))&&(o=n,f=d)),n=n.next;while(n!==l);return o}function Hj(t,e){return ut(t.prev,t,e.prev)<0&&ut(e.next,t,t.next)<0}function Wj(t,e,n,r){var i=t;do i.z===0&&(i.z=um(i.x,i.y,e,n,r)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next;while(i!==t);i.prevZ.nextZ=null,i.prevZ=null,Yj(i)}function Yj(t){var e,n,r,i,s,o,a,l,c=1;do{for(n=t,t=null,s=null,o=0;n;){for(o++,r=n,a=0,e=0;e<c&&(a++,r=r.nextZ,!!r);e++);for(l=c;a>0||l>0&&r;)a!==0&&(l===0||!r||n.z<=r.z)?(i=n,n=n.nextZ,a--):(i=r,r=r.nextZ,l--),s?s.nextZ=i:t=i,i.prevZ=s,s=i;n=r}s.nextZ=null,c*=2}while(o>1);return t}function um(t,e,n,r,i){return t=(t-n)*i|0,e=(e-r)*i|0,t=(t|t<<8)&16711935,t=(t|t<<4)&252645135,t=(t|t<<2)&858993459,t=(t|t<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,t|e<<1}function $j(t){var e=t,n=t;do(e.x<n.x||e.x===n.x&&e.y<n.y)&&(n=e),e=e.next;while(e!==t);return n}function ca(t,e,n,r,i,s,o,a){return(i-o)*(e-a)>=(t-o)*(s-a)&&(t-o)*(r-a)>=(n-o)*(e-a)&&(n-o)*(s-a)>=(i-o)*(r-a)}function Kj(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!qj(t,e)&&(Lc(t,e)&&Lc(e,t)&&Xj(t,e)&&(ut(t.prev,t,e.prev)||ut(t,e.prev,e))||ug(t,e)&&ut(t.prev,t,t.next)>0&&ut(e.prev,e,e.next)>0)}function ut(t,e,n){return(e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y)}function ug(t,e){return t.x===e.x&&t.y===e.y}function E3(t,e,n,r){var i=mf(ut(t,e,n)),s=mf(ut(t,e,r)),o=mf(ut(n,r,t)),a=mf(ut(n,r,e));return!!(i!==s&&o!==a||i===0&&pf(t,n,e)||s===0&&pf(t,r,e)||o===0&&pf(n,t,r)||a===0&&pf(n,e,r))}function pf(t,e,n){return e.x<=Math.max(t.x,n.x)&&e.x>=Math.min(t.x,n.x)&&e.y<=Math.max(t.y,n.y)&&e.y>=Math.min(t.y,n.y)}function mf(t){return t>0?1:t<0?-1:0}function qj(t,e){var n=t;do{if(n.i!==t.i&&n.next.i!==t.i&&n.i!==e.i&&n.next.i!==e.i&&E3(n,n.next,t,e))return!0;n=n.next}while(n!==t);return!1}function Lc(t,e){return ut(t.prev,t,t.next)<0?ut(t,e,t.next)>=0&&ut(t,t.prev,e)>=0:ut(t,e,t.prev)<0||ut(t,t.next,e)<0}function Xj(t,e){var n=t,r=!1,i=(t.x+e.x)/2,s=(t.y+e.y)/2;do n.y>s!=n.next.y>s&&n.next.y!==n.y&&i<(n.next.x-n.x)*(s-n.y)/(n.next.y-n.y)+n.x&&(r=!r),n=n.next;while(n!==t);return r}function _3(t,e){var n=new fm(t.i,t.x,t.y),r=new fm(e.i,e.x,e.y),i=t.next,s=e.prev;return t.next=e,e.prev=t,n.next=i,i.prev=n,r.next=n,n.prev=r,s.next=r,r.prev=s,r}function zC(t,e,n,r){var i=new fm(t,e,n);return r?(i.next=r.next,i.prev=r,r.next.prev=i,r.next=i):(i.prev=i,i.next=i),i}function Mc(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function fm(t,e,n){this.i=t,this.x=e,this.y=n,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}cg.deviation=function(t,e,n,r){var i=e&&e.length,s=i?e[0]*n:t.length,o=Math.abs(dm(t,0,s,n));if(i)for(var a=0,l=e.length;a<l;a++){var c=e[a]*n,u=a<l-1?e[a+1]*n:t.length;o-=Math.abs(dm(t,c,u,n))}var f=0;for(a=0;a<r.length;a+=3){var d=r[a]*n,h=r[a+1]*n,g=r[a+2]*n;f+=Math.abs((t[d]-t[g])*(t[h+1]-t[d+1])-(t[d]-t[h])*(t[g+1]-t[d+1]))}return o===0&&f===0?0:Math.abs((f-o)/o)};function dm(t,e,n,r){for(var i=0,s=e,o=n-r;s<n;s+=r)i+=(t[o]-t[s])*(t[s+1]+t[o+1]),o=s;return i}cg.flatten=function(t){for(var e=t[0][0].length,n={vertices:[],holes:[],dimensions:e},r=0,i=0;i<t.length;i++){for(var s=0;s<t[i].length;s++)for(var o=0;o<e;o++)n.vertices.push(t[i][s][o]);i>0&&(r+=t[i-1].length,n.holes.push(r))}return n};var Zj=Gy.exports;const Jj=Fc(Zj),vf=f3.CLOCKWISE,VC=f3.COUNTER_CLOCKWISE,Zi={isClosed:!0};function eH(t){if(t=t&&t.positions||t,!Array.isArray(t)&&!ArrayBuffer.isView(t))throw new Error("invalid polygon")}function kl(t){return"positions"in t?t.positions:t}function Jf(t){return"holeIndices"in t?t.holeIndices:null}function tH(t){return Array.isArray(t[0])}function nH(t){return t.length>=1&&t[0].length>=2&&Number.isFinite(t[0][0])}function rH(t){const e=t[0],n=t[t.length-1];return e[0]===n[0]&&e[1]===n[1]&&e[2]===n[2]}function iH(t,e,n,r){for(let i=0;i<e;i++)if(t[n+i]!==t[r-e+i])return!1;return!0}function jC(t,e,n,r,i){let s=e;const o=n.length;for(let a=0;a<o;a++)for(let l=0;l<r;l++)t[s++]=n[a][l]||0;if(!rH(n))for(let a=0;a<r;a++)t[s++]=n[0][a]||0;return Zi.start=e,Zi.end=s,Zi.size=r,d3(t,i,Zi),s}function HC(t,e,n,r,i=0,s,o){s=s||n.length;const a=s-i;if(a<=0)return e;let l=e;for(let c=0;c<a;c++)t[l++]=n[i+c];if(!iH(n,r,i,s))for(let c=0;c<r;c++)t[l++]=n[i+c];return Zi.start=e,Zi.end=l,Zi.size=r,d3(t,o,Zi),l}function x3(t,e){eH(t);const n=[],r=[];if("positions"in t){const{positions:i,holeIndices:s}=t;if(s){let o=0;for(let a=0;a<=s.length;a++)o=HC(n,o,i,e,s[a-1],s[a],a===0?vf:VC),r.push(o);return r.pop(),{positions:n,holeIndices:r}}t=i}if(!tH(t))return HC(n,0,t,e,0,n.length,vf),n;if(!nH(t)){let i=0;for(const[s,o]of t.entries())i=jC(n,i,o,e,s===0?vf:VC),r.push(i);return r.pop(),{positions:n,holeIndices:r}}return jC(n,0,t,e,vf),n}function op(t,e,n){const r=t.length/3;let i=0;for(let s=0;s<r;s++){const o=(s+1)%r;i+=t[s*3+e]*t[o*3+n],i-=t[o*3+e]*t[s*3+n]}return Math.abs(i/2)}function WC(t,e,n,r){const i=t.length/3;for(let s=0;s<i;s++){const o=s*3,a=t[o+0],l=t[o+1],c=t[o+2];t[o+e]=a,t[o+n]=l,t[o+r]=c}}function sH(t,e,n,r){let i=Jf(t);i&&(i=i.map(a=>a/e));let s=kl(t);const o=r&&e===3;if(n){const a=s.length;s=s.slice();const l=[];for(let c=0;c<a;c+=e){l[0]=s[c],l[1]=s[c+1],o&&(l[2]=s[c+2]);const u=n(l);s[c]=u[0],s[c+1]=u[1],o&&(s[c+2]=u[2])}}if(o){const a=op(s,0,1),l=op(s,0,2),c=op(s,1,2);if(!a&&!l&&!c)return[];a>l&&a>c||(l>c?(n||(s=s.slice()),WC(s,0,2,1)):(n||(s=s.slice()),WC(s,2,0,1)))}return Jj(s,i,e)}class oH extends c3{constructor(e){const{fp64:n,IndexType:r=Uint32Array}=e;super({...e,attributes:{positions:{size:3,type:n?Float64Array:Float32Array},vertexValid:{type:Uint8ClampedArray,size:1},indices:{type:r,size:1}}})}get(e){const{attributes:n}=this;return e==="indices"?n.indices&&n.indices.subarray(0,this.vertexCount):n[e]}updateGeometry(e){super.updateGeometry(e);const n=this.buffers.indices;if(n)this.vertexCount=(n.value||n).length;else if(this.data&&!this.getGeometry)throw new Error("missing indices buffer")}normalizeGeometry(e){if(this.normalize){const n=x3(e,this.positionSize);return this.opts.resolution?g3(kl(n),Jf(n),{size:this.positionSize,gridResolution:this.opts.resolution,edgeTypes:!0}):this.opts.wrapLongitude?bj(kl(n),Jf(n),{size:this.positionSize,maxLatitude:86,edgeTypes:!0}):n}return e}getGeometrySize(e){if(YC(e)){let n=0;for(const r of e)n+=this.getGeometrySize(r);return n}return kl(e).length/this.positionSize}getGeometryFromBuffer(e){return this.normalize||!this.buffers.indices?super.getGeometryFromBuffer(e):null}updateGeometryAttributes(e,n){if(e&&YC(e))for(const r of e){const i=this.getGeometrySize(r);n.geometrySize=i,this.updateGeometryAttributes(r,n),n.vertexStart+=i,n.indexStart=this.indexStarts[n.geometryIndex+1]}else this._updateIndices(e,n),this._updatePositions(e,n),this._updateVertexValid(e,n)}_updateIndices(e,{geometryIndex:n,vertexStart:r,indexStart:i}){const{attributes:s,indexStarts:o,typedArrayManager:a}=this;let l=s.indices;if(!l||!e)return;let c=i;const u=sH(e,this.positionSize,this.opts.preproject,this.opts.full3d);l=a.allocate(l,i+u.length,{copy:!0});for(let f=0;f<u.length;f++)l[c++]=u[f]+r;o[n+1]=i+u.length,s.indices=l}_updatePositions(e,{vertexStart:n,geometrySize:r}){const{attributes:{positions:i},positionSize:s}=this;if(!i||!e)return;const o=kl(e);for(let a=n,l=0;l<r;a++,l++){const c=o[l*s],u=o[l*s+1],f=s>2?o[l*s+2]:0;i[a*3]=c,i[a*3+1]=u,i[a*3+2]=f}}_updateVertexValid(e,{vertexStart:n,geometrySize:r}){const{positionSize:i}=this,s=this.attributes.vertexValid,o=e&&Jf(e);if(e&&e.edgeTypes?s.set(e.edgeTypes,n):s.fill(1,n,n+r),o)for(let a=0;a<o.length;a++)s[n+o[a]/i-1]=0;s[n+r-1]=0}}function YC(t){return Array.isArray(t)&&t.length>0&&!Number.isFinite(t[0])}const C3=`
attribute vec2 vertexPositions;
attribute float vertexValid;

uniform bool extruded;
uniform bool isWireframe;
uniform float elevationScale;
uniform float opacity;

varying vec4 vColor;

struct PolygonProps {
  vec4 fillColors;
  vec4 lineColors;
  vec3 positions;
  vec3 nextPositions;
  vec3 pickingColors;
  vec3 positions64Low;
  vec3 nextPositions64Low;
  float elevations;
};

vec3 project_offset_normal(vec3 vector) {
  if (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT ||
    project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSETS) {
    return normalize(vector * project_uCommonUnitsPerWorldUnit);
  }
  return project_normal(vector);
}

void calculatePosition(PolygonProps props) {
#ifdef IS_SIDE_VERTEX
  if(vertexValid < 0.5){
    gl_Position = vec4(0.);
    return;
  }
#endif

  vec3 pos;
  vec3 pos64Low;
  vec3 normal;
  vec4 colors = isWireframe ? props.lineColors : props.fillColors;

  geometry.worldPosition = props.positions;
  geometry.worldPositionAlt = props.nextPositions;
  geometry.pickingColor = props.pickingColors;

#ifdef IS_SIDE_VERTEX
  pos = mix(props.positions, props.nextPositions, vertexPositions.x);
  pos64Low = mix(props.positions64Low, props.nextPositions64Low, vertexPositions.x);
#else
  pos = props.positions;
  pos64Low = props.positions64Low;
#endif

  if (extruded) {
    pos.z += props.elevations * vertexPositions.y * elevationScale;
  }
  gl_Position = project_position_to_clipspace(pos, pos64Low, vec3(0.), geometry.position);

  DECKGL_FILTER_GL_POSITION(gl_Position, geometry);

  if (extruded) {
  #ifdef IS_SIDE_VERTEX
    normal = vec3(
      props.positions.y - props.nextPositions.y + (props.positions64Low.y - props.nextPositions64Low.y),
      props.nextPositions.x - props.positions.x + (props.nextPositions64Low.x - props.positions64Low.x),
      0.0);
    normal = project_offset_normal(normal);
  #else
    normal = project_normal(vec3(0.0, 0.0, 1.0));
  #endif
    geometry.normal = normal;
    vec3 lightColor = lighting_getLightColor(colors.rgb, project_uCameraPosition, geometry.position.xyz, normal);
    vColor = vec4(lightColor, colors.a * opacity);
  } else {
    vColor = vec4(colors.rgb, colors.a * opacity);
  }
  DECKGL_FILTER_COLOR(vColor, geometry);
}
`,aH=`#define SHADER_NAME solid-polygon-layer-vertex-shader

attribute vec3 positions;
attribute vec3 positions64Low;
attribute float elevations;
attribute vec4 fillColors;
attribute vec4 lineColors;
attribute vec3 pickingColors;

`.concat(C3,`

void main(void) {
  PolygonProps props;

  props.positions = positions;
  props.positions64Low = positions64Low;
  props.elevations = elevations;
  props.fillColors = fillColors;
  props.lineColors = lineColors;
  props.pickingColors = pickingColors;

  calculatePosition(props);
}
`),lH=`#define SHADER_NAME solid-polygon-layer-vertex-shader-side
#define IS_SIDE_VERTEX


attribute vec3 instancePositions;
attribute vec3 nextPositions;
attribute vec3 instancePositions64Low;
attribute vec3 nextPositions64Low;
attribute float instanceElevations;
attribute vec4 instanceFillColors;
attribute vec4 instanceLineColors;
attribute vec3 instancePickingColors;

`.concat(C3,`

void main(void) {
  PolygonProps props;

  #if RING_WINDING_ORDER_CW == 1
    props.positions = instancePositions;
    props.positions64Low = instancePositions64Low;
    props.nextPositions = nextPositions;
    props.nextPositions64Low = nextPositions64Low;
  #else
    props.positions = nextPositions;
    props.positions64Low = nextPositions64Low;
    props.nextPositions = instancePositions;
    props.nextPositions64Low = instancePositions64Low;
  #endif
  props.elevations = instanceElevations;
  props.fillColors = instanceFillColors;
  props.lineColors = instanceLineColors;
  props.pickingColors = instancePickingColors;

  calculatePosition(props);
}
`),cH=`#define SHADER_NAME solid-polygon-layer-fragment-shader

precision highp float;

varying vec4 vColor;

void main(void) {
  gl_FragColor = vColor;

  DECKGL_FILTER_COLOR(gl_FragColor, geometry);
}
`,Xd=[0,0,0,255],uH={filled:!0,extruded:!1,wireframe:!1,_normalize:!0,_windingOrder:"CW",_full3d:!1,elevationScale:{type:"number",min:0,value:1},getPolygon:{type:"accessor",value:t=>t.polygon},getElevation:{type:"accessor",value:1e3},getFillColor:{type:"accessor",value:Xd},getLineColor:{type:"accessor",value:Xd},material:!0},yf={enter:(t,e)=>e.length?e.subarray(e.length-t.length):t};class du extends Fn{constructor(...e){super(...e),v(this,"state",void 0)}getShaders(e){return super.getShaders({vs:e==="top"?aH:lH,fs:cH,defines:{RING_WINDING_ORDER_CW:!this.props._normalize&&this.props._windingOrder==="CCW"?0:1},modules:[Ts,IU,Bs]})}get wrapLongitude(){return!1}initializeState(){const{gl:e,viewport:n}=this.context;let{coordinateSystem:r}=this.props;const{_full3d:i}=this.props;n.isGeospatial&&r===me.DEFAULT&&(r=me.LNGLAT);let s;r===me.LNGLAT&&(i?s=n.projectPosition.bind(n):s=n.projectFlat.bind(n)),this.setState({numInstances:0,polygonTesselator:new oH({preproject:s,fp64:this.use64bitPositions(),IndexType:!e||Ey(e,je.ELEMENT_INDEX_UINT32)?Uint32Array:Uint16Array})});const o=this.getAttributeManager(),a=!0;o.remove(["instancePickingColors"]),o.add({indices:{size:1,isIndexed:!0,update:this.calculateIndices,noAlloc:a},positions:{size:3,type:5130,fp64:this.use64bitPositions(),transition:yf,accessor:"getPolygon",update:this.calculatePositions,noAlloc:a,shaderAttributes:{positions:{vertexOffset:0,divisor:0},instancePositions:{vertexOffset:0,divisor:1},nextPositions:{vertexOffset:1,divisor:1}}},vertexValid:{size:1,divisor:1,type:5121,update:this.calculateVertexValid,noAlloc:a},elevations:{size:1,transition:yf,accessor:"getElevation",shaderAttributes:{elevations:{divisor:0},instanceElevations:{divisor:1}}},fillColors:{size:this.props.colorFormat.length,type:5121,normalized:!0,transition:yf,accessor:"getFillColor",defaultValue:Xd,shaderAttributes:{fillColors:{divisor:0},instanceFillColors:{divisor:1}}},lineColors:{size:this.props.colorFormat.length,type:5121,normalized:!0,transition:yf,accessor:"getLineColor",defaultValue:Xd,shaderAttributes:{lineColors:{divisor:0},instanceLineColors:{divisor:1}}},pickingColors:{size:3,type:5121,accessor:(l,{index:c,target:u})=>this.encodePickingColor(l&&l.__source?l.__source.index:c,u),shaderAttributes:{pickingColors:{divisor:0},instancePickingColors:{divisor:1}}}})}getPickingInfo(e){const n=super.getPickingInfo(e),{index:r}=n,{data:i}=this.props;return i[0]&&i[0].__source&&(n.object=i.find(s=>s.__source.index===r)),n}disablePickingIndex(e){const{data:n}=this.props;if(n[0]&&n[0].__source)for(let r=0;r<n.length;r++)n[r].__source.index===e&&this._disablePickingIndex(r);else super.disablePickingIndex(e)}draw({uniforms:e}){const{extruded:n,filled:r,wireframe:i,elevationScale:s}=this.props,{topModel:o,sideModel:a,polygonTesselator:l}=this.state,c={...e,extruded:!!n,elevationScale:s};a&&(a.setInstanceCount(l.instanceCount-1),a.setUniforms(c),i&&(a.setDrawMode(3),a.setUniforms({isWireframe:!0}).draw()),r&&(a.setDrawMode(6),a.setUniforms({isWireframe:!1}).draw())),o&&(o.setVertexCount(l.vertexCount),o.setUniforms(c).draw())}updateState(e){super.updateState(e),this.updateGeometry(e);const{props:n,oldProps:r,changeFlags:i}=e,s=this.getAttributeManager();if(i.extensionsChanged||n.filled!==r.filled||n.extruded!==r.extruded){var a;(a=this.state.models)===null||a===void 0||a.forEach(l=>l.delete()),this.setState(this._getModels(this.context.gl)),s.invalidateAll()}}updateGeometry({props:e,oldProps:n,changeFlags:r}){if(r.dataChanged||r.updateTriggersChanged&&(r.updateTriggersChanged.all||r.updateTriggersChanged.getPolygon)){const{polygonTesselator:s}=this.state,o=e.data.attributes||{};s.updateGeometry({data:e.data,normalize:e._normalize,geometryBuffer:o.getPolygon,buffers:o,getGeometry:e.getPolygon,positionFormat:e.positionFormat,wrapLongitude:e.wrapLongitude,resolution:this.context.viewport.resolution,fp64:this.use64bitPositions(),dataChanged:r.dataChanged,full3d:e._full3d}),this.setState({numInstances:s.instanceCount,startIndices:s.vertexStarts}),r.dataChanged||this.getAttributeManager().invalidateAll()}}_getModels(e){const{id:n,filled:r,extruded:i}=this.props;let s,o;if(r){const a=this.getShaders("top");a.defines.NON_INSTANCED_MODEL=1,s=new Jn(e,{...a,id:"".concat(n,"-top"),drawMode:4,attributes:{vertexPositions:new Float32Array([0,1])},uniforms:{isWireframe:!1,isSideVertex:!1},vertexCount:0,isIndexed:!0})}return i&&(o=new Jn(e,{...this.getShaders("side"),id:"".concat(n,"-side"),geometry:new Wr({drawMode:1,vertexCount:4,attributes:{vertexPositions:{size:2,value:new Float32Array([1,0,0,0,0,1,1,1])}}}),instanceCount:0,isInstanced:1}),o.userData.excludeAttributes={indices:!0}),{models:[o,s].filter(Boolean),topModel:s,sideModel:o}}calculateIndices(e){const{polygonTesselator:n}=this.state;e.startIndices=n.indexStarts,e.value=n.get("indices")}calculatePositions(e){const{polygonTesselator:n}=this.state;e.startIndices=n.vertexStarts,e.value=n.get("positions")}calculateVertexValid(e){e.value=this.state.polygonTesselator.get("vertexValid")}}v(du,"defaultProps",uH);v(du,"layerName","SolidPolygonLayer");function I3({data:t,getIndex:e,dataRange:n,replace:r}){const{startRow:i=0,endRow:s=1/0}=n,o=t.length;let a=o,l=o;for(let d=0;d<o;d++){const h=e(t[d]);if(a>d&&h>=i&&(a=d),h>=s){l=d;break}}let c=a;const f=l-a!==r.length?t.slice(l):void 0;for(let d=0;d<r.length;d++)t[c++]=r[d];if(f){for(let d=0;d<f.length;d++)t[c++]=f[d];t.length=c}return{startRow:a,endRow:a+r.length}}const w3=[0,0,0,255],fH=[0,0,0,255],dH={stroked:!0,filled:!0,extruded:!1,elevationScale:1,wireframe:!1,_normalize:!0,_windingOrder:"CW",lineWidthUnits:"meters",lineWidthScale:1,lineWidthMinPixels:0,lineWidthMaxPixels:Number.MAX_SAFE_INTEGER,lineJointRounded:!1,lineMiterLimit:4,getPolygon:{type:"accessor",value:t=>t.polygon},getFillColor:{type:"accessor",value:fH},getLineColor:{type:"accessor",value:w3},getLineWidth:{type:"accessor",value:1},getElevation:{type:"accessor",value:1e3},material:!0};class Zd extends er{initializeState(){this.state={paths:[]},this.props.getLineDashArray&&be.removed("getLineDashArray","PathStyleExtension")()}updateState({changeFlags:e}){const n=e.dataChanged||e.updateTriggersChanged&&(e.updateTriggersChanged.all||e.updateTriggersChanged.getPolygon);if(n&&Array.isArray(e.dataChanged)){const r=this.state.paths.slice(),i=e.dataChanged.map(s=>I3({data:r,getIndex:o=>o.__source.index,dataRange:s,replace:this._getPaths(s)}));this.setState({paths:r,pathsDiff:i})}else n&&this.setState({paths:this._getPaths(),pathsDiff:null})}_getPaths(e={}){const{data:n,getPolygon:r,positionFormat:i,_normalize:s}=this.props,o=[],a=i==="XY"?2:3,{startRow:l,endRow:c}=e,{iterable:u,objectInfo:f}=fu(n,l,c);for(const d of u){f.index++;let h=r(d,f);s&&(h=x3(h,a));const{holeIndices:g}=h,A=h.positions||h;if(g)for(let E=0;E<=g.length;E++){const p=A.slice(g[E-1]||0,g[E]||A.length);o.push(this.getSubLayerRow({path:p},d,f.index))}else o.push(this.getSubLayerRow({path:A},d,f.index))}return o}renderLayers(){const{data:e,_dataDiff:n,stroked:r,filled:i,extruded:s,wireframe:o,_normalize:a,_windingOrder:l,elevationScale:c,transitions:u,positionFormat:f}=this.props,{lineWidthUnits:d,lineWidthScale:h,lineWidthMinPixels:g,lineWidthMaxPixels:A,lineJointRounded:E,lineMiterLimit:p,lineDashJustified:m}=this.props,{getFillColor:y,getLineColor:_,getLineWidth:I,getLineDashArray:C,getElevation:b,getPolygon:B,updateTriggers:R,material:M}=this.props,{paths:U,pathsDiff:G}=this.state,Y=this.getSubLayerClass("fill",du),Z=this.getSubLayerClass("stroke",lg),oe=this.shouldRenderSubLayer("fill",U)&&new Y({_dataDiff:n,extruded:s,elevationScale:c,filled:i,wireframe:o,_normalize:a,_windingOrder:l,getElevation:b,getFillColor:y,getLineColor:s&&o?_:w3,material:M,transitions:u},this.getSubLayerProps({id:"fill",updateTriggers:R&&{getPolygon:R.getPolygon,getElevation:R.getElevation,getFillColor:R.getFillColor,lineColors:s&&o,getLineColor:R.getLineColor}}),{data:e,positionFormat:f,getPolygon:B}),ue=!s&&r&&this.shouldRenderSubLayer("stroke",U)&&new Z({_dataDiff:G&&(()=>G),widthUnits:d,widthScale:h,widthMinPixels:g,widthMaxPixels:A,jointRounded:E,miterLimit:p,dashJustified:m,_pathType:"loop",transitions:u&&{getWidth:u.getLineWidth,getColor:u.getLineColor,getPath:u.getPolygon},getColor:this.getSubLayerAccessor(_),getWidth:this.getSubLayerAccessor(I),getDashArray:this.getSubLayerAccessor(C)},this.getSubLayerProps({id:"stroke",updateTriggers:R&&{getWidth:R.getLineWidth,getColor:R.getLineColor,getDashArray:R.getLineDashArray}}),{data:U,positionFormat:f,getPath:Ee=>Ee.path});return[!s&&oe,ue,s&&oe]}}v(Zd,"layerName","PolygonLayer");v(Zd,"defaultProps",dH);function hH(t,e){if(!t)return null;const n="startIndices"in t?t.startIndices[e]:e,r=t.featureIds.value[n];return n!==-1?gH(t,r,n):null}function gH(t,e,n){const r={properties:{...t.properties[e]}};for(const i in t.numericProps)r.properties[i]=t.numericProps[i].value[n];return r}function AH(t,e){const n={points:null,lines:null,polygons:null};for(const r in n){const i=t[r].globalFeatureIds.value;n[r]=new Uint8ClampedArray(i.length*3);const s=[];for(let o=0;o<i.length;o++)e(i[o],s),n[r][o*3+0]=s[0],n[r][o*3+1]=s[1],n[r][o*3+2]=s[2]}return n}const pH=`#define SHADER_NAME multi-icon-layer-fragment-shader

precision highp float;

uniform float opacity;
uniform sampler2D iconsTexture;
uniform float gamma;
uniform bool sdf;
uniform float alphaCutoff;
uniform float sdfBuffer;
uniform float outlineBuffer;
uniform vec4 outlineColor;

varying vec4 vColor;
varying vec2 vTextureCoords;
varying vec2 uv;

void main(void) {
  geometry.uv = uv;

  if (!picking_uActive) {
    float alpha = texture2D(iconsTexture, vTextureCoords).a;
    vec4 color = vColor;
    if (sdf) {
      float distance = alpha;
      alpha = smoothstep(sdfBuffer - gamma, sdfBuffer + gamma, distance);

      if (outlineBuffer > 0.0) {
        float inFill = alpha;
        float inBorder = smoothstep(outlineBuffer - gamma, outlineBuffer + gamma, distance);
        color = mix(outlineColor, vColor, inFill);
        alpha = inBorder;
      }
    }
    float a = alpha * color.a;
    
    if (a < alphaCutoff) {
      discard;
    }

    gl_FragColor = vec4(color.rgb, a * opacity);
  }

  DECKGL_FILTER_COLOR(gl_FragColor, geometry);
}
`,ap=192/256,$C=[],mH={getIconOffsets:{type:"accessor",value:t=>t.offsets},alphaCutoff:.001,smoothing:.1,outlineWidth:0,outlineColor:{type:"color",value:[0,0,0,255]}};class zy extends ag{constructor(...e){super(...e),v(this,"state",void 0)}getShaders(){return{...super.getShaders(),fs:pH}}initializeState(){super.initializeState(),this.getAttributeManager().addInstanced({instanceOffsets:{size:2,accessor:"getIconOffsets"},instancePickingColors:{type:5121,size:3,accessor:(n,{index:r,target:i})=>this.encodePickingColor(r,i)}})}updateState(e){super.updateState(e);const{props:n,oldProps:r}=e;let{outlineColor:i}=n;i!==r.outlineColor&&(i=i.map(s=>s/255),i[3]=Number.isFinite(i[3])?i[3]:1,this.setState({outlineColor:i})),!n.sdf&&n.outlineWidth&&be.warn("".concat(this.id,": fontSettings.sdf is required to render outline"))()}draw(e){const{sdf:n,smoothing:r,outlineWidth:i}=this.props,{outlineColor:s}=this.state,o=i?Math.max(r,ap*(1-i)):-1;if(e.uniforms={...e.uniforms,sdfBuffer:ap,outlineBuffer:o,gamma:r,sdf:!!n,outlineColor:s},super.draw(e),n&&i){const{iconManager:a}=this.state;a.getTexture()&&this.state.model.draw({uniforms:{outlineBuffer:ap}})}}getInstanceOffset(e){return e?Array.from(e).flatMap(n=>super.getInstanceOffset(n)):$C}getInstanceColorMode(e){return 1}getInstanceIconFrame(e){return e?Array.from(e).flatMap(n=>super.getInstanceIconFrame(n)):$C}}v(zy,"defaultProps",mH);v(zy,"layerName","MultiIconLayer");const nc=1e20;class vH{constructor({fontSize:e=24,buffer:n=3,radius:r=8,cutoff:i=.25,fontFamily:s="sans-serif",fontWeight:o="normal",fontStyle:a="normal"}={}){this.buffer=n,this.cutoff=i,this.radius=r;const l=this.size=e+n*4,c=this._createCanvas(l),u=this.ctx=c.getContext("2d",{willReadFrequently:!0});u.font=`${a} ${o} ${e}px ${s}`,u.textBaseline="alphabetic",u.textAlign="left",u.fillStyle="black",this.gridOuter=new Float64Array(l*l),this.gridInner=new Float64Array(l*l),this.f=new Float64Array(l),this.z=new Float64Array(l+1),this.v=new Uint16Array(l)}_createCanvas(e){const n=document.createElement("canvas");return n.width=n.height=e,n}draw(e){const{width:n,actualBoundingBoxAscent:r,actualBoundingBoxDescent:i,actualBoundingBoxLeft:s,actualBoundingBoxRight:o}=this.ctx.measureText(e),a=Math.ceil(r),l=0,c=Math.max(0,Math.min(this.size-this.buffer,Math.ceil(o-s))),u=Math.min(this.size-this.buffer,a+Math.ceil(i)),f=c+2*this.buffer,d=u+2*this.buffer,h=Math.max(f*d,0),g=new Uint8ClampedArray(h),A={data:g,width:f,height:d,glyphWidth:c,glyphHeight:u,glyphTop:a,glyphLeft:l,glyphAdvance:n};if(c===0||u===0)return A;const{ctx:E,buffer:p,gridInner:m,gridOuter:y}=this;E.clearRect(p,p,c,u),E.fillText(e,p,p+a);const _=E.getImageData(p,p,c,u);y.fill(nc,0,h),m.fill(0,0,h);for(let I=0;I<u;I++)for(let C=0;C<c;C++){const b=_.data[4*(I*c+C)+3]/255;if(b===0)continue;const B=(I+p)*f+C+p;if(b===1)y[B]=0,m[B]=nc;else{const R=.5-b;y[B]=R>0?R*R:0,m[B]=R<0?R*R:0}}KC(y,0,0,f,d,f,this.f,this.v,this.z),KC(m,p,p,c,u,f,this.f,this.v,this.z);for(let I=0;I<h;I++){const C=Math.sqrt(y[I])-Math.sqrt(m[I]);g[I]=Math.round(255-255*(C/this.radius+this.cutoff))}return A}}function KC(t,e,n,r,i,s,o,a,l){for(let c=e;c<e+r;c++)qC(t,n*s+c,s,i,o,a,l);for(let c=n;c<n+i;c++)qC(t,c*s+e,1,r,o,a,l)}function qC(t,e,n,r,i,s,o){s[0]=0,o[0]=-nc,o[1]=nc,i[0]=t[e];for(let a=1,l=0,c=0;a<r;a++){i[a]=t[e+a*n];const u=a*a;do{const f=s[l];c=(i[a]-i[f]+u-f*f)/(a-f)/2}while(c<=o[l]&&--l>-1);l++,s[l]=a,o[l]=c,o[l+1]=nc}for(let a=0,l=0;a<r;a++){for(;o[l+1]<a;)l++;const c=s[l],u=a-c;t[e+a*n]=i[c]+u*u}}const yH=32,EH=[];function _H(t){return Math.pow(2,Math.ceil(Math.log2(t)))}function xH({characterSet:t,getFontWidth:e,fontHeight:n,buffer:r,maxCanvasWidth:i,mapping:s={},xOffset:o=0,yOffset:a=0}){let l=0,c=o;const u=n+r*2;for(const f of t)if(!s[f]){const d=e(f);c+d+r*2>i&&(c=0,l++),s[f]={x:c+r,y:a+l*u+r,width:d,height:u,layoutWidth:d,layoutHeight:n},c+=d+r*2}return{mapping:s,xOffset:c,yOffset:a+l*u,canvasHeight:_H(a+(l+1)*u)}}function S3(t,e,n,r){let i=0;for(let o=e;o<n;o++){var s;const a=t[o];i+=((s=r[a])===null||s===void 0?void 0:s.layoutWidth)||0}return i}function b3(t,e,n,r,i,s){let o=e,a=0;for(let l=e;l<n;l++){const c=S3(t,l,l+1,i);a+c>r&&(o<l&&s.push(l),o=l,a=0),a+=c}return a}function CH(t,e,n,r,i,s){let o=e,a=e,l=e,c=0;for(let u=e;u<n;u++)if((t[u]===" "||t[u+1]===" "||u+1===n)&&(l=u+1),l>a){let f=S3(t,a,l,i);c+f>r&&(o<a&&(s.push(a),o=a,c=0),f>r&&(f=b3(t,a,l,r,i,s),o=s[s.length-1])),a=l,c+=f}return c}function IH(t,e,n,r,i=0,s){s===void 0&&(s=t.length);const o=[];return e==="break-all"?b3(t,i,s,n,r,o):CH(t,i,s,n,r,o),o}function wH(t,e,n,r,i,s){let o=0,a=0;for(let l=e;l<n;l++){const c=t[l],u=r[c];u?(a||(a=u.layoutHeight),i[l]=o+u.layoutWidth/2,o+=u.layoutWidth):(be.warn("Missing character: ".concat(c," (").concat(c.codePointAt(0),")"))(),i[l]=o,o+=yH)}s[0]=o,s[1]=a}function SH(t,e,n,r,i){const s=Array.from(t),o=s.length,a=new Array(o),l=new Array(o),c=new Array(o),u=(n==="break-word"||n==="break-all")&&isFinite(r)&&r>0,f=[0,0],d=[0,0];let h=0,g=0,A=0;for(let p=0;p<=o;p++){const m=s[p];if((m===`
`||p===o)&&(A=p),A>g){const y=u?IH(s,n,r,i,g,A):EH;for(let _=0;_<=y.length;_++){const I=_===0?g:y[_-1],C=_<y.length?y[_]:A;wH(s,I,C,i,a,d);for(let b=I;b<C;b++){var E;const B=s[b],R=((E=i[B])===null||E===void 0?void 0:E.layoutOffsetY)||0;l[b]=h+d[1]/2+R,c[b]=d[0]}h=h+d[1]*e,f[0]=Math.max(f[0],d[0])}g=A}m===`
`&&(a[g]=0,l[g]=0,c[g]=0,g++)}return f[1]=h,{x:a,y:l,rowWidth:c,size:f}}function bH({value:t,length:e,stride:n,offset:r,startIndices:i,characterSet:s}){const o=t.BYTES_PER_ELEMENT,a=n?n/o:1,l=r?r/o:0,c=i[e]||Math.ceil((t.length-l)/a),u=s&&new Set,f=new Array(e);let d=t;if(a>1||l>0){const h=t.constructor;d=new h(c);for(let g=0;g<c;g++)d[g]=t[g*a+l]}for(let h=0;h<e;h++){const g=i[h],A=i[h+1]||c,E=d.subarray(g,A);f[h]=String.fromCodePoint.apply(null,E),u&&E.forEach(u.add,u)}if(u)for(const h of u)s.add(String.fromCodePoint(h));return{texts:f,characterCount:c}}class T3{constructor(e=5){v(this,"limit",void 0),v(this,"_cache",{}),v(this,"_order",[]),this.limit=e}get(e){const n=this._cache[e];return n&&(this._deleteOrder(e),this._appendOrder(e)),n}set(e,n){this._cache[e]?(this.delete(e),this._cache[e]=n,this._appendOrder(e)):(Object.keys(this._cache).length===this.limit&&this.delete(this._order[0]),this._cache[e]=n,this._appendOrder(e))}delete(e){this._cache[e]&&(delete this._cache[e],this._deleteOrder(e))}_deleteOrder(e){const n=this._order.indexOf(e);n>=0&&this._order.splice(n,1)}_appendOrder(e){this._order.push(e)}}function TH(){const t=[];for(let e=32;e<128;e++)t.push(String.fromCharCode(e));return t}const Ea={fontFamily:"Monaco, monospace",fontWeight:"normal",characterSet:TH(),fontSize:64,buffer:4,sdf:!1,cutoff:.25,radius:12,smoothing:.1},XC=1024,ZC=.9,JC=1.2,B3=3;let Jd=new T3(B3);function BH(t,e){let n;typeof e=="string"?n=new Set(Array.from(e)):n=new Set(e);const r=Jd.get(t);if(!r)return n;for(const i in r.mapping)n.has(i)&&n.delete(i);return n}function RH(t,e){for(let n=0;n<t.length;n++)e.data[4*n+3]=t[n]}function eI(t,e,n,r){t.font="".concat(r," ").concat(n,"px ").concat(e),t.fillStyle="#000",t.textBaseline="alphabetic",t.textAlign="left"}function PH(t){be.assert(Number.isFinite(t)&&t>=B3,"Invalid cache limit"),Jd=new T3(t)}class LH{constructor(){v(this,"props",{...Ea}),v(this,"_key",void 0),v(this,"_atlas",void 0)}get texture(){return this._atlas}get mapping(){return this._atlas&&this._atlas.mapping}get scale(){const{fontSize:e,buffer:n}=this.props;return(e*JC+n*2)/e}setProps(e={}){Object.assign(this.props,e),this._key=this._getKey();const n=BH(this._key,this.props.characterSet),r=Jd.get(this._key);if(r&&n.size===0){this._atlas!==r&&(this._atlas=r);return}const i=this._generateFontAtlas(n,r);this._atlas=i,Jd.set(this._key,i)}_generateFontAtlas(e,n){const{fontFamily:r,fontWeight:i,fontSize:s,buffer:o,sdf:a,radius:l,cutoff:c}=this.props;let u=n&&n.data;u||(u=document.createElement("canvas"),u.width=XC);const f=u.getContext("2d",{willReadFrequently:!0});eI(f,r,s,i);const{mapping:d,canvasHeight:h,xOffset:g,yOffset:A}=xH({getFontWidth:E=>f.measureText(E).width,fontHeight:s*JC,buffer:o,characterSet:e,maxCanvasWidth:XC,...n&&{mapping:n.mapping,xOffset:n.xOffset,yOffset:n.yOffset}});if(u.height!==h){const E=f.getImageData(0,0,u.width,u.height);u.height=h,f.putImageData(E,0,0)}if(eI(f,r,s,i),a){const E=new vH({fontSize:s,buffer:o,radius:l,cutoff:c,fontFamily:r,fontWeight:"".concat(i)});for(const p of e){const{data:m,width:y,height:_,glyphTop:I}=E.draw(p);d[p].width=y,d[p].layoutOffsetY=s*ZC-I;const C=f.createImageData(y,_);RH(m,C),f.putImageData(C,d[p].x,d[p].y)}}else for(const E of e)f.fillText(E,d[E].x,d[E].y+o+s*ZC);return{xOffset:g,yOffset:A,mapping:d,data:u,width:u.width,height:u.height}}_getKey(){const{fontFamily:e,fontWeight:n,fontSize:r,buffer:i,sdf:s,radius:o,cutoff:a}=this.props;return s?"".concat(e," ").concat(n," ").concat(r," ").concat(i," ").concat(o," ").concat(a):"".concat(e," ").concat(n," ").concat(r," ").concat(i)}}const MH=`#define SHADER_NAME text-background-layer-vertex-shader

attribute vec2 positions;

attribute vec3 instancePositions;
attribute vec3 instancePositions64Low;
attribute vec4 instanceRects;
attribute float instanceSizes;
attribute float instanceAngles;
attribute vec2 instancePixelOffsets;
attribute float instanceLineWidths;
attribute vec4 instanceFillColors;
attribute vec4 instanceLineColors;
attribute vec3 instancePickingColors;

uniform bool billboard;
uniform float opacity;
uniform float sizeScale;
uniform float sizeMinPixels;
uniform float sizeMaxPixels;
uniform vec4 padding;
uniform int sizeUnits;

varying vec4 vFillColor;
varying vec4 vLineColor;
varying float vLineWidth;
varying vec2 uv;
varying vec2 dimensions;

vec2 rotate_by_angle(vec2 vertex, float angle) {
  float angle_radian = radians(angle);
  float cos_angle = cos(angle_radian);
  float sin_angle = sin(angle_radian);
  mat2 rotationMatrix = mat2(cos_angle, -sin_angle, sin_angle, cos_angle);
  return rotationMatrix * vertex;
}

void main(void) {
  geometry.worldPosition = instancePositions;
  geometry.uv = positions;
  geometry.pickingColor = instancePickingColors;
  uv = positions;
  vLineWidth = instanceLineWidths;
  float sizePixels = clamp(
    project_size_to_pixel(instanceSizes * sizeScale, sizeUnits),
    sizeMinPixels, sizeMaxPixels
  );

  dimensions = instanceRects.zw * sizePixels + padding.xy + padding.zw;

  vec2 pixelOffset = (positions * instanceRects.zw + instanceRects.xy) * sizePixels + mix(-padding.xy, padding.zw, positions);
  pixelOffset = rotate_by_angle(pixelOffset, instanceAngles);
  pixelOffset += instancePixelOffsets;
  pixelOffset.y *= -1.0;

  if (billboard)  {
    gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, vec3(0.0), geometry.position);
    DECKGL_FILTER_GL_POSITION(gl_Position, geometry);
    vec3 offset = vec3(pixelOffset, 0.0);
    DECKGL_FILTER_SIZE(offset, geometry);
    gl_Position.xy += project_pixel_size_to_clipspace(offset.xy);
  } else {
    vec3 offset_common = vec3(project_pixel_size(pixelOffset), 0.0);
    DECKGL_FILTER_SIZE(offset_common, geometry);
    gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, offset_common, geometry.position);
    DECKGL_FILTER_GL_POSITION(gl_Position, geometry);
  }
  vFillColor = vec4(instanceFillColors.rgb, instanceFillColors.a * opacity);
  DECKGL_FILTER_COLOR(vFillColor, geometry);
  vLineColor = vec4(instanceLineColors.rgb, instanceLineColors.a * opacity);
  DECKGL_FILTER_COLOR(vLineColor, geometry);
}
`,NH=`#define SHADER_NAME text-background-layer-fragment-shader

precision highp float;

uniform bool stroked;

varying vec4 vFillColor;
varying vec4 vLineColor;
varying float vLineWidth;
varying vec2 uv;
varying vec2 dimensions;

void main(void) {
  geometry.uv = uv;

  vec2 pixelPosition = uv * dimensions;
  if (stroked) {
    float distToEdge = min(
      min(pixelPosition.x, dimensions.x - pixelPosition.x),
      min(pixelPosition.y, dimensions.y - pixelPosition.y)
    );
    float isBorder = smoothedge(distToEdge, vLineWidth);
    gl_FragColor = mix(vFillColor, vLineColor, isBorder);
  } else {
    gl_FragColor = vFillColor;
  }

  DECKGL_FILTER_COLOR(gl_FragColor, geometry);
}
`,OH={billboard:!0,sizeScale:1,sizeUnits:"pixels",sizeMinPixels:0,sizeMaxPixels:Number.MAX_SAFE_INTEGER,padding:{type:"array",value:[0,0,0,0]},getPosition:{type:"accessor",value:t=>t.position},getSize:{type:"accessor",value:1},getAngle:{type:"accessor",value:0},getPixelOffset:{type:"accessor",value:[0,0]},getBoundingRect:{type:"accessor",value:[0,0,0,0]},getFillColor:{type:"accessor",value:[0,0,0,255]},getLineColor:{type:"accessor",value:[0,0,0,255]},getLineWidth:{type:"accessor",value:1}};class Vy extends Fn{constructor(...e){super(...e),v(this,"state",void 0)}getShaders(){return super.getShaders({vs:MH,fs:NH,modules:[Ts,Bs]})}initializeState(){this.getAttributeManager().addInstanced({instancePositions:{size:3,type:5130,fp64:this.use64bitPositions(),transition:!0,accessor:"getPosition"},instanceSizes:{size:1,transition:!0,accessor:"getSize",defaultValue:1},instanceAngles:{size:1,transition:!0,accessor:"getAngle"},instanceRects:{size:4,accessor:"getBoundingRect"},instancePixelOffsets:{size:2,transition:!0,accessor:"getPixelOffset"},instanceFillColors:{size:4,transition:!0,normalized:!0,type:5121,accessor:"getFillColor",defaultValue:[0,0,0,255]},instanceLineColors:{size:4,transition:!0,normalized:!0,type:5121,accessor:"getLineColor",defaultValue:[0,0,0,255]},instanceLineWidths:{size:1,transition:!0,accessor:"getLineWidth",defaultValue:1}})}updateState(e){super.updateState(e);const{changeFlags:n}=e;if(n.extensionsChanged){var r;const{gl:i}=this.context;(r=this.state.model)===null||r===void 0||r.delete(),this.state.model=this._getModel(i),this.getAttributeManager().invalidateAll()}}draw({uniforms:e}){const{billboard:n,sizeScale:r,sizeUnits:i,sizeMinPixels:s,sizeMaxPixels:o,getLineWidth:a}=this.props;let{padding:l}=this.props;l.length<4&&(l=[l[0],l[1],l[0],l[1]]),this.state.model.setUniforms(e).setUniforms({billboard:n,stroked:!!a,padding:l,sizeUnits:As[i],sizeScale:r,sizeMinPixels:s,sizeMaxPixels:o}).draw()}_getModel(e){const n=[0,0,1,0,1,1,0,1];return new Jn(e,{...this.getShaders(),id:this.props.id,geometry:new Wr({drawMode:6,vertexCount:4,attributes:{positions:{size:2,value:new Float32Array(n)}}}),isInstanced:!0})}}v(Vy,"defaultProps",OH);v(Vy,"layerName","TextBackgroundLayer");const tI={start:1,middle:0,end:-1},nI={top:1,center:0,bottom:-1},lp=[0,0,0,255],DH=1,kH={billboard:!0,sizeScale:1,sizeUnits:"pixels",sizeMinPixels:0,sizeMaxPixels:Number.MAX_SAFE_INTEGER,background:!1,getBackgroundColor:{type:"accessor",value:[255,255,255,255]},getBorderColor:{type:"accessor",value:lp},getBorderWidth:{type:"accessor",value:0},backgroundPadding:{type:"array",value:[0,0,0,0]},characterSet:{type:"object",value:Ea.characterSet},fontFamily:Ea.fontFamily,fontWeight:Ea.fontWeight,lineHeight:DH,outlineWidth:{type:"number",value:0,min:0},outlineColor:{type:"color",value:lp},fontSettings:{type:"object",value:{},compare:1},wordBreak:"break-word",maxWidth:{type:"number",value:-1},getText:{type:"accessor",value:t=>t.text},getPosition:{type:"accessor",value:t=>t.position},getColor:{type:"accessor",value:lp},getSize:{type:"accessor",value:32},getAngle:{type:"accessor",value:0},getTextAnchor:{type:"accessor",value:"middle"},getAlignmentBaseline:{type:"accessor",value:"center"},getPixelOffset:{type:"accessor",value:[0,0]},backgroundColor:{deprecatedFor:["background","getBackgroundColor"]}};class Ya extends er{constructor(...e){super(...e),v(this,"state",void 0),v(this,"getBoundingRect",(n,r)=>{let{size:[i,s]}=this.transformParagraph(n,r);const{fontSize:o}=this.state.fontAtlasManager.props;i/=o,s/=o;const{getTextAnchor:a,getAlignmentBaseline:l}=this.props,c=tI[typeof a=="function"?a(n,r):a],u=nI[typeof l=="function"?l(n,r):l];return[(c-1)*i/2,(u-1)*s/2,i,s]}),v(this,"getIconOffsets",(n,r)=>{const{getTextAnchor:i,getAlignmentBaseline:s}=this.props,{x:o,y:a,rowWidth:l,size:[c,u]}=this.transformParagraph(n,r),f=tI[typeof i=="function"?i(n,r):i],d=nI[typeof s=="function"?s(n,r):s],h=o.length,g=new Array(h*2);let A=0;for(let E=0;E<h;E++){const p=(1-f)*(c-l[E])/2;g[A++]=(f-1)*c/2+p+o[E],g[A++]=(d-1)*u/2+a[E]}return g})}initializeState(){this.state={styleVersion:0,fontAtlasManager:new LH},this.props.maxWidth>0&&be.warn("v8.9 breaking change: TextLayer maxWidth is now relative to text size")()}updateState(e){const{props:n,oldProps:r,changeFlags:i}=e;(i.dataChanged||i.updateTriggersChanged&&(i.updateTriggersChanged.all||i.updateTriggersChanged.getText))&&this._updateText(),(this._updateFontAtlas()||n.lineHeight!==r.lineHeight||n.wordBreak!==r.wordBreak||n.maxWidth!==r.maxWidth)&&this.setState({styleVersion:this.state.styleVersion+1})}getPickingInfo({info:e}){return e.object=e.index>=0?this.props.data[e.index]:null,e}_updateFontAtlas(){const{fontSettings:e,fontFamily:n,fontWeight:r}=this.props,{fontAtlasManager:i,characterSet:s}=this.state,o={...e,characterSet:s,fontFamily:n,fontWeight:r};if(!i.mapping)return i.setProps(o),!0;for(const a in o)if(o[a]!==i.props[a])return i.setProps(o),!0;return!1}_updateText(){var e;const{data:n,characterSet:r}=this.props,i=(e=n.attributes)===null||e===void 0?void 0:e.getText;let{getText:s}=this.props,o=n.startIndices,a;const l=r==="auto"&&new Set;if(i&&o){const{texts:c,characterCount:u}=bH({...ArrayBuffer.isView(i)?{value:i}:i,length:n.length,startIndices:o,characterSet:l});a=u,s=(f,{index:d})=>c[d]}else{const{iterable:c,objectInfo:u}=fu(n);o=[0],a=0;for(const f of c){u.index++;const d=Array.from(s(f,u)||"");l&&d.forEach(l.add,l),a+=d.length,o.push(a)}}this.setState({getText:s,startIndices:o,numInstances:a,characterSet:l||r})}transformParagraph(e,n){const{fontAtlasManager:r}=this.state,i=r.mapping,s=this.state.getText,{wordBreak:o,lineHeight:a,maxWidth:l}=this.props,c=s(e,n)||"";return SH(c,a,o,l*r.props.fontSize,i)}renderLayers(){const{startIndices:e,numInstances:n,getText:r,fontAtlasManager:{scale:i,texture:s,mapping:o},styleVersion:a}=this.state,{data:l,_dataDiff:c,getPosition:u,getColor:f,getSize:d,getAngle:h,getPixelOffset:g,getBackgroundColor:A,getBorderColor:E,getBorderWidth:p,backgroundPadding:m,background:y,billboard:_,fontSettings:I,outlineWidth:C,outlineColor:b,sizeScale:B,sizeUnits:R,sizeMinPixels:M,sizeMaxPixels:U,transitions:G,updateTriggers:Y}=this.props,Z=this.getSubLayerClass("characters",zy),oe=this.getSubLayerClass("background",Vy);return[y&&new oe({getFillColor:A,getLineColor:E,getLineWidth:p,padding:m,getPosition:u,getSize:d,getAngle:h,getPixelOffset:g,billboard:_,sizeScale:B,sizeUnits:R,sizeMinPixels:M,sizeMaxPixels:U,transitions:G&&{getPosition:G.getPosition,getAngle:G.getAngle,getSize:G.getSize,getFillColor:G.getBackgroundColor,getLineColor:G.getBorderColor,getLineWidth:G.getBorderWidth,getPixelOffset:G.getPixelOffset}},this.getSubLayerProps({id:"background",updateTriggers:{getPosition:Y.getPosition,getAngle:Y.getAngle,getSize:Y.getSize,getFillColor:Y.getBackgroundColor,getLineColor:Y.getBorderColor,getLineWidth:Y.getBorderWidth,getPixelOffset:Y.getPixelOffset,getBoundingRect:{getText:Y.getText,getTextAnchor:Y.getTextAnchor,getAlignmentBaseline:Y.getAlignmentBaseline,styleVersion:a}}}),{data:l.attributes&&l.attributes.background?{length:l.length,attributes:l.attributes.background}:l,_dataDiff:c,autoHighlight:!1,getBoundingRect:this.getBoundingRect}),new Z({sdf:I.sdf,smoothing:Number.isFinite(I.smoothing)?I.smoothing:Ea.smoothing,outlineWidth:C/(I.radius||Ea.radius),outlineColor:b,iconAtlas:s,iconMapping:o,getPosition:u,getColor:f,getSize:d,getAngle:h,getPixelOffset:g,billboard:_,sizeScale:B*i,sizeUnits:R,sizeMinPixels:M*i,sizeMaxPixels:U*i,transitions:G&&{getPosition:G.getPosition,getAngle:G.getAngle,getColor:G.getColor,getSize:G.getSize,getPixelOffset:G.getPixelOffset}},this.getSubLayerProps({id:"characters",updateTriggers:{all:Y.getText,getPosition:Y.getPosition,getAngle:Y.getAngle,getColor:Y.getColor,getSize:Y.getSize,getPixelOffset:Y.getPixelOffset,getIconOffsets:{getTextAnchor:Y.getTextAnchor,getAlignmentBaseline:Y.getAlignmentBaseline,styleVersion:a}}}),{data:l,_dataDiff:c,startIndices:e,numInstances:n,getIconOffsets:this.getIconOffsets,getIcon:r})]}static set fontAtlasCacheLimit(e){PH(e)}}v(Ya,"defaultProps",kH);v(Ya,"layerName","TextLayer");const ed={circle:{type:Uy,props:{filled:"filled",stroked:"stroked",lineWidthMaxPixels:"lineWidthMaxPixels",lineWidthMinPixels:"lineWidthMinPixels",lineWidthScale:"lineWidthScale",lineWidthUnits:"lineWidthUnits",pointRadiusMaxPixels:"radiusMaxPixels",pointRadiusMinPixels:"radiusMinPixels",pointRadiusScale:"radiusScale",pointRadiusUnits:"radiusUnits",pointAntialiasing:"antialiasing",pointBillboard:"billboard",getFillColor:"getFillColor",getLineColor:"getLineColor",getLineWidth:"getLineWidth",getPointRadius:"getRadius"}},icon:{type:ag,props:{iconAtlas:"iconAtlas",iconMapping:"iconMapping",iconSizeMaxPixels:"sizeMaxPixels",iconSizeMinPixels:"sizeMinPixels",iconSizeScale:"sizeScale",iconSizeUnits:"sizeUnits",iconAlphaCutoff:"alphaCutoff",iconBillboard:"billboard",getIcon:"getIcon",getIconAngle:"getAngle",getIconColor:"getColor",getIconPixelOffset:"getPixelOffset",getIconSize:"getSize"}},text:{type:Ya,props:{textSizeMaxPixels:"sizeMaxPixels",textSizeMinPixels:"sizeMinPixels",textSizeScale:"sizeScale",textSizeUnits:"sizeUnits",textBackground:"background",textBackgroundPadding:"backgroundPadding",textFontFamily:"fontFamily",textFontWeight:"fontWeight",textLineHeight:"lineHeight",textMaxWidth:"maxWidth",textOutlineColor:"outlineColor",textOutlineWidth:"outlineWidth",textWordBreak:"wordBreak",textCharacterSet:"characterSet",textBillboard:"billboard",textFontSettings:"fontSettings",getText:"getText",getTextAngle:"getAngle",getTextColor:"getColor",getTextPixelOffset:"getPixelOffset",getTextSize:"getSize",getTextAnchor:"getTextAnchor",getTextAlignmentBaseline:"getAlignmentBaseline",getTextBackgroundColor:"getBackgroundColor",getTextBorderColor:"getBorderColor",getTextBorderWidth:"getBorderWidth"}}},td={type:lg,props:{lineWidthUnits:"widthUnits",lineWidthScale:"widthScale",lineWidthMinPixels:"widthMinPixels",lineWidthMaxPixels:"widthMaxPixels",lineJointRounded:"jointRounded",lineCapRounded:"capRounded",lineMiterLimit:"miterLimit",lineBillboard:"billboard",getLineColor:"getColor",getLineWidth:"getWidth"}},hm={type:du,props:{extruded:"extruded",filled:"filled",wireframe:"wireframe",elevationScale:"elevationScale",material:"material",_full3d:"_full3d",getElevation:"getElevation",getFillColor:"getFillColor",getLineColor:"getLineColor"}};function Sl({type:t,props:e}){const n={};for(const r in e)n[r]=t.defaultProps[e[r]];return n}function cp(t,e){const{transitions:n,updateTriggers:r}=t.props,i={updateTriggers:{},transitions:n&&{getPosition:n.geometry}};for(const s in e){const o=e[s];let a=t.props[s];s.startsWith("get")&&(a=t.getSubLayerAccessor(a),i.updateTriggers[o]=r[s],n&&(i.transitions[o]=n[s])),i[o]=a}return i}function QH(t){if(Array.isArray(t))return t;switch(be.assert(t.type,"GeoJSON does not have type"),t.type){case"Feature":return[t];case"FeatureCollection":return be.assert(Array.isArray(t.features),"GeoJSON does not have features array"),t.features;default:return[{geometry:t}]}}function rI(t,e,n={}){const r={pointFeatures:[],lineFeatures:[],polygonFeatures:[],polygonOutlineFeatures:[]},{startRow:i=0,endRow:s=t.length}=n;for(let o=i;o<s;o++){const a=t[o],{geometry:l}=a;if(l)if(l.type==="GeometryCollection"){be.assert(Array.isArray(l.geometries),"GeoJSON does not have geometries array");const{geometries:c}=l;for(let u=0;u<c.length;u++){const f=c[u];iI(f,r,e,a,o)}}else iI(l,r,e,a,o)}return r}function iI(t,e,n,r,i){const{type:s,coordinates:o}=t,{pointFeatures:a,lineFeatures:l,polygonFeatures:c,polygonOutlineFeatures:u}=e;if(!UH(s,o)){be.warn("".concat(s," coordinates are malformed"))();return}switch(s){case"Point":a.push(n({geometry:t},r,i));break;case"MultiPoint":o.forEach(f=>{a.push(n({geometry:{type:"Point",coordinates:f}},r,i))});break;case"LineString":l.push(n({geometry:t},r,i));break;case"MultiLineString":o.forEach(f=>{l.push(n({geometry:{type:"LineString",coordinates:f}},r,i))});break;case"Polygon":c.push(n({geometry:t},r,i)),o.forEach(f=>{u.push(n({geometry:{type:"LineString",coordinates:f}},r,i))});break;case"MultiPolygon":o.forEach(f=>{c.push(n({geometry:{type:"Polygon",coordinates:f}},r,i)),f.forEach(d=>{u.push(n({geometry:{type:"LineString",coordinates:d}},r,i))})});break}}const FH={Point:1,MultiPoint:2,LineString:2,MultiLineString:3,Polygon:3,MultiPolygon:4};function UH(t,e){let n=FH[t];for(be.assert(n,"Unknown GeoJSON type ".concat(t));e&&--n>0;)e=e[0];return e&&Number.isFinite(e[0])}function R3(){return{points:{},lines:{},polygons:{},polygonsOutline:{}}}function Ef(t){return t.geometry.coordinates}function GH(t,e){const n=R3(),{pointFeatures:r,lineFeatures:i,polygonFeatures:s,polygonOutlineFeatures:o}=t;return n.points.data=r,n.points._dataDiff=e.pointFeatures&&(()=>e.pointFeatures),n.points.getPosition=Ef,n.lines.data=i,n.lines._dataDiff=e.lineFeatures&&(()=>e.lineFeatures),n.lines.getPath=Ef,n.polygons.data=s,n.polygons._dataDiff=e.polygonFeatures&&(()=>e.polygonFeatures),n.polygons.getPolygon=Ef,n.polygonsOutline.data=o,n.polygonsOutline._dataDiff=e.polygonOutlineFeatures&&(()=>e.polygonOutlineFeatures),n.polygonsOutline.getPath=Ef,n}function zH(t,e){const n=R3(),{points:r,lines:i,polygons:s}=t,o=AH(t,e);return n.points.data={length:r.positions.value.length/r.positions.size,attributes:{...r.attributes,getPosition:r.positions,instancePickingColors:{size:3,value:o.points}},properties:r.properties,numericProps:r.numericProps,featureIds:r.featureIds},n.lines.data={length:i.pathIndices.value.length-1,startIndices:i.pathIndices.value,attributes:{...i.attributes,getPath:i.positions,instancePickingColors:{size:3,value:o.lines}},properties:i.properties,numericProps:i.numericProps,featureIds:i.featureIds},n.lines._pathType="open",n.polygons.data={length:s.polygonIndices.value.length-1,startIndices:s.polygonIndices.value,attributes:{...s.attributes,getPolygon:s.positions,pickingColors:{size:3,value:o.polygons}},properties:s.properties,numericProps:s.numericProps,featureIds:s.featureIds},n.polygons._normalize=!1,s.triangles&&(n.polygons.data.attributes.indices=s.triangles.value),n.polygonsOutline.data={length:s.primitivePolygonIndices.value.length-1,startIndices:s.primitivePolygonIndices.value,attributes:{...s.attributes,getPath:s.positions,instancePickingColors:{size:3,value:o.polygons}},properties:s.properties,numericProps:s.numericProps,featureIds:s.featureIds},n.polygonsOutline._pathType="open",n}const VH=["points","linestrings","polygons"],jH={...Sl(ed.circle),...Sl(ed.icon),...Sl(ed.text),...Sl(td),...Sl(hm),stroked:!0,filled:!0,extruded:!1,wireframe:!1,_full3d:!1,iconAtlas:{type:"object",value:null},iconMapping:{type:"object",value:{}},getIcon:{type:"accessor",value:t=>t.properties.icon},getText:{type:"accessor",value:t=>t.properties.text},pointType:"circle",getRadius:{deprecatedFor:"getPointRadius"}};class jy extends er{initializeState(){this.state={layerProps:{},features:{}}}updateState({props:e,changeFlags:n}){if(!n.dataChanged)return;const{data:r}=this.props,i=r&&"points"in r&&"polygons"in r&&"lines"in r;this.setState({binary:i}),i?this._updateStateBinary({props:e,changeFlags:n}):this._updateStateJSON({props:e,changeFlags:n})}_updateStateBinary({props:e,changeFlags:n}){const r=zH(e.data,this.encodePickingColor);this.setState({layerProps:r})}_updateStateJSON({props:e,changeFlags:n}){const r=QH(e.data),i=this.getSubLayerRow.bind(this);let s={};const o={};if(Array.isArray(n.dataChanged)){const l=this.state.features;for(const c in l)s[c]=l[c].slice(),o[c]=[];for(const c of n.dataChanged){const u=rI(r,i,c);for(const f in l)o[f].push(I3({data:s[f],getIndex:d=>d.__source.index,dataRange:c,replace:u[f]}))}}else s=rI(r,i);const a=GH(s,o);this.setState({features:s,featuresDiff:o,layerProps:a})}getPickingInfo(e){const n=super.getPickingInfo(e),{index:r,sourceLayer:i}=n;return n.featureType=VH.find(s=>i.id.startsWith("".concat(this.id,"-").concat(s,"-"))),r>=0&&i.id.startsWith("".concat(this.id,"-points-text"))&&this.state.binary&&(n.index=this.props.data.points.globalFeatureIds.value[r]),n}_updateAutoHighlight(e){const n="".concat(this.id,"-points-"),r=e.featureType==="points";for(const i of this.getSubLayers())i.id.startsWith(n)===r&&i.updateAutoHighlight(e)}_renderPolygonLayer(){const{extruded:e,wireframe:n}=this.props,{layerProps:r}=this.state,i="polygons-fill",s=this.shouldRenderSubLayer(i,r.polygons.data)&&this.getSubLayerClass(i,hm.type);if(s){const o=cp(this,hm.props),a=e&&n;return a||delete o.getLineColor,o.updateTriggers.lineColors=a,new s(o,this.getSubLayerProps({id:i,updateTriggers:o.updateTriggers}),r.polygons)}return null}_renderLineLayers(){const{extruded:e,stroked:n}=this.props,{layerProps:r}=this.state,i="polygons-stroke",s="linestrings",o=!e&&n&&this.shouldRenderSubLayer(i,r.polygonsOutline.data)&&this.getSubLayerClass(i,td.type),a=this.shouldRenderSubLayer(s,r.lines.data)&&this.getSubLayerClass(s,td.type);if(o||a){const l=cp(this,td.props);return[o&&new o(l,this.getSubLayerProps({id:i,updateTriggers:l.updateTriggers}),r.polygonsOutline),a&&new a(l,this.getSubLayerProps({id:s,updateTriggers:l.updateTriggers}),r.lines)]}return null}_renderPointLayers(){const{pointType:e}=this.props,{layerProps:n,binary:r}=this.state;let{highlightedObjectIndex:i}=this.props;!r&&Number.isFinite(i)&&(i=n.points.data.findIndex(a=>a.__source.index===i));const s=new Set(e.split("+")),o=[];for(const a of s){const l="points-".concat(a),c=ed[a],u=c&&this.shouldRenderSubLayer(l,n.points.data)&&this.getSubLayerClass(l,c.type);if(u){const f=cp(this,c.props);let d=n.points;if(a==="text"&&r){const{instancePickingColors:h,...g}=d.data.attributes;d={...d,data:{...d.data,attributes:g}}}o.push(new u(f,this.getSubLayerProps({id:l,updateTriggers:f.updateTriggers,highlightedObjectIndex:i}),d))}}return o}renderLayers(){const{extruded:e}=this.props,n=this._renderPolygonLayer(),r=this._renderLineLayers(),i=this._renderPointLayers();return[!e&&n,r,i,e&&n]}getSubLayerAccessor(e){const{binary:n}=this.state;return!n||typeof e!="function"?super.getSubLayerAccessor(e):(r,i)=>{const{data:s,index:o}=i,a=hH(s,o);return e(a,i)}}}v(jy,"layerName","GeoJsonLayer");v(jy,"defaultProps",jH);class HH{constructor(e){v(this,"index",void 0),v(this,"isVisible",void 0),v(this,"isSelected",void 0),v(this,"parent",void 0),v(this,"children",void 0),v(this,"content",void 0),v(this,"state",void 0),v(this,"layers",void 0),v(this,"id",void 0),v(this,"zoom",void 0),v(this,"userData",void 0),v(this,"boundingBox",void 0),v(this,"_abortController",void 0),v(this,"_loader",void 0),v(this,"_loaderId",void 0),v(this,"_isLoaded",void 0),v(this,"_isCancelled",void 0),v(this,"_needsReload",void 0),v(this,"_bbox",void 0),this.index=e,this.isVisible=!1,this.isSelected=!1,this.parent=null,this.children=[],this.content=null,this._loader=void 0,this._abortController=null,this._loaderId=0,this._isLoaded=!1,this._isCancelled=!1,this._needsReload=!1}get bbox(){return this._bbox}set bbox(e){this._bbox||(this._bbox=e,"west"in e?this.boundingBox=[[e.west,e.south],[e.east,e.north]]:this.boundingBox=[[e.left,e.top],[e.right,e.bottom]])}get data(){return this.isLoading&&this._loader?this._loader.then(()=>this.data):this.content}get isLoaded(){return this._isLoaded&&!this._needsReload}get isLoading(){return!!this._loader&&!this._isCancelled}get needsReload(){return this._needsReload||this._isCancelled}get byteLength(){const e=this.content?this.content.byteLength:0;return Number.isFinite(e)||console.error("byteLength not defined in tile data"),e}async _loadData({getData:e,requestScheduler:n,onLoad:r,onError:i}){const{index:s,id:o,bbox:a,userData:l,zoom:c}=this,u=this._loaderId;this._abortController=new AbortController;const{signal:f}=this._abortController,d=await n.scheduleRequest(this,A=>A.isSelected?1:-1);if(!d){this._isCancelled=!0;return}if(this._isCancelled){d.done();return}let h=null,g;try{h=await e({index:s,id:o,bbox:a,userData:l,zoom:c,signal:f})}catch(A){g=A||!0}finally{d.done()}if(u===this._loaderId){if(this._loader=void 0,this.content=h,this._isCancelled&&!h){this._isLoaded=!1;return}this._isLoaded=!0,this._isCancelled=!1,g?i(g,this):r(this)}}loadData(e){return this._isLoaded=!1,this._isCancelled=!1,this._needsReload=!1,this._loaderId++,this._loader=this._loadData(e),this._loader}setNeedsReload(){this.isLoading&&(this.abort(),this._loader=void 0),this._needsReload=!0}abort(){var e;this.isLoaded||(this._isCancelled=!0,(e=this._abortController)===null||e===void 0||e.abort())}}const Xt={OUTSIDE:-1,INTERSECTING:0,INSIDE:1},sI=new re,WH=new re;class Hy{constructor(e=[0,0,0],n=[0,0,0],r){v(this,"center",void 0),v(this,"halfDiagonal",void 0),v(this,"minimum",void 0),v(this,"maximum",void 0),r=r||sI.copy(e).add(n).scale(.5),this.center=new re(r),this.halfDiagonal=new re(n).subtract(this.center),this.minimum=new re(e),this.maximum=new re(n)}clone(){return new Hy(this.minimum,this.maximum,this.center)}equals(e){return this===e||!!e&&this.minimum.equals(e.minimum)&&this.maximum.equals(e.maximum)}transform(e){return this.center.transformAsPoint(e),this.halfDiagonal.transform(e),this.minimum.transform(e),this.maximum.transform(e),this}intersectPlane(e){const{halfDiagonal:n}=this,r=WH.from(e.normal),i=n.x*Math.abs(r.x)+n.y*Math.abs(r.y)+n.z*Math.abs(r.z),s=this.center.dot(r)+e.distance;return s-i>0?Xt.INSIDE:s+i<0?Xt.OUTSIDE:Xt.INTERSECTING}distanceTo(e){return Math.sqrt(this.distanceSquaredTo(e))}distanceSquaredTo(e){const n=sI.from(e).subtract(this.center),{halfDiagonal:r}=this;let i=0,s;return s=Math.abs(n.x)-r.x,s>0&&(i+=s*s),s=Math.abs(n.y)-r.y,s>0&&(i+=s*s),s=Math.abs(n.z)-r.z,s>0&&(i+=s*s),i}}const bl=new re,oI=new re;class Wy{constructor(e=[0,0,0],n=0){v(this,"center",void 0),v(this,"radius",void 0),this.radius=-0,this.center=new re,this.fromCenterRadius(e,n)}fromCenterRadius(e,n){return this.center.from(e),this.radius=n,this}fromCornerPoints(e,n){return n=bl.from(n),this.center=new re().from(e).add(n).scale(.5),this.radius=this.center.distance(n),this}equals(e){return this===e||!!e&&this.center.equals(e.center)&&this.radius===e.radius}clone(){return new Wy(this.center,this.radius)}union(e){const n=this.center,r=this.radius,i=e.center,s=e.radius,o=bl.copy(i).subtract(n),a=o.magnitude();if(r>=a+s)return this.clone();if(s>=a+r)return e.clone();const l=(r+a+s)*.5;return oI.copy(o).scale((-r+l)/a).add(n),this.center.copy(oI),this.radius=l,this}expand(e){const r=bl.from(e).subtract(this.center).magnitude();return r>this.radius&&(this.radius=r),this}transform(e){this.center.transform(e);const n=T7(bl,e);return this.radius=Math.max(n[0],Math.max(n[1],n[2]))*this.radius,this}distanceSquaredTo(e){const n=this.distanceTo(e);return n*n}distanceTo(e){const r=bl.from(e).subtract(this.center);return Math.max(0,r.len()-this.radius)}intersectPlane(e){const n=this.center,r=this.radius,s=e.normal.dot(n)+e.distance;return s<-r?Xt.OUTSIDE:s<r?Xt.INTERSECTING:Xt.INSIDE}}const YH=new re,$H=new re,_f=new re,xf=new re,Cf=new re,KH=new re,qH=new re,Jr={COLUMN0ROW0:0,COLUMN0ROW1:1,COLUMN0ROW2:2,COLUMN1ROW0:3,COLUMN1ROW1:4,COLUMN1ROW2:5,COLUMN2ROW0:6,COLUMN2ROW1:7,COLUMN2ROW2:8};class Yy{constructor(e=[0,0,0],n=[0,0,0,0,0,0,0,0,0]){v(this,"center",void 0),v(this,"halfAxes",void 0),this.center=new re().from(e),this.halfAxes=new Ft(n)}get halfSize(){const e=this.halfAxes.getColumn(0),n=this.halfAxes.getColumn(1),r=this.halfAxes.getColumn(2);return[new re(e).len(),new re(n).len(),new re(r).len()]}get quaternion(){const e=this.halfAxes.getColumn(0),n=this.halfAxes.getColumn(1),r=this.halfAxes.getColumn(2),i=new re(e).normalize(),s=new re(n).normalize(),o=new re(r).normalize();return new Kx().fromMatrix3(new Ft([...i,...s,...o]))}fromCenterHalfSizeQuaternion(e,n,r){const i=new Kx(r),s=new Ft().fromQuaternion(i);return s[0]=s[0]*n[0],s[1]=s[1]*n[0],s[2]=s[2]*n[0],s[3]=s[3]*n[1],s[4]=s[4]*n[1],s[5]=s[5]*n[1],s[6]=s[6]*n[2],s[7]=s[7]*n[2],s[8]=s[8]*n[2],this.center=new re().from(e),this.halfAxes=s,this}clone(){return new Yy(this.center,this.halfAxes)}equals(e){return this===e||!!e&&this.center.equals(e.center)&&this.halfAxes.equals(e.halfAxes)}getBoundingSphere(e=new Wy){const n=this.halfAxes,r=n.getColumn(0,_f),i=n.getColumn(1,xf),s=n.getColumn(2,Cf),o=YH.copy(r).add(i).add(s);return e.center.copy(this.center),e.radius=o.magnitude(),e}intersectPlane(e){const n=this.center,r=e.normal,i=this.halfAxes,s=r.x,o=r.y,a=r.z,l=Math.abs(s*i[Jr.COLUMN0ROW0]+o*i[Jr.COLUMN0ROW1]+a*i[Jr.COLUMN0ROW2])+Math.abs(s*i[Jr.COLUMN1ROW0]+o*i[Jr.COLUMN1ROW1]+a*i[Jr.COLUMN1ROW2])+Math.abs(s*i[Jr.COLUMN2ROW0]+o*i[Jr.COLUMN2ROW1]+a*i[Jr.COLUMN2ROW2]),c=r.dot(n)+e.distance;return c<=-l?Xt.OUTSIDE:c>=l?Xt.INSIDE:Xt.INTERSECTING}distanceTo(e){return Math.sqrt(this.distanceSquaredTo(e))}distanceSquaredTo(e){const n=$H.from(e).subtract(this.center),r=this.halfAxes,i=r.getColumn(0,_f),s=r.getColumn(1,xf),o=r.getColumn(2,Cf),a=i.magnitude(),l=s.magnitude(),c=o.magnitude();i.normalize(),s.normalize(),o.normalize();let u=0,f;return f=Math.abs(n.dot(i))-a,f>0&&(u+=f*f),f=Math.abs(n.dot(s))-l,f>0&&(u+=f*f),f=Math.abs(n.dot(o))-c,f>0&&(u+=f*f),u}computePlaneDistances(e,n,r=[-0,-0]){let i=Number.POSITIVE_INFINITY,s=Number.NEGATIVE_INFINITY;const o=this.center,a=this.halfAxes,l=a.getColumn(0,_f),c=a.getColumn(1,xf),u=a.getColumn(2,Cf),f=KH.copy(l).add(c).add(u).add(o),d=qH.copy(f).subtract(e);let h=n.dot(d);return i=Math.min(h,i),s=Math.max(h,s),f.copy(o).add(l).add(c).subtract(u),d.copy(f).subtract(e),h=n.dot(d),i=Math.min(h,i),s=Math.max(h,s),f.copy(o).add(l).subtract(c).add(u),d.copy(f).subtract(e),h=n.dot(d),i=Math.min(h,i),s=Math.max(h,s),f.copy(o).add(l).subtract(c).subtract(u),d.copy(f).subtract(e),h=n.dot(d),i=Math.min(h,i),s=Math.max(h,s),o.copy(f).subtract(l).add(c).add(u),d.copy(f).subtract(e),h=n.dot(d),i=Math.min(h,i),s=Math.max(h,s),o.copy(f).subtract(l).add(c).subtract(u),d.copy(f).subtract(e),h=n.dot(d),i=Math.min(h,i),s=Math.max(h,s),o.copy(f).subtract(l).subtract(c).add(u),d.copy(f).subtract(e),h=n.dot(d),i=Math.min(h,i),s=Math.max(h,s),o.copy(f).subtract(l).subtract(c).subtract(u),d.copy(f).subtract(e),h=n.dot(d),i=Math.min(h,i),s=Math.max(h,s),r[0]=i,r[1]=s,r}transform(e){this.center.transformAsPoint(e);const n=this.halfAxes.getColumn(0,_f);n.transformAsPoint(e);const r=this.halfAxes.getColumn(1,xf);r.transformAsPoint(e);const i=this.halfAxes.getColumn(2,Cf);return i.transformAsPoint(e),this.halfAxes=new Ft([...n,...r,...i]),this}getTransform(){throw new Error("not implemented")}}const aI=new re,lI=new re;class go{constructor(e=[0,0,1],n=0){v(this,"normal",void 0),v(this,"distance",void 0),this.normal=new re,this.distance=-0,this.fromNormalDistance(e,n)}fromNormalDistance(e,n){return Tc(Number.isFinite(n)),this.normal.from(e).normalize(),this.distance=n,this}fromPointNormal(e,n){e=aI.from(e),this.normal.from(n).normalize();const r=-this.normal.dot(e);return this.distance=r,this}fromCoefficients(e,n,r,i){return this.normal.set(e,n,r),Tc(ci(this.normal.len(),1)),this.distance=i,this}clone(){return new go(this.normal,this.distance)}equals(e){return ci(this.distance,e.distance)&&ci(this.normal,e.normal)}getPointDistance(e){return this.normal.dot(e)+this.distance}transform(e){const n=lI.copy(this.normal).transformAsVector(e).normalize(),r=this.normal.scale(-this.distance).transform(e);return this.fromPointNormal(r,n)}projectPointOntoPlane(e,n=[0,0,0]){e=aI.from(e);const r=this.getPointDistance(e),i=lI.copy(this.normal).scale(r);return e.subtract(i).to(n)}}const cI=[new re([1,0,0]),new re([0,1,0]),new re([0,0,1])],uI=new re,XH=new re;new go(new re(1,0,0),0);class oi{constructor(e=[]){v(this,"planes",void 0),this.planes=e}fromBoundingSphere(e){this.planes.length=2*cI.length;const n=e.center,r=e.radius;let i=0;for(const s of cI){let o=this.planes[i],a=this.planes[i+1];o||(o=this.planes[i]=new go),a||(a=this.planes[i+1]=new go);const l=uI.copy(s).scale(-r).add(n);-s.dot(l),o.fromPointNormal(l,s);const c=uI.copy(s).scale(r).add(n),u=XH.copy(s).negate();-u.dot(c),a.fromPointNormal(c,u),i+=2}return this}computeVisibility(e){let n=Xt.INSIDE;for(const r of this.planes)switch(e.intersectPlane(r)){case Xt.OUTSIDE:return Xt.OUTSIDE;case Xt.INTERSECTING:n=Xt.INTERSECTING;break}return n}computeVisibilityWithPlaneMask(e,n){if(Tc(Number.isFinite(n),"parentPlaneMask is required."),n===oi.MASK_OUTSIDE||n===oi.MASK_INSIDE)return n;let r=oi.MASK_INSIDE;const i=this.planes;for(let s=0;s<this.planes.length;++s){const o=s<31?1<<s:0;if(s<31&&!(n&o))continue;const a=i[s],l=e.intersectPlane(a);if(l===Xt.OUTSIDE)return oi.MASK_OUTSIDE;l===Xt.INTERSECTING&&(r|=o)}return r}}v(oi,"MASK_OUTSIDE",4294967295);v(oi,"MASK_INSIDE",0);v(oi,"MASK_INDETERMINATE",2147483647);new re;new re;new re;new re;new re;new re;new re;new re;new re;new re;new re;new re;new re;new re;new re;new re;new re;const Lr=new Ft,ZH=new Ft,JH=new Ft,If=new Ft,fI=new Ft;function eW(t,e={}){const n=TT.EPSILON20,r=10;let i=0,s=0;const o=ZH,a=JH;o.identity(),a.copy(t);const l=n*tW(a);for(;s<r&&nW(a)>l;)rW(a,If),fI.copy(If).transpose(),a.multiplyRight(If),a.multiplyLeft(fI),o.multiplyRight(If),++i>2&&(++s,i=0);return e.unitary=o.toTarget(e.unitary),e.diagonal=a.toTarget(e.diagonal),e}function tW(t){let e=0;for(let n=0;n<9;++n){const r=t[n];e+=r*r}return Math.sqrt(e)}const gm=[1,0,0],Am=[2,2,1];function nW(t){let e=0;for(let n=0;n<3;++n){const r=t[Lr.getElementIndex(Am[n],gm[n])];e+=2*r*r}return Math.sqrt(e)}function rW(t,e){const n=TT.EPSILON15;let r=0,i=1;for(let c=0;c<3;++c){const u=Math.abs(t[Lr.getElementIndex(Am[c],gm[c])]);u>r&&(i=c,r=u)}const s=gm[i],o=Am[i];let a=1,l=0;if(Math.abs(t[Lr.getElementIndex(o,s)])>n){const c=t[Lr.getElementIndex(o,o)],u=t[Lr.getElementIndex(s,s)],f=t[Lr.getElementIndex(o,s)],d=(c-u)/2/f;let h;d<0?h=-1/(-d+Math.sqrt(1+d*d)):h=1/(d+Math.sqrt(1+d*d)),a=1/Math.sqrt(1+h*h),l=h*a}return Ft.IDENTITY.to(e),e[Lr.getElementIndex(s,s)]=e[Lr.getElementIndex(o,o)]=a,e[Lr.getElementIndex(o,s)]=l,e[Lr.getElementIndex(s,o)]=-l,e}const zi=new re,iW=new re,sW=new re,oW=new re,aW=new re,lW=new Ft,cW={diagonal:new Ft,unitary:new Ft};function uW(t,e=new Yy){if(!t||t.length===0)return e.halfAxes=new Ft([0,0,0,0,0,0,0,0,0]),e.center=new re,e;const n=t.length,r=new re(0,0,0);for(const R of t)r.add(R);const i=1/n;r.multiplyByScalar(i);let s=0,o=0,a=0,l=0,c=0,u=0;for(const R of t){const M=zi.copy(R).subtract(r);s+=M.x*M.x,o+=M.x*M.y,a+=M.x*M.z,l+=M.y*M.y,c+=M.y*M.z,u+=M.z*M.z}s*=i,o*=i,a*=i,l*=i,c*=i,u*=i;const f=lW;f[0]=s,f[1]=o,f[2]=a,f[3]=o,f[4]=l,f[5]=c,f[6]=a,f[7]=c,f[8]=u;const{unitary:d}=eW(f,cW),h=e.halfAxes.copy(d);let g=h.getColumn(0,sW),A=h.getColumn(1,oW),E=h.getColumn(2,aW),p=-Number.MAX_VALUE,m=-Number.MAX_VALUE,y=-Number.MAX_VALUE,_=Number.MAX_VALUE,I=Number.MAX_VALUE,C=Number.MAX_VALUE;for(const R of t)zi.copy(R),p=Math.max(zi.dot(g),p),m=Math.max(zi.dot(A),m),y=Math.max(zi.dot(E),y),_=Math.min(zi.dot(g),_),I=Math.min(zi.dot(A),I),C=Math.min(zi.dot(E),C);g=g.multiplyByScalar(.5*(_+p)),A=A.multiplyByScalar(.5*(I+m)),E=E.multiplyByScalar(.5*(C+y)),e.center.copy(g).add(A).add(E);const b=iW.set(p-_,m-I,y-C).multiplyByScalar(.5),B=new Ft([b[0],0,0,0,b[1],0,0,0,b[2]]);return e.halfAxes.multiplyRight(B),e}const ua=512,dI=3,P3=[[.5,.5],[0,0],[0,1],[1,0],[1,1]],L3=P3.concat([[0,.5],[.5,0],[1,.5],[.5,1]]),fW=L3.concat([[.25,.5],[.75,.5]]);class fa{constructor(e,n,r){v(this,"x",void 0),v(this,"y",void 0),v(this,"z",void 0),v(this,"childVisible",void 0),v(this,"selected",void 0),v(this,"_children",void 0),this.x=e,this.y=n,this.z=r}get children(){if(!this._children){const e=this.x*2,n=this.y*2,r=this.z+1;this._children=[new fa(e,n,r),new fa(e,n+1,r),new fa(e+1,n,r),new fa(e+1,n+1,r)]}return this._children}update(e){const{viewport:n,cullingVolume:r,elevationBounds:i,minZ:s,maxZ:o,bounds:a,offset:l,project:c}=e,u=this.getBoundingVolume(i,l,c);if(a&&!this.insideBounds(a)||r.computeVisibility(u)<0)return!1;if(!this.childVisible){let{z:d}=this;if(d<o&&d>=s){const h=u.distanceTo(n.cameraPosition)*n.scale/n.height;d+=Math.floor(Math.log2(h))}if(d>=o)return this.selected=!0,!0}this.selected=!1,this.childVisible=!0;for(const d of this.children)d.update(e);return!0}getSelected(e=[]){if(this.selected&&e.push(this),this._children)for(const n of this._children)n.getSelected(e);return e}insideBounds([e,n,r,i]){const s=Math.pow(2,this.z),o=ua/s;return this.x*o<r&&this.y*o<i&&(this.x+1)*o>e&&(this.y+1)*o>n}getBoundingVolume(e,n,r){if(r){const l=this.z<1?fW:this.z<2?L3:P3,c=[];for(const u of l){const f=mm(this.x+u[0],this.y+u[1],this.z);f[2]=e[0],c.push(r(f)),e[0]!==e[1]&&(f[2]=e[1],c.push(r(f)))}return uW(c)}const i=Math.pow(2,this.z),s=ua/i,o=this.x*s+n*ua,a=ua-(this.y+1)*s;return new Hy([o,a,e[0]],[o+s,a+s,e[1]])}}function dW(t,e,n,r){const i=t instanceof QV&&t.resolution?t.projectPosition:null,s=Object.values(t.getFrustumPlanes()).map(({normal:h,distance:g})=>new go(h.clone().negate(),g)),o=new oi(s),a=t.distanceScales.unitsPerMeter[2],l=n&&n[0]*a||0,c=n&&n[1]*a||0,u=t instanceof vs&&t.pitch<=60?e:0;if(r){const[h,g,A,E]=r,p=ms([h,E]),m=ms([A,g]);r=[p[0],ua-p[1],m[0],ua-m[1]]}const f=new fa(0,0,0),d={viewport:t,project:i,cullingVolume:o,elevationBounds:[l,c],minZ:u,maxZ:e,bounds:r,offset:0};if(f.update(d),t instanceof vs&&t.subViewports&&t.subViewports.length>1){for(d.offset=-1;f.update(d)&&!(--d.offset<-dI););for(d.offset=1;f.update(d)&&!(++d.offset>dI););}return f.getSelected()}const _i=512,hW=[-1/0,-1/0,1/0,1/0],gW={type:"object",value:null,validate:(t,e)=>e.optional&&t===null||typeof t=="string"||Array.isArray(t)&&t.every(n=>typeof n=="string"),equal:(t,e)=>{if(t===e)return!0;if(!Array.isArray(t)||!Array.isArray(e))return!1;const n=t.length;if(n!==e.length)return!1;for(let r=0;r<n;r++)if(t[r]!==e[r])return!1;return!0}};function M3(t,e){const n=[e.transformAsPoint([t[0],t[1]]),e.transformAsPoint([t[2],t[1]]),e.transformAsPoint([t[0],t[3]]),e.transformAsPoint([t[2],t[3]])];return[Math.min(...n.map(i=>i[0])),Math.min(...n.map(i=>i[1])),Math.max(...n.map(i=>i[0])),Math.max(...n.map(i=>i[1]))]}function AW(t){return Math.abs(t.split("").reduce((e,n)=>(e<<5)-e+n.charCodeAt(0)|0,0))}function pW(t,e){if(!t||!t.length)return null;const{index:n,id:r}=e;if(Array.isArray(t)){const s=AW(r)%t.length;t=t[s]}let i=t;for(const s of Object.keys(n)){const o=new RegExp("{".concat(s,"}"),"g");i=i.replace(o,String(n[s]))}return Number.isInteger(n.y)&&Number.isInteger(n.z)&&(i=i.replace(/\{-y\}/g,String(Math.pow(2,n.z)-n.y-1))),i}function mW(t,e,n){let r;if(e&&e.length===2){const[i,s]=e,o=t.getBounds({z:i}),a=t.getBounds({z:s});r=[Math.min(o[0],a[0]),Math.min(o[1],a[1]),Math.max(o[2],a[2]),Math.max(o[3],a[3])]}else r=t.getBounds();return t.isGeospatial?[Math.max(r[0],n[0]),Math.max(r[1],n[1]),Math.min(r[2],n[2]),Math.min(r[3],n[3])]:[Math.max(Math.min(r[0],n[2]),n[0]),Math.max(Math.min(r[1],n[3]),n[1]),Math.min(Math.max(r[2],n[0]),n[2]),Math.min(Math.max(r[3],n[1]),n[3])]}function vW({viewport:t,z:e=0,cullRect:n}){return(t.subViewports||[t]).map(i=>pm(i,e,n))}function pm(t,e,n){if(!Array.isArray(e)){const s=n.x-t.x,o=n.y-t.y,{width:a,height:l}=n,c={targetZ:e},u=t.unproject([s,o],c),f=t.unproject([s+a,o],c),d=t.unproject([s,o+l],c),h=t.unproject([s+a,o+l],c);return[Math.min(u[0],f[0],d[0],h[0]),Math.min(u[1],f[1],d[1],h[1]),Math.max(u[0],f[0],d[0],h[0]),Math.max(u[1],f[1],d[1],h[1])]}const r=pm(t,e[0],n),i=pm(t,e[1],n);return[Math.min(r[0],i[0]),Math.min(r[1],i[1]),Math.max(r[2],i[2]),Math.max(r[3],i[3])]}function yW(t,e,n){return n?M3(t,n).map(i=>i*e/_i):t.map(r=>r*e/_i)}function $y(t,e){return Math.pow(2,t)*_i/e}function mm(t,e,n){const r=$y(n,_i),i=t/r*360-180,s=Math.PI-2*Math.PI*e/r,o=180/Math.PI*Math.atan(.5*(Math.exp(s)-Math.exp(-s)));return[i,o]}function hI(t,e,n,r){const i=$y(n,r);return[t/i*_i,e/i*_i]}function EW(t,e,n,r,i=_i){if(t.isGeospatial){const[c,u]=mm(e,n,r),[f,d]=mm(e+1,n+1,r);return{west:c,north:u,east:f,south:d}}const[s,o]=hI(e,n,r,i),[a,l]=hI(e+1,n+1,r,i);return{left:s,top:o,right:a,bottom:l}}function _W(t,e,n,r,i){const s=mW(t,null,r),o=$y(e,n),[a,l,c,u]=yW(s,o,i),f=[];for(let d=Math.floor(a);d<c;d++)for(let h=Math.floor(l);h<u;h++)f.push({x:d,y:h,z:e});return f}function xW({viewport:t,maxZoom:e,minZoom:n,zRange:r,extent:i,tileSize:s=_i,modelMatrix:o,modelMatrixInverse:a,zoomOffset:l=0}){let c=t.isGeospatial?Math.round(t.zoom+Math.log2(_i/s))+l:Math.ceil(t.zoom)+l;if(typeof n=="number"&&Number.isFinite(n)&&c<n){if(!i)return[];c=n}typeof e=="number"&&Number.isFinite(e)&&c>e&&(c=e);let u=i;return o&&a&&i&&!t.isGeospatial&&(u=M3(i,o)),t.isGeospatial?dW(t,c,r,i):_W(t,c,s,u||hW,a)}function CW(t){let e={},n;return r=>{for(const i in r)if(!IW(r[i],e[i])){n=t(r),e=r;break}return n}}function IW(t,e){if(t===e)return!0;if(Array.isArray(t)){const n=t.length;if(!e||e.length!==n)return!1;for(let r=0;r<n;r++)if(t[r]!==e[r])return!1;return!0}return!1}const gI=1,fg=2,wW="never",SW="no-overlap",Ky="best-available",bW=5,TW={[Ky]:PW,[SW]:LW,[wW]:()=>{}},BW={extent:null,tileSize:512,maxZoom:null,minZoom:null,maxCacheSize:null,maxCacheByteSize:null,refinementStrategy:"best-available",zRange:null,maxRequests:6,zoomOffset:0,onTileLoad:()=>{},onTileUnload:()=>{},onTileError:()=>{}};class RW{constructor(e){v(this,"opts",void 0),v(this,"_requestScheduler",void 0),v(this,"_cache",void 0),v(this,"_dirty",void 0),v(this,"_tiles",void 0),v(this,"_cacheByteSize",void 0),v(this,"_viewport",void 0),v(this,"_zRange",void 0),v(this,"_selectedTiles",void 0),v(this,"_frameNumber",void 0),v(this,"_modelMatrix",void 0),v(this,"_modelMatrixInverse",void 0),v(this,"_maxZoom",void 0),v(this,"_minZoom",void 0),v(this,"onTileLoad",void 0),v(this,"_getCullBounds",CW(vW)),this.opts={...BW,...e},this.onTileLoad=n=>{var r,i;(r=(i=this.opts).onTileLoad)===null||r===void 0||r.call(i,n),this.opts.maxCacheByteSize&&(this._cacheByteSize+=n.byteLength,this._resizeCache())},this._requestScheduler=new Z8({maxRequests:e.maxRequests,throttleRequests:!!(e.maxRequests&&e.maxRequests>0)}),this._cache=new Map,this._tiles=[],this._dirty=!1,this._cacheByteSize=0,this._viewport=null,this._selectedTiles=null,this._frameNumber=0,this._modelMatrix=new Ze,this._modelMatrixInverse=new Ze,this.setOptions(e)}get tiles(){return this._tiles}get selectedTiles(){return this._selectedTiles}get isLoaded(){return this._selectedTiles!==null&&this._selectedTiles.every(e=>e.isLoaded)}get needsReload(){return this._selectedTiles!==null&&this._selectedTiles.some(e=>e.needsReload)}setOptions(e){Object.assign(this.opts,e),Number.isFinite(e.maxZoom)&&(this._maxZoom=Math.floor(e.maxZoom)),Number.isFinite(e.minZoom)&&(this._minZoom=Math.ceil(e.minZoom))}finalize(){for(const e of this._cache.values())e.isLoading&&e.abort();this._cache.clear(),this._tiles=[],this._selectedTiles=null}reloadAll(){for(const e of this._cache.keys()){const n=this._cache.get(e);!this._selectedTiles||!this._selectedTiles.includes(n)?this._cache.delete(e):n.setNeedsReload()}}update(e,{zRange:n,modelMatrix:r}={}){const i=new Ze(r),s=!i.equals(this._modelMatrix);if(!this._viewport||!e.equals(this._viewport)||!ci(this._zRange,n)||s){s&&(this._modelMatrixInverse=i.clone().invert(),this._modelMatrix=i),this._viewport=e,this._zRange=n;const a=this.getTileIndices({viewport:e,maxZoom:this._maxZoom,minZoom:this._minZoom,zRange:n,modelMatrix:this._modelMatrix,modelMatrixInverse:this._modelMatrixInverse});this._selectedTiles=a.map(l=>this._getTile(l,!0)),this._dirty&&this._rebuildTree()}else this.needsReload&&(this._selectedTiles=this._selectedTiles.map(a=>this._getTile(a.index,!0)));const o=this.updateTileStates();return this._pruneRequests(),this._dirty&&this._resizeCache(),o&&this._frameNumber++,this._frameNumber}isTileVisible(e,n){if(!e.isVisible)return!1;if(n&&this._viewport){const r=this._getCullBounds({viewport:this._viewport,z:this._zRange,cullRect:n}),{bbox:i}=e;for(const[s,o,a,l]of r){let c;if("west"in i)c=i.west<a&&i.east>s&&i.south<l&&i.north>o;else{const u=Math.min(i.top,i.bottom),f=Math.max(i.top,i.bottom);c=i.left<a&&i.right>s&&u<l&&f>o}if(c)return!0}return!1}return!0}getTileIndices({viewport:e,maxZoom:n,minZoom:r,zRange:i,modelMatrix:s,modelMatrixInverse:o}){const{tileSize:a,extent:l,zoomOffset:c}=this.opts;return xW({viewport:e,maxZoom:n,minZoom:r,zRange:i,tileSize:a,extent:l,modelMatrix:s,modelMatrixInverse:o,zoomOffset:c})}getTileId(e){return"".concat(e.x,"-").concat(e.y,"-").concat(e.z)}getTileZoom(e){return e.z}getTileMetadata(e){const{tileSize:n}=this.opts;return{bbox:EW(this._viewport,e.x,e.y,e.z,n)}}getParentIndex(e){const n=Math.floor(e.x/2),r=Math.floor(e.y/2),i=e.z-1;return{x:n,y:r,z:i}}updateTileStates(){const e=this.opts.refinementStrategy||Ky,n=new Array(this._cache.size);let r=0;for(const i of this._cache.values())n[r++]=i.isVisible,i.isSelected=!1,i.isVisible=!1;for(const i of this._selectedTiles)i.isSelected=!0,i.isVisible=!0;(typeof e=="function"?e:TW[e])(Array.from(this._cache.values())),r=0;for(const i of this._cache.values())if(n[r++]!==i.isVisible)return!0;return!1}_pruneRequests(){const{maxRequests:e=0}=this.opts,n=[];let r=0;for(const i of this._cache.values())i.isLoading&&(r++,!i.isSelected&&!i.isVisible&&n.push(i));for(;e>0&&r>e&&n.length>0;)n.shift().abort(),r--}_rebuildTree(){const{_cache:e}=this;for(const n of e.values())n.parent=null,n.children&&(n.children.length=0);for(const n of e.values()){const r=this._getNearestAncestor(n);n.parent=r,r!=null&&r.children&&r.children.push(n)}}_resizeCache(){const{_cache:e,opts:n}=this,r=n.maxCacheSize||(n.maxCacheByteSize?1/0:bW*this.selectedTiles.length),i=n.maxCacheByteSize||1/0;if(e.size>r||this._cacheByteSize>i){for(const[l,c]of e){if(!c.isVisible&&!c.isSelected){var o,a;this._cacheByteSize-=n.maxCacheByteSize?c.byteLength:0,e.delete(l),(o=(a=this.opts).onTileUnload)===null||o===void 0||o.call(a,c)}if(e.size<=r&&this._cacheByteSize<=i)break}this._rebuildTree(),this._dirty=!0}this._dirty&&(this._tiles=Array.from(this._cache.values()).sort((l,c)=>l.zoom-c.zoom),this._dirty=!1)}_getTile(e,n){const r=this.getTileId(e);let i=this._cache.get(r),s=!1;return!i&&n?(i=new HH(e),Object.assign(i,this.getTileMetadata(i.index)),Object.assign(i,{id:r,zoom:this.getTileZoom(i.index)}),s=!0,this._cache.set(r,i),this._dirty=!0):i&&i.needsReload&&(s=!0),i&&s&&i.loadData({getData:this.opts.getTileData,requestScheduler:this._requestScheduler,onLoad:this.onTileLoad,onError:this.opts.onTileError}),i}_getNearestAncestor(e){const{_minZoom:n=0}=this;let r=e.index;for(;this.getTileZoom(r)>n;){r=this.getParentIndex(r);const i=this._getTile(r);if(i)return i}return null}}function PW(t){for(const e of t)e.state=0;for(const e of t)e.isSelected&&!N3(e)&&qy(e);for(const e of t)e.isVisible=!!(e.state&fg)}function LW(t){for(const n of t)n.state=0;for(const n of t)n.isSelected&&N3(n);const e=Array.from(t).sort((n,r)=>n.zoom-r.zoom);for(const n of e)if(n.isVisible=!!(n.state&fg),n.children&&(n.isVisible||n.state&gI))for(const r of n.children)r.state=gI;else n.isSelected&&qy(n)}function N3(t){let e=t;for(;e;){if(e.isLoaded||e.content)return e.state|=fg,!0;e=e.parent}return!1}function qy(t){for(const e of t.children)e.isLoaded||e.content?e.state|=fg:qy(e)}const MW={TilesetClass:RW,data:{type:"data",value:[]},dataComparator:gW.equal,renderSubLayers:{type:"function",value:t=>new jy(t)},getTileData:{type:"function",optional:!0,value:null},onViewportLoad:{type:"function",optional:!0,value:null},onTileLoad:{type:"function",value:t=>{}},onTileUnload:{type:"function",value:t=>{}},onTileError:{type:"function",value:t=>console.error(t)},extent:{type:"array",optional:!0,value:null,compare:!0},tileSize:512,maxZoom:null,minZoom:0,maxCacheSize:null,maxCacheByteSize:null,refinementStrategy:Ky,zRange:null,maxRequests:6,zoomOffset:0};class Xy extends er{initializeState(){this.state={tileset:null,isLoaded:!1}}finalizeState(){var e,n;(e=this.state)===null||e===void 0||(n=e.tileset)===null||n===void 0||n.finalize()}get isLoaded(){var e,n,r;return(e=this.state)===null||e===void 0||(n=e.tileset)===null||n===void 0||(r=n.selectedTiles)===null||r===void 0?void 0:r.every(i=>i.isLoaded&&i.layers&&i.layers.every(s=>s.isLoaded))}shouldUpdateState({changeFlags:e}){return e.somethingChanged}updateState({changeFlags:e}){let{tileset:n}=this.state;const r=e.propsOrDataChanged||e.updateTriggersChanged,i=e.dataChanged||e.updateTriggersChanged&&(e.updateTriggersChanged.all||e.updateTriggersChanged.getTileData);n?r&&(n.setOptions(this._getTilesetOptions()),i?n.reloadAll():this.state.tileset.tiles.forEach(s=>{s.layers=null})):(n=new this.props.TilesetClass(this._getTilesetOptions()),this.setState({tileset:n})),this._updateTileset()}_getTilesetOptions(){const{tileSize:e,maxCacheSize:n,maxCacheByteSize:r,refinementStrategy:i,extent:s,maxZoom:o,minZoom:a,maxRequests:l,zoomOffset:c}=this.props;return{maxCacheSize:n,maxCacheByteSize:r,maxZoom:o,minZoom:a,tileSize:e,refinementStrategy:i,extent:s,maxRequests:l,zoomOffset:c,getTileData:this.getTileData.bind(this),onTileLoad:this._onTileLoad.bind(this),onTileError:this._onTileError.bind(this),onTileUnload:this._onTileUnload.bind(this)}}_updateTileset(){const{tileset:e}=this.state,{zRange:n,modelMatrix:r}=this.props,i=e.update(this.context.viewport,{zRange:n,modelMatrix:r}),{isLoaded:s}=e,o=this.state.isLoaded!==s,a=this.state.frameNumber!==i;s&&(o||a)&&this._onViewportLoad(),a&&this.setState({frameNumber:i}),this.state.isLoaded=s}_onViewportLoad(){const{tileset:e}=this.state,{onViewportLoad:n}=this.props;n&&n(e.selectedTiles)}_onTileLoad(e){this.props.onTileLoad(e),e.layers=null,this.setNeedsUpdate()}_onTileError(e,n){this.props.onTileError(e),n.layers=null,this.setNeedsUpdate()}_onTileUnload(e){this.props.onTileUnload(e)}getTileData(e){const{data:n,getTileData:r,fetch:i}=this.props,{signal:s}=e;return e.url=typeof n=="string"||Array.isArray(n)?pW(n,e):null,r?r(e):i&&e.url?i(e.url,{propName:"data",layer:this,signal:s}):null}renderSubLayers(e){return this.props.renderSubLayers(e)}getSubLayerPropsByTile(e){return null}getPickingInfo({info:e,sourceLayer:n}){const r=n.props.tile;return e.picked&&(e.tile=r),e.sourceTile=r,e}_updateAutoHighlight(e){const n=e.sourceTile;if(n&&n.layers)for(const r of n.layers)r.updateAutoHighlight(e)}renderLayers(){return this.state.tileset.tiles.map(e=>{const n=this.getSubLayerPropsByTile(e);if(!(!e.isLoaded&&!e.content))if(e.layers)n&&e.layers[0]&&Object.keys(n).some(r=>e.layers[0].props[r]!==n[r])&&(e.layers=e.layers.map(r=>r.clone(n)));else{const r=this.renderSubLayers({...this.props,...this.getSubLayerProps({id:e.id,updateTriggers:this.props.updateTriggers}),data:e.content,_offset:0,tile:e});e.layers=rg(r,Boolean).map(i=>i.clone({tile:e,...n}))}return e.layers})}filterSubLayer({layer:e,cullRect:n}){const{tile:r}=e.props;return this.state.tileset.isTileVisible(r,n)}}v(Xy,"defaultProps",MW);v(Xy,"layerName","TileLayer");const QX={Version:0,AddCompression:1},FX={None:0,Deflate:1,Zstandard:2},NW=new Map;function Ri(t,e){Array.isArray(t)||(t=[t]),t.forEach(n=>NW.set(n,e))}Ri([void 0,1],()=>fn(()=>import("./raw-962b27b4.js"),[],import.meta.url).then(t=>t.default));Ri(5,()=>fn(()=>import("./lzw-e5a95118.js"),[],import.meta.url).then(t=>t.default));Ri(6,()=>{throw new Error("old style JPEG compression is not supported.")});Ri(7,()=>fn(()=>import("./jpeg-5d49cd37.js"),[],import.meta.url).then(t=>t.default));Ri([8,32946],()=>fn(()=>import("./deflate-295166c3.js"),["./deflate-295166c3.js","./pako.esm-83c587a0.js"],import.meta.url).then(t=>t.default));Ri(32773,()=>fn(()=>import("./packbits-b8c422ae.js"),[],import.meta.url).then(t=>t.default));Ri(34887,()=>fn(()=>import("./lerc-627d3f98.js"),["./lerc-627d3f98.js","./pako.esm-83c587a0.js"],import.meta.url).then(async t=>(await t.zstd.init(),t)).then(t=>t.default));Ri(50001,()=>fn(()=>import("./webimage-db774ca6.js"),[],import.meta.url).then(t=>t.default));class OW extends Map{constructor(e={}){if(super(),!(e.maxSize&&e.maxSize>0))throw new TypeError("`maxSize` must be a number greater than 0");if(typeof e.maxAge=="number"&&e.maxAge===0)throw new TypeError("`maxAge` must be a number greater than 0");this.maxSize=e.maxSize,this.maxAge=e.maxAge||Number.POSITIVE_INFINITY,this.onEviction=e.onEviction,this.cache=new Map,this.oldCache=new Map,this._size=0}_emitEvictions(e){if(typeof this.onEviction=="function")for(const[n,r]of e)this.onEviction(n,r.value)}_deleteIfExpired(e,n){return typeof n.expiry=="number"&&n.expiry<=Date.now()?(typeof this.onEviction=="function"&&this.onEviction(e,n.value),this.delete(e)):!1}_getOrDeleteIfExpired(e,n){if(this._deleteIfExpired(e,n)===!1)return n.value}_getItemValue(e,n){return n.expiry?this._getOrDeleteIfExpired(e,n):n.value}_peek(e,n){const r=n.get(e);return this._getItemValue(e,r)}_set(e,n){this.cache.set(e,n),this._size++,this._size>=this.maxSize&&(this._size=0,this._emitEvictions(this.oldCache),this.oldCache=this.cache,this.cache=new Map)}_moveToRecent(e,n){this.oldCache.delete(e),this._set(e,n)}*_entriesAscending(){for(const e of this.oldCache){const[n,r]=e;this.cache.has(n)||this._deleteIfExpired(n,r)===!1&&(yield e)}for(const e of this.cache){const[n,r]=e;this._deleteIfExpired(n,r)===!1&&(yield e)}}get(e){if(this.cache.has(e)){const n=this.cache.get(e);return this._getItemValue(e,n)}if(this.oldCache.has(e)){const n=this.oldCache.get(e);if(this._deleteIfExpired(e,n)===!1)return this._moveToRecent(e,n),n.value}}set(e,n,{maxAge:r=this.maxAge}={}){const i=typeof r=="number"&&r!==Number.POSITIVE_INFINITY?Date.now()+r:void 0;this.cache.has(e)?this.cache.set(e,{value:n,expiry:i}):this._set(e,{value:n,expiry:i})}has(e){return this.cache.has(e)?!this._deleteIfExpired(e,this.cache.get(e)):this.oldCache.has(e)?!this._deleteIfExpired(e,this.oldCache.get(e)):!1}peek(e){if(this.cache.has(e))return this._peek(e,this.cache);if(this.oldCache.has(e))return this._peek(e,this.oldCache)}delete(e){const n=this.cache.delete(e);return n&&this._size--,this.oldCache.delete(e)||n}clear(){this.cache.clear(),this.oldCache.clear(),this._size=0}resize(e){if(!(e&&e>0))throw new TypeError("`maxSize` must be a number greater than 0");const n=[...this._entriesAscending()],r=n.length-e;r<0?(this.cache=new Map(n),this.oldCache=new Map,this._size=n.length):(r>0&&this._emitEvictions(n.slice(0,r)),this.oldCache=new Map(n.slice(r)),this.cache=new Map,this._size=0),this.maxSize=e}*keys(){for(const[e]of this)yield e}*values(){for(const[,e]of this)yield e}*[Symbol.iterator](){for(const e of this.cache){const[n,r]=e;this._deleteIfExpired(n,r)===!1&&(yield[n,r.value])}for(const e of this.oldCache){const[n,r]=e;this.cache.has(n)||this._deleteIfExpired(n,r)===!1&&(yield[n,r.value])}}*entriesDescending(){let e=[...this.cache];for(let n=e.length-1;n>=0;--n){const r=e[n],[i,s]=r;this._deleteIfExpired(i,s)===!1&&(yield[i,s.value])}e=[...this.oldCache];for(let n=e.length-1;n>=0;--n){const r=e[n],[i,s]=r;this.cache.has(i)||this._deleteIfExpired(i,s)===!1&&(yield[i,s.value])}}*entriesAscending(){for(const[e,n]of this._entriesAscending())yield[e,n.value]}get size(){if(!this._size)return this.oldCache.size;let e=0;for(const n of this.oldCache.keys())this.cache.has(n)||e++;return Math.min(this._size+e,this.maxSize)}entries(){return this.entriesAscending()}forEach(e,n=this){for(const[r,i]of this.entriesAscending())e.call(n,i,r,this)}get[Symbol.toStringTag](){return JSON.stringify([...this.entriesAscending()])}}function DW(t,e){let n=t.length-e,r=0;do{for(let i=e;i>0;i--)t[r+e]+=t[r],r++;n-=e}while(n>0)}function kW(t,e,n){let r=0,i=t.length;const s=i/n;for(;i>e;){for(let a=e;a>0;--a)t[r+e]+=t[r],++r;i-=e}const o=t.slice();for(let a=0;a<s;++a)for(let l=0;l<n;++l)t[n*a+l]=o[(n-l-1)*s+a]}function QW(t,e,n,r,i,s){if(!e||e===1)return t;for(let l=0;l<i.length;++l){if(i[l]%8!==0)throw new Error("When decoding with predictor, only multiple of 8 bits are supported.");if(i[l]!==i[0])throw new Error("When decoding with predictor, all samples must have the same size.")}const o=i[0]/8,a=s===2?1:i.length;for(let l=0;l<r&&!(l*a*n*o>=t.byteLength);++l){let c;if(e===2){switch(i[0]){case 8:c=new Uint8Array(t,l*a*n*o,a*n*o);break;case 16:c=new Uint16Array(t,l*a*n*o,a*n*o/2);break;case 32:c=new Uint32Array(t,l*a*n*o,a*n*o/4);break;default:throw new Error(`Predictor 2 not allowed with ${i[0]} bits per sample.`)}DW(c,a)}else e===3&&(c=new Uint8Array(t,l*a*n*o,a*n*o),kW(c,a,o))}return t}class FW{async decode(e,n){const r=await this.decodeBlock(n),i=e.Predictor||1;if(i!==1){const s=!e.StripOffsets,o=s?e.TileWidth:e.ImageWidth,a=s?e.TileLength:e.RowsPerStrip||e.ImageLength;return QW(r,i,o,a,e.BitsPerSample,e.PlanarConfiguration)}return r}}let fr,wf=null;function AI(){return wf!==null&&wf.buffer===fr.memory.buffer||(wf=new Uint8Array(fr.memory.buffer)),wf}let pI=0,Sf=null;function mI(){return Sf!==null&&Sf.buffer===fr.memory.buffer||(Sf=new Int32Array(fr.memory.buffer)),Sf}async function Zy(t){t===void 0&&(t="".replace(/\.js$/,"_bg.wasm")),(typeof t=="string"||typeof Request=="function"&&t instanceof Request||typeof URL=="function"&&t instanceof URL)&&(t=fetch(t));const{instance:e,module:n}=await async function(r,i){if(typeof Response=="function"&&r instanceof Response){if(typeof WebAssembly.instantiateStreaming=="function")try{return await WebAssembly.instantiateStreaming(r,i)}catch(o){if(r.headers.get("Content-Type")=="application/wasm")throw o;console.warn("`WebAssembly.instantiateStreaming` failed because your server does not serve wasm with `application/wasm` MIME type. Falling back to `WebAssembly.instantiate` which is slower. Original error:\n",o)}const s=await r.arrayBuffer();return await WebAssembly.instantiate(s,i)}{const s=await WebAssembly.instantiate(r,i);return s instanceof WebAssembly.Instance?{instance:s,module:r}:s}}(await t,{});return fr=e.exports,Zy.__wbindgen_wasm_module=n,fr}var UW=Object.freeze({__proto__:null,decompress:function(t,e){try{const c=fr.__wbindgen_add_to_stack_pointer(-16);var n=function(u,f){const d=f(1*u.length);return AI().set(u,d/1),pI=u.length,d}(t,fr.__wbindgen_malloc),r=pI;fr.decompress(c,n,r,e);var i=mI()[c/4+0],s=mI()[c/4+1],o=(a=i,l=s,AI().subarray(a/1,a/1+l)).slice();return fr.__wbindgen_free(i,1*s),o}finally{fr.__wbindgen_add_to_stack_pointer(16)}var a,l},default:Zy});const GW=[62,0,0,0,63,52,53,54,55,56,57,58,59,60,61,0,0,0,0,0,0,0,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,0,0,0,0,0,0,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51];function bf(t){return GW[t-43]}const zW=function(t){let e,n=t.endsWith("==")?2:t.endsWith("=")?1:0,r=t.length,i=new Uint8Array(r/4*3);for(let s=0,o=0;s<r;s+=4,o+=3)e=bf(t.charCodeAt(s))<<18|bf(t.charCodeAt(s+1))<<12|bf(t.charCodeAt(s+2))<<6|bf(t.charCodeAt(s+3)),i[o]=e>>16,i[o+1]=e>>8&255,i[o+2]=255&e;return i.subarray(0,i.length-n)}("AGFzbQEAAAABWQ5gAn9/AX9gA39/fwF/YAJ/fwBgAX8AYAN/f38AYAF/AX9gBH9/f38AYAR/f39/AX9gBn9/f39/fwBgAX8BfmAAAGAFf39/f38AYAV/f39/fwF/YAJ+fwF/A21sBQgICwMBAgUMAQABAAIABQACAgYGDQYDAgACAAAEBAQCAgYGAAYBBgIHAwQDBAQDAwADBQMDBAQEBAQCAgAHAAQAAgMBAgcFBAIDAQUCAgIDAgIDAwcCAQAABAIACgAAAQAFAgADBQkJCQMCBAUBcAErKwUDAQARBgkBfwFBgIDAAAsHXwUGbWVtb3J5AgAKZGVjb21wcmVzcwAnH19fd2JpbmRnZW5fYWRkX3RvX3N0YWNrX3BvaW50ZXIAYhFfX3diaW5kZ2VuX21hbGxvYwBMD19fd2JpbmRnZW5fZnJlZQBWCTABAEEBCypqJDUCZmVDNQFmZUNha2pXDD1pVBohSVtTaGdfXDEOXlhqaQscQWAbP2QKsugBbNMqAgh/AX4CQAJAAkACQCAAQfUBTwRAIABBzf97Tw0CIABBC2oiAEF4cSEGQZCnwAAoAgAiCEUNAUEAIAZrIQQCQAJAAn9BACAAQQh2IgBFDQAaQR8gBkH///8HSw0AGiAGQQYgAGciAGtBH3F2QQFxIABBAXRrQT5qCyIHQQJ0QZypwABqKAIAIgAEQCAGQQBBGSAHQQF2a0EfcSAHQR9GG3QhAgNAAkAgAEEEaigCAEF4cSIFIAZJDQAgBSAGayIFIARPDQAgACEDIAUiBA0AQQAhBAwDCyAAQRRqKAIAIgUgASAFIAAgAkEddkEEcWpBEGooAgAiAEcbIAEgBRshASACQQF0IQIgAA0ACyABBEAgASEADAILIAMNAgtBACEDQQIgB0EfcXQiAEEAIABrciAIcSIARQ0DIABBACAAa3FoQQJ0QZypwABqKAIAIgBFDQMLA0AgACADIABBBGooAgBBeHEiAiAGTyACIAZrIgIgBElxIgEbIQMgAiAEIAEbIQQgACgCECICBH8gAgUgAEEUaigCAAsiAA0ACyADRQ0CC0GcqsAAKAIAIgAgBk9BACAEIAAgBmtPGw0BIAMoAhghBwJAAkAgAyADKAIMIgFGBEAgA0EUQRAgA0EUaiICKAIAIgEbaigCACIADQFBACEBDAILIAMoAggiACABNgIMIAEgADYCCAwBCyACIANBEGogARshAgNAIAIhBSAAIgFBFGoiAigCACIARQRAIAFBEGohAiABKAIQIQALIAANAAsgBUEANgIACwJAIAdFDQACQCADIAMoAhxBAnRBnKnAAGoiACgCAEcEQCAHQRBBFCAHKAIQIANGG2ogATYCACABRQ0CDAELIAAgATYCACABDQBBkKfAAEGQp8AAKAIAQX4gAygCHHdxNgIADAELIAEgBzYCGCADKAIQIgAEQCABIAA2AhAgACABNgIYCyADQRRqKAIAIgBFDQAgAUEUaiAANgIAIAAgATYCGAsCQCAEQRBPBEAgAyAGQQNyNgIEIAMgBmoiBSAEQQFyNgIEIAQgBWogBDYCACAEQYACTwRAIAVCADcCECAFAn9BACAEQQh2IgBFDQAaQR8gBEH///8HSw0AGiAEQQYgAGciAGtBH3F2QQFxIABBAXRrQT5qCyIANgIcIABBAnRBnKnAAGohAgJAAkACQAJAQZCnwAAoAgAiAUEBIABBH3F0IgZxBEAgAigCACICQQRqKAIAQXhxIARHDQEgAiEADAILQZCnwAAgASAGcjYCACACIAU2AgAMAwsgBEEAQRkgAEEBdmtBH3EgAEEfRht0IQEDQCACIAFBHXZBBHFqQRBqIgYoAgAiAEUNAiABQQF0IQEgACECIABBBGooAgBBeHEgBEcNAAsLIAAoAggiAiAFNgIMIAAgBTYCCCAFQQA2AhggBSAANgIMIAUgAjYCCAwECyAGIAU2AgALIAUgAjYCGCAFIAU2AgwgBSAFNgIIDAILIARBA3YiAkEDdEGUp8AAaiEAAn9BjKfAACgCACIBQQEgAnQiAnEEQCAAKAIIDAELQYynwAAgASACcjYCACAACyECIAAgBTYCCCACIAU2AgwgBSAANgIMIAUgAjYCCAwBCyADIAQgBmoiAEEDcjYCBCAAIANqIgAgACgCBEEBcjYCBAsgA0EIag8LAkACQEGMp8AAKAIAIgFBECAAQQtqQXhxIABBC0kbIgZBA3YiAHYiAkEDcUUEQCAGQZyqwAAoAgBNDQMgAg0BQZCnwAAoAgAiAEUNAyAAQQAgAGtxaEECdEGcqcAAaigCACIBQQRqKAIAQXhxIAZrIQQgASECA0AgASgCECIARQRAIAFBFGooAgAiAEUNBAsgAEEEaigCAEF4cSAGayIBIAQgASAESSIBGyEEIAAgAiABGyECIAAhAQwACwALAkAgAkF/c0EBcSAAaiIAQQN0QYynwABqIgNBEGooAgAiAkEIaiIFKAIAIgQgA0EIaiIDRwRAIAQgAzYCDCADIAQ2AggMAQtBjKfAACABQX4gAHdxNgIACyACIABBA3QiAEEDcjYCBCAAIAJqIgAgACgCBEEBcjYCBCAFDwsCQEECIAB0IgRBACAEa3IgAiAAdHEiAEEAIABrcWgiAkEDdEGMp8AAaiIDQRBqKAIAIgBBCGoiBSgCACIEIANBCGoiA0cEQCAEIAM2AgwgAyAENgIIDAELQYynwAAgAUF+IAJ3cTYCAAsgACAGQQNyNgIEIAAgBmoiAyACQQN0IgIgBmsiAUEBcjYCBCAAIAJqIAE2AgBBnKrAACgCACIABEAgAEEDdiIEQQN0QZSnwABqIQBBpKrAACgCACECAn9BjKfAACgCACIGQQEgBEEfcXQiBHEEQCAAKAIIDAELQYynwAAgBCAGcjYCACAACyEEIAAgAjYCCCAEIAI2AgwgAiAANgIMIAIgBDYCCAtBpKrAACADNgIAQZyqwAAgATYCACAFDwsgAigCGCEHAkACQCACIAIoAgwiAUYEQCACQRRBECACQRRqIgEoAgAiAxtqKAIAIgANAUEAIQEMAgsgAigCCCIAIAE2AgwgASAANgIIDAELIAEgAkEQaiADGyEDA0AgAyEFIAAiAUEUaiIDKAIAIgBFBEAgAUEQaiEDIAEoAhAhAAsgAA0ACyAFQQA2AgALIAdFDQMgAiACKAIcQQJ0QZypwABqIgAoAgBHBEAgB0EQQRQgBygCECACRhtqIAE2AgAgAUUNBAwDCyAAIAE2AgAgAQ0CQZCnwABBkKfAACgCAEF+IAIoAhx3cTYCAAwDCwJAAkACQAJAAkBBnKrAACgCACIAIAZJBEBBoKrAACgCACIAIAZLDQNBACECIAZBr4AEaiIAQRB2QAAiAUF/Rg0GIAFBEHQiBUUNBkGsqsAAIABBgIB8cSIEQayqwAAoAgBqIgA2AgBBsKrAAEGwqsAAKAIAIgEgACABIABLGzYCAEGoqsAAKAIAIgNFDQFBtKrAACEAA0AgACgCACIBIAAoAgQiB2ogBUYNAyAAKAIIIgANAAsMBAtBpKrAACgCACECAn8gACAGayIBQQ9NBEBBpKrAAEEANgIAQZyqwABBADYCACACIABBA3I2AgQgACACaiIBQQRqIQAgASgCBEEBcgwBC0GcqsAAIAE2AgBBpKrAACACIAZqIgQ2AgAgBCABQQFyNgIEIAAgAmogATYCACACQQRqIQAgBkEDcgshASAAIAE2AgAgAkEIag8LQciqwAAoAgAiAEEAIAAgBU0bRQRAQciqwAAgBTYCAAtBzKrAAEH/HzYCAEG0qsAAIAU2AgBBwKrAAEEANgIAQbiqwAAgBDYCAEGgp8AAQZSnwAA2AgBBqKfAAEGcp8AANgIAQZynwABBlKfAADYCAEGwp8AAQaSnwAA2AgBBpKfAAEGcp8AANgIAQbinwABBrKfAADYCAEGsp8AAQaSnwAA2AgBBwKfAAEG0p8AANgIAQbSnwABBrKfAADYCAEHIp8AAQbynwAA2AgBBvKfAAEG0p8AANgIAQdCnwABBxKfAADYCAEHEp8AAQbynwAA2AgBB2KfAAEHMp8AANgIAQcynwABBxKfAADYCAEHgp8AAQdSnwAA2AgBB1KfAAEHMp8AANgIAQdynwABB1KfAADYCAEHop8AAQdynwAA2AgBB5KfAAEHcp8AANgIAQfCnwABB5KfAADYCAEHsp8AAQeSnwAA2AgBB+KfAAEHsp8AANgIAQfSnwABB7KfAADYCAEGAqMAAQfSnwAA2AgBB/KfAAEH0p8AANgIAQYiowABB/KfAADYCAEGEqMAAQfynwAA2AgBBkKjAAEGEqMAANgIAQYyowABBhKjAADYCAEGYqMAAQYyowAA2AgBBlKjAAEGMqMAANgIAQaCowABBlKjAADYCAEGoqMAAQZyowAA2AgBBnKjAAEGUqMAANgIAQbCowABBpKjAADYCAEGkqMAAQZyowAA2AgBBuKjAAEGsqMAANgIAQayowABBpKjAADYCAEHAqMAAQbSowAA2AgBBtKjAAEGsqMAANgIAQciowABBvKjAADYCAEG8qMAAQbSowAA2AgBB0KjAAEHEqMAANgIAQcSowABBvKjAADYCAEHYqMAAQcyowAA2AgBBzKjAAEHEqMAANgIAQeCowABB1KjAADYCAEHUqMAAQcyowAA2AgBB6KjAAEHcqMAANgIAQdyowABB1KjAADYCAEHwqMAAQeSowAA2AgBB5KjAAEHcqMAANgIAQfiowABB7KjAADYCAEHsqMAAQeSowAA2AgBBgKnAAEH0qMAANgIAQfSowABB7KjAADYCAEGIqcAAQfyowAA2AgBB/KjAAEH0qMAANgIAQZCpwABBhKnAADYCAEGEqcAAQfyowAA2AgBBmKnAAEGMqcAANgIAQYypwABBhKnAADYCAEGoqsAAIAU2AgBBlKnAAEGMqcAANgIAQaCqwAAgBEFYaiIANgIAIAUgAEEBcjYCBCAAIAVqQSg2AgRBxKrAAEGAgIABNgIADAMLIABBDGooAgAgBSADTXIgASADS3INASAAIAQgB2o2AgRBqKrAAEGoqsAAKAIAIgBBD2pBeHEiAUF4ajYCAEGgqsAAQaCqwAAoAgAgBGoiBCAAIAFrakEIaiIDNgIAIAFBfGogA0EBcjYCACAAIARqQSg2AgRBxKrAAEGAgIABNgIADAILQaCqwAAgACAGayICNgIAQaiqwABBqKrAACgCACIAIAZqIgE2AgAgASACQQFyNgIEIAAgBkEDcjYCBCAAQQhqIQIMAgtByKrAAEHIqsAAKAIAIgAgBSAAIAVJGzYCACAEIAVqIQFBtKrAACEAAkADQCABIAAoAgBHBEAgACgCCCIADQEMAgsLIABBDGooAgANACAAIAU2AgAgACAAKAIEIARqNgIEIAUgBkEDcjYCBCAFIAZqIQAgASAFayAGayEGAkACQCABQaiqwAAoAgBHBEBBpKrAACgCACABRg0BIAFBBGooAgAiAkEDcUEBRgRAIAEgAkF4cSICEBEgAiAGaiEGIAEgAmohAQsgASABKAIEQX5xNgIEIAAgBkEBcjYCBCAAIAZqIAY2AgAgBkGAAk8EQCAAQgA3AhAgAAJ/QQAgBkEIdiICRQ0AGkEfIAZB////B0sNABogBkEGIAJnIgJrQR9xdkEBcSACQQF0a0E+agsiATYCHCABQQJ0QZypwABqIQICQAJAAkACQEGQp8AAKAIAIgRBASABQR9xdCIDcQRAIAIoAgAiAkEEaigCAEF4cSAGRw0BIAIhBAwCC0GQp8AAIAMgBHI2AgAgAiAANgIADAMLIAZBAEEZIAFBAXZrQR9xIAFBH0YbdCEBA0AgAiABQR12QQRxakEQaiIDKAIAIgRFDQIgAUEBdCEBIAQiAkEEaigCAEF4cSAGRw0ACwsgBCgCCCICIAA2AgwgBCAANgIIIABBADYCGCAAIAQ2AgwgACACNgIIDAULIAMgADYCAAsgACACNgIYIAAgADYCDCAAIAA2AggMAwsgBkEDdiIBQQN0QZSnwABqIQICf0GMp8AAKAIAIgRBASABdCIBcQRAIAIoAggMAQtBjKfAACABIARyNgIAIAILIQEgAiAANgIIIAEgADYCDCAAIAI2AgwgACABNgIIDAILQaiqwAAgADYCAEGgqsAAQaCqwAAoAgAgBmoiAjYCACAAIAJBAXI2AgQMAQtBpKrAACAANgIAQZyqwABBnKrAACgCACAGaiICNgIAIAAgAkEBcjYCBCAAIAJqIAI2AgALIAVBCGoPC0G0qsAAIQADQAJAIAAoAgAiASADTQRAIAEgACgCBGoiByADSw0BCyAAKAIIIQAMAQsLQaiqwAAgBTYCAEGgqsAAIARBWGoiADYCACAFIABBAXI2AgQgACAFakEoNgIEQcSqwABBgICAATYCACADIAdBYGpBeHFBeGoiACAAIANBEGpJGyIBQRs2AgRBtKrAACkCACEJIAFBEGpBvKrAACkCADcCACABIAk3AghBwKrAAEEANgIAQbiqwAAgBDYCAEG0qsAAIAU2AgBBvKrAACABQQhqNgIAIAFBHGohAANAIABBBzYCACAHIABBBGoiAEsNAAsgASADRg0AIAEgASgCBEF+cTYCBCADIAEgA2siBUEBcjYCBCABIAU2AgAgBUGAAk8EQCADQgA3AhAgA0EcagJ/QQAgBUEIdiIARQ0AGkEfIAVB////B0sNABogBUEGIABnIgBrQR9xdkEBcSAAQQF0a0E+agsiADYCACAAQQJ0QZypwABqIQECQAJAAkACQEGQp8AAKAIAIgRBASAAQR9xdCIHcQRAIAEoAgAiBEEEaigCAEF4cSAFRw0BIAQhAAwCC0GQp8AAIAQgB3I2AgAgASADNgIAIANBGGogATYCAAwDCyAFQQBBGSAAQQF2a0EfcSAAQR9GG3QhAQNAIAQgAUEddkEEcWpBEGoiBygCACIARQ0CIAFBAXQhASAAIQQgAEEEaigCAEF4cSAFRw0ACwsgACgCCCIBIAM2AgwgACADNgIIIANBGGpBADYCACADIAA2AgwgAyABNgIIDAMLIAcgAzYCACADQRhqIAQ2AgALIAMgAzYCDCADIAM2AggMAQsgBUEDdiIBQQN0QZSnwABqIQACf0GMp8AAKAIAIgRBASABdCIBcQRAIAAoAggMAQtBjKfAACABIARyNgIAIAALIQEgACADNgIIIAEgAzYCDCADIAA2AgwgAyABNgIIC0GgqsAAKAIAIgAgBk0NAEGgqsAAIAAgBmsiAjYCAEGoqsAAQaiqwAAoAgAiACAGaiIBNgIAIAEgAkEBcjYCBCAAIAZBA3I2AgQgAEEIag8LIAIPCyABIAc2AhggAigCECIABEAgASAANgIQIAAgATYCGAsgAkEUaigCACIARQ0AIAFBFGogADYCACAAIAE2AhgLAkAgBEEQTwRAIAIgBkEDcjYCBCACIAZqIgMgBEEBcjYCBCADIARqIAQ2AgBBnKrAACgCACIABEAgAEEDdiIFQQN0QZSnwABqIQBBpKrAACgCACEBAn9BjKfAACgCACIGQQEgBUEfcXQiBXEEQCAAKAIIDAELQYynwAAgBSAGcjYCACAACyEFIAAgATYCCCAFIAE2AgwgASAANgIMIAEgBTYCCAtBpKrAACADNgIAQZyqwAAgBDYCAAwBCyACIAQgBmoiAEEDcjYCBCAAIAJqIgAgACgCBEEBcjYCBAsgAkEIagvhEAISfwJ+IwBBgAFrIgYkACAGIAM2AiwgBiACNgIoAkACfwJAAkACQAJAIAEtAEdFBEAgASkDOCEYIAFCADcDOAJ/IBhC//8Dg1BFBEAgGEIwiKchESAYQhCIpyEMIBhCIIinDAELIAZBIGogASAGQShqECsgBi8BIEUEQEEBIQ0MBgtBAyENIAYvASIiDCICIAEvAUBPDQUgAiABLwFCRg0CIAEvAUQgDEH//wNxRg0DIAFBGGooAgBFDQUgAUEoaiABQRBqIgcgDBAmGiABKAIYIgIgDEH//wNxIgpNDQQgBygCACAKQQJ0aiICLQACIREgAi8BAAshEyAGQRhqIAFBKGoQQiAGKAIYIQICQCAGKAIcIgcgBU0EQCAHDQFBASESQQEhDSAFIQdBAQwHCyAFRQRAQQEhDUEAIQdBAQwHCyAEIAIgBRBLGiABQTBqIgIgAigCACAFajYCAEGIg8AAIQRBACENQQAhB0EBDAYLIAQgAiAHEEsgAUEwaiICIAIoAgAgB2o2AgAgB2ohBCAFIAdrIQdBACENQQEMBQsgAEECOgAIIABCADcCAAwFCyABIAEtAEYiB0EBaiICOgAKIAFBASAHQQ9xdEECajsBQCABQX8gAkEPcXRBf3M7AQggAUEQaiAHEA1BACEMQQAhDSAFIQdBAAwDCyABQQE6AEdBAiENDAELIAogAkHohsAAEDYAC0EAIQwgBSEHQQALIQIgBkE4akEANgIAIAZCADcDMCAGQcgAakEANgIAIAZCADcDQCAGQfwAakEANgIAIAZB9ABqQQA2AgAgBkHsAGpBADYCACAGQeQAakEANgIAIAZB3ABqQQA2AgAgBkHYicAANgJ4IAZB2InAADYCcCAGQdiJwAA2AmggBkHYicAANgJgIAZB2InAADYCWCAGQQA2AlQgBkHYicAANgJQAkACfwJAIAJFDQAgAUEQaiEUIAFBKGohFSAGQcgAaiEXIAZBPmohFgJAAkACQAJAAkACQAJAAkADQAJAAkAgBw0AIAZBEGogFRBCIAYoAhRFDQBBACEHDAELIAEgBkEoahAYQQAhCyAXIRBBACEOAkACQAJAAkACQAJAAkACQAJAA0AgAS0ACyICIAEtAAoiCEkNASABIAIgCGs6AAsgBkEwaiALaiIKIAEvAQgiAiABKQMAIAitiSIYp3E7AQAgASAYIAKtQn+FQoCAfISDNwMAIA4EQCAOQX9qQQVLDQUgByALIBZqLwEAIgJJDQYgECAENgIAIBBBBGogAjYCACAHIAJrIQcgAiAEaiEECyABLwFAIgIgDmpB//8DcSABLwEIIAEtAEhrQf//A3FGDQIgCi8BACIKIAEvAUJGIAogAk9yDQIgCiABLwFERg0CIAEoAiQiAiAKTQ0GIAcgASgCHCAKQQF0ai8BACICSQ0CIA5BAWohDiALIBZqQQJqIAI7AQAgEEEIaiEQIAtBAmoiC0EMRw0AC0EGIQ5BBSEQIAYvATohCAwHCyAODQFBASANIBIbIQ0MCAsgDkEBaiEOCyAOQQdPDQMgBkEwaiAOQX9qIhBBAXRqLwEAIQggEA0EIAwhCgwFCyAOQX9qQQZBmITAABA2AAtB6IHAAEEjQfiCwAAQSAALIAogAkGohMAAEDYACyAOQQZBuITAABA3AAsgBkHQAGohAiAGQTBqIQsDQCAGQQhqIBQgFCALLwEAIgogAigCACACQQRqKAIAECkgDBAjIAYtAAohESAGLwEIIRMgASABLwFAQQFqOwFAIAtBAmohCyACQQhqIQIgCiEMIBBBf2oiEA0ACyAOQQN0IAZqQUBrIgIoAgQhCSACQQA2AgQgAigCACEPIAJBiIPAADYCAAsgCCIMIAEvAUJGDQMCQCABLwFEIAhHBEAgCCABLwFAIgJNDQFBAyENQQAMDQsgAUEBOgBHQQIhDUEADAwLAn8gBwJ/AkACQCACIAhHBEAgASgCJCICIAhLDQEgCCACQdiEwAAQNgALIAEoAiQiAiAKQf//A3EiCE0NCCAHIAEoAhwgCEEBdGovAQBBAWpB//8DcSICTw0BIA8EQCABKAIsIgIgCUkNCiABKAIoIA8gCRBLGiABIAk2AjAgASAJNgI0C0EAIQ8gFRAzIQtBAQwDCyAHIAEoAhwgCEEBdGovAQAiAkkEQEEAIQ8gFSAUIAwQJiELQQEMAwsgFCAMIAQgAhApIQsgAgwBCyAPRQRAIAEoAiwiCCABKAI0IglJDQkgFSgCACEPCyAJRQ0EIAkgAksNCSAPLQAAIQsgBCAPIAkQSyACIAlGDQogCWogCzoAACACCyIJayEHIAkgBCIPaiEEQQALIAEoAhhB/x9NBEAgBiAUIAsgChAjIAEvAUAhECAGLQACIREgBi8BACETAkAgAS0ACiIIQQtLDQAgECABLwEIIgogAS0ASGtB//8DcUcNACABIAhBAWo6AAogASAKQQF0QQFyOwEICyABIBBBAWo7AUALQQAhEkUNAQsLQgEhGSAPRQ0KIAEoAiwiAiAJSQ0HIAEoAiggDyAJEEsaIAEgCTYCMCABIAk2AjQMCgtBAEEAQYiFwAAQNgALIAEQNAwGCyAIIAJByITAABA2AAsgCSACQeiEwAAQNwALIAkgCEH4hMAAEDcACyAJIAJBmIXAABA3AAtBAEEAQaiFwAAQNgALIAkgAkG4hcAAEDcAC0EACyEMQQAhE0EAIRELIAAgBSAHazYCBCAAIAMgBigCLCICazYCACAAQQAgDSADIAJLGyANIA1BAUYbOgAIIAEgDK1C//8Dg0IQhiAZhCATrUL//wODQiCGhCARrUL/AYNCMIaENwM4CyAGQYABaiQAC9YQAhF/An4jAEGAAWsiBiQAIAYgAzYCLCAGIAI2AigCQAJ/AkACQAJAAkAgAS0AR0UEQCABKQM4IRcgAUIANwM4An8gF0L//wODUEUEQCAXQjCIpyERIBdCEIinIQwgF0IgiKcMAQsgBkEgaiABIAZBKGoQLiAGLwEgRQRAQQEhDQwGC0EDIQ0gBi8BIiIMIgIgAS8BQE8NBSACIAEvAUJGDQIgAS8BRCAMQf//A3FGDQMgAUEYaigCAEUNBSABQShqIAFBEGoiByAMECYaIAEoAhgiAiAMQf//A3EiCU0NBCAHKAIAIAlBAnRqIgItAAIhESACLwEACyESIAZBGGogAUEoahBCIAYoAhghAgJAIAYoAhwiByAFTQRAIAcNAUEBIQhBASENIAUhB0EBDAcLIAVFBEBBASENQQAhB0EBDAcLIAQgAiAFEEsaIAFBMGoiAiACKAIAIAVqNgIAQYiDwAAhBEEAIQ1BACEHQQEMBgsgBCACIAcQSyABQTBqIgIgAigCACAHajYCACAHaiEEIAUgB2shB0EAIQ1BAQwFCyAAQQI6AAggAEIANwIADAULIAEgAS0ARiIHQQFqIgI6AAogAUEBIAdBD3F0QQJqOwFAIAFBfyACQQ9xdEF/czsBCCABQRBqIAcQDUEAIQxBACENIAUhB0EADAMLIAFBAToAR0ECIQ0MAQsgCSACQeiGwAAQNgALQQAhDCAFIQdBAAshAiAGQThqQQA2AgAgBkIANwMwIAZByABqQQA2AgAgBkIANwNAIAZB/ABqQQA2AgAgBkH0AGpBADYCACAGQewAakEANgIAIAZB5ABqQQA2AgAgBkHcAGpBADYCACAGQdiJwAA2AnggBkHYicAANgJwIAZB2InAADYCaCAGQdiJwAA2AmAgBkHYicAANgJYIAZBADYCVCAGQdiJwAA2AlACQAJ/AkAgAkUNACABQRBqIRMgAUEoaiEUIAZByABqIRYgBkE+aiEVAkACQAJAAkACQAJAAkACQANAAkACQCAHDQAgBkEQaiAUEEIgBigCFEUNAEEAIQcMAQsgASAGQShqECBBACELIBYhEEEAIQ4CQAJAAkACQAJAAkACQAJAAkADQCABLQALIgIgAS0ACiIJSQ0BIAEgAiAJazoACyABIAEpAwAiFyAJrUI/g4g3AwAgBkEwaiALaiIJIAEvAQggF6dxOwEAIA4EQCAOQX9qQQVLDQUgByALIBVqLwEAIgJJDQYgECAENgIAIBBBBGogAjYCACAHIAJrIQcgAiAEaiEECyABLwFAIgIgDmpB//8DcSABLwEIIAEtAEhrQf//A3FGDQIgCS8BACIJIAEvAUJGIAkgAk9yDQIgCSABLwFERg0CIAEoAiQiAiAJTQ0GIAcgASgCHCAJQQF0ai8BACICSQ0CIA5BAWohDiALIBVqQQJqIAI7AQAgEEEIaiEQIAtBAmoiC0EMRw0AC0EGIQ5BBSEQIAYvATohCAwHCyAODQFBASANIAgbIQ0MCAsgDkEBaiEOCyAOQQdPDQMgBkEwaiAOQX9qIhBBAXRqLwEAIQggEA0EIAwhCQwFCyAOQX9qQQZBmITAABA2AAtB6IHAAEEjQfiCwAAQSAALIAkgAkGohMAAEDYACyAOQQZBuITAABA3AAsgBkHQAGohAiAGQTBqIQsDQCAGQQhqIBMgEyALLwEAIgkgAigCACACQQRqKAIAECkgDBAjIAYtAAohESAGLwEIIRIgASABLwFAQQFqOwFAIAtBAmohCyACQQhqIQIgCSEMIBBBf2oiEA0ACyAOQQN0IAZqQUBrIgIoAgQhCiACQQA2AgQgAigCACEPIAJBiIPAADYCAAsgCCIMIAEvAUJGDQMCQCABLwFEIAhHBEAgCCABLwFAIgJNDQFBAyENQQAMDQsgAUEBOgBHQQIhDUEADAwLAn8gBwJ/AkACQCACIAhHBEAgASgCJCICIAhLDQEgCCACQdiEwAAQNgALIAEoAiQiAiAJQf//A3EiCE0NCCAHIAEoAhwgCEEBdGovAQBBAWpB//8DcSICTw0BIA8EQCABKAIsIgIgCkkNCiABKAIoIA8gChBLGiABIAo2AjAgASAKNgI0C0EAIQ8gFBAzIQtBAQwDCyAHIAEoAhwgCEEBdGovAQAiAkkEQEEAIQ8gFCATIAwQJiELQQEMAwsgEyAMIAQgAhApIQsgAgwBCyAPRQRAIAEoAiwiCCABKAI0IgpJDQkgFCgCACEPCyAKRQ0EIAogAksNCSAPLQAAIQsgBCAPIAoQSyACIApGDQogCmogCzoAACACCyIKayEHIAogBCIPaiEEQQALIAEoAhhB/x9NBEAgBiATIAsgCRAjIAEvAUAhECAGLQACIREgBi8BACESAkAgAS0ACiIIQQtLDQAgECABLwEIIgkgAS0ASGtB//8DcUcNACABIAhBAWo6AAogASAJQQF0QQFyOwEICyABIBBBAWo7AUALQQAhCEUNAQsLQgEhGCAPRQ0KIAEoAiwiAiAKSQ0HIAEoAiggDyAKEEsaIAEgCjYCMCABIAo2AjQMCgtBAEEAQYiFwAAQNgALIAEQNAwGCyAIIAJByITAABA2AAsgCiACQeiEwAAQNwALIAogCEH4hMAAEDcACyAKIAJBmIXAABA3AAtBAEEAQaiFwAAQNgALIAogAkG4hcAAEDcAC0EACyEMQQAhEkEAIRELIAAgBSAHazYCBCAAIAMgBigCLCICazYCACAAQQAgDSADIAJLGyANIA1BAUYbOgAIIAEgDK1C//8Dg0IQhiAYhCASrUL//wODQiCGhCARrUL/AYNCMIaENwM4CyAGQYABaiQAC6oIAQZ/IwBB8ABrIgUkACAFIAM2AgwgBSACNgIIQQEhByABIQYCQCABQYECSQ0AQQAgAWshCUGAAiEIA0ACQCAIIAFPDQBBACEHIAAgCGosAABBv39MDQAgCCEGDAILIAhBf2ohBkEAIQcgCEEBRg0BIAggCWogBiEIQQFHDQALCyAFIAY2AhQgBSAANgIQIAVBAEEFIAcbNgIcIAVB8IvAAEHAksAAIAcbNgIYAkACfwJAAkAgAiABSyIHIAMgAUtyRQRAIAIgA0sNAQJAIAJFIAEgAkZyRQRAIAEgAk0NASAAIAJqLAAAQUBIDQELIAMhAgsgBSACNgIgIAJBACABIAJHG0UEQCACIQcMAwsgAUEBaiEDA0ACQCACIAFPDQAgACACaiwAAEFASA0AIAIhByAFQSRqDAULIAJBf2ohByACQQFGDQMgAiADRiAHIQJFDQALDAILIAUgAiADIAcbNgIoIAVBxABqQQM2AgAgBUHcAGpBHTYCACAFQdQAakEdNgIAIAVCAzcCNCAFQeiSwAA2AjAgBUEcNgJMIAUgBUHIAGo2AkAgBSAFQRhqNgJYIAUgBUEQajYCUCAFIAVBKGo2AkgMAwsgBUHkAGpBHTYCACAFQdwAakEdNgIAIAVB1ABqQRw2AgAgBUHEAGpBBDYCACAFQgQ3AjQgBUGkk8AANgIwIAVBHDYCTCAFIAVByABqNgJAIAUgBUEYajYCYCAFIAVBEGo2AlggBSAFQQxqNgJQIAUgBUEIajYCSAwCCyAFQSRqCyEIAkAgASAHRg0AQQEhAwJAAkACQCAAIAdqIgYsAAAiAkF/TARAQQAhAyAAIAFqIgEhACABIAZBAWpHBEAgBi0AAUE/cSEDIAZBAmohAAsgAkEfcSEJIAJB/wFxQd8BSw0BIAMgCUEGdHIhAgwCCyAFIAJB/wFxNgIkIAVBKGohAQwCC0EAIQogASEGIAAgAUcEQCAALQAAQT9xIQogAEEBaiEGCyAKIANBBnRyIQAgAkH/AXFB8AFJBEAgACAJQQx0ciECDAELQQAhAiABIAZHBH8gBi0AAEE/cQVBAAsgCUESdEGAgPAAcSAAQQZ0cnIiAkGAgMQARg0CCyAFIAI2AiRBASEDIAVBKGohASACQYABSQ0AQQIhAyACQYAQSQ0AQQNBBCACQYCABEkbIQMLIAUgBzYCKCAFIAMgB2o2AiwgBUHEAGpBBTYCACAFQewAakEdNgIAIAVB5ABqQR02AgAgBUHcAGpBHjYCACAFQdQAakEfNgIAIAVCBTcCNCAFQfiTwAA2AjAgBSABNgJYIAUgCDYCUCAFQRw2AkwgBSAFQcgAajYCQCAFIAVBGGo2AmggBSAFQRBqNgJgIAUgBUEgajYCSAwBC0H8i8AAQSsgBBBIAAsgBUEwaiAEEFEAC9IIAQV/IABBeGoiASAAQXxqKAIAIgNBeHEiAGohAgJAAkAgA0EBcQ0AIANBA3FFDQEgASgCACIDIABqIQAgASADayIBQaSqwAAoAgBGBEAgAigCBEEDcUEDRw0BQZyqwAAgADYCACACIAIoAgRBfnE2AgQgASAAQQFyNgIEIAAgAWogADYCAA8LIAEgAxARCwJAIAJBBGoiBCgCACIDQQJxBEAgBCADQX5xNgIAIAEgAEEBcjYCBCAAIAFqIAA2AgAMAQsCQCACQaiqwAAoAgBHBEBBpKrAACgCACACRg0BIAIgA0F4cSICEBEgASAAIAJqIgBBAXI2AgQgACABaiAANgIAIAFBpKrAACgCAEcNAkGcqsAAIAA2AgAPC0GoqsAAIAE2AgBBoKrAAEGgqsAAKAIAIABqIgA2AgAgASAAQQFyNgIEQaSqwAAoAgAgAUYEQEGcqsAAQQA2AgBBpKrAAEEANgIAC0HEqsAAKAIAIgIgAE8NAkGoqsAAKAIAIgBFDQICQEGgqsAAKAIAIgNBKUkNAEG0qsAAIQEDQCABKAIAIgQgAE0EQCAEIAEoAgRqIABLDQILIAEoAggiAQ0ACwtBzKrAAAJ/Qf8fQbyqwAAoAgAiAEUNABpBACEBA0AgAUEBaiEBIAAoAggiAA0ACyABQf8fIAFB/x9LGws2AgAgAyACTQ0CQcSqwABBfzYCAA8LQaSqwAAgATYCAEGcqsAAQZyqwAAoAgAgAGoiADYCACABIABBAXI2AgQgACABaiAANgIADwtBzKrAAAJ/AkAgAEGAAk8EQCABQgA3AhAgAUEcagJ/QQAgAEEIdiICRQ0AGkEfIABB////B0sNABogAEEGIAJnIgJrQR9xdkEBcSACQQF0a0E+agsiAzYCACADQQJ0QZypwABqIQICQAJAAkACQAJAQZCnwAAoAgAiBEEBIANBH3F0IgVxBEAgAigCACICQQRqKAIAQXhxIABHDQEgAiEDDAILQZCnwAAgBCAFcjYCACACIAE2AgAMAwsgAEEAQRkgA0EBdmtBH3EgA0EfRht0IQQDQCACIARBHXZBBHFqQRBqIgUoAgAiA0UNAiAEQQF0IQQgAyICQQRqKAIAQXhxIABHDQALCyADKAIIIgAgATYCDCADIAE2AgggAUEYakEANgIAIAEgAzYCDCABIAA2AggMAgsgBSABNgIACyABQRhqIAI2AgAgASABNgIMIAEgATYCCAtBzKrAAEHMqsAAKAIAQX9qIgA2AgAgAA0DQbyqwAAoAgAiAA0BQf8fDAILIABBA3YiAkEDdEGUp8AAaiEAAn9BjKfAACgCACIDQQEgAnQiAnEEQCAAKAIIDAELQYynwAAgAiADcjYCACAACyECIAAgATYCCCACIAE2AgwgASAANgIMIAEgAjYCCA8LQQAhAQNAIAFBAWohASAAKAIIIgANAAsgAUH/HyABQf8fSxsLNgIACwuWBwEKfyAAKAIQIQMCQAJAAkAgACgCCCIMQQFHBEAgA0EBRg0BDAMLIANBAUcNAQsgASACaiEDAkACQCAAQRRqKAIAIghFBEAgASEEDAELIAEhBANAIAMgBCIHRg0CIAdBAWohBAJAIAcsAAAiBkF/Sg0AIAZB/wFxIQkCfyADIARGBEBBACEKIAMMAQsgBy0AAUE/cSEKIAdBAmoiBAshBiAJQeABSQ0AAn8gAyAGRgRAQQAhCyADDAELIAYtAABBP3EhCyAGQQFqIgQLIQYgCUHwAUkNACADIAZGBH9BAAUgBkEBaiEEIAYtAABBP3ELIAlBEnRBgIDwAHEgCkEMdHIgC0EGdHJyQYCAxABGDQMLIAQgB2sgBWohBSAIQX9qIggNAAsLIAMgBEYNAAJAIAQsAAAiB0F/Sg0AAn8gAyAEQQFqRgRAIAMhCEEADAELIARBAmohCCAELQABQT9xQQZ0CyAHQf8BcUHgAUkNAAJ/IAMgCEYEQCADIQZBAAwBCyAIQQFqIQYgCC0AAEE/cQsgB0H/AXFB8AFJDQAgB0H/AXEhB3IhBCADIAZGBH9BAAUgBi0AAEE/cQsgB0ESdEGAgPAAcSAEQQZ0cnJBgIDEAEYNAQsCQCAFRSACIAVGckUEQEEAIQMgBSACTw0BIAEgBWosAABBQEgNAQsgASEDCyAFIAIgAxshAiADIAEgAxshAQsgDEEBRg0ADAELAkAgAgRAQQAhBCACIQUgASEDA0AgBCADLQAAQcABcUGAAUZqIQQgA0EBaiEDIAVBf2oiBQ0ACyACIARrIAAoAgwiBk8NAkEAIQQgAiEFIAEhAwNAIAQgAy0AAEHAAXFBgAFGaiEEIANBAWohAyAFQX9qIgUNAAsMAQtBACEEIAAoAgwiBg0ADAELQQAhAyAEIAJrIAZqIgQhBQJAAkACQEEAIAAtACAiBiAGQQNGG0EDcUEBaw4DAQABAgsgBEEBdiEDIARBAWpBAXYhBQwBC0EAIQUgBCEDCyADQQFqIQMCQANAIANBf2oiAwRAIAAoAhggACgCBCAAKAIcKAIQEQAARQ0BDAILCyAAKAIEIQQgACgCGCABIAIgACgCHCgCDBEBAA0AIAVBAWohAyAAKAIcIQEgACgCGCEAA0AgA0F/aiIDRQRAQQAPCyAAIAQgASgCEBEAAEUNAAsLQQEPCyAAKAIYIAEgAiAAQRxqKAIAKAIMEQEAC7sGAQR/IAAgAWohAgJAAkAgAEEEaigCACIDQQFxDQAgA0EDcUUNASAAKAIAIgMgAWohASAAIANrIgBBpKrAACgCAEYEQCACKAIEQQNxQQNHDQFBnKrAACABNgIAIAIgAigCBEF+cTYCBCAAIAFBAXI2AgQgAiABNgIADwsgACADEBELAkAgAkEEaigCACIDQQJxBEAgAkEEaiADQX5xNgIAIAAgAUEBcjYCBCAAIAFqIAE2AgAMAQsCQCACQaiqwAAoAgBHBEBBpKrAACgCACACRg0BIAIgA0F4cSICEBEgACABIAJqIgFBAXI2AgQgACABaiABNgIAIABBpKrAACgCAEcNAkGcqsAAIAE2AgAPC0GoqsAAIAA2AgBBoKrAAEGgqsAAKAIAIAFqIgE2AgAgACABQQFyNgIEIABBpKrAACgCAEcNAkGcqsAAQQA2AgBBpKrAAEEANgIADwtBpKrAACAANgIAQZyqwABBnKrAACgCACABaiIBNgIAIAAgAUEBcjYCBCAAIAFqIAE2AgAPCyABQYACTwRAIABCADcCECAAQRxqAn9BACABQQh2IgJFDQAaQR8gAUH///8HSw0AGiABQQYgAmciAmtBH3F2QQFxIAJBAXRrQT5qCyIDNgIAIANBAnRBnKnAAGohAgJAAkACQAJAQZCnwAAoAgAiBEEBIANBH3F0IgVxBEAgAigCACICQQRqKAIAQXhxIAFHDQEgAiEDDAILQZCnwAAgBCAFcjYCACACIAA2AgAMAwsgAUEAQRkgA0EBdmtBH3EgA0EfRht0IQQDQCACIARBHXZBBHFqQRBqIgUoAgAiA0UNAiAEQQF0IQQgAyICQQRqKAIAQXhxIAFHDQALCyADKAIIIgEgADYCDCADIAA2AgggAEEYakEANgIAIAAgAzYCDCAAIAE2AggPCyAFIAA2AgALIABBGGogAjYCACAAIAA2AgwgACAANgIIDwsgAUEDdiICQQN0QZSnwABqIQECf0GMp8AAKAIAIgNBASACdCICcQRAIAEoAggMAQtBjKfAACACIANyNgIAIAELIQIgASAANgIIIAIgADYCDCAAIAE2AgwgACACNgIICwuqBgEHfwJAAkACQAJAAkACQAJAAkAgAEGAgARPBEAgAEGAgAhJDQEgAEG12XNqQbXbK0kgAEHii3RqQeILSXIgAEGfqHRqQZ8YSSAAQd7idGpBDklyciAAQf7//wBxQZ7wCkYgAEGisnVqQSJJciAAQcuRdWpBC0lycg0CIABB8IM4SQ8LIABBgP4DcUEIdiEGQeiUwAAhASAAQf8BcSEHA0ACQCABQQJqIQUgAiABLQABIgRqIQMgBiABLQAAIgFHBEAgASAGSw0BIAMhAiAFIgFBupXAAEcNAgwBCyADIAJJDQQgA0GiAksNBSACQbqVwABqIQECQANAIARFDQEgBEF/aiEEIAEtAAAgAUEBaiEBIAdHDQALQQAhBAwECyADIQIgBSIBQbqVwABHDQELCyAAQf//A3EhA0Hcl8AAIQFBASEEA0AgAUEBaiEAAn8gACABLQAAIgJBGHRBGHUiBUEATg0AGiAAQZGawABGDQYgAS0AASAFQf8AcUEIdHIhAiABQQJqCyEBIAMgAmsiA0EASA0CIARBAXMhBCABQZGawABHDQALDAELIABBgP4DcUEIdiEGQZGawAAhASAAQf8BcSEHA0ACQCABQQJqIQUgAiABLQABIgRqIQMgBiABLQAAIgFHBEAgASAGSw0BIAMhAiAFIgFB3ZrAAEcNAgwBCyADIAJJDQYgA0GvAUsNByACQd2awABqIQECQANAIARFDQEgBEF/aiEEIAEtAAAgAUEBaiEBIAdHDQALQQAhBAwDCyADIQIgBSIBQd2awABHDQELCyAAQf//A3EhA0GMnMAAIQFBASEEA0AgAUEBaiEAAn8gACABLQAAIgJBGHRBGHUiBUEATg0AGiAAQa+fwABGDQggAS0AASAFQf8AcUEIdHIhAiABQQJqCyEBIAMgAmsiA0EASA0BIARBAXMhBCABQa+fwABHDQALCyAEQQFxDwsgAiADQciUwAAQOAALIANBogJByJTAABA3AAtB/IvAAEErQdiUwAAQSAALIAIgA0HIlMAAEDgACyADQa8BQciUwAAQNwALQfyLwABBK0HYlMAAEEgAC7EFAQd/QStBgIDEACAAKAIAIglBAXEiBRshCiAEIAVqIQgCQCAJQQRxRQRAQQAhAQwBCyACBEAgAiEGIAEhBQNAIAcgBS0AAEHAAXFBgAFGaiEHIAVBAWohBSAGQX9qIgYNAAsLIAIgCGogB2shCAsCQAJAIAAoAghBAUcEQCAAIAogASACEEYNAQwCCyAAQQxqKAIAIgYgCE0EQCAAIAogASACEEYNAQwCCwJAAkACQAJAIAlBCHEEQCAAKAIEIQkgAEEwNgIEIAAtACAhCyAAQQE6ACAgACAKIAEgAhBGDQVBACEFIAYgCGsiASECQQEgAC0AICIGIAZBA0YbQQNxQQFrDgMCAQIDC0EAIQUgBiAIayIGIQgCQAJAAkBBASAALQAgIgcgB0EDRhtBA3FBAWsOAwEAAQILIAZBAXYhBSAGQQFqQQF2IQgMAQtBACEIIAYhBQsgBUEBaiEFA0AgBUF/aiIFRQ0EIAAoAhggACgCBCAAKAIcKAIQEQAARQ0AC0EBDwsgAUEBdiEFIAFBAWpBAXYhAgwBC0EAIQIgASEFCyAFQQFqIQUCQANAIAVBf2oiBUUNASAAKAIYIAAoAgQgACgCHCgCEBEAAEUNAAtBAQ8LIAAoAgQhASAAKAIYIAMgBCAAKAIcKAIMEQEADQEgAkEBaiEHIAAoAhwhAiAAKAIYIQMDQCAHQX9qIgcEQCADIAEgAigCEBEAAEUNAQwDCwsgACALOgAgIAAgCTYCBEEADwsgACgCBCEFIAAgCiABIAIQRg0AIAAoAhggAyAEIAAoAhwoAgwRAQANACAIQQFqIQcgACgCHCEBIAAoAhghAANAIAdBf2oiB0UEQEEADwsgACAFIAEoAhARAABFDQALC0EBDwsgACgCGCADIAQgAEEcaigCACgCDBEBAAv0BQEKfyMAQTBrIgMkACADQSRqIAE2AgAgA0EDOgAoIANCgICAgIAENwMIIAMgADYCICADQQA2AhggA0EANgIQAn8CQAJAAkAgAigCCCIEBEAgAigCACEGIAIoAgQiCCACQQxqKAIAIgUgBSAISxsiBUUNASAAIAYoAgAgBigCBCABKAIMEQEADQMgBkEMaiEAIAIoAhQhByACKAIQIQogBSEJA0AgAyAEQRxqLQAAOgAoIAMgBEEEaikCAEIgiTcDCCAEQRhqKAIAIQJBACELQQAhAQJAAkACQCAEQRRqKAIAQQFrDgIAAgELIAIgB08EQCACIAdBtJDAABA2AAsgAkEDdCAKaiIMKAIEQSBHDQEgDCgCACgCACECC0EBIQELIAMgAjYCFCADIAE2AhAgBEEQaigCACECAkACQAJAIARBDGooAgBBAWsOAgACAQsgAiAHTwRAIAIgB0G0kMAAEDYACyACQQN0IApqIgEoAgRBIEcNASABKAIAKAIAIQILQQEhCwsgAyACNgIcIAMgCzYCGCAEKAIAIgEgB0kEQCAKIAFBA3RqIgEoAgAgA0EIaiABKAIEEQAADQUgCUF/aiIJRQ0EIARBIGohBCAAQXxqIQEgACgCACECIABBCGohACADKAIgIAEoAgAgAiADKAIkKAIMEQEARQ0BDAULCyABIAdBpJDAABA2AAsgAigCACEGIAIoAgQiCCACQRRqKAIAIgUgBSAISxsiBUUNACACKAIQIQQgACAGKAIAIAYoAgQgASgCDBEBAA0CIAZBDGohACAFIQIDQCAEKAIAIANBCGogBEEEaigCABEAAA0DIAJBf2oiAkUNAiAEQQhqIQQgAEF8aiEBIAAoAgAhCSAAQQhqIQAgAygCICABKAIAIAkgAygCJCgCDBEBAEUNAAsMAgtBACEFCyAIIAVLBEAgAygCICAGIAVBA3RqIgAoAgAgACgCBCADKAIkKAIMEQEADQELQQAMAQtBAQsgA0EwaiQAC40FAQd/AkAgAUHM/3tLDQBBECABQQtqQXhxIAFBC0kbIQIgAEF8aiIFKAIAIgZBeHEhAwJAAkACQAJAAkACQCAGQQNxBEAgAEF4aiIHIANqIQggAyACTw0BQaiqwAAoAgAgCEYNAkGkqsAAKAIAIAhGDQMgCEEEaigCACIGQQJxDQYgBkF4cSIGIANqIgMgAk8NBAwGCyACQYACSSADIAJBBHJJciADIAJrQYGACE9yDQUMBAsgAyACayIBQRBJDQMgBSACIAZBAXFyQQJyNgIAIAIgB2oiBCABQQNyNgIEIAggCCgCBEEBcjYCBCAEIAEQBgwDC0GgqsAAKAIAIANqIgMgAk0NAyAFIAIgBkEBcXJBAnI2AgAgAiAHaiIBIAMgAmsiBEEBcjYCBEGgqsAAIAQ2AgBBqKrAACABNgIADAILQZyqwAAoAgAgA2oiAyACSQ0CAkAgAyACayIBQQ9NBEAgBSAGQQFxIANyQQJyNgIAIAMgB2oiASABKAIEQQFyNgIEQQAhAQwBCyAFIAIgBkEBcXJBAnI2AgAgAiAHaiIEIAFBAXI2AgQgAyAHaiICIAE2AgAgAiACKAIEQX5xNgIEC0GkqsAAIAQ2AgBBnKrAACABNgIADAELIAggBhARIAMgAmsiAUEQTwRAIAUgAiAFKAIAQQFxckECcjYCACACIAdqIgQgAUEDcjYCBCADIAdqIgIgAigCBEEBcjYCBCAEIAEQBgwBCyAFIAMgBSgCAEEBcXJBAnI2AgAgAyAHaiIBIAEoAgRBAXI2AgQLIAAhBAwBCyABEAAiAkUNACACIAAgAUF8QXggBSgCACIEQQNxGyAEQXhxaiIEIAQgAUsbEEsgABAEDwsgBAv0BAEJfyMAQTBrIgQkAAJAAn8gAgRAIARBKGohCQNAAkAgACgCCC0AAEUNACAAKAIAQciNwABBBCAAKAIEKAIMEQEARQ0AQQEMAwsgBEEKNgIoIARCioCAgBA3AyAgBCACNgIcQQAhBSAEQQA2AhggBCACNgIUIAQgATYCEEEBIQcgASEGIAIiAyEIAn8CQAJAA0AgBSAGaiEGIAQgB2pBJ2otAAAhCgJAAkACQCADQQdNBEAgA0UNASAIIAVrIQtBACEDA0AgAyAGai0AACAKRg0EIAsgA0EBaiIDRw0ACwwBCyAEQQhqIAogBiADEBQgBCgCCEEBRg0BIAQoAhwhCAsgBCAINgIYDAQLIAQoAgwhAyAEKAIkIQcgBCgCGCEFCyAEIAMgBWpBAWoiBTYCGAJAAkAgBSAHSQRAIAQoAhQhAwwBCyAEKAIUIgMgBUkNACAHQQVPDQMgBSAHayIGIAQoAhBqIgggCUYNASAIIAkgBxBERQ0BCyAEKAIcIgggBUkgAyAISXINAyAIIAVrIQMgBCgCECEGDAELCyAAKAIIQQE6AAAgBkEBagwCCyAHQQRBsJLAABA3AAsgACgCCEEAOgAAIAILIQMgACgCBCEGIAAoAgAhBQJAAkAgA0UgAiADRnJFBEAgAiADSwRAIAEgA2oiBywAAEG/f0oNAgsgASACQQAgA0HMjcAAEAMACyAFIAEgAyAGKAIMEQEARQ0BQQEMBAtBASAFIAEgAyAGKAIMEQEADQMaIAcsAABBv39MDQQLIAEgA2ohASACIANrIgINAAsLQQALIARBMGokAA8LIAEgAiADIAJB3I3AABADAAu6AwEEfyMAQRBrIgIkACAAKAIAIQQCQAJAAkACfwJAAkAgAUGAAU8EQCACQQA2AgwgAUGAEEkNASACQQxqIQAgAUGAgARJBEAgAiABQT9xQYABcjoADiACIAFBDHZB4AFyOgAMIAIgAUEGdkE/cUGAAXI6AA1BAyEBDAYLIAIgAUE/cUGAAXI6AA8gAiABQRJ2QfABcjoADCACIAFBBnZBP3FBgAFyOgAOIAIgAUEMdkE/cUGAAXI6AA1BBCEBDAULIAQoAggiACAEQQRqKAIARwRAIAQoAgAhBQwECwJAIABBAWoiAyAASQ0AIABBAXQiBSADIAUgA0sbIgNBCCADQQhLGyEDIAAEQCADQQBIDQEgBCgCACIFRQ0DIAUgAEEBIAMQVQwECyADQQBODQILEF0ACyACIAFBP3FBgAFyOgANIAIgAUEGdkHAAXI6AAwgAkEMaiEAQQIhAQwDCyADQQEQWQsiBQRAIAQgBTYCACAEQQRqIAM2AgAgBCgCCCEADAELIANBARBjAAsgACAFaiABOgAAIAQgBCgCCEEBajYCCAwBCyAEIAAgACABahAfCyACQRBqJABBAAu0AwEEfyAAQQA2AgggAEEUakEANgIAIAFBD3EhBCAAQQxqIQJBACEBA0AgACgCBCABRgRAIAAgARA8IAAoAgghAQsgACgCACABQQJ0aiIBIAM6AAIgAUEAOwEAIAAgACgCCEEBajYCCCAAKAIUIgEgACgCEEYEQCACIAEQOyAAKAIUIQELIAAoAgwgAUEBdGpBATsBACAAIAAoAhRBAWo2AhQgACgCCCEBIANBAWoiBSEDIAVB//8DcSAEdkUNAAsgACgCBCABRgRAIAAgARA8IAAoAgghAQsgACgCACABQQJ0aiIBQQA6AAIgAUEAOwEAIAAgACgCCEEBajYCCCAAKAIUIgEgACgCEEYEQCACIAEQOyAAKAIUIQELIAAoAgwgAUEBdGpBADsBACAAIAAoAhRBAWo2AhQgACgCCCIBIAAoAgRGBEAgACABEDwgACgCCCEBCyAAKAIAIAFBAnRqIgFBADoAAiABQQA7AQAgACAAKAIIQQFqNgIIIAAoAhQiASAAKAIQRgRAIAIgARA7IAAoAhQhAQsgACgCDCABQQF0akEAOwEAIAAgACgCFEEBajYCFAv+AwIDfwF+IAEoAhhBJyABQRxqKAIAKAIQEQAARQRAQfQAIQNBAiECAkACQAJAAkACQAJAIAAoAgAiAEF3ag4fBQEDAwADAwMDAwMDAwMDAwMDAwMDAwMDAwQDAwMDBAILQfIAIQMMBAtB7gAhAwwDCyAAQdwARg0BCwJ/An4CQCAAEA9FBEAgABAHRQ0BQQEMAwsgAEEBcmdBAnZBB3OtQoCAgIDQAIQMAQsgAEEBcmdBAnZBB3OtQoCAgIDQAIQLIQVBAwshAiAAIQMMAQsgACEDCwNAIAIhBEHcACEAQQEhAgJAAn4CQAJAAkACQCAEQQFrDgMBBQACCwJAAkACQAJAIAVCIIinQf8BcUEBaw4FAwIBAAYFC0H1ACEAIAVC/////49gg0KAgICAMIQMBgtB+wAhACAFQv////+PYINCgICAgCCEDAULQTBB1wAgAyAFpyIEQQJ0QRxxdkEPcSIAQQpJGyAAaiEAIAVCf3xC/////w+DIAVCgICAgHCDhCAEDQQaIAVC/////49gg0KAgICAEIQMBAtB/QAhACAFQv////+PYIMMAwtBACECIAMhAAwDCyABKAIYQScgASgCHCgCEBEAAA8LIAVC/////49gg0KAgICAwACECyEFQQMhAgsgASgCGCAAIAEoAhwoAhARAABFDQALC0EBC6ADAQV/AkACQEEAQQ8gAEGkmgRJGyIBIAFBCGoiASABQQJ0QZigwABqKAIAQQt0IABBC3QiAksbIgEgAUEEaiIBIAFBAnRBmKDAAGooAgBBC3QgAksbIgEgAUECaiIBIAFBAnRBmKDAAGooAgBBC3QgAksbIgEgAUEBaiIBIAFBAnRBmKDAAGooAgBBC3QgAksbIgNBAnRBmKDAAGooAgBBC3QiASACRiABIAJJaiADaiICQR5NBEBBsQUhBCACQR5HBEAgAkECdEGcoMAAaigCAEEVdiEEC0EAIQEgAkF/aiIDIAJNBEAgA0EfTw0DIANBAnRBmKDAAGooAgBB////AHEhAQsCQCAEIAJBAnRBmKDAAGooAgBBFXYiA0EBakYNACAAIAFrIQIgA0GxBSADQbEFSxshBSAEQX9qIQFBACEAA0AgAyAFRg0DIAAgA0GUocAAai0AAGoiACACSw0BIAEgA0EBaiIDRw0ACyABIQMLIANBAXEPCyACQR9B2J/AABA2AAsgBUGxBUHon8AAEDYACyADQR9B+J/AABA2AAvoAgEFfwJAQc3/eyAAQRAgAEEQSxsiAGsgAU0NACAAQRAgAUELakF4cSABQQtJGyIEakEMahAAIgJFDQAgAkF4aiEBAkAgAEF/aiIDIAJxRQRAIAEhAAwBCyACQXxqIgUoAgAiBkF4cSACIANqQQAgAGtxQXhqIgIgACACaiACIAFrQRBLGyIAIAFrIgJrIQMgBkEDcQRAIAAgAyAAKAIEQQFxckECcjYCBCAAIANqIgMgAygCBEEBcjYCBCAFIAIgBSgCAEEBcXJBAnI2AgAgACAAKAIEQQFyNgIEIAEgAhAGDAELIAEoAgAhASAAIAM2AgQgACABIAJqNgIACwJAIABBBGooAgAiAUEDcUUNACABQXhxIgIgBEEQak0NACAAQQRqIAQgAUEBcXJBAnI2AgAgACAEaiIBIAIgBGsiBEEDcjYCBCAAIAJqIgIgAigCBEEBcjYCBCABIAQQBgsgAEEIaiEDCyADC4UDAQR/AkACQCABQYACTwRAIABBGGooAgAhBAJAAkAgACAAKAIMIgJGBEAgAEEUQRAgAEEUaiICKAIAIgMbaigCACIBDQFBACECDAILIAAoAggiASACNgIMIAIgATYCCAwBCyACIABBEGogAxshAwNAIAMhBSABIgJBFGoiAygCACIBRQRAIAJBEGohAyACKAIQIQELIAENAAsgBUEANgIACyAERQ0CIAAgAEEcaigCAEECdEGcqcAAaiIBKAIARwRAIARBEEEUIAQoAhAgAEYbaiACNgIAIAJFDQMMAgsgASACNgIAIAINAUGQp8AAQZCnwAAoAgBBfiAAKAIcd3E2AgAPCyAAQQxqKAIAIgIgAEEIaigCACIARwRAIAAgAjYCDCACIAA2AggPC0GMp8AAQYynwAAoAgBBfiABQQN2d3E2AgAMAQsgAiAENgIYIAAoAhAiAQRAIAIgATYCECABIAI2AhgLIABBFGooAgAiAEUNACACQRRqIAA2AgAgACACNgIYCwujAwIEfwJ+IwBBQGoiAiQAQQEhBAJAIAAtAAQNACAALQAFIQUgACgCACIDLQAAQQRxRQRAIAMoAhhB8Y3AAEHzjcAAIAUbQQJBAyAFGyADQRxqKAIAKAIMEQEADQEgACgCACIDKAIYQc6mwABBByADQRxqKAIAKAIMEQEADQEgACgCACIDKAIYQaeMwABBAiADQRxqKAIAKAIMEQEADQEgASAAKAIAQZSgwAAoAgARAAAhBAwBCyAFRQRAIAMoAhhB7I3AAEEDIANBHGooAgAoAgwRAQANASAAKAIAIQMLIAJBAToAFyACQTRqQbCNwAA2AgAgAiADKQIYNwMIIAIgAkEXajYCECADKQIIIQYgAykCECEHIAIgAy0AIDoAOCACIAc3AyggAiAGNwMgIAIgAykCADcDGCACIAJBCGo2AjAgAkEIakHOpsAAQQcQCw0AIAJBCGpBp4zAAEECEAsNACABIAJBGGpBlKDAACgCABEAAA0AIAIoAjBB743AAEECIAIoAjQoAgwRAQAhBAsgAEEBOgAFIAAgBDoABCACQUBrJAAL5gICBn8BfiMAQTBrIgQkACAEQRBqECogBCAEKAIUIgU2AhwgBCAEKAIQIgY2AhggBEEIaiADQQAQQCAEKQMIIQogAEEANgIIIAAgCjcCAAJAAkAgAwRAQQAhBkEAIQUDQCAAIAVBgCAQOiAAIAMgACgCBCIHIAcgA0sbEE8gBiACSw0CIAAoAgAhCCAAKAIIIgcgBUkNAyAEQSBqIARBGGoiCSgCACABIAZqIAIgBmsgBSAIaiAHIAVrIAkoAgQoAgwRCAAgBCgCJCAFaiEHIAQoAiAhCCAAKAIIIgUgB08EQCAAKAIAGiAAIAc2AgggByEFCyAELQAoQQJHBEAgBiAIaiEGIAUgA0kNAQsLIAQoAhghBiAEKAIcIQULIAYgBSgCABEDACAEKAIcIgAoAggaIAQoAhghASAAKAIEBEAgARAECyAEQTBqJAAPCyAGIAJByIHAABA5AAsgBSAHQdiBwAAQOQAL2AIBBX8CQAJAAkACQAJAIAJBA2pBfHEgAmsiBEUNACADIAQgBCADSxsiBUUNAEEAIQQgAUH/AXEhBgJAA0AgAiAEai0AACAGRg0BIAUgBEEBaiIERw0ACyAFIANBeGoiBE0NAgwDC0EBIQcMAwsgA0F4aiEEQQAhBQsgAUH/AXFBgYKECGwhBgNAIAIgBWoiB0EEaigCACAGcyIIQX9zIAhB//37d2pxIAcoAgAgBnMiB0F/cyAHQf/9+3dqcXJBgIGChHhxRQRAIAVBCGoiBSAETQ0BCwsgBSADSw0CC0EAIQYCf0EAIAMgBUYNABogAiAFaiECIAMgBWshBkEAIQQgAUH/AXEhAQJAA0AgAiAEai0AACABRg0BIAYgBEEBaiIERw0AC0EADAELIAQhBkEBCyEHIAUgBmohBAsgACAENgIEIAAgBzYCAA8LIAUgA0HokMAAEDkAC74CAgV/AX4jAEEwayIEJABBJyECAkAgAEKQzgBUBEAgACEHDAELA0AgBEEJaiACaiIDQXxqIAAgAEKQzgCAIgdCkM4Afn2nIgVB//8DcUHkAG4iBkEBdEGmjsAAai8AADsAACADQX5qIAUgBkHkAGxrQf//A3FBAXRBpo7AAGovAAA7AAAgAkF8aiECIABC/8HXL1YgByEADQALCyAHpyIDQeMASgRAIAJBfmoiAiAEQQlqaiAHpyIDIANB//8DcUHkAG4iA0HkAGxrQf//A3FBAXRBpo7AAGovAAA7AAALAkAgA0EKTgRAIAJBfmoiAiAEQQlqaiADQQF0QaaOwABqLwAAOwAADAELIAJBf2oiAiAEQQlqaiADQTBqOgAACyABQfCLwABBACAEQQlqIAJqQScgAmsQCCAEQTBqJAALowICBH8BfiMAQUBqIgQkAAJAAkACQCACIANqIgMgAk8EQCABKAIEIQUgBEEYakKBgICAEDcDACAEKAIcIgJBf2oiBiAEKAIYakEAIAJrIgdxrSAFQQF0IgUgAyAFIANLGyIDQQggA0EISxutfiIIQiCIpyACRXINASACaUEBRgRAIAinIAZqIAdxIQMMAwsgBEEwahAwAAsgBEEIaiADQQAQWiAAIAQpAwg3AgRBASECDAILQQAhAgsgBEEwaiABEE0gBEEgaiADIAIgBEEwahAlQQEhAiAEQShqKAIAIQMgBCgCJCEFIAQoAiBBAUcEQCABIAUgAxBaQQAhAgwBCyAEQRBqIAUgAxBaIAAgBCkDEDcCBAsgACACNgIAIARBQGskAAuuAgEIfyMAQTBrIgEkAEGAICECIAFBGGoQLyABKAIcIQQgASgCGCEFIAFBEGoQMiABKAIUIQYgASgCECEHIAFBCGpBgCBBARBAIAFBgCA2AiggASABKAIMIgg2AiQgASABKAIIIgM2AiAgCEGBIE8EQCABQSBqQYAgEEUgASgCICEDIAEoAighAgsgAEEAOwBHIABBADsBOCAAIAM2AiggACAFNgIQIABBCDoARiAAQQA6AAsgAEIANwMAIABBMGpCADcDACAAQSxqIAI2AgAgAEEkakEANgIAIABBIGogBjYCACAAQRxqIAc2AgAgAEEYakEANgIAIABBFGogBDYCACAAQQk6AAogAEGAAjsBQiAAQYECOwFEIABBggI7AUAgAEH/AzsBCCABQTBqJAALxwICBX8BfiMAQRBrIgMkACAALQALIQIgA0IANwMIIAEoAgAhBQJAAkAgAAJ/IAEoAgQiBEHAACACayIGQfgBcUEDdiICSQRAIARBCU8NAiADQQhqIAUgBBBLGiABQQA2AgQgAUGIg8AANgIAIARBA3QMAQsgBkH/AXFByABPDQIgA0EIaiAFIAIQSxogASAEIAJrNgIEIAEgAiAFajYCACAGQfgBcQsgAC0ACyIBajoACyAAIAApAwAgAykDCCIHQjiGIAdCKIZCgICAgICAwP8Ag4QgB0IYhkKAgICAgOA/gyAHQgiGQoCAgIDwH4OEhCAHQgiIQoCAgPgPgyAHQhiIQoCA/AeDhCAHQiiIQoD+A4MgB0I4iISEhCABQT9xrYiENwMAIANBEGokAA8LIARBCEHYhcAAEDcACyACQQhByIXAABA3AAuqAgEDfyMAQYABayIEJAACQAJAAn8CQCABKAIAIgNBEHFFBEAgACgCACECIANBIHENASACrSABEBUMAgsgACgCACECQQAhAANAIAAgBGpB/wBqIAJBD3EiA0EwciADQdcAaiADQQpJGzoAACAAQX9qIQAgAkEEdiICDQALIABBgAFqIgJBgQFPDQIgAUGkjsAAQQIgACAEakGAAWpBACAAaxAIDAELQQAhAANAIAAgBGpB/wBqIAJBD3EiA0EwciADQTdqIANBCkkbOgAAIABBf2ohACACQQR2IgINAAsgAEGAAWoiAkGBAU8NAiABQaSOwABBAiAAIARqQYABakEAIABrEAgLIARBgAFqJAAPCyACQYABQZSOwAAQOQALIAJBgAFBlI7AABA5AAuxAgEEfyMAQUBqIgIkACABKAIEIgNFBEAgAUEEaiEDIAEoAgAhBCACQQA2AiAgAkIBNwMYIAIgAkEYajYCJCACQThqIARBEGopAgA3AwAgAkEwaiAEQQhqKQIANwMAIAIgBCkCADcDKCACQSRqQdiJwAAgAkEoahAJGiACQRBqIgQgAigCIDYCACACIAIpAxg3AwgCQCABKAIEIgVFDQAgAUEIaigCAEUNACAFEAQLIAMgAikDCDcCACADQQhqIAQoAgA2AgAgAygCACEDCyABQQE2AgQgAUEMaigCACEEIAFBCGoiASgCACEFIAFCADcCAEEMQQQQWSIBRQRAQQxBBBBjAAsgASAENgIIIAEgBTYCBCABIAM2AgAgAEGQi8AANgIEIAAgATYCACACQUBrJAAL/AEBAn8jAEEQayICJAAgACgCACACQQA2AgwCfwJAAkAgAUGAAU8EQCABQYAQSQ0BIAJBDGohACABQYCABE8NAiACIAFBP3FBgAFyOgAOIAIgAUEMdkHgAXI6AAwgAiABQQZ2QT9xQYABcjoADUEDDAMLIAIgAToADCACQQxqIQBBAQwCCyACIAFBP3FBgAFyOgANIAIgAUEGdkHAAXI6AAwgAkEMaiEAQQIMAQsgAiABQT9xQYABcjoADyACIAFBEnZB8AFyOgAMIAIgAUEGdkE/cUGAAXI6AA4gAiABQQx2QT9xQYABcjoADUEECyEBIAAgARALIAJBEGokAAv5AQECfyMAQRBrIgIkACACQQA2AgwCfwJAAkAgAUGAAU8EQCABQYAQSQ0BIAJBDGohAyABQYCABE8NAiACIAFBP3FBgAFyOgAOIAIgAUEMdkHgAXI6AAwgAiABQQZ2QT9xQYABcjoADUEDDAMLIAIgAToADCACQQxqIQNBAQwCCyACIAFBP3FBgAFyOgANIAIgAUEGdkHAAXI6AAwgAkEMaiEDQQIMAQsgAiABQT9xQYABcjoADyACIAFBEnZB8AFyOgAMIAIgAUEGdkE/cUGAAXI6AA4gAiABQQx2QT9xQYABcjoADUEECyEBIAAgAyABEAsgAkEQaiQAC/wBAQN/IwBBIGsiBCQAAkAgAkEBaiIDIAJPBEAgASgCBCICQQF0IgUgAyAFIANLGyIDQQQgA0EESxsiA0H/////A3EgA0ZBAXQhBSADQQJ0IQMCQCACBEAgBEEYakECNgIAIAQgAkECdDYCFCAEIAEoAgA2AhAMAQsgBEEANgIQCyAEIAMgBSAEQRBqECVBASECIARBCGooAgAhAyAEKAIEIQUgBCgCAEEBRwRAIAEgBTYCACABIANBAnY2AgRBACECDAILIAAgBTYCBCAAQQhqIAM2AgAMAQsgACADNgIEIABBCGpBADYCAEEBIQILIAAgAjYCACAEQSBqJAAL8AEBBH8jAEEgayIEJAACQCACQQFqIgMgAk8EQCABKAIEIgVBAXQiAiADIAIgA0sbIgNBBCADQQRLGyIDIANqIgYgA09BAXQhAwJAIAUEQCAEQRhqQQI2AgAgBCACNgIUIAQgASgCADYCEAwBCyAEQQA2AhALIAQgBiADIARBEGoQJUEBIQIgBEEIaigCACEDIAQoAgQhBSAEKAIAQQFHBEAgASAFNgIAIAEgA0EBdjYCBEEAIQIMAgsgACAFNgIEIABBCGogAzYCAAwBCyAAIAM2AgQgAEEIakEANgIAQQEhAgsgACACNgIAIARBIGokAAvZAQEDfwJAIABBBGooAgAiBCAAQQhqKAIAIgNrIAIgAWsiBU8EQCAAKAIAIQQMAQsCfwJAAkAgAyAFaiICIANJDQAgBEEBdCIDIAIgAyACSxsiAkEIIAJBCEsbIQIgBARAIAJBAEgNASAAKAIAIgNFDQIgAyAEQQEgAhBVDAMLIAJBAE4NAQsQXQALIAJBARBZCyIEBEAgACAENgIAIABBBGogAjYCACAAQQhqKAIAIQMMAQsgAkEBEGMACyADIARqIAEgBRBLGiAAQQhqIgAgACgCACAFajYCAAvoAQEFfyMAQRBrIgMkACAALQALIQIgA0IANwMIIAEoAgAhBQJAAkAgAAJ/IAEoAgQiBEHAACACayIGQfgBcUEDdiICSQRAIARBCU8NAiADQQhqIAUgBBBLGiABQQA2AgQgAUGIg8AANgIAIARBA3QMAQsgBkH/AXFByABPDQIgA0EIaiAFIAIQSxogASAEIAJrNgIEIAEgAiAFajYCACAGQfgBcQsgAC0ACyIBajoACyAAIAApAwAgAykDCCABQT9xrYaENwMAIANBEGokAA8LIARBCEH4hcAAEDcACyACQQhB6IXAABA3AAvcAQEEfyMAQUBqIgIkACABQQRqIQQgASgCBEUEQCABKAIAIQMgAkEANgIgIAJCATcDGCACIAJBGGo2AiQgAkE4aiADQRBqKQIANwMAIAJBMGogA0EIaikCADcDACACIAMpAgA3AyggAkEkakHYicAAIAJBKGoQCRogAkEQaiIDIAIoAiA2AgAgAiACKQMYNwMIAkAgASgCBCIFRQ0AIAFBCGooAgBFDQAgBRAECyAEIAIpAwg3AgAgBEEIaiADKAIANgIACyAAQZCLwAA2AgQgACAENgIAIAJBQGskAAuYAgECfyMAQSBrIgQkAEEBIQVBiKfAAEGIp8AAKAIAQQFqNgIAAkACQAJAQdCqwAAoAgBBAUcEQEHQqsAAQoGAgIAQNwMADAELQdSqwABB1KrAACgCAEEBaiIFNgIAIAVBAksNAQsgBCADNgIcIAQgAjYCGCAEQfCJwAA2AhQgBEHwicAANgIQQfymwAAoAgAiAkF/TA0AQfymwAAgAkEBaiICNgIAQfymwABBhKfAACgCACIDBH9BgKfAACgCACAEQQhqIAAgASgCEBECACAEIAQpAwg3AxAgBEEQaiADKAIMEQIAQfymwAAoAgAFIAILQX9qNgIAIAVBAU0NAQsACyMAQRBrIgIkACACIAE2AgwgAiAANgIIAAvMAQECfyABQRRqKAIAIgUgA0H//wNxIgRLBEAgASgCDCAEQQF0ai8BACEFIAEoAggiBCABKAIERgRAIAEgBBA8IAEoAgghBAsgASgCACAEQQJ0aiIEIAI6AAIgBCADOwEAIAEgASgCCEEBajYCCCABKAIUIgQgAUEQaigCAEYEQCABQQxqIAQQOyABKAIUIQQLIAEoAgwgBEEBdGogBUEBajsBACABIAEoAhRBAWo2AhQgACACOgACIAAgAzsBAA8LIAQgBUH4hsAAEDYAC8QBAQJ/IwBBEGsiAiQAIAIgAa1CgICAgBBCACABKAIYQcWmwABBCSABQRxqKAIAKAIMEQEAG4Q3AwAgAiAANgIMIAIgAkEMahASIAItAAQhASACLQAFBEAgAUH/AXEhACACAn9BASAADQAaIAIoAgAiAEEcaigCACgCDCEBIAAoAhghAyAALQAAQQRxRQRAIANB943AAEECIAERAQAMAQsgA0H2jcAAQQEgAREBAAsiAToABAsgAkEQaiQAIAFB/wFxQQBHC6oBAQJ/AkACQAJAIAIEQEEBIQQgAUEATg0BDAILIAAgATYCBEEBIQQMAQsCQAJAAkACQAJAIAMoAgAiBUUEQCABRQ0BDAMLIAMoAgQiAw0BIAENAgsgAiEDDAMLIAUgAyACIAEQVSIDRQ0BDAILIAEgAhBZIgMNAQsgACABNgIEIAIhAQwCCyAAIAM2AgRBACEEDAELQQAhAQsgACAENgIAIABBCGogATYCAAufAQEDfyAAQgA3AggCQCABQRRqKAIAIgQgAkH//wNxIgNLBEAgASgCDCADQQF0ai8BACEDIAAoAgQhBCAAQQA2AgQgACgCACEFIABBATYCACAEIANJDQEgASACIAUgAxApIAAoAgQEQCAAKAIAEAQLIAAgAzYCDCAAIAQ2AgQgACAFNgIADwsgAyAEQbiGwAAQNgALIAMgBEHIhsAAEDcAC4cBAQJ/IwBBMGsiBCQAIARBIGoiBSACNgIIIAUgAjYCBCAFIAE2AgAgBEEIaiAEQSBqEE4gBEEQaiAEKAIIIgEgBCgCDCICIAMQEyACBEAgARAECyAEQShqIARBGGooAgA2AgAgBCAEKQMQNwMgIAQgBEEgahBOIAAgBCkDADcDACAEQTBqJAALggEBBn8jAEEQayIDJAAgACAAKAIIIAEQOiAAKAIAIQUgACgCCCECIANBCGpBASABEFogAiAFaiEEIAMoAgwiBiADKAIIIgdLBEAgBCAGIAdrEFIgBSACIAZqIAdrIgJqIQQLIAAgAQR/IARBADoAACACQQFqBSACCzYCCCADQRBqJAALjgEBA38gACgCCCIEIAFB//8DcSIFSwRAIAMEQCAAKAIAIQQgAkF/aiEFIAEhAANAIAQgAEH//wNxQQJ0aiIGLwEAIQAgAyAFaiAGLQACOgAAIAAgASAAIAFB//8DcUkbIQAgA0F/aiIDDQALIAItAAAPC0EAQQBBmIfAABA2AAsgBUEBaiAEQYiHwAAQNwALaAECfyMAQdAAayICJAAjAEEwayIBJAAgAUEIOgAPIAFBMGokACACEBdB0ABBCBBZIgEEQCABIAJB0AAQSxogAUEBOgBIIABBpIPAADYCBCAAIAE2AgAgAkHQAGokAA8LQdAAQQgQYwALgAECAn8BfiABLQALIgQgAS0ACiIDSQRAIAEgAhAYIAEtAAshBCABLQAKIQMLIAQgA0H/AXFJBH9BAAUgASAEIANrOgALIAEgASkDACADrYkiBSABLwEIIgGtQn+FQoCAfISDNwMAIAEgBadxIQNBAQshASAAIAM7AQIgACABOwEAC6IBAQN/IwBBEGsiASQAIAAoAgAiAkEUaigCACEDAkACfwJAAkAgAigCBA4CAAEDCyADDQJBACECQfCJwAAMAQsgAw0BIAIoAgAiAygCBCECIAMoAgALIQMgASACNgIEIAEgAzYCACABQfyKwAAgACgCBCgCCCAAKAIIECIACyABQQA2AgQgASACNgIAIAFB6IrAACAAKAIEKAIIIAAoAggQIgALgQEBA38gASgCBCIDIAJPBEACQCADRQ0AIAEoAgAhBAJAAkAgAkUEQEEBIQMgBBAEDAELIAQgA0EBIAIQVSIDRQ0BCyABIAI2AgQgASADNgIADAELIAAgAjYCBCAAQQhqQQE2AgBBASEFCyAAIAU2AgAPC0GUiMAAQSRBuIjAABBIAAt1AgJ/AX4gAS0ACyIEIAEtAAoiA0kEQCABIAIQICABLQALIQQgAS0ACiEDCyAEIANB/wFxSQR/QQAFIAEgBCADazoACyABIAEpAwAiBSADrUI/g4g3AwAgAS8BCCAFp3EhA0EBCyEBIAAgAzsBAiAAIAE7AQALMAEBfwJAAkBBgIABQQIQWSIBDQEMAAtBgIABQQIQYwALIAAgATYCACAAQYAgNgIEC4YBAQF/IwBBQGoiASQAIAFBKzYCDCABQYCBwAA2AgggAUGsgcAANgIUIAEgADYCECABQSxqQQI2AgAgAUE8akEhNgIAIAFCAjcCHCABQayMwAA2AhggAUEdNgI0IAEgAUEwajYCKCABIAFBEGo2AjggASABQQhqNgIwIAFBGGpB8IDAABBRAAtxAQN/IwBBIGsiAiQAAkAgACABEBkNACABQRxqKAIAIQMgASgCGCACQRxqQQA2AgAgAkHwi8AANgIYIAJCATcCDCACQfSLwAA2AgggAyACQQhqEAkNACAAQQRqIAEQGSACQSBqJAAPCyACQSBqJABBAQswAQF/AkACQEGAwABBAhBZIgENAQwAC0GAwABBAhBjAAsgACABNgIAIABBgCA2AgQLewECfwJAAkAgACgCBCIBBEAgACgCDCICIAFPDQEgACgCACIBIAJqIAEtAAA6AAAgAEEANgIIIAAgACgCDEEBajYCDCAAKAIERQ0CIAAoAgAtAAAPC0EAQQBBiIbAABA2AAsgAiABQZiGwAAQNgALQQBBAEGohsAAEDYAC2gBAn8gACAALQBGIgFBAWoiAjoACiAAQQEgAUEPcXRBAmoiATsBQCAAQX8gAkEPcXRBf3M7AQggAEEYaigCACABQf//A3EiAU8EQCAAIAE2AhgLIABBJGooAgAgAU8EQCAAIAE2AiQLC1ABAX8gAEEUaigCACIBRSABQQJ0RXJFBEAgACgCEBAECyAAQSBqKAIAIgFFIAFBAXRFckUEQCAAKAIcEAQLIABBLGooAgAEQCAAKAIoEAQLC2wBAX8jAEEwayIDJAAgAyABNgIEIAMgADYCACADQRxqQQI2AgAgA0EsakEcNgIAIANCAjcCDCADQYCNwAA2AgggA0EcNgIkIAMgA0EgajYCGCADIAM2AiggAyADQQRqNgIgIANBCGogAhBRAAtsAQF/IwBBMGsiAyQAIAMgATYCBCADIAA2AgAgA0EcakECNgIAIANBLGpBHDYCACADQgI3AgwgA0HMkcAANgIIIANBHDYCJCADIANBIGo2AhggAyADQQRqNgIoIAMgAzYCICADQQhqIAIQUQALbAEBfyMAQTBrIgMkACADIAE2AgQgAyAANgIAIANBHGpBAjYCACADQSxqQRw2AgAgA0ICNwIMIANBgJLAADYCCCADQRw2AiQgAyADQSBqNgIYIAMgA0EEajYCKCADIAM2AiAgA0EIaiACEFEAC2wBAX8jAEEwayIDJAAgAyABNgIEIAMgADYCACADQRxqQQI2AgAgA0EsakEcNgIAIANCAjcCDCADQayRwAA2AgggA0EcNgIkIAMgA0EgajYCGCADIANBBGo2AiggAyADNgIgIANBCGogAhBRAAtcAQF/IwBBEGsiAyQAAkAgACgCBCABayACTwRAIANBADYCAAwBCyADIAAgASACEBYgAygCAEEBRw0AIANBCGooAgAiAARAIAMoAgQgABBjAAsQXQALIANBEGokAAtaAQF/IwBBEGsiAiQAAkAgACgCBCABa0EBTwRAIAJBADYCAAwBCyACIAAgARAeIAIoAgBBAUcNACACQQhqKAIAIgAEQCACKAIEIAAQYwALEF0ACyACQRBqJAALWgEBfyMAQRBrIgIkAAJAIAAoAgQgAWtBAU8EQCACQQA2AgAMAQsgAiAAIAEQHSACKAIAQQFHDQAgAkEIaigCACIABEAgAigCBCAAEGMACxBdAAsgAkEQaiQAC1kBAX8jAEEgayICJAAgAiAAKAIANgIEIAJBGGogAUEQaikCADcDACACQRBqIAFBCGopAgA3AwAgAiABKQIANwMIIAJBBGpB2InAACACQQhqEAkgAkEgaiQAC0YAAkBBCCACSQRAAn9BCCACSQRAIAIgAxAQDAELIAMQAAsiAg0BQQAPCyAAIAMQCg8LIAIgACADIAEgASADSxsQSyAAEAQLWQEBfyMAQSBrIgIkACACIAAoAgA2AgQgAkEYaiABQRBqKQIANwMAIAJBEGogAUEIaikCADcDACACIAEpAgA3AwggAkEEakHwj8AAIAJBCGoQCSACQSBqJAALWQACQAJAAkAgAUF/SgRAAkAgAgRAIAENAQwECyABRQ0DIAFBARBZIgINBAwCCyABEEciAkUNAQwDCxBdAAsgAUEBEGMAC0EBIQILIAAgATYCBCAAIAI2AgALVgEBfyMAQSBrIgIkACACIAA2AgQgAkEYaiABQRBqKQIANwMAIAJBEGogAUEIaikCADcDACACIAEpAgA3AwggAkEEakHwj8AAIAJBCGoQCSACQSBqJAALWQEDfwJAIAEoAgwiAiABKAIIIgNPBEAgASgCBCIEIAJJDQEgASgCACEBIAAgAiADazYCBCAAIAEgA2o2AgAPCyADIAJB2IbAABA4AAsgAiAEQdiGwAAQNwALVQEBfyAAQRBqIAAtAEYQDSAAQQA6AEcgAEEAOwE4IABBMGpCADcDACAAQQA6AAsgAEIANwMAIAAgAC0ARkEBaiIBOgAKIABBfyABQQ9xdEF/czsBCAtDAQN/AkAgAkUNAANAIAAtAAAiBCABLQAAIgVGBEAgAEEBaiEAIAFBAWohASACQX9qIgINAQwCCwsgBCAFayEDCyADC0UBAX8jAEEQayICJAAgAiAAIAEQLQJAIAIoAgBBAUYEQCACQQhqKAIAIgBFDQEgAigCBCAAEGMACyACQRBqJAAPCxBdAAtKAAJ/IAFBgIDEAEcEQEEBIAAoAhggASAAQRxqKAIAKAIQEQAADQEaCyACRQRAQQAPCyAAKAIYIAIgAyAAQRxqKAIAKAIMEQEACwsmAQF/AkAgABAAIgFFDQAgAUF8ai0AAEEDcUUNACABIAAQUgsgAQtHAQF/IwBBIGsiAyQAIANBFGpBADYCACADQfCLwAA2AhAgA0IBNwIEIAMgATYCHCADIAA2AhggAyADQRhqNgIAIAMgAhBRAAtEAQJ/IAEoAgQhAiABKAIAIQNBCEEEEFkiAUUEQEEIQQQQYwALIAEgAjYCBCABIAM2AgAgAEGgi8AANgIEIAAgATYCAAtbAQN/IwBBEGsiASQAIAAoAgwiAkUEQEGAisAAQStByIrAABBIAAsgACgCCCIDRQRAQYCKwABBK0HYisAAEEgACyABIAI2AgggASAANgIEIAEgAzYCACABEFAACzMBAX8gAgRAIAAhAwNAIAMgAS0AADoAACABQQFqIQEgA0EBaiEDIAJBf2oiAg0ACwsgAAssAAJAIABBfE0EQCAARQRAQQQhAAwCCyAAIABBfUlBAnQQWSIADQELAAsgAAsxAQF/IAEoAgQiAgRAIAAgAjYCBCAAQQhqQQE2AgAgACABKAIANgIADwsgAEEANgIACzEBAX8gACABKAIEIAEoAggiAksEfyABIAIQRSABKAIIBSACCzYCBCAAIAEoAgA2AgALKAEBfyAAKAIIIgIgAU8EQCAAKAIAGiAAIAE2AggPCyAAIAEgAmsQKAssAQF/IwBBEGsiASQAIAFBCGogAEEIaigCADYCACABIAApAgA3AwAgARAsAAs0AQF/IwBBEGsiAiQAIAIgATYCDCACIAA2AgggAkG8jMAANgIEIAJB8IvAADYCACACEEoACyEAIAEEQANAIABBADoAACAAQQFqIQAgAUF/aiIBDQALCwsgAQF/AkAgACgCACIBRQ0AIABBBGooAgBFDQAgARAECwsgAQF/AkAgACgCBCIBRQ0AIABBCGooAgBFDQAgARAECwsMACAAIAEgAiADED4LCwAgAQRAIAAQBAsLEgAgACgCACABIAEgAmoQH0EACxQAIAAoAgAgASAAKAIEKAIMEQAACxkAAn9BCCABSQRAIAEgABAQDAELIAAQAAsLEAAgACACNgIEIAAgATYCAAsTACAAQaCLwAA2AgQgACABNgIACxAAIAEgACgCACAAKAIEEAULEQBBzIvAAEERQeCLwAAQSAALDgAgACgCABoDQAwACwALCwAgADUCACABEBULDQAgACgCACABIAIQCwsLACAAMQAAIAEQFQsLACAAIwBqJAAjAAsZACAAIAFB+KbAACgCACIAQQ4gABsRAgAACw0AIAFBxJDAAEECEAULCQAgAEEAOgBHCwcAIAAtAEcLDQBC9Pme5u6jqvn+AAsNAEL3uO76qszV7uUACwwAQunQotvMouq7RgsDAAELAwABCwvfJgEAQYCAwAAL1SYvVXNlcnMvZm04MTMvLnJ1c3R1cC90b29sY2hhaW5zL3N0YWJsZS14ODZfNjQtYXBwbGUtZGFyd2luL2xpYi9ydXN0bGliL3NyYy9ydXN0L2xpYnJhcnkvY29yZS9zcmMvYWxsb2MvbGF5b3V0LnJzAAAQAHAAAAALAQAAOQAAAGNhbGxlZCBgUmVzdWx0Ojp1bndyYXAoKWAgb24gYW4gYEVycmAgdmFsdWUAAQAAAAAAAAABAAAAAgAAAHNyYy9saWIucnMAALwAEAAKAAAAGwAAAA4AAAC8ABAACgAAABwAAAASAAAAYXNzZXJ0aW9uIGZhaWxlZDogbWlkIDw9IHNlbGYubGVuKCkvVXNlcnMvZm04MTMvLnJ1c3R1cC90b29sY2hhaW5zL3N0YWJsZS14ODZfNjQtYXBwbGUtZGFyd2luL2xpYi9ydXN0bGliL3NyYy9ydXN0L2xpYnJhcnkvY29yZS9zcmMvc2xpY2UvbW9kLnJzCwEQAG0AAAD9BAAACQAAAAMAAABQAAAACAAAAAQAAAAFAAAABgAAAAcAAAAIAAAAUAAAAAgAAAAJAAAACgAAAAsAAAAMAAAAL1VzZXJzL2ZtODEzLy5jYXJnby9yZWdpc3RyeS9zcmMvZ2l0aHViLmNvbS0xZWNjNjI5OWRiOWVjODIzL3dlZXpsLTAuMS40L3NyYy9kZWNvZGUucnMAAMABEABWAAAAWgIAAB8AAADAARAAVgAAAG0CAAAbAAAAwAEQAFYAAACCAgAAJgAAAMABEABWAAAAqwIAABEAAADAARAAVgAAAK0CAAARAAAAwAEQAFYAAAC5AgAAGQAAAMABEABWAAAAzQIAACIAAADAARAAVgAAAM8CAAAbAAAAwAEQAFYAAADQAgAAFQAAAMABEABWAAAA0QIAABUAAADAARAAVgAAAPoCAAANAAAAwAEQAFYAAABFAwAAEQAAAMABEABWAAAASwMAABEAAADAARAAVgAAAIoDAAARAAAAwAEQAFYAAACQAwAAEQAAAMABEABWAAAAvAMAACcAAADAARAAVgAAALwDAAAJAAAAwAEQAFYAAAC/AwAACQAAAMABEABWAAAAxgMAABUAAADAARAAVgAAAMkDAAAYAAAAwAEQAFYAAADSAwAACgAAAMABEABWAAAA+AMAAAoAAADAARAAVgAAAAUEAAAVAAAAwAEQAFYAAAANBAAAFgAAAMABEABWAAAAGAQAAAkAAAAvVXNlcnMvZm04MTMvLnJ1c3R1cC90b29sY2hhaW5zL3N0YWJsZS14ODZfNjQtYXBwbGUtZGFyd2luL2xpYi9ydXN0bGliL3NyYy9ydXN0L2xpYnJhcnkvYWxsb2Mvc3JjL3Jhd192ZWMucnNUcmllZCB0byBzaHJpbmsgdG8gYSBsYXJnZXIgY2FwYWNpdHmoAxAAbAAAAMUBAAAJAAAATWF4aW11bSBjb2RlIHNpemUgMTIgcmVxdWlyZWQsIGdvdCAASAQQACMAAAAvVXNlcnMvZm04MTMvLmNhcmdvL3JlZ2lzdHJ5L3NyYy9naXRodWIuY29tLTFlY2M2Mjk5ZGI5ZWM4MjMvd2VlemwtMC4xLjQvc3JjL2xpYi5ycwB0BBAAUwAAAE0AAAAFAAAADwAAAAQAAAAEAAAAEAAAABEAAAASAAAADwAAAAAAAAABAAAAEwAAAGNhbGxlZCBgT3B0aW9uOjp1bndyYXAoKWAgb24gYSBgTm9uZWAgdmFsdWVsaWJyYXJ5L3N0ZC9zcmMvcGFuaWNraW5nLnJzACsFEAAcAAAA7QEAAB8AAAArBRAAHAAAAO4BAAAeAAAAFAAAABAAAAAEAAAAFQAAABYAAAAPAAAACAAAAAQAAAAXAAAAGAAAABkAAAAMAAAABAAAABoAAAAPAAAACAAAAAQAAAAbAAAAbGlicmFyeS9hbGxvYy9zcmMvcmF3X3ZlYy5yc2NhcGFjaXR5IG92ZXJmbG93AAAAsAUQABwAAAAeAgAABQAAAGAuLgDxBRAAAgAAAGNhbGxlZCBgT3B0aW9uOjp1bndyYXAoKWAgb24gYSBgTm9uZWAgdmFsdWU6IAAAAPAFEAAAAAAAJwYQAAIAAAAiAAAAAAAAAAEAAAAjAAAAaW5kZXggb3V0IG9mIGJvdW5kczogdGhlIGxlbiBpcyAgYnV0IHRoZSBpbmRleCBpcyAAAEwGEAAgAAAAbAYQABIAAABsaWJyYXJ5L2NvcmUvc3JjL2ZtdC9idWlsZGVycy5ycyIAAAAMAAAABAAAACQAAAAlAAAAJgAAACAgICCQBhAAIAAAADIAAAAhAAAAkAYQACAAAAAzAAAAEgAAACB7CiwKLCAgeyB9IH1saWJyYXJ5L2NvcmUvc3JjL2ZtdC9udW0ucnP5BhAAGwAAAGUAAAAUAAAAMHgwMDAxMDIwMzA0MDUwNjA3MDgwOTEwMTExMjEzMTQxNTE2MTcxODE5MjAyMTIyMjMyNDI1MjYyNzI4MjkzMDMxMzIzMzM0MzUzNjM3MzgzOTQwNDE0MjQzNDQ0NTQ2NDc0ODQ5NTA1MTUyNTM1NDU1NTY1NzU4NTk2MDYxNjI2MzY0NjU2NjY3Njg2OTcwNzE3MjczNzQ3NTc2Nzc3ODc5ODA4MTgyODM4NDg1ODY4Nzg4ODk5MDkxOTI5Mzk0OTU5Njk3OTg5OQAAIgAAAAQAAAAEAAAAJwAAACgAAAApAAAAbGlicmFyeS9jb3JlL3NyYy9mbXQvbW9kLnJzAAgIEAAbAAAAVQQAABEAAAAICBAAGwAAAF8EAAAkAAAAKClsaWJyYXJ5L2NvcmUvc3JjL3NsaWNlL21lbWNoci5ycwAARggQACAAAABaAAAABQAAAHJhbmdlIHN0YXJ0IGluZGV4ICBvdXQgb2YgcmFuZ2UgZm9yIHNsaWNlIG9mIGxlbmd0aCB4CBAAEgAAAIoIEAAiAAAAcmFuZ2UgZW5kIGluZGV4ILwIEAAQAAAAiggQACIAAABzbGljZSBpbmRleCBzdGFydHMgYXQgIGJ1dCBlbmRzIGF0IADcCBAAFgAAAPIIEAANAAAAbGlicmFyeS9jb3JlL3NyYy9zdHIvcGF0dGVybi5ycwAQCRAAHwAAALABAAAmAAAAWy4uLl1ieXRlIGluZGV4ICBpcyBvdXQgb2YgYm91bmRzIG9mIGAAAEUJEAALAAAAUAkQABYAAADwBRAAAQAAAGJlZ2luIDw9IGVuZCAoIDw9ICkgd2hlbiBzbGljaW5nIGAAAIAJEAAOAAAAjgkQAAQAAACSCRAAEAAAAPAFEAABAAAAIGlzIG5vdCBhIGNoYXIgYm91bmRhcnk7IGl0IGlzIGluc2lkZSAgKGJ5dGVzICkgb2YgYEUJEAALAAAAxAkQACYAAADqCRAACAAAAPIJEAAGAAAA8AUQAAEAAABsaWJyYXJ5L2NvcmUvc3JjL3VuaWNvZGUvcHJpbnRhYmxlLnJzAAAAIAoQACUAAAAKAAAAHAAAACAKEAAlAAAAGgAAADYAAAAAAQMFBQYGAwcGCAgJEQocCxkMFA0QDg0PBBADEhITCRYBFwUYAhkDGgccAh0BHxYgAysDLAItCy4BMAMxAjIBpwKpAqoEqwj6AvsF/QT+A/8JrXh5i42iMFdYi4yQHB3dDg9LTPv8Li8/XF1fteKEjY6RkqmxurvFxsnK3uTl/wAEERIpMTQ3Ojs9SUpdhI6SqbG0urvGys7P5OUABA0OERIpMTQ6O0VGSUpeZGWEkZudyc7PDREpRUlXZGWNkam0urvFyd/k5fANEUVJZGWAhLK8vr/V1/Dxg4WLpKa+v8XHzs/a20iYvc3Gzs9JTk9XWV5fiY6Psba3v8HGx9cRFhdbXPb3/v+ADW1x3t8ODx9ubxwdX31+rq+7vPoWFx4fRkdOT1haXF5+f7XF1NXc8PH1cnOPdHWWL18mLi+nr7e/x8/X35pAl5gwjx/Awc7/Tk9aWwcIDxAnL+7vbm83PT9CRZCR/v9TZ3XIydDR2Nnn/v8AIF8igt8EgkQIGwQGEYGsDoCrNSgLgOADGQgBBC8ENAQHAwEHBgcRClAPEgdVBwMEHAoJAwgDBwMCAwMDDAQFAwsGAQ4VBToDEQcGBRAHVwcCBxUNUARDAy0DAQQRBg8MOgQdJV8gbQRqJYDIBYKwAxoGgv0DWQcVCxcJFAwUDGoGCgYaBlkHKwVGCiwEDAQBAzELLAQaBgsDgKwGCgYhP0wELQN0CDwDDwM8BzgIKwWC/xEYCC8RLQMgECEPgIwEgpcZCxWIlAUvBTsHAg4YCYCzLXQMgNYaDAWA/wWA3wzuDQOEjQM3CYFcFIC4CIDLKjgDCgY4CEYIDAZ0Cx4DWgRZCYCDGBwKFglMBICKBqukDBcEMaEEgdomBwwFBYClEYFtEHgoKgZMBICNBIC+AxsDDw0ABgEBAwEEAggICQIKBQsCDgQQARECEgUTERQBFQIXAhkNHAUdCCQBagNrArwC0QLUDNUJ1gLXAtoB4AXhAugC7iDwBPgC+QL6AvsBDCc7Pk5Pj56enwYHCTY9Plbz0NEEFBg2N1ZXf6qur7014BKHiY6eBA0OERIpMTQ6RUZJSk5PZGVctrcbHAcICgsUFzY5Oqip2NkJN5CRqAcKOz5maY+Sb1/u71pimpsnKFWdoKGjpKeorbq8xAYLDBUdOj9FUaanzM2gBxkaIiU+P8XGBCAjJSYoMzg6SEpMUFNVVlhaXF5gY2Vma3N4fX+KpKqvsMDQrq95zG5vk14iewUDBC0DZgMBLy6Agh0DMQ8cBCQJHgUrBUQEDiqAqgYkBCQEKAg0CwGAkIE3CRYKCICYOQNjCAkwFgUhAxsFAUA4BEsFLwQKBwkHQCAnBAwJNgM6BRoHBAwHUEk3Mw0zBy4ICoEmUk4oCCpWHBQXCU4EHg9DDhkHCgZICCcJdQs/QSoGOwUKBlEGAQUQAwWAi2IeSAgKgKZeIkULCgYNEzkHCjYsBBCAwDxkUwxICQpGRRtICFMdOYEHRgodA0dJNwMOCAoGOQcKgTYZgLcBDzINg5tmdQuAxIq8hC+P0YJHobmCOQcqBAJgJgpGCigFE4KwW2VLBDkHEUAFCwIOl/gIhNYqCaL3gR8xAxEECIGMiQRrBQ0DCQcQk2CA9gpzCG4XRoCaFAxXCRmAh4FHA4VCDxWFUCuA1S0DGgQCgXA6BQGFAIDXKUwECgQCgxFETD2AwjwGAQRVBRs0AoEOLARkDFYKgK44HQ0sBAkHAg4GgJqD2AgNAw0DdAxZBwwUDAQ4CAoGKAgiToFUDBUDAwUHCRkHBwkDDQcpgMslCoQGbGlicmFyeS9jb3JlL3NyYy91bmljb2RlL3VuaWNvZGVfZGF0YS5ycwCvDxAAKAAAAEsAAAAoAAAArw8QACgAAABXAAAAFgAAAK8PEAAoAAAAUgAAAD4AAAAiAAAABAAAAAQAAAAqAAAAAAMAAIMEIACRBWAAXROgABIXoB4MIOAe7ywgKyowoCtvpmAsAqjgLB774C0A/qA1nv/gNf0BYTYBCqE2JA1hN6sO4TgvGCE5MBxhRvMeoUrwamFOT2+hTp28IU9l0eFPANohUADg4VEw4WFT7OKhVNDo4VQgAC5V8AG/VQBwAAcALQEBAQIBAgEBSAswFRABZQcCBgICAQQjAR4bWws6CQkBGAQBCQEDAQUrA3cPASA3AQEBBAgEAQMHCgIdAToBAQECBAgBCQEKAhoBAgI5AQQCBAICAwMBHgIDAQsCOQEEBQECBAEUAhYGAQE6AQECAQQIAQcDCgIeATsBAQEMAQkBKAEDATkDBQMBBAcCCwIdAToBAgECAQMBBQIHAgsCHAI5AgEBAgQIAQkBCgIdAUgBBAECAwEBCAFRAQIHDAhiAQIJCwZKAhsBAQEBATcOAQUBAgULASQJAWYEAQYBAgICGQIEAxAEDQECAgYBDwEAAwADHQMdAh4CQAIBBwgBAgsJAS0DdwIiAXYDBAIJAQYD2wICAToBAQcBAQEBAggGCgIBMBE/BDAHAQEFASgJDAIgBAICAQM4AQECAwEBAzoIAgKYAwENAQcEAQYBAwLGOgEFAAHDIQADjQFgIAAGaQIABAEKIAJQAgABAwEEARkCBQGXAhoSDQEmCBkLLgMwAQIEAgInAUMGAgICAgwBCAEvATMBAQMCAgUCAQEqAggB7gECAQQBAAEAEBAQAAIAAeIBlQUAAwECBQQoAwQBpQIABAACmQuwATYPOAMxBAICRQMkBQEIPgEMAjQJCgQCAV8DAgEBAgYBoAEDCBUCOQIBAQEBFgEOBwMFwwgCAwEBFwFRAQIGAQECAQECAQLrAQIEBgIBAhsCVQgCAQECagEBAQIGAQFlAwIEAQUACQEC9QEKAgEBBAGQBAICBAEgCigGAgQIAQkGAgMuDQECAAcBBgEBUhYCBwECAQJ6BgMBAQIBBwEBSAIDAQEBAAIABTsHAAE/BFEBAAIAAQEDBAUICAIHHgSUAwA3BDIIAQ4BFgUBDwAHARECBwECAQUABwAEAAdtBwBggPAATGF5b3V0RXJycHJpdmF0ZQB7CXByb2R1Y2VycwIIbGFuZ3VhZ2UBBFJ1c3QADHByb2Nlc3NlZC1ieQMFcnVzdGMdMS40OS4wIChlMTg4NGE4ZTMgMjAyMC0xMi0yOSkGd2FscnVzBjAuMTguMAx3YXNtLWJpbmRnZW4SMC4yLjcwIChiNjM1NWMyNzAp");let up;async function VW(t,e){up||(up=await(async()=>(await Zy(zW),UW))());const n=up.decompress(t,e);if(n.length===0)throw Error("Failed to decode with LZW decoder.");return n}var Oe;(function(t){t.assertEqual=i=>i;function e(i){}t.assertIs=e;function n(i){throw new Error}t.assertNever=n,t.arrayToEnum=i=>{const s={};for(const o of i)s[o]=o;return s},t.getValidEnumValues=i=>{const s=t.objectKeys(i).filter(a=>typeof i[i[a]]!="number"),o={};for(const a of s)o[a]=i[a];return t.objectValues(o)},t.objectValues=i=>t.objectKeys(i).map(function(s){return i[s]}),t.objectKeys=typeof Object.keys=="function"?i=>Object.keys(i):i=>{const s=[];for(const o in i)Object.prototype.hasOwnProperty.call(i,o)&&s.push(o);return s},t.find=(i,s)=>{for(const o of i)if(s(o))return o},t.isInteger=typeof Number.isInteger=="function"?i=>Number.isInteger(i):i=>typeof i=="number"&&isFinite(i)&&Math.floor(i)===i;function r(i,s=" | "){return i.map(o=>typeof o=="string"?`'${o}'`:o).join(s)}t.joinValues=r,t.jsonStringifyReplacer=(i,s)=>typeof s=="bigint"?s.toString():s})(Oe||(Oe={}));var vI;(function(t){t.mergeShapes=(e,n)=>({...e,...n})})(vI||(vI={}));const ne=Oe.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),zs=t=>{switch(typeof t){case"undefined":return ne.undefined;case"string":return ne.string;case"number":return isNaN(t)?ne.nan:ne.number;case"boolean":return ne.boolean;case"function":return ne.function;case"bigint":return ne.bigint;case"symbol":return ne.symbol;case"object":return Array.isArray(t)?ne.array:t===null?ne.null:t.then&&typeof t.then=="function"&&t.catch&&typeof t.catch=="function"?ne.promise:typeof Map<"u"&&t instanceof Map?ne.map:typeof Set<"u"&&t instanceof Set?ne.set:typeof Date<"u"&&t instanceof Date?ne.date:ne.object;default:return ne.unknown}},q=Oe.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]);class Gr extends Error{constructor(e){super(),this.issues=[],this.addIssue=r=>{this.issues=[...this.issues,r]},this.addIssues=(r=[])=>{this.issues=[...this.issues,...r]};const n=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,n):this.__proto__=n,this.name="ZodError",this.issues=e}get errors(){return this.issues}format(e){const n=e||function(s){return s.message},r={_errors:[]},i=s=>{for(const o of s.issues)if(o.code==="invalid_union")o.unionErrors.map(i);else if(o.code==="invalid_return_type")i(o.returnTypeError);else if(o.code==="invalid_arguments")i(o.argumentsError);else if(o.path.length===0)r._errors.push(n(o));else{let a=r,l=0;for(;l<o.path.length;){const c=o.path[l];l===o.path.length-1?(a[c]=a[c]||{_errors:[]},a[c]._errors.push(n(o))):a[c]=a[c]||{_errors:[]},a=a[c],l++}}};return i(this),r}toString(){return this.message}get message(){return JSON.stringify(this.issues,Oe.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=n=>n.message){const n={},r=[];for(const i of this.issues)i.path.length>0?(n[i.path[0]]=n[i.path[0]]||[],n[i.path[0]].push(e(i))):r.push(e(i));return{formErrors:r,fieldErrors:n}}get formErrors(){return this.flatten()}}Gr.create=t=>new Gr(t);const eh=(t,e)=>{let n;switch(t.code){case q.invalid_type:t.received===ne.undefined?n="Required":n=`Expected ${t.expected}, received ${t.received}`;break;case q.invalid_literal:n=`Invalid literal value, expected ${JSON.stringify(t.expected,Oe.jsonStringifyReplacer)}`;break;case q.unrecognized_keys:n=`Unrecognized key(s) in object: ${Oe.joinValues(t.keys,", ")}`;break;case q.invalid_union:n="Invalid input";break;case q.invalid_union_discriminator:n=`Invalid discriminator value. Expected ${Oe.joinValues(t.options)}`;break;case q.invalid_enum_value:n=`Invalid enum value. Expected ${Oe.joinValues(t.options)}, received '${t.received}'`;break;case q.invalid_arguments:n="Invalid function arguments";break;case q.invalid_return_type:n="Invalid function return type";break;case q.invalid_date:n="Invalid date";break;case q.invalid_string:typeof t.validation=="object"?"includes"in t.validation?(n=`Invalid input: must include "${t.validation.includes}"`,typeof t.validation.position=="number"&&(n=`${n} at one or more positions greater than or equal to ${t.validation.position}`)):"startsWith"in t.validation?n=`Invalid input: must start with "${t.validation.startsWith}"`:"endsWith"in t.validation?n=`Invalid input: must end with "${t.validation.endsWith}"`:Oe.assertNever(t.validation):t.validation!=="regex"?n=`Invalid ${t.validation}`:n="Invalid";break;case q.too_small:t.type==="array"?n=`Array must contain ${t.exact?"exactly":t.inclusive?"at least":"more than"} ${t.minimum} element(s)`:t.type==="string"?n=`String must contain ${t.exact?"exactly":t.inclusive?"at least":"over"} ${t.minimum} character(s)`:t.type==="number"?n=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="date"?n=`Date must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(t.minimum))}`:n="Invalid input";break;case q.too_big:t.type==="array"?n=`Array must contain ${t.exact?"exactly":t.inclusive?"at most":"less than"} ${t.maximum} element(s)`:t.type==="string"?n=`String must contain ${t.exact?"exactly":t.inclusive?"at most":"under"} ${t.maximum} character(s)`:t.type==="number"?n=`Number must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="bigint"?n=`BigInt must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="date"?n=`Date must be ${t.exact?"exactly":t.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(t.maximum))}`:n="Invalid input";break;case q.custom:n="Invalid input";break;case q.invalid_intersection_types:n="Intersection results could not be merged";break;case q.not_multiple_of:n=`Number must be a multiple of ${t.multipleOf}`;break;case q.not_finite:n="Number must be finite";break;default:n=e.defaultError,Oe.assertNever(t)}return{message:n}};let jW=eh;function vm(){return jW}const ym=t=>{const{data:e,path:n,errorMaps:r,issueData:i}=t,s=[...n,...i.path||[]],o={...i,path:s};let a="";const l=r.filter(c=>!!c).slice().reverse();for(const c of l)a=c(o,{data:e,defaultError:a}).message;return{...i,path:s,message:i.message||a}};function se(t,e){const n=ym({issueData:e,data:t.data,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,vm(),eh].filter(r=>!!r)});t.common.issues.push(n)}class un{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,n){const r=[];for(const i of n){if(i.status==="aborted")return Ce;i.status==="dirty"&&e.dirty(),r.push(i.value)}return{status:e.value,value:r}}static async mergeObjectAsync(e,n){const r=[];for(const i of n)r.push({key:await i.key,value:await i.value});return un.mergeObjectSync(e,r)}static mergeObjectSync(e,n){const r={};for(const i of n){const{key:s,value:o}=i;if(s.status==="aborted"||o.status==="aborted")return Ce;s.status==="dirty"&&e.dirty(),o.status==="dirty"&&e.dirty(),s.value!=="__proto__"&&(typeof o.value<"u"||i.alwaysSet)&&(r[s.value]=o.value)}return{status:e.value,value:r}}}const Ce=Object.freeze({status:"aborted"}),HW=t=>({status:"dirty",value:t}),xn=t=>({status:"valid",value:t}),yI=t=>t.status==="aborted",EI=t=>t.status==="dirty",th=t=>t.status==="valid",Em=t=>typeof Promise<"u"&&t instanceof Promise;var de;(function(t){t.errToObj=e=>typeof e=="string"?{message:e}:e||{},t.toString=e=>typeof e=="string"?e:e==null?void 0:e.message})(de||(de={}));class Hr{constructor(e,n,r,i){this._cachedPath=[],this.parent=e,this.data=n,this._path=r,this._key=i}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const _I=(t,e)=>{if(th(e))return{success:!0,data:e.value};if(!t.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const n=new Gr(t.common.issues);return this._error=n,this._error}}};function xe(t){if(!t)return{};const{errorMap:e,invalid_type_error:n,required_error:r,description:i}=t;if(e&&(n||r))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:i}:{errorMap:(o,a)=>o.code!=="invalid_type"?{message:a.defaultError}:typeof a.data>"u"?{message:r??a.defaultError}:{message:n??a.defaultError},description:i}}class Re{constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this)}get description(){return this._def.description}_getType(e){return zs(e.data)}_getOrReturnCtx(e,n){return n||{common:e.parent.common,data:e.data,parsedType:zs(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new un,ctx:{common:e.parent.common,data:e.data,parsedType:zs(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const n=this._parse(e);if(Em(n))throw new Error("Synchronous parse encountered promise.");return n}_parseAsync(e){const n=this._parse(e);return Promise.resolve(n)}parse(e,n){const r=this.safeParse(e,n);if(r.success)return r.data;throw r.error}safeParse(e,n){var r;const i={common:{issues:[],async:(r=n==null?void 0:n.async)!==null&&r!==void 0?r:!1,contextualErrorMap:n==null?void 0:n.errorMap},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:zs(e)},s=this._parseSync({data:e,path:i.path,parent:i});return _I(i,s)}async parseAsync(e,n){const r=await this.safeParseAsync(e,n);if(r.success)return r.data;throw r.error}async safeParseAsync(e,n){const r={common:{issues:[],contextualErrorMap:n==null?void 0:n.errorMap,async:!0},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:zs(e)},i=this._parse({data:e,path:r.path,parent:r}),s=await(Em(i)?i:Promise.resolve(i));return _I(r,s)}refine(e,n){const r=i=>typeof n=="string"||typeof n>"u"?{message:n}:typeof n=="function"?n(i):n;return this._refinement((i,s)=>{const o=e(i),a=()=>s.addIssue({code:q.custom,...r(i)});return typeof Promise<"u"&&o instanceof Promise?o.then(l=>l?!0:(a(),!1)):o?!0:(a(),!1)})}refinement(e,n){return this._refinement((r,i)=>e(r)?!0:(i.addIssue(typeof n=="function"?n(r,i):n),!1))}_refinement(e){return new Ci({schema:this,typeName:pe.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}optional(){return us.create(this,this._def)}nullable(){return Ua.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return zr.create(this,this._def)}promise(){return Nc.create(this,this._def)}or(e){return sh.create([this,e],this._def)}and(e){return oh.create(this,e,this._def)}transform(e){return new Ci({...xe(this._def),schema:this,typeName:pe.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const n=typeof e=="function"?e:()=>e;return new fh({...xe(this._def),innerType:this,defaultValue:n,typeName:pe.ZodDefault})}brand(){return new rY({typeName:pe.ZodBranded,type:this,...xe(this._def)})}catch(e){const n=typeof e=="function"?e:()=>e;return new Sm({...xe(this._def),innerType:this,catchValue:n,typeName:pe.ZodCatch})}describe(e){const n=this.constructor;return new n({...this._def,description:e})}pipe(e){return dg.create(this,e)}readonly(){return Tm.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const WW=/^c[^\s-]{8,}$/i,YW=/^[a-z][a-z0-9]*$/,$W=/^[0-9A-HJKMNP-TV-Z]{26}$/,KW=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,qW=/^(?!\.)(?!.*\.\.)([A-Z0-9_+-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,XW="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let fp;const ZW=/^(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))$/,JW=/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,eY=t=>t.precision?t.offset?new RegExp(`^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\\.\\d{${t.precision}}(([+-]\\d{2}(:?\\d{2})?)|Z)$`):new RegExp(`^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\\.\\d{${t.precision}}Z$`):t.precision===0?t.offset?new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(([+-]\\d{2}(:?\\d{2})?)|Z)$"):new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}Z$"):t.offset?new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(\\.\\d+)?(([+-]\\d{2}(:?\\d{2})?)|Z)$"):new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(\\.\\d+)?Z$");function tY(t,e){return!!((e==="v4"||!e)&&ZW.test(t)||(e==="v6"||!e)&&JW.test(t))}class kr extends Re{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==ne.string){const s=this._getOrReturnCtx(e);return se(s,{code:q.invalid_type,expected:ne.string,received:s.parsedType}),Ce}const r=new un;let i;for(const s of this._def.checks)if(s.kind==="min")e.data.length<s.value&&(i=this._getOrReturnCtx(e,i),se(i,{code:q.too_small,minimum:s.value,type:"string",inclusive:!0,exact:!1,message:s.message}),r.dirty());else if(s.kind==="max")e.data.length>s.value&&(i=this._getOrReturnCtx(e,i),se(i,{code:q.too_big,maximum:s.value,type:"string",inclusive:!0,exact:!1,message:s.message}),r.dirty());else if(s.kind==="length"){const o=e.data.length>s.value,a=e.data.length<s.value;(o||a)&&(i=this._getOrReturnCtx(e,i),o?se(i,{code:q.too_big,maximum:s.value,type:"string",inclusive:!0,exact:!0,message:s.message}):a&&se(i,{code:q.too_small,minimum:s.value,type:"string",inclusive:!0,exact:!0,message:s.message}),r.dirty())}else if(s.kind==="email")qW.test(e.data)||(i=this._getOrReturnCtx(e,i),se(i,{validation:"email",code:q.invalid_string,message:s.message}),r.dirty());else if(s.kind==="emoji")fp||(fp=new RegExp(XW,"u")),fp.test(e.data)||(i=this._getOrReturnCtx(e,i),se(i,{validation:"emoji",code:q.invalid_string,message:s.message}),r.dirty());else if(s.kind==="uuid")KW.test(e.data)||(i=this._getOrReturnCtx(e,i),se(i,{validation:"uuid",code:q.invalid_string,message:s.message}),r.dirty());else if(s.kind==="cuid")WW.test(e.data)||(i=this._getOrReturnCtx(e,i),se(i,{validation:"cuid",code:q.invalid_string,message:s.message}),r.dirty());else if(s.kind==="cuid2")YW.test(e.data)||(i=this._getOrReturnCtx(e,i),se(i,{validation:"cuid2",code:q.invalid_string,message:s.message}),r.dirty());else if(s.kind==="ulid")$W.test(e.data)||(i=this._getOrReturnCtx(e,i),se(i,{validation:"ulid",code:q.invalid_string,message:s.message}),r.dirty());else if(s.kind==="url")try{new URL(e.data)}catch{i=this._getOrReturnCtx(e,i),se(i,{validation:"url",code:q.invalid_string,message:s.message}),r.dirty()}else s.kind==="regex"?(s.regex.lastIndex=0,s.regex.test(e.data)||(i=this._getOrReturnCtx(e,i),se(i,{validation:"regex",code:q.invalid_string,message:s.message}),r.dirty())):s.kind==="trim"?e.data=e.data.trim():s.kind==="includes"?e.data.includes(s.value,s.position)||(i=this._getOrReturnCtx(e,i),se(i,{code:q.invalid_string,validation:{includes:s.value,position:s.position},message:s.message}),r.dirty()):s.kind==="toLowerCase"?e.data=e.data.toLowerCase():s.kind==="toUpperCase"?e.data=e.data.toUpperCase():s.kind==="startsWith"?e.data.startsWith(s.value)||(i=this._getOrReturnCtx(e,i),se(i,{code:q.invalid_string,validation:{startsWith:s.value},message:s.message}),r.dirty()):s.kind==="endsWith"?e.data.endsWith(s.value)||(i=this._getOrReturnCtx(e,i),se(i,{code:q.invalid_string,validation:{endsWith:s.value},message:s.message}),r.dirty()):s.kind==="datetime"?eY(s).test(e.data)||(i=this._getOrReturnCtx(e,i),se(i,{code:q.invalid_string,validation:"datetime",message:s.message}),r.dirty()):s.kind==="ip"?tY(e.data,s.version)||(i=this._getOrReturnCtx(e,i),se(i,{validation:"ip",code:q.invalid_string,message:s.message}),r.dirty()):Oe.assertNever(s);return{status:r.value,value:e.data}}_regex(e,n,r){return this.refinement(i=>e.test(i),{validation:n,code:q.invalid_string,...de.errToObj(r)})}_addCheck(e){return new kr({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...de.errToObj(e)})}url(e){return this._addCheck({kind:"url",...de.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...de.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...de.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...de.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...de.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...de.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...de.errToObj(e)})}datetime(e){var n;return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,offset:(n=e==null?void 0:e.offset)!==null&&n!==void 0?n:!1,...de.errToObj(e==null?void 0:e.message)})}regex(e,n){return this._addCheck({kind:"regex",regex:e,...de.errToObj(n)})}includes(e,n){return this._addCheck({kind:"includes",value:e,position:n==null?void 0:n.position,...de.errToObj(n==null?void 0:n.message)})}startsWith(e,n){return this._addCheck({kind:"startsWith",value:e,...de.errToObj(n)})}endsWith(e,n){return this._addCheck({kind:"endsWith",value:e,...de.errToObj(n)})}min(e,n){return this._addCheck({kind:"min",value:e,...de.errToObj(n)})}max(e,n){return this._addCheck({kind:"max",value:e,...de.errToObj(n)})}length(e,n){return this._addCheck({kind:"length",value:e,...de.errToObj(n)})}nonempty(e){return this.min(1,de.errToObj(e))}trim(){return new kr({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new kr({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new kr({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get minLength(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxLength(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}}kr.create=t=>{var e;return new kr({checks:[],typeName:pe.ZodString,coerce:(e=t==null?void 0:t.coerce)!==null&&e!==void 0?e:!1,...xe(t)})};function nY(t,e){const n=(t.toString().split(".")[1]||"").length,r=(e.toString().split(".")[1]||"").length,i=n>r?n:r,s=parseInt(t.toFixed(i).replace(".","")),o=parseInt(e.toFixed(i).replace(".",""));return s%o/Math.pow(10,i)}class Ao extends Re{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==ne.number){const s=this._getOrReturnCtx(e);return se(s,{code:q.invalid_type,expected:ne.number,received:s.parsedType}),Ce}let r;const i=new un;for(const s of this._def.checks)s.kind==="int"?Oe.isInteger(e.data)||(r=this._getOrReturnCtx(e,r),se(r,{code:q.invalid_type,expected:"integer",received:"float",message:s.message}),i.dirty()):s.kind==="min"?(s.inclusive?e.data<s.value:e.data<=s.value)&&(r=this._getOrReturnCtx(e,r),se(r,{code:q.too_small,minimum:s.value,type:"number",inclusive:s.inclusive,exact:!1,message:s.message}),i.dirty()):s.kind==="max"?(s.inclusive?e.data>s.value:e.data>=s.value)&&(r=this._getOrReturnCtx(e,r),se(r,{code:q.too_big,maximum:s.value,type:"number",inclusive:s.inclusive,exact:!1,message:s.message}),i.dirty()):s.kind==="multipleOf"?nY(e.data,s.value)!==0&&(r=this._getOrReturnCtx(e,r),se(r,{code:q.not_multiple_of,multipleOf:s.value,message:s.message}),i.dirty()):s.kind==="finite"?Number.isFinite(e.data)||(r=this._getOrReturnCtx(e,r),se(r,{code:q.not_finite,message:s.message}),i.dirty()):Oe.assertNever(s);return{status:i.value,value:e.data}}gte(e,n){return this.setLimit("min",e,!0,de.toString(n))}gt(e,n){return this.setLimit("min",e,!1,de.toString(n))}lte(e,n){return this.setLimit("max",e,!0,de.toString(n))}lt(e,n){return this.setLimit("max",e,!1,de.toString(n))}setLimit(e,n,r,i){return new Ao({...this._def,checks:[...this._def.checks,{kind:e,value:n,inclusive:r,message:de.toString(i)}]})}_addCheck(e){return new Ao({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:de.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:de.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:de.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:de.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:de.toString(e)})}multipleOf(e,n){return this._addCheck({kind:"multipleOf",value:e,message:de.toString(n)})}finite(e){return this._addCheck({kind:"finite",message:de.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:de.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:de.toString(e)})}get minValue(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxValue(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&Oe.isInteger(e.value))}get isFinite(){let e=null,n=null;for(const r of this._def.checks){if(r.kind==="finite"||r.kind==="int"||r.kind==="multipleOf")return!0;r.kind==="min"?(n===null||r.value>n)&&(n=r.value):r.kind==="max"&&(e===null||r.value<e)&&(e=r.value)}return Number.isFinite(n)&&Number.isFinite(e)}}Ao.create=t=>new Ao({checks:[],typeName:pe.ZodNumber,coerce:(t==null?void 0:t.coerce)||!1,...xe(t)});class po extends Re{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce&&(e.data=BigInt(e.data)),this._getType(e)!==ne.bigint){const s=this._getOrReturnCtx(e);return se(s,{code:q.invalid_type,expected:ne.bigint,received:s.parsedType}),Ce}let r;const i=new un;for(const s of this._def.checks)s.kind==="min"?(s.inclusive?e.data<s.value:e.data<=s.value)&&(r=this._getOrReturnCtx(e,r),se(r,{code:q.too_small,type:"bigint",minimum:s.value,inclusive:s.inclusive,message:s.message}),i.dirty()):s.kind==="max"?(s.inclusive?e.data>s.value:e.data>=s.value)&&(r=this._getOrReturnCtx(e,r),se(r,{code:q.too_big,type:"bigint",maximum:s.value,inclusive:s.inclusive,message:s.message}),i.dirty()):s.kind==="multipleOf"?e.data%s.value!==BigInt(0)&&(r=this._getOrReturnCtx(e,r),se(r,{code:q.not_multiple_of,multipleOf:s.value,message:s.message}),i.dirty()):Oe.assertNever(s);return{status:i.value,value:e.data}}gte(e,n){return this.setLimit("min",e,!0,de.toString(n))}gt(e,n){return this.setLimit("min",e,!1,de.toString(n))}lte(e,n){return this.setLimit("max",e,!0,de.toString(n))}lt(e,n){return this.setLimit("max",e,!1,de.toString(n))}setLimit(e,n,r,i){return new po({...this._def,checks:[...this._def.checks,{kind:e,value:n,inclusive:r,message:de.toString(i)}]})}_addCheck(e){return new po({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:de.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:de.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:de.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:de.toString(e)})}multipleOf(e,n){return this._addCheck({kind:"multipleOf",value:e,message:de.toString(n)})}get minValue(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxValue(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}}po.create=t=>{var e;return new po({checks:[],typeName:pe.ZodBigInt,coerce:(e=t==null?void 0:t.coerce)!==null&&e!==void 0?e:!1,...xe(t)})};class nh extends Re{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==ne.boolean){const r=this._getOrReturnCtx(e);return se(r,{code:q.invalid_type,expected:ne.boolean,received:r.parsedType}),Ce}return xn(e.data)}}nh.create=t=>new nh({typeName:pe.ZodBoolean,coerce:(t==null?void 0:t.coerce)||!1,...xe(t)});class Qa extends Re{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==ne.date){const s=this._getOrReturnCtx(e);return se(s,{code:q.invalid_type,expected:ne.date,received:s.parsedType}),Ce}if(isNaN(e.data.getTime())){const s=this._getOrReturnCtx(e);return se(s,{code:q.invalid_date}),Ce}const r=new un;let i;for(const s of this._def.checks)s.kind==="min"?e.data.getTime()<s.value&&(i=this._getOrReturnCtx(e,i),se(i,{code:q.too_small,message:s.message,inclusive:!0,exact:!1,minimum:s.value,type:"date"}),r.dirty()):s.kind==="max"?e.data.getTime()>s.value&&(i=this._getOrReturnCtx(e,i),se(i,{code:q.too_big,message:s.message,inclusive:!0,exact:!1,maximum:s.value,type:"date"}),r.dirty()):Oe.assertNever(s);return{status:r.value,value:new Date(e.data.getTime())}}_addCheck(e){return new Qa({...this._def,checks:[...this._def.checks,e]})}min(e,n){return this._addCheck({kind:"min",value:e.getTime(),message:de.toString(n)})}max(e,n){return this._addCheck({kind:"max",value:e.getTime(),message:de.toString(n)})}get minDate(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e!=null?new Date(e):null}}Qa.create=t=>new Qa({checks:[],coerce:(t==null?void 0:t.coerce)||!1,typeName:pe.ZodDate,...xe(t)});class _m extends Re{_parse(e){if(this._getType(e)!==ne.symbol){const r=this._getOrReturnCtx(e);return se(r,{code:q.invalid_type,expected:ne.symbol,received:r.parsedType}),Ce}return xn(e.data)}}_m.create=t=>new _m({typeName:pe.ZodSymbol,...xe(t)});class rh extends Re{_parse(e){if(this._getType(e)!==ne.undefined){const r=this._getOrReturnCtx(e);return se(r,{code:q.invalid_type,expected:ne.undefined,received:r.parsedType}),Ce}return xn(e.data)}}rh.create=t=>new rh({typeName:pe.ZodUndefined,...xe(t)});class ih extends Re{_parse(e){if(this._getType(e)!==ne.null){const r=this._getOrReturnCtx(e);return se(r,{code:q.invalid_type,expected:ne.null,received:r.parsedType}),Ce}return xn(e.data)}}ih.create=t=>new ih({typeName:pe.ZodNull,...xe(t)});class xm extends Re{constructor(){super(...arguments),this._any=!0}_parse(e){return xn(e.data)}}xm.create=t=>new xm({typeName:pe.ZodAny,...xe(t)});class _a extends Re{constructor(){super(...arguments),this._unknown=!0}_parse(e){return xn(e.data)}}_a.create=t=>new _a({typeName:pe.ZodUnknown,...xe(t)});class ys extends Re{_parse(e){const n=this._getOrReturnCtx(e);return se(n,{code:q.invalid_type,expected:ne.never,received:n.parsedType}),Ce}}ys.create=t=>new ys({typeName:pe.ZodNever,...xe(t)});class Cm extends Re{_parse(e){if(this._getType(e)!==ne.undefined){const r=this._getOrReturnCtx(e);return se(r,{code:q.invalid_type,expected:ne.void,received:r.parsedType}),Ce}return xn(e.data)}}Cm.create=t=>new Cm({typeName:pe.ZodVoid,...xe(t)});class zr extends Re{_parse(e){const{ctx:n,status:r}=this._processInputParams(e),i=this._def;if(n.parsedType!==ne.array)return se(n,{code:q.invalid_type,expected:ne.array,received:n.parsedType}),Ce;if(i.exactLength!==null){const o=n.data.length>i.exactLength.value,a=n.data.length<i.exactLength.value;(o||a)&&(se(n,{code:o?q.too_big:q.too_small,minimum:a?i.exactLength.value:void 0,maximum:o?i.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:i.exactLength.message}),r.dirty())}if(i.minLength!==null&&n.data.length<i.minLength.value&&(se(n,{code:q.too_small,minimum:i.minLength.value,type:"array",inclusive:!0,exact:!1,message:i.minLength.message}),r.dirty()),i.maxLength!==null&&n.data.length>i.maxLength.value&&(se(n,{code:q.too_big,maximum:i.maxLength.value,type:"array",inclusive:!0,exact:!1,message:i.maxLength.message}),r.dirty()),n.common.async)return Promise.all([...n.data].map((o,a)=>i.type._parseAsync(new Hr(n,o,n.path,a)))).then(o=>un.mergeArray(r,o));const s=[...n.data].map((o,a)=>i.type._parseSync(new Hr(n,o,n.path,a)));return un.mergeArray(r,s)}get element(){return this._def.type}min(e,n){return new zr({...this._def,minLength:{value:e,message:de.toString(n)}})}max(e,n){return new zr({...this._def,maxLength:{value:e,message:de.toString(n)}})}length(e,n){return new zr({...this._def,exactLength:{value:e,message:de.toString(n)}})}nonempty(e){return this.min(1,e)}}zr.create=(t,e)=>new zr({type:t,minLength:null,maxLength:null,exactLength:null,typeName:pe.ZodArray,...xe(e)});function Ho(t){if(t instanceof pt){const e={};for(const n in t.shape){const r=t.shape[n];e[n]=us.create(Ho(r))}return new pt({...t._def,shape:()=>e})}else return t instanceof zr?new zr({...t._def,type:Ho(t.element)}):t instanceof us?us.create(Ho(t.unwrap())):t instanceof Ua?Ua.create(Ho(t.unwrap())):t instanceof xi?xi.create(t.items.map(e=>Ho(e))):t}class pt extends Re{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const e=this._def.shape(),n=Oe.objectKeys(e);return this._cached={shape:e,keys:n}}_parse(e){if(this._getType(e)!==ne.object){const c=this._getOrReturnCtx(e);return se(c,{code:q.invalid_type,expected:ne.object,received:c.parsedType}),Ce}const{status:r,ctx:i}=this._processInputParams(e),{shape:s,keys:o}=this._getCached(),a=[];if(!(this._def.catchall instanceof ys&&this._def.unknownKeys==="strip"))for(const c in i.data)o.includes(c)||a.push(c);const l=[];for(const c of o){const u=s[c],f=i.data[c];l.push({key:{status:"valid",value:c},value:u._parse(new Hr(i,f,i.path,c)),alwaysSet:c in i.data})}if(this._def.catchall instanceof ys){const c=this._def.unknownKeys;if(c==="passthrough")for(const u of a)l.push({key:{status:"valid",value:u},value:{status:"valid",value:i.data[u]}});else if(c==="strict")a.length>0&&(se(i,{code:q.unrecognized_keys,keys:a}),r.dirty());else if(c!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const c=this._def.catchall;for(const u of a){const f=i.data[u];l.push({key:{status:"valid",value:u},value:c._parse(new Hr(i,f,i.path,u)),alwaysSet:u in i.data})}}return i.common.async?Promise.resolve().then(async()=>{const c=[];for(const u of l){const f=await u.key;c.push({key:f,value:await u.value,alwaysSet:u.alwaysSet})}return c}).then(c=>un.mergeObjectSync(r,c)):un.mergeObjectSync(r,l)}get shape(){return this._def.shape()}strict(e){return de.errToObj,new pt({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(n,r)=>{var i,s,o,a;const l=(o=(s=(i=this._def).errorMap)===null||s===void 0?void 0:s.call(i,n,r).message)!==null&&o!==void 0?o:r.defaultError;return n.code==="unrecognized_keys"?{message:(a=de.errToObj(e).message)!==null&&a!==void 0?a:l}:{message:l}}}:{}})}strip(){return new pt({...this._def,unknownKeys:"strip"})}passthrough(){return new pt({...this._def,unknownKeys:"passthrough"})}extend(e){return new pt({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new pt({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:pe.ZodObject})}setKey(e,n){return this.augment({[e]:n})}catchall(e){return new pt({...this._def,catchall:e})}pick(e){const n={};return Oe.objectKeys(e).forEach(r=>{e[r]&&this.shape[r]&&(n[r]=this.shape[r])}),new pt({...this._def,shape:()=>n})}omit(e){const n={};return Oe.objectKeys(this.shape).forEach(r=>{e[r]||(n[r]=this.shape[r])}),new pt({...this._def,shape:()=>n})}deepPartial(){return Ho(this)}partial(e){const n={};return Oe.objectKeys(this.shape).forEach(r=>{const i=this.shape[r];e&&!e[r]?n[r]=i:n[r]=i.optional()}),new pt({...this._def,shape:()=>n})}required(e){const n={};return Oe.objectKeys(this.shape).forEach(r=>{if(e&&!e[r])n[r]=this.shape[r];else{let s=this.shape[r];for(;s instanceof us;)s=s._def.innerType;n[r]=s}}),new pt({...this._def,shape:()=>n})}keyof(){return O3(Oe.objectKeys(this.shape))}}pt.create=(t,e)=>new pt({shape:()=>t,unknownKeys:"strip",catchall:ys.create(),typeName:pe.ZodObject,...xe(e)});pt.strictCreate=(t,e)=>new pt({shape:()=>t,unknownKeys:"strict",catchall:ys.create(),typeName:pe.ZodObject,...xe(e)});pt.lazycreate=(t,e)=>new pt({shape:t,unknownKeys:"strip",catchall:ys.create(),typeName:pe.ZodObject,...xe(e)});class sh extends Re{_parse(e){const{ctx:n}=this._processInputParams(e),r=this._def.options;function i(s){for(const a of s)if(a.result.status==="valid")return a.result;for(const a of s)if(a.result.status==="dirty")return n.common.issues.push(...a.ctx.common.issues),a.result;const o=s.map(a=>new Gr(a.ctx.common.issues));return se(n,{code:q.invalid_union,unionErrors:o}),Ce}if(n.common.async)return Promise.all(r.map(async s=>{const o={...n,common:{...n.common,issues:[]},parent:null};return{result:await s._parseAsync({data:n.data,path:n.path,parent:o}),ctx:o}})).then(i);{let s;const o=[];for(const l of r){const c={...n,common:{...n.common,issues:[]},parent:null},u=l._parseSync({data:n.data,path:n.path,parent:c});if(u.status==="valid")return u;u.status==="dirty"&&!s&&(s={result:u,ctx:c}),c.common.issues.length&&o.push(c.common.issues)}if(s)return n.common.issues.push(...s.ctx.common.issues),s.result;const a=o.map(l=>new Gr(l));return se(n,{code:q.invalid_union,unionErrors:a}),Ce}}get options(){return this._def.options}}sh.create=(t,e)=>new sh({options:t,typeName:pe.ZodUnion,...xe(e)});const nd=t=>t instanceof lh?nd(t.schema):t instanceof Ci?nd(t.innerType()):t instanceof ch?[t.value]:t instanceof mo?t.options:t instanceof uh?Object.keys(t.enum):t instanceof fh?nd(t._def.innerType):t instanceof rh?[void 0]:t instanceof ih?[null]:null;class Jy extends Re{_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==ne.object)return se(n,{code:q.invalid_type,expected:ne.object,received:n.parsedType}),Ce;const r=this.discriminator,i=n.data[r],s=this.optionsMap.get(i);return s?n.common.async?s._parseAsync({data:n.data,path:n.path,parent:n}):s._parseSync({data:n.data,path:n.path,parent:n}):(se(n,{code:q.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[r]}),Ce)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,n,r){const i=new Map;for(const s of n){const o=nd(s.shape[e]);if(!o)throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(const a of o){if(i.has(a))throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(a)}`);i.set(a,s)}}return new Jy({typeName:pe.ZodDiscriminatedUnion,discriminator:e,options:n,optionsMap:i,...xe(r)})}}function Im(t,e){const n=zs(t),r=zs(e);if(t===e)return{valid:!0,data:t};if(n===ne.object&&r===ne.object){const i=Oe.objectKeys(e),s=Oe.objectKeys(t).filter(a=>i.indexOf(a)!==-1),o={...t,...e};for(const a of s){const l=Im(t[a],e[a]);if(!l.valid)return{valid:!1};o[a]=l.data}return{valid:!0,data:o}}else if(n===ne.array&&r===ne.array){if(t.length!==e.length)return{valid:!1};const i=[];for(let s=0;s<t.length;s++){const o=t[s],a=e[s],l=Im(o,a);if(!l.valid)return{valid:!1};i.push(l.data)}return{valid:!0,data:i}}else return n===ne.date&&r===ne.date&&+t==+e?{valid:!0,data:t}:{valid:!1}}class oh extends Re{_parse(e){const{status:n,ctx:r}=this._processInputParams(e),i=(s,o)=>{if(yI(s)||yI(o))return Ce;const a=Im(s.value,o.value);return a.valid?((EI(s)||EI(o))&&n.dirty(),{status:n.value,value:a.data}):(se(r,{code:q.invalid_intersection_types}),Ce)};return r.common.async?Promise.all([this._def.left._parseAsync({data:r.data,path:r.path,parent:r}),this._def.right._parseAsync({data:r.data,path:r.path,parent:r})]).then(([s,o])=>i(s,o)):i(this._def.left._parseSync({data:r.data,path:r.path,parent:r}),this._def.right._parseSync({data:r.data,path:r.path,parent:r}))}}oh.create=(t,e,n)=>new oh({left:t,right:e,typeName:pe.ZodIntersection,...xe(n)});class xi extends Re{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==ne.array)return se(r,{code:q.invalid_type,expected:ne.array,received:r.parsedType}),Ce;if(r.data.length<this._def.items.length)return se(r,{code:q.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),Ce;!this._def.rest&&r.data.length>this._def.items.length&&(se(r,{code:q.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),n.dirty());const s=[...r.data].map((o,a)=>{const l=this._def.items[a]||this._def.rest;return l?l._parse(new Hr(r,o,r.path,a)):null}).filter(o=>!!o);return r.common.async?Promise.all(s).then(o=>un.mergeArray(n,o)):un.mergeArray(n,s)}get items(){return this._def.items}rest(e){return new xi({...this._def,rest:e})}}xi.create=(t,e)=>{if(!Array.isArray(t))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new xi({items:t,typeName:pe.ZodTuple,rest:null,...xe(e)})};class ah extends Re{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==ne.object)return se(r,{code:q.invalid_type,expected:ne.object,received:r.parsedType}),Ce;const i=[],s=this._def.keyType,o=this._def.valueType;for(const a in r.data)i.push({key:s._parse(new Hr(r,a,r.path,a)),value:o._parse(new Hr(r,r.data[a],r.path,a))});return r.common.async?un.mergeObjectAsync(n,i):un.mergeObjectSync(n,i)}get element(){return this._def.valueType}static create(e,n,r){return n instanceof Re?new ah({keyType:e,valueType:n,typeName:pe.ZodRecord,...xe(r)}):new ah({keyType:kr.create(),valueType:e,typeName:pe.ZodRecord,...xe(n)})}}class wm extends Re{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==ne.map)return se(r,{code:q.invalid_type,expected:ne.map,received:r.parsedType}),Ce;const i=this._def.keyType,s=this._def.valueType,o=[...r.data.entries()].map(([a,l],c)=>({key:i._parse(new Hr(r,a,r.path,[c,"key"])),value:s._parse(new Hr(r,l,r.path,[c,"value"]))}));if(r.common.async){const a=new Map;return Promise.resolve().then(async()=>{for(const l of o){const c=await l.key,u=await l.value;if(c.status==="aborted"||u.status==="aborted")return Ce;(c.status==="dirty"||u.status==="dirty")&&n.dirty(),a.set(c.value,u.value)}return{status:n.value,value:a}})}else{const a=new Map;for(const l of o){const c=l.key,u=l.value;if(c.status==="aborted"||u.status==="aborted")return Ce;(c.status==="dirty"||u.status==="dirty")&&n.dirty(),a.set(c.value,u.value)}return{status:n.value,value:a}}}}wm.create=(t,e,n)=>new wm({valueType:e,keyType:t,typeName:pe.ZodMap,...xe(n)});class Fa extends Re{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==ne.set)return se(r,{code:q.invalid_type,expected:ne.set,received:r.parsedType}),Ce;const i=this._def;i.minSize!==null&&r.data.size<i.minSize.value&&(se(r,{code:q.too_small,minimum:i.minSize.value,type:"set",inclusive:!0,exact:!1,message:i.minSize.message}),n.dirty()),i.maxSize!==null&&r.data.size>i.maxSize.value&&(se(r,{code:q.too_big,maximum:i.maxSize.value,type:"set",inclusive:!0,exact:!1,message:i.maxSize.message}),n.dirty());const s=this._def.valueType;function o(l){const c=new Set;for(const u of l){if(u.status==="aborted")return Ce;u.status==="dirty"&&n.dirty(),c.add(u.value)}return{status:n.value,value:c}}const a=[...r.data.values()].map((l,c)=>s._parse(new Hr(r,l,r.path,c)));return r.common.async?Promise.all(a).then(l=>o(l)):o(a)}min(e,n){return new Fa({...this._def,minSize:{value:e,message:de.toString(n)}})}max(e,n){return new Fa({...this._def,maxSize:{value:e,message:de.toString(n)}})}size(e,n){return this.min(e,n).max(e,n)}nonempty(e){return this.min(1,e)}}Fa.create=(t,e)=>new Fa({valueType:t,minSize:null,maxSize:null,typeName:pe.ZodSet,...xe(e)});class rc extends Re{constructor(){super(...arguments),this.validate=this.implement}_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==ne.function)return se(n,{code:q.invalid_type,expected:ne.function,received:n.parsedType}),Ce;function r(a,l){return ym({data:a,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,vm(),eh].filter(c=>!!c),issueData:{code:q.invalid_arguments,argumentsError:l}})}function i(a,l){return ym({data:a,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,vm(),eh].filter(c=>!!c),issueData:{code:q.invalid_return_type,returnTypeError:l}})}const s={errorMap:n.common.contextualErrorMap},o=n.data;if(this._def.returns instanceof Nc){const a=this;return xn(async function(...l){const c=new Gr([]),u=await a._def.args.parseAsync(l,s).catch(h=>{throw c.addIssue(r(l,h)),c}),f=await Reflect.apply(o,this,u);return await a._def.returns._def.type.parseAsync(f,s).catch(h=>{throw c.addIssue(i(f,h)),c})})}else{const a=this;return xn(function(...l){const c=a._def.args.safeParse(l,s);if(!c.success)throw new Gr([r(l,c.error)]);const u=Reflect.apply(o,this,c.data),f=a._def.returns.safeParse(u,s);if(!f.success)throw new Gr([i(u,f.error)]);return f.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new rc({...this._def,args:xi.create(e).rest(_a.create())})}returns(e){return new rc({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,n,r){return new rc({args:e||xi.create([]).rest(_a.create()),returns:n||_a.create(),typeName:pe.ZodFunction,...xe(r)})}}class lh extends Re{get schema(){return this._def.getter()}_parse(e){const{ctx:n}=this._processInputParams(e);return this._def.getter()._parse({data:n.data,path:n.path,parent:n})}}lh.create=(t,e)=>new lh({getter:t,typeName:pe.ZodLazy,...xe(e)});class ch extends Re{_parse(e){if(e.data!==this._def.value){const n=this._getOrReturnCtx(e);return se(n,{received:n.data,code:q.invalid_literal,expected:this._def.value}),Ce}return{status:"valid",value:e.data}}get value(){return this._def.value}}ch.create=(t,e)=>new ch({value:t,typeName:pe.ZodLiteral,...xe(e)});function O3(t,e){return new mo({values:t,typeName:pe.ZodEnum,...xe(e)})}class mo extends Re{_parse(e){if(typeof e.data!="string"){const n=this._getOrReturnCtx(e),r=this._def.values;return se(n,{expected:Oe.joinValues(r),received:n.parsedType,code:q.invalid_type}),Ce}if(this._def.values.indexOf(e.data)===-1){const n=this._getOrReturnCtx(e),r=this._def.values;return se(n,{received:n.data,code:q.invalid_enum_value,options:r}),Ce}return xn(e.data)}get options(){return this._def.values}get enum(){const e={};for(const n of this._def.values)e[n]=n;return e}get Values(){const e={};for(const n of this._def.values)e[n]=n;return e}get Enum(){const e={};for(const n of this._def.values)e[n]=n;return e}extract(e){return mo.create(e)}exclude(e){return mo.create(this.options.filter(n=>!e.includes(n)))}}mo.create=O3;class uh extends Re{_parse(e){const n=Oe.getValidEnumValues(this._def.values),r=this._getOrReturnCtx(e);if(r.parsedType!==ne.string&&r.parsedType!==ne.number){const i=Oe.objectValues(n);return se(r,{expected:Oe.joinValues(i),received:r.parsedType,code:q.invalid_type}),Ce}if(n.indexOf(e.data)===-1){const i=Oe.objectValues(n);return se(r,{received:r.data,code:q.invalid_enum_value,options:i}),Ce}return xn(e.data)}get enum(){return this._def.values}}uh.create=(t,e)=>new uh({values:t,typeName:pe.ZodNativeEnum,...xe(e)});class Nc extends Re{unwrap(){return this._def.type}_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==ne.promise&&n.common.async===!1)return se(n,{code:q.invalid_type,expected:ne.promise,received:n.parsedType}),Ce;const r=n.parsedType===ne.promise?n.data:Promise.resolve(n.data);return xn(r.then(i=>this._def.type.parseAsync(i,{path:n.path,errorMap:n.common.contextualErrorMap})))}}Nc.create=(t,e)=>new Nc({type:t,typeName:pe.ZodPromise,...xe(e)});class Ci extends Re{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===pe.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:n,ctx:r}=this._processInputParams(e),i=this._def.effect||null,s={addIssue:o=>{se(r,o),o.fatal?n.abort():n.dirty()},get path(){return r.path}};if(s.addIssue=s.addIssue.bind(s),i.type==="preprocess"){const o=i.transform(r.data,s);return r.common.issues.length?{status:"dirty",value:r.data}:r.common.async?Promise.resolve(o).then(a=>this._def.schema._parseAsync({data:a,path:r.path,parent:r})):this._def.schema._parseSync({data:o,path:r.path,parent:r})}if(i.type==="refinement"){const o=a=>{const l=i.refinement(a,s);if(r.common.async)return Promise.resolve(l);if(l instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return a};if(r.common.async===!1){const a=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});return a.status==="aborted"?Ce:(a.status==="dirty"&&n.dirty(),o(a.value),{status:n.value,value:a.value})}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(a=>a.status==="aborted"?Ce:(a.status==="dirty"&&n.dirty(),o(a.value).then(()=>({status:n.value,value:a.value}))))}if(i.type==="transform")if(r.common.async===!1){const o=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});if(!th(o))return o;const a=i.transform(o.value,s);if(a instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:n.value,value:a}}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(o=>th(o)?Promise.resolve(i.transform(o.value,s)).then(a=>({status:n.value,value:a})):o);Oe.assertNever(i)}}Ci.create=(t,e,n)=>new Ci({schema:t,typeName:pe.ZodEffects,effect:e,...xe(n)});Ci.createWithPreprocess=(t,e,n)=>new Ci({schema:e,effect:{type:"preprocess",transform:t},typeName:pe.ZodEffects,...xe(n)});class us extends Re{_parse(e){return this._getType(e)===ne.undefined?xn(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}us.create=(t,e)=>new us({innerType:t,typeName:pe.ZodOptional,...xe(e)});class Ua extends Re{_parse(e){return this._getType(e)===ne.null?xn(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}Ua.create=(t,e)=>new Ua({innerType:t,typeName:pe.ZodNullable,...xe(e)});class fh extends Re{_parse(e){const{ctx:n}=this._processInputParams(e);let r=n.data;return n.parsedType===ne.undefined&&(r=this._def.defaultValue()),this._def.innerType._parse({data:r,path:n.path,parent:n})}removeDefault(){return this._def.innerType}}fh.create=(t,e)=>new fh({innerType:t,typeName:pe.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...xe(e)});class Sm extends Re{_parse(e){const{ctx:n}=this._processInputParams(e),r={...n,common:{...n.common,issues:[]}},i=this._def.innerType._parse({data:r.data,path:r.path,parent:{...r}});return Em(i)?i.then(s=>({status:"valid",value:s.status==="valid"?s.value:this._def.catchValue({get error(){return new Gr(r.common.issues)},input:r.data})})):{status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new Gr(r.common.issues)},input:r.data})}}removeCatch(){return this._def.innerType}}Sm.create=(t,e)=>new Sm({innerType:t,typeName:pe.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...xe(e)});class bm extends Re{_parse(e){if(this._getType(e)!==ne.nan){const r=this._getOrReturnCtx(e);return se(r,{code:q.invalid_type,expected:ne.nan,received:r.parsedType}),Ce}return{status:"valid",value:e.data}}}bm.create=t=>new bm({typeName:pe.ZodNaN,...xe(t)});class rY extends Re{_parse(e){const{ctx:n}=this._processInputParams(e),r=n.data;return this._def.type._parse({data:r,path:n.path,parent:n})}unwrap(){return this._def.type}}class dg extends Re{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.common.async)return(async()=>{const s=await this._def.in._parseAsync({data:r.data,path:r.path,parent:r});return s.status==="aborted"?Ce:s.status==="dirty"?(n.dirty(),HW(s.value)):this._def.out._parseAsync({data:s.value,path:r.path,parent:r})})();{const i=this._def.in._parseSync({data:r.data,path:r.path,parent:r});return i.status==="aborted"?Ce:i.status==="dirty"?(n.dirty(),{status:"dirty",value:i.value}):this._def.out._parseSync({data:i.value,path:r.path,parent:r})}}static create(e,n){return new dg({in:e,out:n,typeName:pe.ZodPipeline})}}class Tm extends Re{_parse(e){const n=this._def.innerType._parse(e);return th(n)&&(n.value=Object.freeze(n.value)),n}}Tm.create=(t,e)=>new Tm({innerType:t,typeName:pe.ZodReadonly,...xe(e)});pt.lazycreate;var pe;(function(t){t.ZodString="ZodString",t.ZodNumber="ZodNumber",t.ZodNaN="ZodNaN",t.ZodBigInt="ZodBigInt",t.ZodBoolean="ZodBoolean",t.ZodDate="ZodDate",t.ZodSymbol="ZodSymbol",t.ZodUndefined="ZodUndefined",t.ZodNull="ZodNull",t.ZodAny="ZodAny",t.ZodUnknown="ZodUnknown",t.ZodNever="ZodNever",t.ZodVoid="ZodVoid",t.ZodArray="ZodArray",t.ZodObject="ZodObject",t.ZodUnion="ZodUnion",t.ZodDiscriminatedUnion="ZodDiscriminatedUnion",t.ZodIntersection="ZodIntersection",t.ZodTuple="ZodTuple",t.ZodRecord="ZodRecord",t.ZodMap="ZodMap",t.ZodSet="ZodSet",t.ZodFunction="ZodFunction",t.ZodLazy="ZodLazy",t.ZodLiteral="ZodLiteral",t.ZodEnum="ZodEnum",t.ZodEffects="ZodEffects",t.ZodNativeEnum="ZodNativeEnum",t.ZodOptional="ZodOptional",t.ZodNullable="ZodNullable",t.ZodDefault="ZodDefault",t.ZodCatch="ZodCatch",t.ZodPromise="ZodPromise",t.ZodBranded="ZodBranded",t.ZodPipeline="ZodPipeline",t.ZodReadonly="ZodReadonly"})(pe||(pe={}));const ui=kr.create;Ao.create;bm.create;po.create;nh.create;Qa.create;_m.create;rh.create;ih.create;xm.create;const iY=_a.create;ys.create;Cm.create;zr.create;const Ir=pt.create;pt.strictCreate;sh.create;Jy.create;oh.create;xi.create;ah.create;wm.create;Fa.create;rc.create;lh.create;ch.create;const eE=mo.create;uh.create;Nc.create;Ci.create;us.create;Ua.create;const Bm=Ci.createWithPreprocess;dg.create;const Kt={string:t=>kr.create({...t,coerce:!0}),number:t=>Ao.create({...t,coerce:!0}),boolean:t=>nh.create({...t,coerce:!0}),bigint:t=>po.create({...t,coerce:!0}),date:t=>Qa.create({...t,coerce:!0})};var sY=Object.defineProperty,oY=(t,e,n)=>e in t?sY(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,aY=(t,e,n)=>(oY(t,typeof e!="symbol"?e+"":e,n),n);class lY extends FW{constructor(e){super(),aY(this,"maxUncompressedSize");const n=e.TileWidth||e.ImageWidth,r=e.TileLength||e.ImageLength,i=e.BitsPerSample[0]/8;this.maxUncompressedSize=n*r*i}async decodeBlock(e){const n=new Uint8Array(e);return(await VW(n,this.maxUncompressedSize)).buffer}}function cY(t){if(!Number.isInteger(t))throw Error("Not an integer.");const e=new ArrayBuffer(4);new DataView(e).setInt32(0,t,!1);const r=new Uint8Array(e);return Array.from(r)}function Ga(t){const e=t[t.length-1];return e===3||e===4}function hu(t){const e=Ga(t.shape),[n,r]=t.shape.slice(e?-3:-2);return{height:n,width:r}}const D3="__vivSignalAborted";function gu({attr:t,...e}){return{...t,...e}}function Rm(t){return Array.isArray(t)?t:[t]}const uY=eE(["XYZCT","XYZTC","XYCTZ","XYCZT","XYTCZ","XYTZC"]),fY=eE(["int8","int16","int32","uint8","uint16","uint32","float","bit","double","complex","double-complex"]),dp=eE(["Ym","Zm","Em","Pm","Tm","Gm","Mm","km","hm","dam","m","dm","cm","mm","m","nm","pm","fm","am","zm","ym","","thou","li","in","ft","yd","mi","ua","ly","pc","pt","pixel","reference frame"]),dY=Ir({}).extend({attr:Ir({ID:ui(),SamplesPerPixel:Kt.number().optional(),Name:ui().optional(),Color:Kt.number().transform(cY).optional()})}).transform(gu),hY=Ir({}).extend({attr:Ir({FileName:ui()})}).transform(gu),gY=Ir({UUID:hY.optional()}).extend({attr:Ir({IFD:Kt.number(),PlaneCount:Kt.number(),FirstT:Kt.number().optional(),FirstC:Kt.number().optional(),FirstZ:Kt.number().optional()})}).transform(gu),AY=Ir({Channel:Bm(Rm,dY.array()),TiffData:Bm(Rm,gY.array()).optional()}).extend({attr:Ir({ID:ui(),DimensionOrder:uY,Type:fY,SizeT:Kt.number(),SizeC:Kt.number(),SizeZ:Kt.number(),SizeY:Kt.number(),SizeX:Kt.number(),PhysicalSizeX:Kt.number().optional(),PhysicalSizeY:Kt.number().optional(),PhysicalSizeZ:Kt.number().optional(),SignificantBits:Kt.number().optional(),PhysicalSizeXUnit:dp.optional().default("m"),PhysicalSizeYUnit:dp.optional().default("m"),PhysicalSizeZUnit:dp.optional().default("m"),BigEndian:ui().transform(t=>t.toLowerCase()==="true").optional(),Interleaved:ui().transform(t=>t.toLowerCase()==="true").optional()})}).transform(gu).transform(({Channel:t,...e})=>({Channels:t,...e})),pY=Ir({AquisitionDate:ui().optional().default(""),Description:iY().optional().default(""),Pixels:AY}).extend({attr:Ir({ID:ui(),Name:ui().optional()})}).transform(gu);Ir({Image:Bm(Rm,pY.array())});Ri(5,()=>lY);function mY(t){if(new Set(t).size!==t.length)throw new Error("Labels must be unique");return n=>{if(Array.isArray(n))return[...n];const r=Array(t.length).fill(0);for(const[i,s]of Object.entries(n)){const o=t.indexOf(i);if(o===-1)throw new Error(`Invalid indexer key: ${i}`);r[o]=s}return r}}var vY=Object.defineProperty,yY=(t,e,n)=>e in t?vY(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,xI=(t,e,n)=>(yY(t,typeof e!="symbol"?e+"":e,n),n);const CI={u1:"Uint8",u2:"Uint16",u4:"Uint32",f4:"Float32",f8:"Float64",i1:"Int8",i2:"Int16",i4:"Int32"};function II(t,e){return{start:t,stop:e,step:1,_slice:!0}}let hp=class extends Error{};class hg{constructor(e,n,r){this.labels=n,this.tileSize=r,xI(this,"_data"),xI(this,"_indexer"),this._indexer=mY(n),this._data=e}get shape(){return this._data.shape}get dtype(){const e=this._data.dtype.slice(1);if(!(e in CI))throw Error(`Zarr dtype not supported, got ${e}.`);return CI[e]}get _xIndex(){const e=Ga(this._data.shape);return this._data.shape.length-(e?2:1)}_chunkIndex(e,{x:n,y:r}){const i=this._indexer(e);return i[this._xIndex]=n,i[this._xIndex-1]=r,i}_getSlices(e,n){const{height:r,width:i}=hu(this),[s,o]=[e*this.tileSize,Math.min((e+1)*this.tileSize,i)],[a,l]=[n*this.tileSize,Math.min((n+1)*this.tileSize,r)];if(s===o||a===l)throw new hp("Tile slice is zero-sized.");if(s<0||a<0||o>i||l>r)throw new hp("Tile slice is out of bounds.");return[II(s,o),II(a,l)]}async _getRaw(e,n){const r=await this._data.getRaw(e,n);if(typeof r!="object")throw new Error("Expected object from getRaw");return r}async getRaster({selection:e,signal:n}){const r=this._chunkIndex(e,{x:null,y:null}),i=await this._getRaw(r,{storeOptions:{signal:n}}),{data:s,shape:[o,a]}=i;return{data:s,width:a,height:o}}async getTile(e){const{x:n,y:r,selection:i,signal:s}=e,[o,a]=this._getSlices(n,r),l=this._chunkIndex(i,{x:o,y:a}),c=await this._getRaw(l,{storeOptions:{signal:s}}),{data:u,shape:[f,d]}=c;return{data:u,height:f,width:d}}onTileError(e){if(!(e instanceof hp))throw e}}const EY=255,wI=[0,0,0],k3=6,_Y="-apple-system, 'Helvetica Neue', Arial, sans-serif",SI={Uint8:{format:ee.R8UI,dataFormat:ee.RED_INTEGER,type:ee.UNSIGNED_BYTE,max:2**8-1,sampler:"usampler2D"},Uint16:{format:ee.R16UI,dataFormat:ee.RED_INTEGER,type:ee.UNSIGNED_SHORT,max:2**16-1,sampler:"usampler2D"},Uint32:{format:ee.R32UI,dataFormat:ee.RED_INTEGER,type:ee.UNSIGNED_INT,max:2**32-1,sampler:"usampler2D"},Float32:{format:ee.R32F,dataFormat:ee.RED,type:ee.FLOAT,max:3.4*10**38,sampler:"sampler2D"},Int8:{format:ee.R8I,dataFormat:ee.RED_INTEGER,type:ee.BYTE,max:2**(8-1)-1,sampler:"isampler2D"},Int16:{format:ee.R16I,dataFormat:ee.RED_INTEGER,type:ee.SHORT,max:2**(16-1)-1,sampler:"isampler2D"},Int32:{format:ee.R32I,dataFormat:ee.RED_INTEGER,type:ee.INT,max:2**(32-1)-1,sampler:"isampler2D"},Float64:{format:ee.R32F,dataFormat:ee.RED,type:ee.FLOAT,max:3.4*10**38,sampler:"sampler2D",cast:t=>new Float32Array(t)}},Q3=`vec4 apply_transparent_color(vec3 color, vec3 transparentColor, bool useTransparentColor, float opacity){
  return vec4(color, (color == transparentColor && useTransparentColor) ? 0. : opacity);
}
`,xY=`vec4 apply_cmap (float x) {
  const float e0 = 0.0;
  const vec4 v0 = vec4(1,1,1,0);
  const float e1 = 1.0;
  const vec4 v1 = vec4(1,1,1,1);
  float a0 = smoothstep(e0,e1,x);
  return mix(v0,v1,a0)*step(e0,x)*step(x,e1);
}
`,CY=`vec4 apply_cmap (float x) {
  const float e0 = 0.0;
  const vec4 v0 = vec4(1,0,0,1);
  const float e1 = 1.0;
  const vec4 v1 = vec4(1,1,0,1);
  float a0 = smoothstep(e0,e1,x);
  return mix(v0,v1,a0)*step(e0,x)*step(x,e1);
}
`,IY=`vec4 apply_cmap (float x) {
  const float e0 = 0.0;
  const vec4 v0 = vec4(0.1568627450980392,0.10196078431372549,0.17254901960784313,1);
  const float e1 = 0.13;
  const vec4 v1 = vec4(0.23137254901960785,0.19215686274509805,0.35294117647058826,1);
  const float e2 = 0.25;
  const vec4 v2 = vec4(0.25098039215686274,0.2980392156862745,0.5450980392156862,1);
  const float e3 = 0.38;
  const vec4 v3 = vec4(0.24705882352941178,0.43137254901960786,0.592156862745098,1);
  const float e4 = 0.5;
  const vec4 v4 = vec4(0.2823529411764706,0.5568627450980392,0.6196078431372549,1);
  const float e5 = 0.63;
  const vec4 v5 = vec4(0.3333333333333333,0.6823529411764706,0.6392156862745098,1);
  const float e6 = 0.75;
  const vec4 v6 = vec4(0.47058823529411764,0.807843137254902,0.6392156862745098,1);
  const float e7 = 0.88;
  const vec4 v7 = vec4(0.7333333333333333,0.9019607843137255,0.6745098039215687,1);
  const float e8 = 1.0;
  const vec4 v8 = vec4(0.9921568627450981,0.996078431372549,0.8,1);
  float a0 = smoothstep(e0,e1,x);
  float a1 = smoothstep(e1,e2,x);
  float a2 = smoothstep(e2,e3,x);
  float a3 = smoothstep(e3,e4,x);
  float a4 = smoothstep(e4,e5,x);
  float a5 = smoothstep(e5,e6,x);
  float a6 = smoothstep(e6,e7,x);
  float a7 = smoothstep(e7,e8,x);
  return max(mix(v0,v1,a0)*step(e0,x)*step(x,e1),
    max(mix(v1,v2,a1)*step(e1,x)*step(x,e2),
    max(mix(v2,v3,a2)*step(e2,x)*step(x,e3),
    max(mix(v3,v4,a3)*step(e3,x)*step(x,e4),
    max(mix(v4,v5,a4)*step(e4,x)*step(x,e5),
    max(mix(v5,v6,a5)*step(e5,x)*step(x,e6),
    max(mix(v6,v7,a6)*step(e6,x)*step(x,e7),mix(v7,v8,a7)*step(e7,x)*step(x,e8)
  )))))));
}
`,wY=`vec4 apply_cmap (float x) {
  const float e0 = 0.0;
  const vec4 v0 = vec4(0,0,0,1);
  const float e1 = 0.2;
  const vec4 v1 = vec4(0.9019607843137255,0,0,1);
  const float e2 = 0.4;
  const vec4 v2 = vec4(0.9019607843137255,0.8235294117647058,0,1);
  const float e3 = 0.7;
  const vec4 v3 = vec4(1,1,1,1);
  const float e4 = 1.0;
  const vec4 v4 = vec4(0.6274509803921569,0.7843137254901961,1,1);
  float a0 = smoothstep(e0,e1,x);
  float a1 = smoothstep(e1,e2,x);
  float a2 = smoothstep(e2,e3,x);
  float a3 = smoothstep(e3,e4,x);
  return max(mix(v0,v1,a0)*step(e0,x)*step(x,e1),
    max(mix(v1,v2,a1)*step(e1,x)*step(x,e2),
    max(mix(v2,v3,a2)*step(e2,x)*step(x,e3),mix(v3,v4,a3)*step(e3,x)*step(x,e4)
  )));
}
`,SY=`vec4 apply_cmap (float x) {
  const float e0 = 0.0;
  const vec4 v0 = vec4(0,0,1,1);
  const float e1 = 1.0;
  const vec4 v1 = vec4(1,0,0,1);
  float a0 = smoothstep(e0,e1,x);
  return mix(v0,v1,a0)*step(e0,x)*step(x,e1);
}
`,bY=`vec4 apply_cmap (float x) {
  const float e0 = 0.0;
  const vec4 v0 = vec4(0,0,0,1);
  const float e1 = 0.376;
  const vec4 v1 = vec4(0.32941176470588235,0.32941176470588235,0.4549019607843137,1);
  const float e2 = 0.753;
  const vec4 v2 = vec4(0.6627450980392157,0.7843137254901961,0.7843137254901961,1);
  const float e3 = 1.0;
  const vec4 v3 = vec4(1,1,1,1);
  float a0 = smoothstep(e0,e1,x);
  float a1 = smoothstep(e1,e2,x);
  float a2 = smoothstep(e2,e3,x);
  return max(mix(v0,v1,a0)*step(e0,x)*step(x,e1),
    max(mix(v1,v2,a1)*step(e1,x)*step(x,e2),mix(v2,v3,a2)*step(e2,x)*step(x,e3)
  ));
}
`,TY=`vec4 apply_cmap (float x) {
  const float e0 = 0.0;
  const vec4 v0 = vec4(0.1843137254901961,0.058823529411764705,0.24313725490196078,1);
  const float e1 = 0.13;
  const vec4 v1 = vec4(0.3411764705882353,0.09019607843137255,0.33725490196078434,1);
  const float e2 = 0.25;
  const vec4 v2 = vec4(0.5098039215686274,0.10980392156862745,0.38823529411764707,1);
  const float e3 = 0.38;
  const vec4 v3 = vec4(0.6705882352941176,0.1607843137254902,0.3764705882352941,1);
  const float e4 = 0.5;
  const vec4 v4 = vec4(0.807843137254902,0.2627450980392157,0.33725490196078434,1);
  const float e5 = 0.63;
  const vec4 v5 = vec4(0.9019607843137255,0.41568627450980394,0.32941176470588235,1);
  const float e6 = 0.75;
  const vec4 v6 = vec4(0.9490196078431372,0.5843137254901961,0.403921568627451,1);
  const float e7 = 0.88;
  const vec4 v7 = vec4(0.9764705882352941,0.7568627450980392,0.5294117647058824,1);
  const float e8 = 1.0;
  const vec4 v8 = vec4(0.996078431372549,0.9294117647058824,0.6901960784313725,1);
  float a0 = smoothstep(e0,e1,x);
  float a1 = smoothstep(e1,e2,x);
  float a2 = smoothstep(e2,e3,x);
  float a3 = smoothstep(e3,e4,x);
  float a4 = smoothstep(e4,e5,x);
  float a5 = smoothstep(e5,e6,x);
  float a6 = smoothstep(e6,e7,x);
  float a7 = smoothstep(e7,e8,x);
  return max(mix(v0,v1,a0)*step(e0,x)*step(x,e1),
    max(mix(v1,v2,a1)*step(e1,x)*step(x,e2),
    max(mix(v2,v3,a2)*step(e2,x)*step(x,e3),
    max(mix(v3,v4,a3)*step(e3,x)*step(x,e4),
    max(mix(v4,v5,a4)*step(e4,x)*step(x,e5),
    max(mix(v5,v6,a5)*step(e5,x)*step(x,e6),
    max(mix(v6,v7,a6)*step(e6,x)*step(x,e7),mix(v7,v8,a7)*step(e7,x)*step(x,e8)
  )))))));
}
`,BY=`vec4 apply_cmap (float x) {
  const float e0 = 0.0;
  const vec4 v0 = vec4(0.07058823529411765,0.1411764705882353,0.0784313725490196,1);
  const float e1 = 0.13;
  const vec4 v1 = vec4(0.09803921568627451,0.24705882352941178,0.1607843137254902,1);
  const float e2 = 0.25;
  const vec4 v2 = vec4(0.09411764705882353,0.3568627450980392,0.23137254901960785,1);
  const float e3 = 0.38;
  const vec4 v3 = vec4(0.050980392156862744,0.4666666666666667,0.2823529411764706,1);
  const float e4 = 0.5;
  const vec4 v4 = vec4(0.07058823529411765,0.5803921568627451,0.3137254901960784,1);
  const float e5 = 0.63;
  const vec4 v5 = vec4(0.3137254901960784,0.6784313725490196,0.34901960784313724,1);
  const float e6 = 0.75;
  const vec4 v6 = vec4(0.5176470588235295,0.7686274509803922,0.47843137254901963,1);
  const float e7 = 0.88;
  const vec4 v7 = vec4(0.6862745098039216,0.8666666666666667,0.6352941176470588,1);
  const float e8 = 1.0;
  const vec4 v8 = vec4(0.8431372549019608,0.9764705882352941,0.8156862745098039,1);
  float a0 = smoothstep(e0,e1,x);
  float a1 = smoothstep(e1,e2,x);
  float a2 = smoothstep(e2,e3,x);
  float a3 = smoothstep(e3,e4,x);
  float a4 = smoothstep(e4,e5,x);
  float a5 = smoothstep(e5,e6,x);
  float a6 = smoothstep(e6,e7,x);
  float a7 = smoothstep(e7,e8,x);
  return max(mix(v0,v1,a0)*step(e0,x)*step(x,e1),
    max(mix(v1,v2,a1)*step(e1,x)*step(x,e2),
    max(mix(v2,v3,a2)*step(e2,x)*step(x,e3),
    max(mix(v3,v4,a3)*step(e3,x)*step(x,e4),
    max(mix(v4,v5,a4)*step(e4,x)*step(x,e5),
    max(mix(v5,v6,a5)*step(e5,x)*step(x,e6),
    max(mix(v6,v7,a6)*step(e6,x)*step(x,e7),mix(v7,v8,a7)*step(e7,x)*step(x,e8)
  )))))));
}
`,RY=`vec4 apply_cmap (float x) {
  const float e0 = 0.0;
  const vec4 v0 = vec4(0.49019607843137253,0,0.7019607843137254,1);
  const float e1 = 0.13;
  const vec4 v1 = vec4(0.4549019607843137,0,0.8549019607843137,1);
  const float e2 = 0.25;
  const vec4 v2 = vec4(0.3843137254901961,0.2901960784313726,0.9294117647058824,1);
  const float e3 = 0.38;
  const vec4 v3 = vec4(0.26666666666666666,0.5725490196078431,0.9058823529411765,1);
  const float e4 = 0.5;
  const vec4 v4 = vec4(0,0.8,0.7725490196078432,1);
  const float e5 = 0.63;
  const vec4 v5 = vec4(0,0.9686274509803922,0.5725490196078431,1);
  const float e6 = 0.75;
  const vec4 v6 = vec4(0,1,0.34509803921568627,1);
  const float e7 = 0.88;
  const vec4 v7 = vec4(0.1568627450980392,1,0.03137254901960784,1);
  const float e8 = 1.0;
  const vec4 v8 = vec4(0.5764705882352941,1,0,1);
  float a0 = smoothstep(e0,e1,x);
  float a1 = smoothstep(e1,e2,x);
  float a2 = smoothstep(e2,e3,x);
  float a3 = smoothstep(e3,e4,x);
  float a4 = smoothstep(e4,e5,x);
  float a5 = smoothstep(e5,e6,x);
  float a6 = smoothstep(e6,e7,x);
  float a7 = smoothstep(e7,e8,x);
  return max(mix(v0,v1,a0)*step(e0,x)*step(x,e1),
    max(mix(v1,v2,a1)*step(e1,x)*step(x,e2),
    max(mix(v2,v3,a2)*step(e2,x)*step(x,e3),
    max(mix(v3,v4,a3)*step(e3,x)*step(x,e4),
    max(mix(v4,v5,a4)*step(e4,x)*step(x,e5),
    max(mix(v5,v6,a5)*step(e5,x)*step(x,e6),
    max(mix(v6,v7,a6)*step(e6,x)*step(x,e7),mix(v7,v8,a7)*step(e7,x)*step(x,e8)
  )))))));
}
`,PY=`vec4 apply_cmap (float x) {
  const float e0 = 0.0;
  const vec4 v0 = vec4(0,0,0,1);
  const float e1 = 0.804;
  const vec4 v1 = vec4(1,0.6274509803921569,0.4,1);
  const float e2 = 1.0;
  const vec4 v2 = vec4(1,0.7803921568627451,0.4980392156862745,1);
  float a0 = smoothstep(e0,e1,x);
  float a1 = smoothstep(e1,e2,x);
  return max(mix(v0,v1,a0)*step(e0,x)*step(x,e1),mix(v1,v2,a1)*step(e1,x)*step(x,e2)
  );
}
`,LY=`vec4 apply_cmap (float x) {
  const float e0 = 0.0;
  const vec4 v0 = vec4(0,0,0,1);
  const float e1 = 0.07;
  const vec4 v1 = vec4(0.08627450980392157,0.0196078431372549,0.23137254901960785,1);
  const float e2 = 0.13;
  const vec4 v2 = vec4(0.23529411764705882,0.01568627450980392,0.4117647058823529,1);
  const float e3 = 0.2;
  const vec4 v3 = vec4(0.42745098039215684,0.00392156862745098,0.5294117647058824,1);
  const float e4 = 0.27;
  const vec4 v4 = vec4(0.6313725490196078,0,0.5764705882352941,1);
  const float e5 = 0.33;
  const vec4 v5 = vec4(0.8235294117647058,0.00784313725490196,0.5568627450980392,1);
  const float e6 = 0.4;
  const vec4 v6 = vec4(0.984313725490196,0.043137254901960784,0.4823529411764706,1);
  const float e7 = 0.47;
  const vec4 v7 = vec4(1,0.11372549019607843,0.3803921568627451,1);
  const float e8 = 0.53;
  const vec4 v8 = vec4(1,0.21176470588235294,0.27058823529411763,1);
  const float e9 = 0.6;
  const vec4 v9 = vec4(1,0.3333333333333333,0.1803921568627451,1);
  const float e10 = 0.67;
  const vec4 v10 = vec4(1,0.47058823529411764,0.13333333333333333,1);
  const float e11 = 0.73;
  const vec4 v11 = vec4(1,0.615686274509804,0.1450980392156863,1);
  const float e12 = 0.8;
  const vec4 v12 = vec4(0.9450980392156862,0.7490196078431373,0.2235294117647059,1);
  const float e13 = 0.87;
  const vec4 v13 = vec4(0.8784313725490196,0.8627450980392157,0.36470588235294116,1);
  const float e14 = 0.93;
  const vec4 v14 = vec4(0.8549019607843137,0.9450980392156862,0.5568627450980392,1);
  const float e15 = 1.0;
  const vec4 v15 = vec4(0.8901960784313725,0.9921568627450981,0.7764705882352941,1);
  float a0 = smoothstep(e0,e1,x);
  float a1 = smoothstep(e1,e2,x);
  float a2 = smoothstep(e2,e3,x);
  float a3 = smoothstep(e3,e4,x);
  float a4 = smoothstep(e4,e5,x);
  float a5 = smoothstep(e5,e6,x);
  float a6 = smoothstep(e6,e7,x);
  float a7 = smoothstep(e7,e8,x);
  float a8 = smoothstep(e8,e9,x);
  float a9 = smoothstep(e9,e10,x);
  float a10 = smoothstep(e10,e11,x);
  float a11 = smoothstep(e11,e12,x);
  float a12 = smoothstep(e12,e13,x);
  float a13 = smoothstep(e13,e14,x);
  float a14 = smoothstep(e14,e15,x);
  return max(mix(v0,v1,a0)*step(e0,x)*step(x,e1),
    max(mix(v1,v2,a1)*step(e1,x)*step(x,e2),
    max(mix(v2,v3,a2)*step(e2,x)*step(x,e3),
    max(mix(v3,v4,a3)*step(e3,x)*step(x,e4),
    max(mix(v4,v5,a4)*step(e4,x)*step(x,e5),
    max(mix(v5,v6,a5)*step(e5,x)*step(x,e6),
    max(mix(v6,v7,a6)*step(e6,x)*step(x,e7),
    max(mix(v7,v8,a7)*step(e7,x)*step(x,e8),
    max(mix(v8,v9,a8)*step(e8,x)*step(x,e9),
    max(mix(v9,v10,a9)*step(e9,x)*step(x,e10),
    max(mix(v10,v11,a10)*step(e10,x)*step(x,e11),
    max(mix(v11,v12,a11)*step(e11,x)*step(x,e12),
    max(mix(v12,v13,a12)*step(e12,x)*step(x,e13),
    max(mix(v13,v14,a13)*step(e13,x)*step(x,e14),mix(v14,v15,a14)*step(e14,x)*step(x,e15)
  ))))))))))))));
}
`,MY=`vec4 apply_cmap (float x) {
  const float e0 = 0.0;
  const vec4 v0 = vec4(0.21176470588235294,0.054901960784313725,0.1411764705882353,1);
  const float e1 = 0.13;
  const vec4 v1 = vec4(0.34901960784313724,0.09019607843137255,0.3137254901960784,1);
  const float e2 = 0.25;
  const vec4 v2 = vec4(0.43137254901960786,0.17647058823529413,0.5176470588235295,1);
  const float e3 = 0.38;
  const vec4 v3 = vec4(0.47058823529411764,0.30196078431372547,0.6980392156862745,1);
  const float e4 = 0.5;
  const vec4 v4 = vec4(0.47058823529411764,0.44313725490196076,0.8352941176470589,1);
  const float e5 = 0.63;
  const vec4 v5 = vec4(0.45098039215686275,0.592156862745098,0.8941176470588236,1);
  const float e6 = 0.75;
  const vec4 v6 = vec4(0.5254901960784314,0.7254901960784313,0.8901960784313725,1);
  const float e7 = 0.88;
  const vec4 v7 = vec4(0.6941176470588235,0.8392156862745098,0.8901960784313725,1);
  const float e8 = 1.0;
  const vec4 v8 = vec4(0.9019607843137255,0.9450980392156862,0.9450980392156862,1);
  float a0 = smoothstep(e0,e1,x);
  float a1 = smoothstep(e1,e2,x);
  float a2 = smoothstep(e2,e3,x);
  float a3 = smoothstep(e3,e4,x);
  float a4 = smoothstep(e4,e5,x);
  float a5 = smoothstep(e5,e6,x);
  float a6 = smoothstep(e6,e7,x);
  float a7 = smoothstep(e7,e8,x);
  return max(mix(v0,v1,a0)*step(e0,x)*step(x,e1),
    max(mix(v1,v2,a1)*step(e1,x)*step(x,e2),
    max(mix(v2,v3,a2)*step(e2,x)*step(x,e3),
    max(mix(v3,v4,a3)*step(e3,x)*step(x,e4),
    max(mix(v4,v5,a4)*step(e4,x)*step(x,e5),
    max(mix(v5,v6,a5)*step(e5,x)*step(x,e6),
    max(mix(v6,v7,a6)*step(e6,x)*step(x,e7),mix(v7,v8,a7)*step(e7,x)*step(x,e8)
  )))))));
}
`,NY=`vec4 apply_cmap (float x) {
  const float e0 = 0.0;
  const vec4 v0 = vec4(0,0,0.5098039215686274,1);
  const float e1 = 0.1;
  const vec4 v1 = vec4(0,0.7058823529411765,0.7058823529411765,1);
  const float e2 = 0.2;
  const vec4 v2 = vec4(0.1568627450980392,0.8235294117647058,0.1568627450980392,1);
  const float e3 = 0.4;
  const vec4 v3 = vec4(0.9019607843137255,0.9019607843137255,0.19607843137254902,1);
  const float e4 = 0.6;
  const vec4 v4 = vec4(0.47058823529411764,0.27450980392156865,0.0784313725490196,1);
  const float e5 = 1.0;
  const vec4 v5 = vec4(1,1,1,1);
  float a0 = smoothstep(e0,e1,x);
  float a1 = smoothstep(e1,e2,x);
  float a2 = smoothstep(e2,e3,x);
  float a3 = smoothstep(e3,e4,x);
  float a4 = smoothstep(e4,e5,x);
  return max(mix(v0,v1,a0)*step(e0,x)*step(x,e1),
    max(mix(v1,v2,a1)*step(e1,x)*step(x,e2),
    max(mix(v2,v3,a2)*step(e2,x)*step(x,e3),
    max(mix(v3,v4,a3)*step(e3,x)*step(x,e4),mix(v4,v5,a4)*step(e4,x)*step(x,e5)
  ))));
}
`,OY=`vec4 apply_cmap (float x) {
  const float e0 = 0.0;
  const vec4 v0 = vec4(0,0,0,1);
  const float e1 = 0.15;
  const vec4 v1 = vec4(0.11764705882352941,0,0.39215686274509803,1);
  const float e2 = 0.4;
  const vec4 v2 = vec4(0.47058823529411764,0,0.39215686274509803,1);
  const float e3 = 0.6;
  const vec4 v3 = vec4(0.6274509803921569,0.35294117647058826,0,1);
  const float e4 = 0.8;
  const vec4 v4 = vec4(0.9019607843137255,0.7843137254901961,0,1);
  const float e5 = 1.0;
  const vec4 v5 = vec4(1,0.9803921568627451,0.8627450980392157,1);
  float a0 = smoothstep(e0,e1,x);
  float a1 = smoothstep(e1,e2,x);
  float a2 = smoothstep(e2,e3,x);
  float a3 = smoothstep(e3,e4,x);
  float a4 = smoothstep(e4,e5,x);
  return max(mix(v0,v1,a0)*step(e0,x)*step(x,e1),
    max(mix(v1,v2,a1)*step(e1,x)*step(x,e2),
    max(mix(v2,v3,a2)*step(e2,x)*step(x,e3),
    max(mix(v3,v4,a3)*step(e3,x)*step(x,e4),mix(v4,v5,a4)*step(e4,x)*step(x,e5)
  ))));
}
`,DY=`vec4 apply_cmap (float x) {
  const float e0 = 0.0;
  const vec4 v0 = vec4(0.11764705882352941,0.01568627450980392,0.43137254901960786,1);
  const float e1 = 0.13;
  const vec4 v1 = vec4(0.1843137254901961,0.054901960784313725,0.6901960784313725,1);
  const float e2 = 0.25;
  const vec4 v2 = vec4(0.1607843137254902,0.17647058823529413,0.9254901960784314,1);
  const float e3 = 0.38;
  const vec4 v3 = vec4(0.09803921568627451,0.38823529411764707,0.8313725490196079,1);
  const float e4 = 0.5;
  const vec4 v4 = vec4(0.26666666666666666,0.5137254901960784,0.7843137254901961,1);
  const float e5 = 0.63;
  const vec4 v5 = vec4(0.4470588235294118,0.611764705882353,0.7725490196078432,1);
  const float e6 = 0.75;
  const vec4 v6 = vec4(0.615686274509804,0.7098039215686275,0.796078431372549,1);
  const float e7 = 0.88;
  const vec4 v7 = vec4(0.7843137254901961,0.8156862745098039,0.8470588235294118,1);
  const float e8 = 1.0;
  const vec4 v8 = vec4(0.9450980392156862,0.9294117647058824,0.9254901960784314,1);
  float a0 = smoothstep(e0,e1,x);
  float a1 = smoothstep(e1,e2,x);
  float a2 = smoothstep(e2,e3,x);
  float a3 = smoothstep(e3,e4,x);
  float a4 = smoothstep(e4,e5,x);
  float a5 = smoothstep(e5,e6,x);
  float a6 = smoothstep(e6,e7,x);
  float a7 = smoothstep(e7,e8,x);
  return max(mix(v0,v1,a0)*step(e0,x)*step(x,e1),
    max(mix(v1,v2,a1)*step(e1,x)*step(x,e2),
    max(mix(v2,v3,a2)*step(e2,x)*step(x,e3),
    max(mix(v3,v4,a3)*step(e3,x)*step(x,e4),
    max(mix(v4,v5,a4)*step(e4,x)*step(x,e5),
    max(mix(v5,v6,a5)*step(e5,x)*step(x,e6),
    max(mix(v6,v7,a6)*step(e6,x)*step(x,e7),mix(v7,v8,a7)*step(e7,x)*step(x,e8)
  )))))));
}
`,kY=`vec4 apply_cmap (float x) {
  const float e0 = 0.0;
  const vec4 v0 = vec4(0.23529411764705882,0.03529411764705882,0.07058823529411765,1);
  const float e1 = 0.13;
  const vec4 v1 = vec4(0.39215686274509803,0.06666666666666667,0.10588235294117647,1);
  const float e2 = 0.25;
  const vec4 v2 = vec4(0.5568627450980392,0.0784313725490196,0.11372549019607843,1);
  const float e3 = 0.38;
  const vec4 v3 = vec4(0.6941176470588235,0.16862745098039217,0.10588235294117647,1);
  const float e4 = 0.5;
  const vec4 v4 = vec4(0.7529411764705882,0.3411764705882353,0.24705882352941178,1);
  const float e5 = 0.63;
  const vec4 v5 = vec4(0.803921568627451,0.49019607843137253,0.4117647058823529,1);
  const float e6 = 0.75;
  const vec4 v6 = vec4(0.8470588235294118,0.6352941176470588,0.5803921568627451,1);
  const float e7 = 0.88;
  const vec4 v7 = vec4(0.8901960784313725,0.7803921568627451,0.7568627450980392,1);
  const float e8 = 1.0;
  const vec4 v8 = vec4(0.9450980392156862,0.9294117647058824,0.9254901960784314,1);
  float a0 = smoothstep(e0,e1,x);
  float a1 = smoothstep(e1,e2,x);
  float a2 = smoothstep(e2,e3,x);
  float a3 = smoothstep(e3,e4,x);
  float a4 = smoothstep(e4,e5,x);
  float a5 = smoothstep(e5,e6,x);
  float a6 = smoothstep(e6,e7,x);
  float a7 = smoothstep(e7,e8,x);
  return max(mix(v0,v1,a0)*step(e0,x)*step(x,e1),
    max(mix(v1,v2,a1)*step(e1,x)*step(x,e2),
    max(mix(v2,v3,a2)*step(e2,x)*step(x,e3),
    max(mix(v3,v4,a3)*step(e3,x)*step(x,e4),
    max(mix(v4,v5,a4)*step(e4,x)*step(x,e5),
    max(mix(v5,v6,a5)*step(e5,x)*step(x,e6),
    max(mix(v6,v7,a6)*step(e6,x)*step(x,e7),mix(v7,v8,a7)*step(e7,x)*step(x,e8)
  )))))));
}
`,QY=`vec4 apply_cmap (float x) {
  const float e0 = 0.0;
  const vec4 v0 = vec4(0,0.26666666666666666,0.10588235294117647,1);
  const float e1 = 0.125;
  const vec4 v1 = vec4(0,0.42745098039215684,0.17254901960784313,1);
  const float e2 = 0.25;
  const vec4 v2 = vec4(0.13725490196078433,0.5450980392156862,0.27058823529411763,1);
  const float e3 = 0.375;
  const vec4 v3 = vec4(0.2549019607843137,0.6705882352941176,0.36470588235294116,1);
  const float e4 = 0.5;
  const vec4 v4 = vec4(0.4549019607843137,0.7686274509803922,0.4627450980392157,1);
  const float e5 = 0.625;
  const vec4 v5 = vec4(0.6313725490196078,0.8509803921568627,0.6078431372549019,1);
  const float e6 = 0.75;
  const vec4 v6 = vec4(0.7803921568627451,0.9137254901960784,0.7529411764705882,1);
  const float e7 = 0.875;
  const vec4 v7 = vec4(0.8980392156862745,0.9607843137254902,0.8784313725490196,1);
  const float e8 = 1.0;
  const vec4 v8 = vec4(0.9686274509803922,0.9882352941176471,0.9607843137254902,1);
  float a0 = smoothstep(e0,e1,x);
  float a1 = smoothstep(e1,e2,x);
  float a2 = smoothstep(e2,e3,x);
  float a3 = smoothstep(e3,e4,x);
  float a4 = smoothstep(e4,e5,x);
  float a5 = smoothstep(e5,e6,x);
  float a6 = smoothstep(e6,e7,x);
  float a7 = smoothstep(e7,e8,x);
  return max(mix(v0,v1,a0)*step(e0,x)*step(x,e1),
    max(mix(v1,v2,a1)*step(e1,x)*step(x,e2),
    max(mix(v2,v3,a2)*step(e2,x)*step(x,e3),
    max(mix(v3,v4,a3)*step(e3,x)*step(x,e4),
    max(mix(v4,v5,a4)*step(e4,x)*step(x,e5),
    max(mix(v5,v6,a5)*step(e5,x)*step(x,e6),
    max(mix(v6,v7,a6)*step(e6,x)*step(x,e7),mix(v7,v8,a7)*step(e7,x)*step(x,e8)
  )))))));
}
`,FY=`vec4 apply_cmap (float x) {
  const float e0 = 0.0;
  const vec4 v0 = vec4(0,0,0,1);
  const float e1 = 1.0;
  const vec4 v1 = vec4(1,1,1,1);
  float a0 = smoothstep(e0,e1,x);
  return mix(v0,v1,a0)*step(e0,x)*step(x,e1);
}
`,UY=`vec4 apply_cmap (float x) {
  const float e0 = 0.0;
  const vec4 v0 = vec4(0,0,0,1);
  const float e1 = 0.3;
  const vec4 v1 = vec4(0.9019607843137255,0,0,1);
  const float e2 = 0.6;
  const vec4 v2 = vec4(1,0.8235294117647058,0,1);
  const float e3 = 1.0;
  const vec4 v3 = vec4(1,1,1,1);
  float a0 = smoothstep(e0,e1,x);
  float a1 = smoothstep(e1,e2,x);
  float a2 = smoothstep(e2,e3,x);
  return max(mix(v0,v1,a0)*step(e0,x)*step(x,e1),
    max(mix(v1,v2,a1)*step(e1,x)*step(x,e2),mix(v2,v3,a2)*step(e2,x)*step(x,e3)
  ));
}
`,GY=`vec4 apply_cmap (float x) {
  const float e0 = 0.0;
  const vec4 v0 = vec4(1,0,0,1);
  const float e1 = 0.169;
  const vec4 v1 = vec4(0.9921568627450981,1,0.00784313725490196,1);
  const float e2 = 0.173;
  const vec4 v2 = vec4(0.9686274509803922,1,0.00784313725490196,1);
  const float e3 = 0.337;
  const vec4 v3 = vec4(0,0.9882352941176471,0.01568627450980392,1);
  const float e4 = 0.341;
  const vec4 v4 = vec4(0,0.9882352941176471,0.0392156862745098,1);
  const float e5 = 0.506;
  const vec4 v5 = vec4(0.00392156862745098,0.9764705882352941,1,1);
  const float e6 = 0.671;
  const vec4 v6 = vec4(0.00784313725490196,0,0.9921568627450981,1);
  const float e7 = 0.675;
  const vec4 v7 = vec4(0.03137254901960784,0,0.9921568627450981,1);
  const float e8 = 0.839;
  const vec4 v8 = vec4(1,0,0.984313725490196,1);
  const float e9 = 0.843;
  const vec4 v9 = vec4(1,0,0.9607843137254902,1);
  const float e10 = 1.0;
  const vec4 v10 = vec4(1,0,0.023529411764705882,1);
  float a0 = smoothstep(e0,e1,x);
  float a1 = smoothstep(e1,e2,x);
  float a2 = smoothstep(e2,e3,x);
  float a3 = smoothstep(e3,e4,x);
  float a4 = smoothstep(e4,e5,x);
  float a5 = smoothstep(e5,e6,x);
  float a6 = smoothstep(e6,e7,x);
  float a7 = smoothstep(e7,e8,x);
  float a8 = smoothstep(e8,e9,x);
  float a9 = smoothstep(e9,e10,x);
  return max(mix(v0,v1,a0)*step(e0,x)*step(x,e1),
    max(mix(v1,v2,a1)*step(e1,x)*step(x,e2),
    max(mix(v2,v3,a2)*step(e2,x)*step(x,e3),
    max(mix(v3,v4,a3)*step(e3,x)*step(x,e4),
    max(mix(v4,v5,a4)*step(e4,x)*step(x,e5),
    max(mix(v5,v6,a5)*step(e5,x)*step(x,e6),
    max(mix(v6,v7,a6)*step(e6,x)*step(x,e7),
    max(mix(v7,v8,a7)*step(e7,x)*step(x,e8),
    max(mix(v8,v9,a8)*step(e8,x)*step(x,e9),mix(v9,v10,a9)*step(e9,x)*step(x,e10)
  )))))))));
}
`,zY=`vec4 apply_cmap (float x) {
  const float e0 = 0.0;
  const vec4 v0 = vec4(0,0,0.01568627450980392,1);
  const float e1 = 0.13;
  const vec4 v1 = vec4(0.12156862745098039,0.047058823529411764,0.2823529411764706,1);
  const float e2 = 0.25;
  const vec4 v2 = vec4(0.3333333333333333,0.058823529411764705,0.42745098039215684,1);
  const float e3 = 0.38;
  const vec4 v3 = vec4(0.5333333333333333,0.13333333333333333,0.41568627450980394,1);
  const float e4 = 0.5;
  const vec4 v4 = vec4(0.7294117647058823,0.21176470588235294,0.3333333333333333,1);
  const float e5 = 0.63;
  const vec4 v5 = vec4(0.8901960784313725,0.34901960784313724,0.2,1);
  const float e6 = 0.75;
  const vec4 v6 = vec4(0.9764705882352941,0.5490196078431373,0.0392156862745098,1);
  const float e7 = 0.88;
  const vec4 v7 = vec4(0.9764705882352941,0.788235294117647,0.19607843137254902,1);
  const float e8 = 1.0;
  const vec4 v8 = vec4(0.9882352941176471,1,0.6431372549019608,1);
  float a0 = smoothstep(e0,e1,x);
  float a1 = smoothstep(e1,e2,x);
  float a2 = smoothstep(e2,e3,x);
  float a3 = smoothstep(e3,e4,x);
  float a4 = smoothstep(e4,e5,x);
  float a5 = smoothstep(e5,e6,x);
  float a6 = smoothstep(e6,e7,x);
  float a7 = smoothstep(e7,e8,x);
  return max(mix(v0,v1,a0)*step(e0,x)*step(x,e1),
    max(mix(v1,v2,a1)*step(e1,x)*step(x,e2),
    max(mix(v2,v3,a2)*step(e2,x)*step(x,e3),
    max(mix(v3,v4,a3)*step(e3,x)*step(x,e4),
    max(mix(v4,v5,a4)*step(e4,x)*step(x,e5),
    max(mix(v5,v6,a5)*step(e5,x)*step(x,e6),
    max(mix(v6,v7,a6)*step(e6,x)*step(x,e7),mix(v7,v8,a7)*step(e7,x)*step(x,e8)
  )))))));
}
`,VY=`vec4 apply_cmap (float x) {
  const float e0 = 0.0;
  const vec4 v0 = vec4(0,0,0.5137254901960784,1);
  const float e1 = 0.125;
  const vec4 v1 = vec4(0,0.23529411764705882,0.6666666666666666,1);
  const float e2 = 0.375;
  const vec4 v2 = vec4(0.0196078431372549,1,1,1);
  const float e3 = 0.625;
  const vec4 v3 = vec4(1,1,0,1);
  const float e4 = 0.875;
  const vec4 v4 = vec4(0.9803921568627451,0,0,1);
  const float e5 = 1.0;
  const vec4 v5 = vec4(0.5019607843137255,0,0,1);
  float a0 = smoothstep(e0,e1,x);
  float a1 = smoothstep(e1,e2,x);
  float a2 = smoothstep(e2,e3,x);
  float a3 = smoothstep(e3,e4,x);
  float a4 = smoothstep(e4,e5,x);
  return max(mix(v0,v1,a0)*step(e0,x)*step(x,e1),
    max(mix(v1,v2,a1)*step(e1,x)*step(x,e2),
    max(mix(v2,v3,a2)*step(e2,x)*step(x,e3),
    max(mix(v3,v4,a3)*step(e3,x)*step(x,e4),mix(v4,v5,a4)*step(e4,x)*step(x,e5)
  ))));
}
`,jY=`vec4 apply_cmap (float x) {
  const float e0 = 0.0;
  const vec4 v0 = vec4(0,0,0.01568627450980392,1);
  const float e1 = 0.13;
  const vec4 v1 = vec4(0.10980392156862745,0.06274509803921569,0.26666666666666666,1);
  const float e2 = 0.25;
  const vec4 v2 = vec4(0.30980392156862746,0.07058823529411765,0.4823529411764706,1);
  const float e3 = 0.38;
  const vec4 v3 = vec4(0.5058823529411764,0.1450980392156863,0.5058823529411764,1);
  const float e4 = 0.5;
  const vec4 v4 = vec4(0.7098039215686275,0.21176470588235294,0.47843137254901963,1);
  const float e5 = 0.63;
  const vec4 v5 = vec4(0.8980392156862745,0.3137254901960784,0.39215686274509803,1);
  const float e6 = 0.75;
  const vec4 v6 = vec4(0.984313725490196,0.5294117647058824,0.3803921568627451,1);
  const float e7 = 0.88;
  const vec4 v7 = vec4(0.996078431372549,0.7607843137254902,0.5294117647058824,1);
  const float e8 = 1.0;
  const vec4 v8 = vec4(0.9882352941176471,0.9921568627450981,0.7490196078431373,1);
  float a0 = smoothstep(e0,e1,x);
  float a1 = smoothstep(e1,e2,x);
  float a2 = smoothstep(e2,e3,x);
  float a3 = smoothstep(e3,e4,x);
  float a4 = smoothstep(e4,e5,x);
  float a5 = smoothstep(e5,e6,x);
  float a6 = smoothstep(e6,e7,x);
  float a7 = smoothstep(e7,e8,x);
  return max(mix(v0,v1,a0)*step(e0,x)*step(x,e1),
    max(mix(v1,v2,a1)*step(e1,x)*step(x,e2),
    max(mix(v2,v3,a2)*step(e2,x)*step(x,e3),
    max(mix(v3,v4,a3)*step(e3,x)*step(x,e4),
    max(mix(v4,v5,a4)*step(e4,x)*step(x,e5),
    max(mix(v5,v6,a5)*step(e5,x)*step(x,e6),
    max(mix(v6,v7,a6)*step(e6,x)*step(x,e7),mix(v7,v8,a7)*step(e7,x)*step(x,e8)
  )))))));
}
`,HY=`vec4 apply_cmap (float x) {
  const float e0 = 0.0;
  const vec4 v0 = vec4(0.25098039215686274,0.0196078431372549,0.0196078431372549,1);
  const float e1 = 0.13;
  const vec4 v1 = vec4(0.41568627450980394,0.023529411764705882,0.058823529411764705,1);
  const float e2 = 0.25;
  const vec4 v2 = vec4(0.5647058823529412,0.10196078431372549,0.027450980392156862,1);
  const float e3 = 0.38;
  const vec4 v3 = vec4(0.6588235294117647,0.25098039215686274,0.011764705882352941,1);
  const float e4 = 0.5;
  const vec4 v4 = vec4(0.7372549019607844,0.39215686274509803,0.01568627450980392,1);
  const float e5 = 0.63;
  const vec4 v5 = vec4(0.807843137254902,0.5333333333333333,0.043137254901960784,1);
  const float e6 = 0.75;
  const vec4 v6 = vec4(0.8627450980392157,0.6823529411764706,0.09803921568627451,1);
  const float e7 = 0.88;
  const vec4 v7 = vec4(0.9058823529411765,0.8431372549019608,0.17254901960784313,1);
  const float e8 = 1.0;
  const vec4 v8 = vec4(0.9725490196078431,0.996078431372549,0.4117647058823529,1);
  float a0 = smoothstep(e0,e1,x);
  float a1 = smoothstep(e1,e2,x);
  float a2 = smoothstep(e2,e3,x);
  float a3 = smoothstep(e3,e4,x);
  float a4 = smoothstep(e4,e5,x);
  float a5 = smoothstep(e5,e6,x);
  float a6 = smoothstep(e6,e7,x);
  float a7 = smoothstep(e7,e8,x);
  return max(mix(v0,v1,a0)*step(e0,x)*step(x,e1),
    max(mix(v1,v2,a1)*step(e1,x)*step(x,e2),
    max(mix(v2,v3,a2)*step(e2,x)*step(x,e3),
    max(mix(v3,v4,a3)*step(e3,x)*step(x,e4),
    max(mix(v4,v5,a4)*step(e4,x)*step(x,e5),
    max(mix(v5,v6,a5)*step(e5,x)*step(x,e6),
    max(mix(v6,v7,a6)*step(e6,x)*step(x,e7),mix(v7,v8,a7)*step(e7,x)*step(x,e8)
  )))))));
}
`,WY=`vec4 apply_cmap (float x) {
  const float e0 = 0.0;
  const vec4 v0 = vec4(0.2,0.0784313725490196,0.09411764705882353,1);
  const float e1 = 0.13;
  const vec4 v1 = vec4(0.35294117647058826,0.12549019607843137,0.13725490196078433,1);
  const float e2 = 0.25;
  const vec4 v2 = vec4(0.5058823529411764,0.17254901960784313,0.13333333333333333,1);
  const float e3 = 0.38;
  const vec4 v3 = vec4(0.6235294117647059,0.26666666666666666,0.09803921568627451,1);
  const float e4 = 0.5;
  const vec4 v4 = vec4(0.7137254901960784,0.38823529411764707,0.07450980392156863,1);
  const float e5 = 0.63;
  const vec4 v5 = vec4(0.7803921568627451,0.5254901960784314,0.08627450980392157,1);
  const float e6 = 0.75;
  const vec4 v6 = vec4(0.8313725490196079,0.6705882352941176,0.13725490196078433,1);
  const float e7 = 0.88;
  const vec4 v7 = vec4(0.8666666666666667,0.8235294117647058,0.21176470588235294,1);
  const float e8 = 1.0;
  const vec4 v8 = vec4(0.8823529411764706,0.9921568627450981,0.29411764705882354,1);
  float a0 = smoothstep(e0,e1,x);
  float a1 = smoothstep(e1,e2,x);
  float a2 = smoothstep(e2,e3,x);
  float a3 = smoothstep(e3,e4,x);
  float a4 = smoothstep(e4,e5,x);
  float a5 = smoothstep(e5,e6,x);
  float a6 = smoothstep(e6,e7,x);
  float a7 = smoothstep(e7,e8,x);
  return max(mix(v0,v1,a0)*step(e0,x)*step(x,e1),
    max(mix(v1,v2,a1)*step(e1,x)*step(x,e2),
    max(mix(v2,v3,a2)*step(e2,x)*step(x,e3),
    max(mix(v3,v4,a3)*step(e3,x)*step(x,e4),
    max(mix(v4,v5,a4)*step(e4,x)*step(x,e5),
    max(mix(v5,v6,a5)*step(e5,x)*step(x,e6),
    max(mix(v6,v7,a6)*step(e6,x)*step(x,e7),mix(v7,v8,a7)*step(e7,x)*step(x,e8)
  )))))));
}
`,YY=`vec4 apply_cmap (float x) {
  const float e0 = 0.0;
  const vec4 v0 = vec4(0.5686274509803921,0.4117647058823529,0.07058823529411765,1);
  const float e1 = 0.13;
  const vec4 v1 = vec4(0.7215686274509804,0.2784313725490196,0.14901960784313725,1);
  const float e2 = 0.25;
  const vec4 v2 = vec4(0.7294117647058823,0.22745098039215686,0.45098039215686275,1);
  const float e3 = 0.38;
  const vec4 v3 = vec4(0.6274509803921569,0.2784313725490196,0.7254901960784313,1);
  const float e4 = 0.5;
  const vec4 v4 = vec4(0.43137254901960786,0.3803921568627451,0.8549019607843137,1);
  const float e5 = 0.63;
  const vec4 v5 = vec4(0.19607843137254902,0.4823529411764706,0.6431372549019608,1);
  const float e6 = 0.75;
  const vec4 v6 = vec4(0.12156862745098039,0.5137254901960784,0.43137254901960786,1);
  const float e7 = 0.88;
  const vec4 v7 = vec4(0.30196078431372547,0.5058823529411764,0.13333333333333333,1);
  const float e8 = 1.0;
  const vec4 v8 = vec4(0.5686274509803921,0.4117647058823529,0.07058823529411765,1);
  float a0 = smoothstep(e0,e1,x);
  float a1 = smoothstep(e1,e2,x);
  float a2 = smoothstep(e2,e3,x);
  float a3 = smoothstep(e3,e4,x);
  float a4 = smoothstep(e4,e5,x);
  float a5 = smoothstep(e5,e6,x);
  float a6 = smoothstep(e6,e7,x);
  float a7 = smoothstep(e7,e8,x);
  return max(mix(v0,v1,a0)*step(e0,x)*step(x,e1),
    max(mix(v1,v2,a1)*step(e1,x)*step(x,e2),
    max(mix(v2,v3,a2)*step(e2,x)*step(x,e3),
    max(mix(v3,v4,a3)*step(e3,x)*step(x,e4),
    max(mix(v4,v5,a4)*step(e4,x)*step(x,e5),
    max(mix(v5,v6,a5)*step(e5,x)*step(x,e6),
    max(mix(v6,v7,a6)*step(e6,x)*step(x,e7),mix(v7,v8,a7)*step(e7,x)*step(x,e8)
  )))))));
}
`,$Y=`vec4 apply_cmap (float x) {
  const float e0 = 0.0;
  const vec4 v0 = vec4(0,0,1,1);
  const float e1 = 0.1;
  const vec4 v1 = vec4(0.2,0.6,1,1);
  const float e2 = 0.2;
  const vec4 v2 = vec4(0.4,0.8,1,1);
  const float e3 = 0.3;
  const vec4 v3 = vec4(0.6,0.8,1,1);
  const float e4 = 0.4;
  const vec4 v4 = vec4(0.8,0.8,1,1);
  const float e5 = 0.5;
  const vec4 v5 = vec4(1,1,1,1);
  const float e6 = 0.6;
  const vec4 v6 = vec4(1,0.8,1,1);
  const float e7 = 0.7;
  const vec4 v7 = vec4(1,0.6,1,1);
  const float e8 = 0.8;
  const vec4 v8 = vec4(1,0.4,0.8,1);
  const float e9 = 0.9;
  const vec4 v9 = vec4(1,0.4,0.4,1);
  const float e10 = 1.0;
  const vec4 v10 = vec4(1,0,0,1);
  float a0 = smoothstep(e0,e1,x);
  float a1 = smoothstep(e1,e2,x);
  float a2 = smoothstep(e2,e3,x);
  float a3 = smoothstep(e3,e4,x);
  float a4 = smoothstep(e4,e5,x);
  float a5 = smoothstep(e5,e6,x);
  float a6 = smoothstep(e6,e7,x);
  float a7 = smoothstep(e7,e8,x);
  float a8 = smoothstep(e8,e9,x);
  float a9 = smoothstep(e9,e10,x);
  return max(mix(v0,v1,a0)*step(e0,x)*step(x,e1),
    max(mix(v1,v2,a1)*step(e1,x)*step(x,e2),
    max(mix(v2,v3,a2)*step(e2,x)*step(x,e3),
    max(mix(v3,v4,a3)*step(e3,x)*step(x,e4),
    max(mix(v4,v5,a4)*step(e4,x)*step(x,e5),
    max(mix(v5,v6,a5)*step(e5,x)*step(x,e6),
    max(mix(v6,v7,a6)*step(e6,x)*step(x,e7),
    max(mix(v7,v8,a7)*step(e7,x)*step(x,e8),
    max(mix(v8,v9,a8)*step(e8,x)*step(x,e9),mix(v9,v10,a9)*step(e9,x)*step(x,e10)
  )))))))));
}
`,KY=`vec4 apply_cmap (float x) {
  const float e0 = 0.0;
  const vec4 v0 = vec4(0.050980392156862744,0.03137254901960784,0.5294117647058824,1);
  const float e1 = 0.13;
  const vec4 v1 = vec4(0.29411764705882354,0.011764705882352941,0.6313725490196078,1);
  const float e2 = 0.25;
  const vec4 v2 = vec4(0.49019607843137253,0.011764705882352941,0.6588235294117647,1);
  const float e3 = 0.38;
  const vec4 v3 = vec4(0.6588235294117647,0.13333333333333333,0.5882352941176471,1);
  const float e4 = 0.5;
  const vec4 v4 = vec4(0.796078431372549,0.27450980392156865,0.4745098039215686,1);
  const float e5 = 0.63;
  const vec4 v5 = vec4(0.8980392156862745,0.4196078431372549,0.36470588235294116,1);
  const float e6 = 0.75;
  const vec4 v6 = vec4(0.9725490196078431,0.5803921568627451,0.2549019607843137,1);
  const float e7 = 0.88;
  const vec4 v7 = vec4(0.9921568627450981,0.7647058823529411,0.1568627450980392,1);
  const float e8 = 1.0;
  const vec4 v8 = vec4(0.9411764705882353,0.9764705882352941,0.12941176470588237,1);
  float a0 = smoothstep(e0,e1,x);
  float a1 = smoothstep(e1,e2,x);
  float a2 = smoothstep(e2,e3,x);
  float a3 = smoothstep(e3,e4,x);
  float a4 = smoothstep(e4,e5,x);
  float a5 = smoothstep(e5,e6,x);
  float a6 = smoothstep(e6,e7,x);
  float a7 = smoothstep(e7,e8,x);
  return max(mix(v0,v1,a0)*step(e0,x)*step(x,e1),
    max(mix(v1,v2,a1)*step(e1,x)*step(x,e2),
    max(mix(v2,v3,a2)*step(e2,x)*step(x,e3),
    max(mix(v3,v4,a3)*step(e3,x)*step(x,e4),
    max(mix(v4,v5,a4)*step(e4,x)*step(x,e5),
    max(mix(v5,v6,a5)*step(e5,x)*step(x,e6),
    max(mix(v6,v7,a6)*step(e6,x)*step(x,e7),mix(v7,v8,a7)*step(e7,x)*step(x,e8)
  )))))));
}
`,qY=`vec4 apply_cmap (float x) {
  const float e0 = 0.0;
  const vec4 v0 = vec4(0.047058823529411764,0.2,0.5137254901960784,1);
  const float e1 = 0.25;
  const vec4 v1 = vec4(0.0392156862745098,0.5333333333333333,0.7294117647058823,1);
  const float e2 = 0.5;
  const vec4 v2 = vec4(0.9490196078431372,0.8274509803921568,0.2196078431372549,1);
  const float e3 = 0.75;
  const vec4 v3 = vec4(0.9490196078431372,0.5607843137254902,0.2196078431372549,1);
  const float e4 = 1.0;
  const vec4 v4 = vec4(0.8509803921568627,0.11764705882352941,0.11764705882352941,1);
  float a0 = smoothstep(e0,e1,x);
  float a1 = smoothstep(e1,e2,x);
  float a2 = smoothstep(e2,e3,x);
  float a3 = smoothstep(e3,e4,x);
  return max(mix(v0,v1,a0)*step(e0,x)*step(x,e1),
    max(mix(v1,v2,a1)*step(e1,x)*step(x,e2),
    max(mix(v2,v3,a2)*step(e2,x)*step(x,e3),mix(v3,v4,a3)*step(e3,x)*step(x,e4)
  )));
}
`,XY=`vec4 apply_cmap (float x) {
  const float e0 = 0.0;
  const vec4 v0 = vec4(0.49019607843137253,0,0.7019607843137254,1);
  const float e1 = 0.1;
  const vec4 v1 = vec4(0.7803921568627451,0,0.7058823529411765,1);
  const float e2 = 0.2;
  const vec4 v2 = vec4(1,0,0.4745098039215686,1);
  const float e3 = 0.3;
  const vec4 v3 = vec4(1,0.4235294117647059,0,1);
  const float e4 = 0.4;
  const vec4 v4 = vec4(0.8705882352941177,0.7607843137254902,0,1);
  const float e5 = 0.5;
  const vec4 v5 = vec4(0.5882352941176471,1,0,1);
  const float e6 = 0.6;
  const vec4 v6 = vec4(0,1,0.21568627450980393,1);
  const float e7 = 0.7;
  const vec4 v7 = vec4(0,0.9647058823529412,0.5882352941176471,1);
  const float e8 = 0.8;
  const vec4 v8 = vec4(0.19607843137254902,0.6549019607843137,0.8705882352941177,1);
  const float e9 = 0.9;
  const vec4 v9 = vec4(0.403921568627451,0.2,0.9215686274509803,1);
  const float e10 = 1.0;
  const vec4 v10 = vec4(0.48627450980392156,0,0.7294117647058823,1);
  float a0 = smoothstep(e0,e1,x);
  float a1 = smoothstep(e1,e2,x);
  float a2 = smoothstep(e2,e3,x);
  float a3 = smoothstep(e3,e4,x);
  float a4 = smoothstep(e4,e5,x);
  float a5 = smoothstep(e5,e6,x);
  float a6 = smoothstep(e6,e7,x);
  float a7 = smoothstep(e7,e8,x);
  float a8 = smoothstep(e8,e9,x);
  float a9 = smoothstep(e9,e10,x);
  return max(mix(v0,v1,a0)*step(e0,x)*step(x,e1),
    max(mix(v1,v2,a1)*step(e1,x)*step(x,e2),
    max(mix(v2,v3,a2)*step(e2,x)*step(x,e3),
    max(mix(v3,v4,a3)*step(e3,x)*step(x,e4),
    max(mix(v4,v5,a4)*step(e4,x)*step(x,e5),
    max(mix(v5,v6,a5)*step(e5,x)*step(x,e6),
    max(mix(v6,v7,a6)*step(e6,x)*step(x,e7),
    max(mix(v7,v8,a7)*step(e7,x)*step(x,e8),
    max(mix(v8,v9,a8)*step(e8,x)*step(x,e9),mix(v9,v10,a9)*step(e9,x)*step(x,e10)
  )))))))));
}
`,ZY=`vec4 apply_cmap (float x) {
  const float e0 = 0.0;
  const vec4 v0 = vec4(0.5882352941176471,0,0.35294117647058826,1);
  const float e1 = 0.125;
  const vec4 v1 = vec4(0,0,0.7843137254901961,1);
  const float e2 = 0.25;
  const vec4 v2 = vec4(0,0.09803921568627451,1,1);
  const float e3 = 0.375;
  const vec4 v3 = vec4(0,0.596078431372549,1,1);
  const float e4 = 0.5;
  const vec4 v4 = vec4(0.17254901960784313,1,0.5882352941176471,1);
  const float e5 = 0.625;
  const vec4 v5 = vec4(0.592156862745098,1,0,1);
  const float e6 = 0.75;
  const vec4 v6 = vec4(1,0.9176470588235294,0,1);
  const float e7 = 0.875;
  const vec4 v7 = vec4(1,0.43529411764705883,0,1);
  const float e8 = 1.0;
  const vec4 v8 = vec4(1,0,0,1);
  float a0 = smoothstep(e0,e1,x);
  float a1 = smoothstep(e1,e2,x);
  float a2 = smoothstep(e2,e3,x);
  float a3 = smoothstep(e3,e4,x);
  float a4 = smoothstep(e4,e5,x);
  float a5 = smoothstep(e5,e6,x);
  float a6 = smoothstep(e6,e7,x);
  float a7 = smoothstep(e7,e8,x);
  return max(mix(v0,v1,a0)*step(e0,x)*step(x,e1),
    max(mix(v1,v2,a1)*step(e1,x)*step(x,e2),
    max(mix(v2,v3,a2)*step(e2,x)*step(x,e3),
    max(mix(v3,v4,a3)*step(e3,x)*step(x,e4),
    max(mix(v4,v5,a4)*step(e4,x)*step(x,e5),
    max(mix(v5,v6,a5)*step(e5,x)*step(x,e6),
    max(mix(v6,v7,a6)*step(e6,x)*step(x,e7),mix(v7,v8,a7)*step(e7,x)*step(x,e8)
  )))))));
}
`,JY=`vec4 apply_cmap (float x) {
  const float e0 = 0.0;
  const vec4 v0 = vec4(0.0196078431372549,0.0392156862745098,0.6745098039215687,1);
  const float e1 = 0.35;
  const vec4 v1 = vec4(0.41568627450980394,0.5372549019607843,0.9686274509803922,1);
  const float e2 = 0.5;
  const vec4 v2 = vec4(0.7450980392156863,0.7450980392156863,0.7450980392156863,1);
  const float e3 = 0.6;
  const vec4 v3 = vec4(0.8627450980392157,0.6666666666666666,0.5176470588235295,1);
  const float e4 = 0.7;
  const vec4 v4 = vec4(0.9019607843137255,0.5686274509803921,0.35294117647058826,1);
  const float e5 = 1.0;
  const vec4 v5 = vec4(0.6980392156862745,0.0392156862745098,0.10980392156862745,1);
  float a0 = smoothstep(e0,e1,x);
  float a1 = smoothstep(e1,e2,x);
  float a2 = smoothstep(e2,e3,x);
  float a3 = smoothstep(e3,e4,x);
  float a4 = smoothstep(e4,e5,x);
  return max(mix(v0,v1,a0)*step(e0,x)*step(x,e1),
    max(mix(v1,v2,a1)*step(e1,x)*step(x,e2),
    max(mix(v2,v3,a2)*step(e2,x)*step(x,e3),
    max(mix(v3,v4,a3)*step(e3,x)*step(x,e4),mix(v4,v5,a4)*step(e4,x)*step(x,e5)
  ))));
}
`,e$=`vec4 apply_cmap (float x) {
  const float e0 = 0.0;
  const vec4 v0 = vec4(0.16470588235294117,0.09411764705882353,0.4235294117647059,1);
  const float e1 = 0.13;
  const vec4 v1 = vec4(0.12941176470588237,0.19607843137254902,0.6352941176470588,1);
  const float e2 = 0.25;
  const vec4 v2 = vec4(0.058823529411764705,0.35294117647058826,0.5686274509803921,1);
  const float e3 = 0.38;
  const vec4 v3 = vec4(0.1568627450980392,0.4627450980392157,0.5372549019607843,1);
  const float e4 = 0.5;
  const vec4 v4 = vec4(0.23137254901960785,0.5725490196078431,0.5294117647058824,1);
  const float e5 = 0.63;
  const vec4 v5 = vec4(0.30980392156862746,0.6862745098039216,0.49411764705882355,1);
  const float e6 = 0.75;
  const vec4 v6 = vec4(0.47058823529411764,0.796078431372549,0.40784313725490196,1);
  const float e7 = 0.88;
  const vec4 v7 = vec4(0.7568627450980392,0.8666666666666667,0.39215686274509803,1);
  const float e8 = 1.0;
  const vec4 v8 = vec4(0.9921568627450981,0.9372549019607843,0.6039215686274509,1);
  float a0 = smoothstep(e0,e1,x);
  float a1 = smoothstep(e1,e2,x);
  float a2 = smoothstep(e2,e3,x);
  float a3 = smoothstep(e3,e4,x);
  float a4 = smoothstep(e4,e5,x);
  float a5 = smoothstep(e5,e6,x);
  float a6 = smoothstep(e6,e7,x);
  float a7 = smoothstep(e7,e8,x);
  return max(mix(v0,v1,a0)*step(e0,x)*step(x,e1),
    max(mix(v1,v2,a1)*step(e1,x)*step(x,e2),
    max(mix(v2,v3,a2)*step(e2,x)*step(x,e3),
    max(mix(v3,v4,a3)*step(e3,x)*step(x,e4),
    max(mix(v4,v5,a4)*step(e4,x)*step(x,e5),
    max(mix(v5,v6,a5)*step(e5,x)*step(x,e6),
    max(mix(v6,v7,a6)*step(e6,x)*step(x,e7),mix(v7,v8,a7)*step(e7,x)*step(x,e8)
  )))))));
}
`,t$=`vec4 apply_cmap (float x) {
  const float e0 = 0.0;
  const vec4 v0 = vec4(1,0,1,1);
  const float e1 = 1.0;
  const vec4 v1 = vec4(1,1,0,1);
  float a0 = smoothstep(e0,e1,x);
  return mix(v0,v1,a0)*step(e0,x)*step(x,e1);
}
`,n$=`vec4 apply_cmap (float x) {
  const float e0 = 0.0;
  const vec4 v0 = vec4(0,0.5019607843137255,0.4,1);
  const float e1 = 1.0;
  const vec4 v1 = vec4(1,1,0.4,1);
  float a0 = smoothstep(e0,e1,x);
  return mix(v0,v1,a0)*step(e0,x)*step(x,e1);
}
`,r$=`vec4 apply_cmap (float x) {
  const float e0 = 0.0;
  const vec4 v0 = vec4(0.01568627450980392,0.13725490196078433,0.2,1);
  const float e1 = 0.13;
  const vec4 v1 = vec4(0.09019607843137255,0.2,0.47843137254901963,1);
  const float e2 = 0.25;
  const vec4 v2 = vec4(0.3333333333333333,0.23137254901960785,0.615686274509804,1);
  const float e3 = 0.38;
  const vec4 v3 = vec4(0.5058823529411764,0.30980392156862746,0.5607843137254902,1);
  const float e4 = 0.5;
  const vec4 v4 = vec4(0.6862745098039216,0.37254901960784315,0.5098039215686274,1);
  const float e5 = 0.63;
  const vec4 v5 = vec4(0.8705882352941177,0.4392156862745098,0.396078431372549,1);
  const float e6 = 0.75;
  const vec4 v6 = vec4(0.9764705882352941,0.5725490196078431,0.25882352941176473,1);
  const float e7 = 0.88;
  const vec4 v7 = vec4(0.9764705882352941,0.7686274509803922,0.2549019607843137,1);
  const float e8 = 1.0;
  const vec4 v8 = vec4(0.9098039215686274,0.9803921568627451,0.3568627450980392,1);
  float a0 = smoothstep(e0,e1,x);
  float a1 = smoothstep(e1,e2,x);
  float a2 = smoothstep(e2,e3,x);
  float a3 = smoothstep(e3,e4,x);
  float a4 = smoothstep(e4,e5,x);
  float a5 = smoothstep(e5,e6,x);
  float a6 = smoothstep(e6,e7,x);
  float a7 = smoothstep(e7,e8,x);
  return max(mix(v0,v1,a0)*step(e0,x)*step(x,e1),
    max(mix(v1,v2,a1)*step(e1,x)*step(x,e2),
    max(mix(v2,v3,a2)*step(e2,x)*step(x,e3),
    max(mix(v3,v4,a3)*step(e3,x)*step(x,e4),
    max(mix(v4,v5,a4)*step(e4,x)*step(x,e5),
    max(mix(v5,v6,a5)*step(e5,x)*step(x,e6),
    max(mix(v6,v7,a6)*step(e6,x)*step(x,e7),mix(v7,v8,a7)*step(e7,x)*step(x,e8)
  )))))));
}
`,i$=`vec4 apply_cmap (float x) {
  const float e0 = 0.0;
  const vec4 v0 = vec4(0.13333333333333333,0.12156862745098039,0.10588235294117647,1);
  const float e1 = 0.13;
  const vec4 v1 = vec4(0.2549019607843137,0.19607843137254902,0.1607843137254902,1);
  const float e2 = 0.25;
  const vec4 v2 = vec4(0.3843137254901961,0.27058823529411763,0.20392156862745098,1);
  const float e3 = 0.38;
  const vec4 v3 = vec4(0.5137254901960784,0.34901960784313724,0.2235294117647059,1);
  const float e4 = 0.5;
  const vec4 v4 = vec4(0.6313725490196078,0.4392156862745098,0.23137254901960785,1);
  const float e5 = 0.63;
  const vec4 v5 = vec4(0.7254901960784313,0.5490196078431373,0.25882352941176473,1);
  const float e6 = 0.75;
  const vec4 v6 = vec4(0.792156862745098,0.6823529411764706,0.34509803921568627,1);
  const float e7 = 0.88;
  const vec4 v7 = vec4(0.8470588235294118,0.8196078431372549,0.49411764705882355,1);
  const float e8 = 1.0;
  const vec4 v8 = vec4(0.9137254901960784,0.9647058823529412,0.6705882352941176,1);
  float a0 = smoothstep(e0,e1,x);
  float a1 = smoothstep(e1,e2,x);
  float a2 = smoothstep(e2,e3,x);
  float a3 = smoothstep(e3,e4,x);
  float a4 = smoothstep(e4,e5,x);
  float a5 = smoothstep(e5,e6,x);
  float a6 = smoothstep(e6,e7,x);
  float a7 = smoothstep(e7,e8,x);
  return max(mix(v0,v1,a0)*step(e0,x)*step(x,e1),
    max(mix(v1,v2,a1)*step(e1,x)*step(x,e2),
    max(mix(v2,v3,a2)*step(e2,x)*step(x,e3),
    max(mix(v3,v4,a3)*step(e3,x)*step(x,e4),
    max(mix(v4,v5,a4)*step(e4,x)*step(x,e5),
    max(mix(v5,v6,a5)*step(e5,x)*step(x,e6),
    max(mix(v6,v7,a6)*step(e6,x)*step(x,e7),mix(v7,v8,a7)*step(e7,x)*step(x,e8)
  )))))));
}
`,s$=`vec4 apply_cmap (float x) {
  const float e0 = 0.0;
  const vec4 v0 = vec4(0.06666666666666667,0.12549019607843137,0.25098039215686274,1);
  const float e1 = 0.13;
  const vec4 v1 = vec4(0.13725490196078433,0.20392156862745098,0.4549019607843137,1);
  const float e2 = 0.25;
  const vec4 v2 = vec4(0.11372549019607843,0.3176470588235294,0.611764705882353,1);
  const float e3 = 0.38;
  const vec4 v3 = vec4(0.12156862745098039,0.44313725490196076,0.6352941176470588,1);
  const float e4 = 0.5;
  const vec4 v4 = vec4(0.19607843137254902,0.5647058823529412,0.6627450980392157,1);
  const float e5 = 0.63;
  const vec4 v5 = vec4(0.3411764705882353,0.6784313725490196,0.6901960784313725,1);
  const float e6 = 0.75;
  const vec4 v6 = vec4(0.5843137254901961,0.7686274509803922,0.7411764705882353,1);
  const float e7 = 0.88;
  const vec4 v7 = vec4(0.796078431372549,0.8666666666666667,0.8274509803921568,1);
  const float e8 = 1.0;
  const vec4 v8 = vec4(0.996078431372549,0.984313725490196,0.9019607843137255,1);
  float a0 = smoothstep(e0,e1,x);
  float a1 = smoothstep(e1,e2,x);
  float a2 = smoothstep(e2,e3,x);
  float a3 = smoothstep(e3,e4,x);
  float a4 = smoothstep(e4,e5,x);
  float a5 = smoothstep(e5,e6,x);
  float a6 = smoothstep(e6,e7,x);
  float a7 = smoothstep(e7,e8,x);
  return max(mix(v0,v1,a0)*step(e0,x)*step(x,e1),
    max(mix(v1,v2,a1)*step(e1,x)*step(x,e2),
    max(mix(v2,v3,a2)*step(e2,x)*step(x,e3),
    max(mix(v3,v4,a3)*step(e3,x)*step(x,e4),
    max(mix(v4,v5,a4)*step(e4,x)*step(x,e5),
    max(mix(v5,v6,a5)*step(e5,x)*step(x,e6),
    max(mix(v6,v7,a6)*step(e6,x)*step(x,e7),mix(v7,v8,a7)*step(e7,x)*step(x,e8)
  )))))));
}
`,o$=`vec4 apply_cmap (float x) {
  const float e0 = 0.0;
  const vec4 v0 = vec4(0.09019607843137255,0.13725490196078433,0.07450980392156863,1);
  const float e1 = 0.13;
  const vec4 v1 = vec4(0.09411764705882353,0.25098039215686274,0.14901960784313725,1);
  const float e2 = 0.25;
  const vec4 v2 = vec4(0.043137254901960784,0.37254901960784315,0.17647058823529413,1);
  const float e3 = 0.38;
  const vec4 v3 = vec4(0.15294117647058825,0.4823529411764706,0.13725490196078433,1);
  const float e4 = 0.5;
  const vec4 v4 = vec4(0.37254901960784315,0.5725490196078431,0.047058823529411764,1);
  const float e5 = 0.63;
  const vec4 v5 = vec4(0.596078431372549,0.6470588235294118,0.07058823529411765,1);
  const float e6 = 0.75;
  const vec4 v6 = vec4(0.788235294117647,0.7294117647058823,0.27058823529411763,1);
  const float e7 = 0.88;
  const vec4 v7 = vec4(0.9137254901960784,0.8470588235294118,0.5372549019607843,1);
  const float e8 = 1.0;
  const vec4 v8 = vec4(1,0.9921568627450981,0.803921568627451,1);
  float a0 = smoothstep(e0,e1,x);
  float a1 = smoothstep(e1,e2,x);
  float a2 = smoothstep(e2,e3,x);
  float a3 = smoothstep(e3,e4,x);
  float a4 = smoothstep(e4,e5,x);
  float a5 = smoothstep(e5,e6,x);
  float a6 = smoothstep(e6,e7,x);
  float a7 = smoothstep(e7,e8,x);
  return max(mix(v0,v1,a0)*step(e0,x)*step(x,e1),
    max(mix(v1,v2,a1)*step(e1,x)*step(x,e2),
    max(mix(v2,v3,a2)*step(e2,x)*step(x,e3),
    max(mix(v3,v4,a3)*step(e3,x)*step(x,e4),
    max(mix(v4,v5,a4)*step(e4,x)*step(x,e5),
    max(mix(v5,v6,a5)*step(e5,x)*step(x,e6),
    max(mix(v6,v7,a6)*step(e6,x)*step(x,e7),mix(v7,v8,a7)*step(e7,x)*step(x,e8)
  )))))));
}
`,a$=`vec4 apply_cmap (float x) {
  const float e0 = 0.0;
  const vec4 v0 = vec4(0.26666666666666666,0.00392156862745098,0.32941176470588235,1);
  const float e1 = 0.13;
  const vec4 v1 = vec4(0.2784313725490196,0.17254901960784313,0.47843137254901963,1);
  const float e2 = 0.25;
  const vec4 v2 = vec4(0.23137254901960785,0.3176470588235294,0.5450980392156862,1);
  const float e3 = 0.38;
  const vec4 v3 = vec4(0.17254901960784313,0.44313725490196076,0.5568627450980392,1);
  const float e4 = 0.5;
  const vec4 v4 = vec4(0.12941176470588237,0.5647058823529412,0.5529411764705883,1);
  const float e5 = 0.63;
  const vec4 v5 = vec4(0.15294117647058825,0.6784313725490196,0.5058823529411764,1);
  const float e6 = 0.75;
  const vec4 v6 = vec4(0.3607843137254902,0.7843137254901961,0.38823529411764707,1);
  const float e7 = 0.88;
  const vec4 v7 = vec4(0.6666666666666666,0.8627450980392157,0.19607843137254902,1);
  const float e8 = 1.0;
  const vec4 v8 = vec4(0.9921568627450981,0.9058823529411765,0.1450980392156863,1);
  float a0 = smoothstep(e0,e1,x);
  float a1 = smoothstep(e1,e2,x);
  float a2 = smoothstep(e2,e3,x);
  float a3 = smoothstep(e3,e4,x);
  float a4 = smoothstep(e4,e5,x);
  float a5 = smoothstep(e5,e6,x);
  float a6 = smoothstep(e6,e7,x);
  float a7 = smoothstep(e7,e8,x);
  return max(mix(v0,v1,a0)*step(e0,x)*step(x,e1),
    max(mix(v1,v2,a1)*step(e1,x)*step(x,e2),
    max(mix(v2,v3,a2)*step(e2,x)*step(x,e3),
    max(mix(v3,v4,a3)*step(e3,x)*step(x,e4),
    max(mix(v4,v5,a4)*step(e4,x)*step(x,e5),
    max(mix(v5,v6,a5)*step(e5,x)*step(x,e6),
    max(mix(v6,v7,a6)*step(e6,x)*step(x,e7),mix(v7,v8,a7)*step(e7,x)*step(x,e8)
  )))))));
}
`,l$=`vec4 apply_cmap (float x) {
  const float e0 = 0.0;
  const vec4 v0 = vec4(0.49019607843137253,0,0.7019607843137254,1);
  const float e1 = 0.13;
  const vec4 v1 = vec4(0.6745098039215687,0,0.7333333333333333,1);
  const float e2 = 0.25;
  const vec4 v2 = vec4(0.8588235294117647,0,0.6666666666666666,1);
  const float e3 = 0.38;
  const vec4 v3 = vec4(1,0,0.5098039215686274,1);
  const float e4 = 0.5;
  const vec4 v4 = vec4(1,0.24705882352941178,0.2901960784313726,1);
  const float e5 = 0.63;
  const vec4 v5 = vec4(1,0.4823529411764706,0,1);
  const float e6 = 0.75;
  const vec4 v6 = vec4(0.9176470588235294,0.6901960784313725,0,1);
  const float e7 = 0.88;
  const vec4 v7 = vec4(0.7450980392156863,0.8941176470588236,0,1);
  const float e8 = 1.0;
  const vec4 v8 = vec4(0.5764705882352941,1,0,1);
  float a0 = smoothstep(e0,e1,x);
  float a1 = smoothstep(e1,e2,x);
  float a2 = smoothstep(e2,e3,x);
  float a3 = smoothstep(e3,e4,x);
  float a4 = smoothstep(e4,e5,x);
  float a5 = smoothstep(e5,e6,x);
  float a6 = smoothstep(e6,e7,x);
  float a7 = smoothstep(e7,e8,x);
  return max(mix(v0,v1,a0)*step(e0,x)*step(x,e1),
    max(mix(v1,v2,a1)*step(e1,x)*step(x,e2),
    max(mix(v2,v3,a2)*step(e2,x)*step(x,e3),
    max(mix(v3,v4,a3)*step(e3,x)*step(x,e4),
    max(mix(v4,v5,a4)*step(e4,x)*step(x,e5),
    max(mix(v5,v6,a5)*step(e5,x)*step(x,e6),
    max(mix(v6,v7,a6)*step(e6,x)*step(x,e7),mix(v7,v8,a7)*step(e7,x)*step(x,e8)
  )))))));
}
`,c$=`vec4 apply_cmap (float x) {
  const float e0 = 0.0;
  const vec4 v0 = vec4(0,0,1,1);
  const float e1 = 1.0;
  const vec4 v1 = vec4(0,1,0.5019607843137255,1);
  float a0 = smoothstep(e0,e1,x);
  return mix(v0,v1,a0)*step(e0,x)*step(x,e1);
}
`,u$=`vec4 apply_cmap (float x) {
  const float e0 = 0.0;
  const vec4 v0 = vec4(0.03137254901960784,0.11372549019607843,0.34509803921568627,1);
  const float e1 = 0.125;
  const vec4 v1 = vec4(0.1450980392156863,0.20392156862745098,0.5803921568627451,1);
  const float e2 = 0.25;
  const vec4 v2 = vec4(0.13333333333333333,0.3686274509803922,0.6588235294117647,1);
  const float e3 = 0.375;
  const vec4 v3 = vec4(0.11372549019607843,0.5686274509803921,0.7529411764705882,1);
  const float e4 = 0.5;
  const vec4 v4 = vec4(0.2549019607843137,0.7137254901960784,0.7686274509803922,1);
  const float e5 = 0.625;
  const vec4 v5 = vec4(0.4980392156862745,0.803921568627451,0.7333333333333333,1);
  const float e6 = 0.75;
  const vec4 v6 = vec4(0.7803921568627451,0.9137254901960784,0.7058823529411765,1);
  const float e7 = 0.875;
  const vec4 v7 = vec4(0.9294117647058824,0.9725490196078431,0.8509803921568627,1);
  const float e8 = 1.0;
  const vec4 v8 = vec4(1,1,0.8509803921568627,1);
  float a0 = smoothstep(e0,e1,x);
  float a1 = smoothstep(e1,e2,x);
  float a2 = smoothstep(e2,e3,x);
  float a3 = smoothstep(e3,e4,x);
  float a4 = smoothstep(e4,e5,x);
  float a5 = smoothstep(e5,e6,x);
  float a6 = smoothstep(e6,e7,x);
  float a7 = smoothstep(e7,e8,x);
  return max(mix(v0,v1,a0)*step(e0,x)*step(x,e1),
    max(mix(v1,v2,a1)*step(e1,x)*step(x,e2),
    max(mix(v2,v3,a2)*step(e2,x)*step(x,e3),
    max(mix(v3,v4,a3)*step(e3,x)*step(x,e4),
    max(mix(v4,v5,a4)*step(e4,x)*step(x,e5),
    max(mix(v5,v6,a5)*step(e5,x)*step(x,e6),
    max(mix(v6,v7,a6)*step(e6,x)*step(x,e7),mix(v7,v8,a7)*step(e7,x)*step(x,e8)
  )))))));
}
`,f$=`vec4 apply_cmap (float x) {
  const float e0 = 0.0;
  const vec4 v0 = vec4(0.5019607843137255,0,0.14901960784313725,1);
  const float e1 = 0.125;
  const vec4 v1 = vec4(0.7411764705882353,0,0.14901960784313725,1);
  const float e2 = 0.25;
  const vec4 v2 = vec4(0.8901960784313725,0.10196078431372549,0.10980392156862745,1);
  const float e3 = 0.375;
  const vec4 v3 = vec4(0.9882352941176471,0.3058823529411765,0.16470588235294117,1);
  const float e4 = 0.5;
  const vec4 v4 = vec4(0.9921568627450981,0.5529411764705883,0.23529411764705882,1);
  const float e5 = 0.625;
  const vec4 v5 = vec4(0.996078431372549,0.6980392156862745,0.2980392156862745,1);
  const float e6 = 0.75;
  const vec4 v6 = vec4(0.996078431372549,0.8509803921568627,0.4627450980392157,1);
  const float e7 = 0.875;
  const vec4 v7 = vec4(1,0.9294117647058824,0.6274509803921569,1);
  const float e8 = 1.0;
  const vec4 v8 = vec4(1,1,0.8,1);
  float a0 = smoothstep(e0,e1,x);
  float a1 = smoothstep(e1,e2,x);
  float a2 = smoothstep(e2,e3,x);
  float a3 = smoothstep(e3,e4,x);
  float a4 = smoothstep(e4,e5,x);
  float a5 = smoothstep(e5,e6,x);
  float a6 = smoothstep(e6,e7,x);
  float a7 = smoothstep(e7,e8,x);
  return max(mix(v0,v1,a0)*step(e0,x)*step(x,e1),
    max(mix(v1,v2,a1)*step(e1,x)*step(x,e2),
    max(mix(v2,v3,a2)*step(e2,x)*step(x,e3),
    max(mix(v3,v4,a3)*step(e3,x)*step(x,e4),
    max(mix(v4,v5,a4)*step(e4,x)*step(x,e5),
    max(mix(v5,v6,a5)*step(e5,x)*step(x,e6),
    max(mix(v6,v7,a6)*step(e6,x)*step(x,e7),mix(v7,v8,a7)*step(e7,x)*step(x,e8)
  )))))));
}
`,F3={__proto__:null,alpha:xY,autumn:CY,bathymetry:IY,blackbody:wY,bluered:SY,bone:bY,cdom:TY,chlorophyll:BY,cool:RY,copper:PY,cubehelix:LY,density:MY,earth:NY,electric:OY,freesurface_blue:DY,freesurface_red:kY,greens:QY,greys:FY,hot:UY,hsv:GY,inferno:zY,jet:VY,magma:jY,oxygen:HY,par:WY,phase:YY,picnic:$Y,plasma:KY,portland:qY,rainbow:ZY,rainbow_soft:XY,rdbu:JY,salinity:e$,spring:t$,summer:n$,temperature:r$,turbidity:i$,velocity_blue:s$,velocity_green:o$,viridis:a$,warm:l$,winter:c$,yignbu:u$,yiorrd:f$};function d$(t,e){return{name:`additive-colormap-${t}`,fs:`uniform float opacity;
uniform bool useTransparentColor;

${Q3}
${e}

vec4 colormap(float intensity) {
  return vec4(apply_transparent_color(apply_cmap(min(1.,intensity)).xyz, apply_cmap(0.).xyz, useTransparentColor, opacity));
}`,inject:{"fs:DECKGL_MUTATE_COLOR":`  float intensityCombo = 0.;
  intensityCombo += max(0.,intensity0);
  intensityCombo += max(0.,intensity1);
  intensityCombo += max(0.,intensity2);
  intensityCombo += max(0.,intensity3);
  intensityCombo += max(0.,intensity4);
  intensityCombo += max(0.,intensity5);
  rgba = colormap(intensityCombo);`}}}const rd={colormap:{type:"string",value:"viridis",compare:!0},opacity:{type:"number",value:1,compare:!0},useTransparentColor:{type:"boolean",value:!1,compare:!0}},U3=class extends So{getShaders(){var n;const t=((n=this==null?void 0:this.props)==null?void 0:n.colormap)||rd.colormap.value,e=F3[t];if(!e)throw Error(`No colormap named ${t} found in registry`);return{modules:[d$(t,e)]}}updateState({props:t,oldProps:e,changeFlags:n,...r}){if(super.updateState({props:t,oldProps:e,changeFlags:n,...r}),t.colormap!==e.colormap){const{gl:i}=this.context;this.state.model&&(this.state.model.delete(),this.setState({model:this._getModel(i)}))}}draw(){var r;const{useTransparentColor:t=rd.useTransparentColor.value,opacity:e=rd.opacity.value}=this.props,n={opacity:e,useTransparentColor:t};(r=this.state.model)==null||r.setUniforms(n)}};U3.extensionName="AdditiveColormapExtension";U3.defaultProps=rd;const h$=`uniform vec3 transparentColor;
uniform bool useTransparentColor;
uniform float opacity;

uniform vec3 colors[6];

${Q3}

void mutate_color(inout vec3 rgb, float intensity0, float intensity1, float intensity2, float intensity3, float intensity4, float intensity5) { 
  rgb += max(0.0, min(1.0, intensity0)) * vec3(colors[0]);
  rgb += max(0.0, min(1.0, intensity1)) * vec3(colors[1]);
  rgb += max(0.0, min(1.0, intensity2)) * vec3(colors[2]);
  rgb += max(0.0, min(1.0, intensity3)) * vec3(colors[3]);
  rgb += max(0.0, min(1.0, intensity4)) * vec3(colors[4]);
  rgb += max(0.0, min(1.0, intensity5)) * vec3(colors[5]);
}

vec4 apply_opacity(vec3 rgb) {
  return vec4(apply_transparent_color(rgb, transparentColor, useTransparentColor, opacity));
}
`,g$=`vec3 rgb = rgba.rgb;
mutate_color(rgb, intensity0, intensity1, intensity2, intensity3, intensity4, intensity5);
rgba = apply_opacity(rgb);
`,A$={name:"color-palette-module",fs:h$,inject:{"fs:DECKGL_MUTATE_COLOR":g$}};function p$(t,e,n){for(let r=0;r<n;r+=1)t.push(e);return t}const bI=[[0,0,255],[0,255,0],[255,0,255],[255,255,0],[255,128,0],[0,255,255],[255,255,255],[255,0,0]];function tE(t){if(t>bI.length)throw new Error("Too many colors");return bI.slice(0,t)}function nE({colors:t,channelsVisible:e}){const n=t.map((s,o)=>e[o]?s.map(a=>a/EY):wI),r=k3-n.length;return p$(n,wI,r).reduce((s,o)=>s.concat(o),[])}const id={colors:{type:"array",value:null,compare:!0},opacity:{type:"number",value:1,compare:!0},transparentColor:{type:"array",value:null,compare:!0},useTransparentColor:{type:"boolean",value:!1,compare:!0}},$a=class extends So{getShaders(){return{...super.getShaders(),modules:[A$]}}draw(){var a;const{colors:t,channelsVisible:e,opacity:n=id.opacity.value,transparentColor:r=id.transparentColor.value,useTransparentColor:i=id.useTransparentColor.value}=this.props,o={colors:nE({channelsVisible:e||this.selections.map(()=>!0),colors:t||tE(this.props.selections.length)}),opacity:n,transparentColor:(r||[0,0,0]).map(l=>l/255),useTransparentColor:!!i};(a=this.state.model)==null||a.setUniforms(o)}};$a.extensionName="ColorPaletteExtension";$a.defaultProps=id;const m$=`// lens bounds for ellipse
uniform float majorLensAxis;
uniform float minorLensAxis;
uniform vec2 lensCenter;

// lens uniforms
uniform bool lensEnabled;
uniform int lensSelection;
uniform vec3 lensBorderColor;
uniform float lensBorderRadius;

// color palette
uniform vec3 colors[6];

bool frag_in_lens_bounds(vec2 vTexCoord) {
  // Check membership in what is (not visually, but effectively) an ellipse.
  // Since the fragment space is a unit square and the real coordinates could be longer than tall,
  // to get a circle visually we have to treat the check as that of an ellipse to get the effect of a circle.

  // Check membership in ellipse.
  return pow((lensCenter.x - vTexCoord.x) / majorLensAxis, 2.) + pow((lensCenter.y - vTexCoord.y) / minorLensAxis, 2.) < (1. - lensBorderRadius);
}

bool frag_on_lens_bounds(vec2 vTexCoord) {
  // Same as the above, except this checks the boundary.

  float ellipseDistance = pow((lensCenter.x - vTexCoord.x) / majorLensAxis, 2.) + pow((lensCenter.y - vTexCoord.y) / minorLensAxis, 2.);

  // Check membership on "bourndary" of ellipse.
  return ellipseDistance <= 1. && ellipseDistance >= (1. - lensBorderRadius);
}
// Return a float for boolean arithmetic calculation.
float get_use_color_float(vec2 vTexCoord, int channelIndex) {
  bool isFragInLensBounds = frag_in_lens_bounds(vTexCoord);
  bool inLensAndUseLens = lensEnabled && isFragInLensBounds;
  return float(int((inLensAndUseLens && channelIndex == lensSelection) || (!inLensAndUseLens)));
 
}
void mutate_color(inout vec3 rgb, float intensity0, float intensity1, float intensity2, float intensity3, float intensity4, float intensity5, vec2 vTexCoord){
  float useColorValue = 0.;

  useColorValue = get_use_color_float(vTexCoord, 0);
  rgb += max(0., min(1., intensity0)) * max(vec3(colors[0]), (1. - useColorValue) * vec3(1., 1., 1.));

  useColorValue = get_use_color_float(vTexCoord, 1);
  rgb += max(0., min(1., intensity1)) * max(vec3(colors[1]), (1. - useColorValue) * vec3(1., 1., 1.));

  useColorValue = get_use_color_float(vTexCoord, 2);
  rgb += max(0., min(1., intensity2)) * max(vec3(colors[2]), (1. - useColorValue) * vec3(1., 1., 1.));

  useColorValue = get_use_color_float(vTexCoord, 3);
  rgb += max(0., min(1., intensity3)) * max(vec3(colors[3]), (1. - useColorValue) * vec3(1., 1., 1.));

  useColorValue = get_use_color_float(vTexCoord, 4);
  rgb += max(0., min(1., intensity4)) * max(vec3(colors[4]), (1. - useColorValue) * vec3(1., 1., 1.));

  useColorValue = get_use_color_float(vTexCoord, 5);
  rgb += max(0., min(1., intensity5)) * max(vec3(colors[5]), (1. - useColorValue) * vec3(1., 1., 1.));
}
`,v$={name:"lens-module",fs:m$,inject:{"fs:DECKGL_MUTATE_COLOR":`
   vec3 rgb = rgba.rgb;
   mutate_color(rgb, intensity0, intensity1, intensity2, intensity3, intensity4, intensity5, vTexCoord);
   rgba = vec4(rgb, 1.);
  `,"fs:#main-end":`
      bool isFragOnLensBounds = frag_on_lens_bounds(vTexCoord);
     gl_FragColor = (lensEnabled && isFragOnLensBounds) ? vec4(lensBorderColor, 1.) : gl_FragColor;
  `}},Wo={lensEnabled:{type:"boolean",value:!1,compare:!0},lensSelection:{type:"number",value:0,compare:!0},lensRadius:{type:"number",value:100,compare:!0},lensBorderColor:{type:"array",value:[255,255,255],compare:!0},lensBorderRadius:{type:"number",value:.02,compare:!0},colors:{type:"array",value:null,compare:!0}},G3=class extends So{getShaders(){return{...super.getShaders(),modules:[v$]}}initializeState(){const t=this.getCurrentLayer();if(t.isComposite)return;const e=()=>{const{viewportId:n}=t.props,{lensRadius:r=Wo.lensRadius.value}=this.props;if(!n){t.setState({unprojectLensBounds:[0,0,0,0]});return}const{mousePosition:i}=t.context,s=t.context.deck.viewManager.views.filter(l=>l.id===n)[0],o=t.context.deck.viewManager.viewState[n],a=s.makeViewport({...o,viewState:o});if(i&&a.containsPixel(i)){const l={x:i.x-a.x,y:i.y-a.y},u=[[l.x-r,l.y],[l.x,l.y+r],[l.x+r,l.y],[l.x,l.y-r]].map((f,d)=>a.unproject(f)[d%2]);t.setState({unprojectLensBounds:u})}else t.setState({unprojectLensBounds:[0,0,0,0]})};this.context.deck&&this.context.deck.eventManager.on({pointermove:e,pointerleave:e,wheel:e}),this.setState({onMouseMove:e,unprojectLensBounds:[0,0,0,0]})}draw(){var C;const{unprojectLensBounds:t=[0,0,0,0]}=this.state,{bounds:e,lensEnabled:n=Wo.lensEnabled.value,lensSelection:r=Wo.lensSelection.value,lensBorderColor:i=Wo.lensBorderColor.value,lensBorderRadius:s=Wo.lensBorderRadius.value,colors:o,channelsVisible:a}=this.props,[l,c,u,f]=t,[d,h,g,A]=e,E=(l-d)/(g-d),p=(c-A)/(h-A),m=(u-d)/(g-d),y=(f-A)/(h-A),_=nE({channelsVisible:a||this.selections.map(()=>!0),colors:o||tE(this.props.selections.length)}),I={majorLensAxis:(m-E)/2,minorLensAxis:(p-y)/2,lensCenter:[(m+E)/2,(p+y)/2],lensEnabled:n,lensSelection:r,lensBorderColor:i,lensBorderRadius:s,colors:_};(C=this.state.model)==null||C.setUniforms(I)}finalizeState(){var t,e,n;this.context.deck&&this.context.deck.eventManager.off({pointermove:(t=this.state)==null?void 0:t.onMouseMove,pointerleave:(e=this.state)==null?void 0:e.onMouseMove,wheel:(n=this.state)==null?void 0:n.onMouseMove})}};G3.extensionName="LensExtension";G3.defaultProps=Wo;function y$(t,e){const n=`${e}

vec4 colormap(float intensity, float opacity) {
  return vec4(apply_cmap(min(1.,intensity)).xyz, opacity);
}`;return{name:`additive-colormap-3d-${t}`,fs:n}}const z3={colormap:{type:"string",value:"viridis",compare:!0}},Au=class extends So{constructor(...e){super(e),this.opts=this.opts||{}}getShaders(){var r;const e=((r=this==null?void 0:this.props)==null?void 0:r.colormap)||z3.colormap.value,n=F3[e];return{...super.getShaders(),modules:[y$(e,n)]}}updateState({props:e,oldProps:n,changeFlags:r,...i}){if(super.updateState({props:e,oldProps:n,changeFlags:r,...i}),e.colormap!==n.colormap){const{gl:s}=this.context;this.state.model&&(this.state.model.delete(),this.setState({model:this._getModel(s)}))}}};Au.extensionName="BaseExtension";Au.defaultProps=z3;const E$="",_$=`  float intensityArray[6] = float[6](intensityValue0, intensityValue1, intensityValue2, intensityValue3, intensityValue4, intensityValue5);
  float total = 0.0;

  for(int i = 0; i < 6; i++) {
    total += intensityArray[i];
  }
  // Do not go past 1 in opacity/colormap value.
  total = min(total, 1.0);

  vec4 val_color = colormap(total, total);

  // Opacity correction
  val_color.a = 1.0 - pow(1.0 - val_color.a, 1.0);
  color.rgb += (1.0 - color.a) * val_color.a * val_color.rgb;
  color.a += (1.0 - color.a) * val_color.a;
  if (color.a >= 0.95) {
    break;
  }
  p += ray_dir * dt;
`,x$="",C$=class extends Au{constructor(e){super(e),this.rendering={_BEFORE_RENDER:E$,_RENDER:_$,_AFTER_RENDER:x$}}};C$.extensionName="AdditiveBlendExtension";const I$=`  float maxVals[6] = float[6](-1.0, -1.0, -1.0, -1.0, -1.0, -1.0);
`,w$=`  float intensityArray[6] = float[6](intensityValue0, intensityValue1, intensityValue2, intensityValue3, intensityValue4, intensityValue5);

  for(int i = 0; i < 6; i++) {
    if(intensityArray[i] > maxVals[i]) {
      maxVals[i] = intensityArray[i];
    }
  }
`,S$=`  float total = 0.0;
  for(int i = 0; i < 6; i++) {
    total += maxVals[i];
  }
  // Do not go past 1 in opacity/colormap value.
  total = min(total, 1.0);
  color = colormap(total, total);
`,b$=class extends Au{constructor(e){super(e),this.rendering={_BEFORE_RENDER:I$,_RENDER:w$,_AFTER_RENDER:S$}}};b$.extensionName="MaximumIntensityProjectionExtension";const T$=`  float minVals[6] = float[6](1. / 0., 1. / 0., 1. / 0., 1. / 0., 1. / 0., 1. / 0.);
`,B$=`  float intensityArray[6] = float[6](intensityValue0, intensityValue1, intensityValue2, intensityValue3, intensityValue4, intensityValue5);

  for(int i = 0; i < 6; i++) {
    if(intensityArray[i] < minVals[i]) {
      minVals[i] = intensityArray[i];
    }
  }
`,R$=`  float total = 0.0;
  for(int i = 0; i < 6; i++) {
    total += minVals[i];
  }
  // Do not go past 1 in opacity/colormap value.
  total = min(total, 1.0);
  color = colormap(total, total);
`,P$=class extends Au{constructor(e){super(e),this.rendering={_BEFORE_RENDER:T$,_RENDER:B$,_AFTER_RENDER:R$}}};P$.extensionName="MinimumIntensityProjectionExtension";const L$={colors:{type:"array",value:null,compare:!0}},Ka=class extends So{constructor(...t){super(t),this.opts=this.opts||{}}draw(){var i;const{colors:t,channelsVisible:e}=this.props,r={colors:nE({channelsVisible:e||this.selections.map(()=>!0),colors:t||tE(this.props.selections.length)})};(i=this.state.model)==null||i.setUniforms(r)}};Ka.extensionName="BaseExtension";Ka.defaultProps=L$;const M$="",N$=`  vec3 rgbCombo = vec3(0.0);
  vec3 hsvCombo = vec3(0.0);
  float intensityArray[6] = float[6](intensityValue0, intensityValue1, intensityValue2, intensityValue3, intensityValue4, intensityValue5);
  float total = 0.0;
  for(int i = 0; i < 6; i++) {
    float intensityValue = intensityArray[i];
    rgbCombo += max(0.0, min(1.0, intensityValue)) * colors[i];
    total += intensityValue;
  }
  // Do not go past 1 in opacity.
  total = min(total, 1.0);
  vec4 val_color = vec4(rgbCombo, total);
  // Opacity correction
  val_color.a = 1.0 - pow(1.0 - val_color.a, 1.0);
  color.rgb += (1.0 - color.a) * val_color.a * val_color.rgb;
  color.a += (1.0 - color.a) * val_color.a;
  if (color.a >= 0.95) {
    break;
  }
`,O$="",V3=class extends Ka{constructor(t){super(t),this.rendering={_BEFORE_RENDER:M$,_RENDER:N$,_AFTER_RENDER:O$}}};V3.extensionName="AdditiveBlendExtension";const D$=`  float maxVals[6] = float[6](-1.0, -1.0, -1.0, -1.0, -1.0, -1.0);
`,k$=`  float intensityArray[6] = float[6](intensityValue0, intensityValue1, intensityValue2, intensityValue3, intensityValue4, intensityValue5);

  for(int i = 0; i < 6; i++) {
    if(intensityArray[i] > maxVals[i]) {
      maxVals[i] = intensityArray[i];
    }
  }
`,Q$=`  vec3 rgbCombo = vec3(0.0);
  for(int i = 0; i < 6; i++) {
    rgbCombo += max(0.0, min(1.0, maxVals[i])) * vec3(colors[i]);
  }
  color = vec4(rgbCombo, 1.0);
`,j3=class extends Ka{constructor(t){super(t),this.rendering={_BEFORE_RENDER:D$,_RENDER:k$,_AFTER_RENDER:Q$}}};j3.extensionName="MaximumIntensityProjectionExtension";const F$=`  float minVals[6] = float[6](1. / 0., 1. / 0., 1. / 0., 1. / 0., 1. / 0., 1. / 0.);
`,U$=`  float intensityArray[6] = float[6](intensityValue0, intensityValue1, intensityValue2, intensityValue3, intensityValue4, intensityValue5);

  for(int i = 0; i < 6; i++) {
    if(intensityArray[i] < minVals[i]) {
      minVals[i] = intensityArray[i];
    }
  }
`,G$=`  vec3 rgbCombo = vec3(0.0);
  for(int i = 0; i < 6; i++) {
    rgbCombo += max(0.0, min(1.0, minVals[i])) * vec3(colors[i]);
  }
  color = vec4(rgbCombo, 1.0);
`,H3=class extends Ka{constructor(t){super(t),this.rendering={_BEFORE_RENDER:F$,_RENDER:U$,_AFTER_RENDER:G$}}};H3.extensionName="MinimumIntensityProjectionExtension";const W3={BaseExtension:Ka,AdditiveBlendExtension:V3,MaximumIntensityProjectionExtension:j3,MinimumIntensityProjectionExtension:H3},z$=`float apply_contrast_limits(float intensity, vec2 contrastLimits) {
    return  max(0., (intensity - contrastLimits[0]) / max(0.0005, (contrastLimits[1] - contrastLimits[0])));
}
`,V$={name:"channel-intensity",defines:{SAMPLER_TYPE:"usampler2D",COLORMAP_FUNCTION:""},fs:z$};function j$(t){return[...Array(t).keys()]}function Y3(t,e,n){for(let r=0;r<n;r+=1)t.push(e);return t}function rE(t){const e=SI[t];if(!e){const n=Object.keys(SI);throw Error(`Dtype not supported, got ${t}. Must be one of ${n}.`)}return e}function $3({contrastLimits:t=[],channelsVisible:e,domain:n,dtype:r}){const i=n&&n[1]||rE(r).max,s=t.map((l,c)=>e[c]?l:[i,i]),o=k3-s.length;if(o<0)throw Error(`${s.lengths} channels passed in, but only 6 are allowed.`);return Y3(s,[i,i],o).reduce((l,c)=>l.concat(c),[])}function H$(t){var i;const{x:e,y:n,z:r}=((i=t==null?void 0:t.meta)==null?void 0:i.physicalSizes)??{};if(e!=null&&e.size&&(n!=null&&n.size)&&(r!=null&&r.size)){const s=Math.min(r.size,e.size,n.size),o=[e.size/s,n.size/s,r.size/s];return new Ze().scale(o)}return new Ze().identity()}function W$(t){const e=new Fy().makeViewport({viewState:t,height:t.height,width:t.width});return[e.unproject([0,0]),e.unproject([e.width,0]),e.unproject([e.width,e.height]),e.unproject([0,e.height])]}const dh=[1,2,3,4,5,10,20,25,50,100,200,250,500,1e3],Y$=dh[0],$$=dh[dh.length-1],Pm=[{symbol:"Y",exponent:24},{symbol:"Z",exponent:21},{symbol:"E",exponent:18},{symbol:"P",exponent:15},{symbol:"T",exponent:12},{symbol:"G",exponent:9},{symbol:"M",exponent:6},{symbol:"k",exponent:3},{symbol:"h",exponent:2},{symbol:"da",exponent:1},{symbol:"",exponent:0},{symbol:"d",exponent:-1},{symbol:"c",exponent:-2},{symbol:"m",exponent:-3},{symbol:"",exponent:-6},{symbol:"n",exponent:-9},{symbol:"p",exponent:-12},{symbol:"f",exponent:-15},{symbol:"a",exponent:-18},{symbol:"z",exponent:-21},{symbol:"y",exponent:-24}];function K$(t,e){if(!e||e==="m")return t;if(e.length>1){let n=e.substring(0,e.length-1);n==="u"&&(n="");const r=Pm.find(i=>i.symbol===n);if(r)return t*10**r.exponent}throw new Error("Received unknown unit")}function q$(t){let e=0;(t<Y$||t>$$)&&(e=Math.floor(Math.log10(t)));let n=Pm.find(o=>o.exponent%3===0&&o.exponent<=e),r=t/10**n.exponent;r>500&&r<=1e3&&(n=Pm.find(o=>o.exponent%3===0&&o.exponent<=e+3),r=t/10**n.exponent);const i=dh.find(o=>o>r);return[i*10**n.exponent,i,n.symbol]}const X$=`#define SHADER_NAME xr-layer-fragment-shader

precision highp float;
precision highp int;
precision highp SAMPLER_TYPE;

// our texture
uniform SAMPLER_TYPE channel0;
uniform SAMPLER_TYPE channel1;
uniform SAMPLER_TYPE channel2;
uniform SAMPLER_TYPE channel3;
uniform SAMPLER_TYPE channel4;
uniform SAMPLER_TYPE channel5;

in vec2 vTexCoord;

// range
uniform vec2 contrastLimits[6];

void main() {

  float intensity0 = float(texture(channel0, vTexCoord).r);
  DECKGL_PROCESS_INTENSITY(intensity0, contrastLimits[0], 0);
  float intensity1 = float(texture(channel1, vTexCoord).r);
  DECKGL_PROCESS_INTENSITY(intensity1, contrastLimits[1], 1);
  float intensity2 = float(texture(channel2, vTexCoord).r);
  DECKGL_PROCESS_INTENSITY(intensity2, contrastLimits[2], 2);
  float intensity3 = float(texture(channel3, vTexCoord).r);
  DECKGL_PROCESS_INTENSITY(intensity3, contrastLimits[3], 3);
  float intensity4 = float(texture(channel4, vTexCoord).r);
  DECKGL_PROCESS_INTENSITY(intensity4, contrastLimits[4], 4);
  float intensity5 = float(texture(channel5, vTexCoord).r);
  DECKGL_PROCESS_INTENSITY(intensity5, contrastLimits[5], 5);

  DECKGL_MUTATE_COLOR(gl_FragColor, intensity0, intensity1, intensity2, intensity3, intensity4, intensity5, vTexCoord);


  geometry.uv = vTexCoord;
  DECKGL_FILTER_COLOR(gl_FragColor, geometry);
}
`,Z$=`#define SHADER_NAME xr-layer-vertex-shader

attribute vec2 texCoords;
attribute vec3 positions;
attribute vec3 positions64Low;
attribute vec3 instancePickingColors;
varying vec2 vTexCoord;

void main(void) {
  geometry.worldPosition = positions;
  geometry.uv = texCoords;
  geometry.pickingColor = instancePickingColors;
  gl_Position = project_position_to_clipspace(positions, positions64Low, vec3(0.), geometry.position);
  DECKGL_FILTER_GL_POSITION(gl_Position, geometry);
  vTexCoord = texCoords;
  vec4 color = vec4(0.);
  DECKGL_FILTER_COLOR(color, geometry);
}
`,TI={fs:X$,vs:Z$};function J$(t,e){const n=z0(t,je.TEXTURE_FLOAT),r=z0(t,je.TEXTURE_FILTER_LINEAR_FLOAT);if(!n)throw new Error("WebGL1 context does not support floating point textures.  Unable to display raster data.");return!r&&e===ee.LINEAR?(console.warn("LINEAR filtering not supported in WebGL1 context.  Falling back to NEAREST."),ee.NEAREST):e}function BI(t,e,n){if(!Te(e))return{format:ee.LUMINANCE,dataFormat:ee.LUMINANCE,type:ee.FLOAT,sampler:"sampler2D",shaderModule:TI,filter:J$(e,n),cast:a=>new Float32Array(a)};const r=n===ee.LINEAR,i={...TI},s=`#version 300 es
`;i.fs=s.concat(i.fs),i.vs=s.concat(i.vs);const o=rE(r?"Float32":t);return{shaderModule:i,filter:n,cast:r?a=>new Float32Array(a):a=>a,...o}}const eK={pickable:{type:"boolean",value:!0,compare:!0},coordinateSystem:me.CARTESIAN,channelData:{type:"object",value:{},compare:!0},bounds:{type:"array",value:[0,0,1,1],compare:!0},contrastLimits:{type:"array",value:[],compare:!0},channelsVisible:{type:"array",value:[],compare:!0},dtype:{type:"string",value:"Uint16",compare:!0},interpolation:{type:"number",value:ee.NEAREST,compare:!0}},qa=class extends Fn{getShaders(){const{dtype:t,interpolation:e}=this.props,{shaderModule:n,sampler:r}=BI(t,this.context.gl,e),i=this._isHookDefinedByExtensions("fs:DECKGL_PROCESS_INTENSITY"),s={...V$,inject:{}};return i||(s.inject["fs:DECKGL_PROCESS_INTENSITY"]=`
        intensity = apply_contrast_limits(intensity, contrastLimits);
      `),super.getShaders({...n,defines:{SAMPLER_TYPE:r},modules:[Ts,Bs,s]})}_isHookDefinedByExtensions(t){const{extensions:e}=this.props;return e==null?void 0:e.some(n=>{const r=n.getShaders(),{inject:i={},modules:s=[]}=r,o=i[t],a=s.some(l=>l==null?void 0:l.inject[t]);return o||a})}initializeState(){const{gl:t}=this.context;t.pixelStorei(ee.UNPACK_ALIGNMENT,1),t.pixelStorei(ee.PACK_ALIGNMENT,1),this.getAttributeManager().add({positions:{size:3,type:ee.DOUBLE,fp64:this.use64bitPositions(),update:this.calculatePositions,noAlloc:!0}}),this.setState({numInstances:1,positions:new Float64Array(12)});const n=wo.getDefaultProgramManager(t),r="fs:DECKGL_MUTATE_COLOR(inout vec4 rgba, float intensity0, float intensity1, float intensity2, float intensity3, float intensity4, float intensity5, vec2 vTexCoord)",i="fs:DECKGL_PROCESS_INTENSITY(inout float intensity, vec2 contrastLimits, int channelIndex)";n._hookFunctions.includes(r)||n.addShaderHook(r),n._hookFunctions.includes(i)||n.addShaderHook(i)}finalizeState(){super.finalizeState(),this.state.textures&&Object.values(this.state.textures).forEach(t=>t&&t.delete())}updateState({props:t,oldProps:e,changeFlags:n,...r}){var s,o;if(super.updateState({props:t,oldProps:e,changeFlags:n,...r}),n.extensionsChanged||t.interpolation!==e.interpolation){const{gl:a}=this.context;this.state.model&&this.state.model.delete(),this.setState({model:this._getModel(a)}),this.getAttributeManager().invalidateAll()}(t.channelData!==e.channelData&&((s=t.channelData)==null?void 0:s.data)!==((o=e.channelData)==null?void 0:o.data)||t.interpolation!==e.interpolation)&&this.loadChannelTextures(t.channelData);const i=this.getAttributeManager();t.bounds!==e.bounds&&i.invalidate("positions")}_getModel(t){return t?new Jn(t,{...this.getShaders(),id:this.props.id,geometry:new Wr({drawMode:ee.TRIANGLE_FAN,vertexCount:4,attributes:{texCoords:new Float32Array([0,1,0,0,1,0,1,1])}}),isInstanced:!1}):null}calculatePositions(t){const{positions:e}=this.state,{bounds:n}=this.props;e[0]=n[0],e[1]=n[1],e[2]=0,e[3]=n[0],e[4]=n[3],e[5]=0,e[6]=n[2],e[7]=n[3],e[8]=0,e[9]=n[2],e[10]=n[1],e[11]=0,t.value=e}draw({uniforms:t}){const{textures:e,model:n}=this.state;if(e&&n){const{contrastLimits:r,domain:i,dtype:s,channelsVisible:o}=this.props,a=Object.values(e).filter(c=>c).length,l=$3({contrastLimits:r.slice(0,a),channelsVisible:o.slice(0,a),domain:i,dtype:s});n.setUniforms({...t,contrastLimits:l,...e}).draw()}}loadChannelTextures(t){const e={channel0:null,channel1:null,channel2:null,channel3:null,channel4:null,channel5:null};this.state.textures&&Object.values(this.state.textures).forEach(n=>n&&n.delete()),t&&Object.keys(t).length>0&&t.data&&(t.data.forEach((n,r)=>{e[`channel${r}`]=this.dataToTexture(n,t.width,t.height)},this),this.setState({textures:e}))}dataToTexture(t,e,n){var s;const{interpolation:r}=this.props,i=BI(this.props.dtype,this.context.gl,r);return new _n(this.context.gl,{width:e,height:n,data:((s=i.cast)==null?void 0:s.call(i,t))??t,mipmaps:!1,parameters:{[ee.TEXTURE_MIN_FILTER]:i.filter,[ee.TEXTURE_MAG_FILTER]:i.filter,[ee.TEXTURE_WRAP_S]:ee.CLAMP_TO_EDGE,[ee.TEXTURE_WRAP_T]:ee.CLAMP_TO_EDGE},format:i.format,dataFormat:i.dataFormat,type:i.type})}};qa.layerName="XRLayer";qa.defaultProps=eK;const ai={WhiteIsZero:0,BlackIsZero:1,RGB:2,Palette:3,TransparencyMask:4,CMYK:5,YCbCr:6,CIELab:8,ICCLab:9},K3={...og.defaultProps,pickable:{type:"boolean",value:!0,compare:!0},coordinateSystem:me.CARTESIAN},tK=(t,e)=>{const n=e?"true":"false",r=`vec3(${(e||[0,0,0]).map(i=>String(i/255)).join(",")})`;switch(t){case ai.RGB:return`color[3] = (${n} && (color.rgb == ${r})) ? 0.0 : color.a;`;case ai.WhiteIsZero:return`          float value = 1.0 - (color.r / 256.0);
          color = vec4(value, value, value, (${n} && vec3(value, value, value) == ${r}) ? 0.0 : color.a);
        `;case ai.BlackIsZero:return`          float value = (color.r / 256.0);
          color = vec4(value, value, value, (${n} && vec3(value, value, value) == ${r}) ? 0.0 : color.a);
        `;case ai.YCbCr:return`          float y = color[0];
          float cb = color[1];
          float cr = color[2];
          color[0] = (y + (1.40200 * (cr - .5)));
          color[1] = (y - (0.34414 * (cb - .5)) - (0.71414 * (cr - .5)));
          color[2] = (y + (1.77200 * (cb - .5)));
          color[3] = (${n} && distance(color.rgb, ${r}) < 0.01) ? 0.0 : color.a;
        `;default:return console.error("Unsupported photometric interpretation or none provided.  No transformation will be done to image data"),""}},nK=t=>{switch(t){case ai.RGB:return[0,0,0,0];case ai.WhiteIsZero:return[255,255,255,0];case ai.BlackIsZero:return[0,0,0,0];case ai.YCbCr:return[16,128,128,0];default:return console.error("Unsupported photometric interpretation or none provided.  No transformation will be done to image data"),[0,0,0,0]}};class iE extends og{_getModel(e){const{photometricInterpretation:n,transparentColorInHook:r}=this.props,i=tK(n,r);return e?new Jn(e,{...this.getShaders(),id:this.props.id,geometry:new Wr({drawMode:ee.TRIANGLES,vertexCount:6}),isInstanced:!1,inject:{"fs:DECKGL_FILTER_COLOR":i}}):null}}const pu=class extends er{initializeState(t){const{gl:e}=this.context;e.pixelStorei(ee.UNPACK_ALIGNMENT,1),e.pixelStorei(ee.PACK_ALIGNMENT,1),super.initializeState(t)}renderLayers(){const{photometricInterpretation:t,transparentColor:e}=this.props,n=nK(t);return new iE(this.props,{transparentColor:n,transparentColorInHook:e,id:`${this.props.id}-wrapped`})}};pu.layerName="BitmapLayer";pu.PHOTOMETRIC_INTERPRETATIONS=ai;pu.defaultProps={...K3,image:{type:"object",value:{},compare:!0},transparentColor:{type:"array",value:[0,0,0],compare:!0},photometricInterpretation:{type:"number",value:2,compare:!0}};iE.defaultProps=K3;iE.layerName="BitmapLayerWrapper";function rK(t){const{bbox:{left:e,top:n,right:r,bottom:i},index:{x:s,y:o,z:a}}=t.tile,{data:l,id:c,loader:u,maxZoom:f}=t;if([e,i,r,n].some(E=>E<0)||!l)return null;const d=u[0],{height:h,width:g}=hu(d),A=[e,l.height<d.tileSize?h:i,l.width<d.tileSize?g:r,n];if(Ga(d.shape)){const{photometricInterpretation:E=2}=d.meta;return new pu(t,{image:l,photometricInterpretation:E,bounds:A,id:`tile-sub-layer-${A}-${c}`,tileId:{x:s,y:o,z:a},extensions:[]})}return new qa(t,{channelData:l,bounds:A,id:`tile-sub-layer-${A}-${c}`,tileId:{x:s,y:o,z:a},interpolation:a===f?ee.NEAREST:ee.LINEAR})}const iK={pickable:{type:"boolean",value:!0,compare:!0},coordinateSystem:me.CARTESIAN,contrastLimits:{type:"array",value:[],compare:!0},channelsVisible:{type:"array",value:[],compare:!0},renderSubLayers:{type:"function",value:rK,compare:!1},dtype:{type:"string",value:"Uint16",compare:!0},domain:{type:"array",value:[],compare:!0},viewportId:{type:"string",value:"",compare:!0},interpolation:{type:"number",value:null,compare:!0}};class sE extends Xy{_updateTileset(){this.props.viewportId||super._updateTileset(),(this.props.viewportId&&this.context.viewport.id===this.props.viewportId||!this.state.tileset._viewport)&&super._updateTileset()}}sE.layerName="MultiscaleImageLayerBase";sE.defaultProps=iK;const sK={pickable:{type:"boolean",value:!0,compare:!0},coordinateSystem:me.CARTESIAN,contrastLimits:{type:"array",value:[],compare:!0},channelsVisible:{type:"array",value:[],compare:!0},selections:{type:"array",value:[],compare:!0},domain:{type:"array",value:[],compare:!0},viewportId:{type:"string",value:"",compare:!0},loader:{type:"object",value:{getRaster:async()=>({data:[],height:0,width:0}),dtype:"Uint16",shape:[]},compare:!0},onClick:{type:"function",value:null,compare:!0},onViewportLoad:{type:"function",value:null,compare:!0},interpolation:{type:"number",value:ee.NEAREST,compare:!0},extensions:{type:"array",value:[new $a],compare:!0}},mu=class extends er{finalizeState(){this.state.abortController.abort()}updateState({props:t,oldProps:e}){const n=t.loader!==e.loader,r=t.selections!==e.selections;if(n||r){const{loader:i,selections:s=[],onViewportLoad:o}=this.props,a=new AbortController;this.setState({abortController:a});const{signal:l}=a,c=f=>i.getRaster({selection:f,signal:l}),u=s.map(c);Promise.all(u).then(f=>{var h,g;const d={data:f.map(A=>A.data),width:(h=f[0])==null?void 0:h.width,height:(g=f[0])==null?void 0:g.height};Ga(i.shape)&&(d.data=d.data[0],d.data.length===d.width*d.height*3&&(d.format=ee.RGB,d.dataFormat=ee.RGB)),o&&o(d),this.setState({...d})}).catch(f=>{if(f!==D3)throw f})}}getPickingInfo({info:t,sourceLayer:e}){return t.sourceLayer=e,t.tile=e.props.tile,t}renderLayers(){const{loader:t,id:e}=this.props,{dtype:n}=t,{width:r,height:i,data:s}=this.state;if(!(r&&i))return null;const o=[0,i,r,0];if(Ga(t.shape)){const{photometricInterpretation:a=2}=t.meta;return new pu(this.props,{image:this.state,photometricInterpretation:a,bounds:o,id:`image-sub-layer-${o}-${e}`,extensions:[]})}return new qa(this.props,{channelData:{data:s,height:i,width:r},bounds:o,id:`image-sub-layer-${o}-${e}`,dtype:n})}};mu.layerName="ImageLayer";mu.defaultProps=sK;const oK={pickable:{type:"boolean",value:!0,compare:!0},onHover:{type:"function",value:null,compare:!1},contrastLimits:{type:"array",value:[],compare:!0},channelsVisible:{type:"array",value:[],compare:!0},domain:{type:"array",value:[],compare:!0},viewportId:{type:"string",value:"",compare:!0},maxRequests:{type:"number",value:10,compare:!0},onClick:{type:"function",value:null,compare:!0},refinementStrategy:{type:"string",value:null,compare:!0},excludeBackground:{type:"boolean",value:!1,compare:!0},extensions:{type:"array",value:[new $a],compare:!0}},oE=class extends er{renderLayers(){const{loader:t,selections:e,opacity:n,viewportId:r,onTileError:i,onHover:s,id:o,onClick:a,modelMatrix:l,excludeBackground:c,refinementStrategy:u}=this.props,{tileSize:f,dtype:d}=t[0],h=async({index:{x:C,y:b,z:B},signal:R})=>{if(!e||e.length===0)return null;const M=Math.round(-B),U=G=>{const Y={x:C,y:b,selection:G,signal:R};return t[M].getTile(Y)};try{const G=await Promise.all(e.map(U)),Y={data:G.map(Z=>Z.data),width:G[0].width,height:G[0].height};return Ga(t[M].shape)&&(Y.data=Y.data[0],Y.data.length===Y.width*Y.height*3&&(Y.format=ee.RGB,Y.dataFormat=ee.RGB)),Y}catch(G){if(G===D3)return null;throw G}},{height:g,width:A}=hu(t[0]),E=new sE(this.props,{id:`Tiled-Image-${o}`,getTileData:h,dtype:d,tileSize:f,zoomOffset:Math.round(Math.log2(l?l.getScale()[0]:1)),extent:[0,0,A,g],minZoom:Math.round(-(t.length-1)),maxZoom:0,refinementStrategy:u||(n===1?"best-available":"no-overlap"),updateTriggers:{getTileData:[t,e]},onTileError:i||t[0].onTileError}),p=t[t.length-1],m=typeof p.getRaster=="function",y=l?l.clone():new Ze;return[m&&!c&&new mu(this.props,{id:`Background-Image-${o}`,loader:p,modelMatrix:y.scale(2**(t.length-1)),visible:!r||this.context.viewport.id===r,onHover:s,onClick:a,interpolation:ee.LINEAR,onViewportLoad:null}),E]}};oE.layerName="MultiscaleImageLayer";oE.defaultProps=oK;const aK={pickable:{type:"boolean",value:!0,compare:!0},loader:{type:"object",value:{getRaster:async()=>({data:[],height:0,width:0}),getRasterSize:()=>({height:0,width:0}),dtype:"<u2"},compare:!0},id:{type:"string",value:"",compare:!0},boundingBox:{type:"array",value:[[0,0],[0,1],[1,1],[1,0]],compare:!0},boundingBoxColor:{type:"array",value:[255,0,0],compare:!0},boundingBoxOutlineWidth:{type:"number",value:1,compare:!0},viewportOutlineColor:{type:"array",value:[255,190,0],compare:!0},viewportOutlineWidth:{type:"number",value:2,compare:!0},overviewScale:{type:"number",value:1,compare:!0},zoom:{type:"number",value:1,compare:!0},extensions:{type:"array",value:[new $a],compare:!0}},q3=class extends er{renderLayers(){const{loader:t,id:e,zoom:n,boundingBox:r,boundingBoxColor:i,boundingBoxOutlineWidth:s,viewportOutlineColor:o,viewportOutlineWidth:a,overviewScale:l}=this.props,{width:c,height:u}=hu(t[0]),f=t.length-1,d=t[f],h=new mu(this.props,{id:`viewport-${e}`,modelMatrix:new Ze().scale(2**f*l),loader:d}),g=new Zd({id:`bounding-box-overview-${e}`,coordinateSystem:me.CARTESIAN,data:[r],getPolygon:p=>p,filled:!1,stroked:!0,getLineColor:i,getLineWidth:s*2**n}),A=new Zd({id:`viewport-outline-${e}`,coordinateSystem:me.CARTESIAN,data:[[[0,0],[c*l,0],[c*l,u*l],[0,u*l]]],getPolygon:p=>p,filled:!1,stroked:!0,getLineColor:o,getLineWidth:a*2**n});return[h,g,A]}};q3.layerName="OverviewLayer";q3.defaultProps=aK;function lK(t,e,n){const r=t[2][0]-t[0][0],i=t[2][1]-t[0][1];switch(e){case"bottom-right":{const s=t[2][1]-i*n,o=t[2][0]-r*n;return[s,o]}case"top-right":{const s=t[0][1]+i*n,o=t[2][0]-r*n;return[s,o]}case"top-left":{const s=t[0][1]+i*n,o=t[0][0]+r*n;return[s,o]}case"bottom-left":{const s=t[2][1]-i*n,o=t[0][0]+r*n;return[s,o]}default:throw new Error(`Position ${e} not found`)}}const cK={pickable:{type:"boolean",value:!0,compare:!0},viewState:{type:"object",value:{zoom:0,target:[0,0,0]},compare:!0},unit:{type:"string",value:"",compare:!0},size:{type:"number",value:1,compare:!0},position:{type:"string",value:"bottom-right",compare:!0},length:{type:"number",value:.085,compare:!0},snap:{type:"boolean",value:!1,compare:!0}},X3=class extends er{renderLayers(){const{id:t,unit:e,size:n,position:r,viewState:i,length:s,snap:o}=this.props,a=W$(i),{zoom:l}=i,u=(a[2][0]-a[0][0])*.05,f=Math.max(2**(-l+1.5),(a[2][1]-a[0][1])*.007);let d=u,h=(u*n).toPrecision(5),g=e;if(o){const b=K$(n,e),B=u*b,[R,M,U]=q$(B);d=R/b,h=M,g=`${U}m`}const[A,E]=lK(a,r,s),p=E+u,m=r.endsWith("-left"),y=new tc({id:`scale-bar-length-${t}`,coordinateSystem:me.CARTESIAN,data:[[[m?E:p-d,A],[m?E+d:p,A]]],getSourcePosition:b=>b[0],getTargetPosition:b=>b[1],getWidth:2,getColor:[220,220,220]}),_=new tc({id:`scale-bar-height-left-${t}`,coordinateSystem:me.CARTESIAN,data:[[[m?E:p-d,A-f],[m?E:p-d,A+f]]],getSourcePosition:b=>b[0],getTargetPosition:b=>b[1],getWidth:2,getColor:[220,220,220]}),I=new tc({id:`scale-bar-height-right-${t}`,coordinateSystem:me.CARTESIAN,data:[[[m?E+d:p,A-f],[m?E+d:p,A+f]]],getSourcePosition:b=>b[0],getTargetPosition:b=>b[1],getWidth:2,getColor:[220,220,220]}),C=new Ya({id:`units-label-layer-${t}`,coordinateSystem:me.CARTESIAN,data:[{text:`${h}${g}`,position:[m?E+u*.5:p-u*.5,A+f*4]}],getColor:[220,220,220,255],getSize:12,fontFamily:_Y,sizeUnits:"meters",sizeScale:2**-l,characterSet:[...g.split(""),...j$(10).map(b=>String(b)),".","e","+"]});return[y,_,I,C]}};X3.layerName="ScaleBarLayer";X3.defaultProps=cK;const uK=`#version 300 es
#define SHADER_NAME xr-layer-vertex-shader

// Unit-cube vertices
in vec3 positions;

// Eye position - last column of the inverted view matrix
uniform vec3 eye_pos;
// Projection matrix
uniform mat4 proj;
// Model Matrix
uniform mat4 model;
// View Matrix
uniform mat4 view;
// A matrix for scaling in the model space before any transformations.
// This projects the unit cube up to match the "pixel size" multiplied by the physical size ratio, if provided.
uniform mat4 scale;
uniform mat4 resolution;


out vec3 vray_dir;
flat out vec3 transformed_eye;

void main() {

  // Step 1: Standard MVP transformation (+ the scale matrix) to place the positions on your 2D screen ready for rasterization + fragment processing.
  gl_Position = proj * view * model * scale * resolution * vec4(positions, 1.);

  // Step 2: Invert the eye back from world space to the normalized 0-1 cube world space because ray casting on the fragment shader runs in 0-1 space.
  // Geometrically, the transformed_eye is a position relative to the 0-1 normalized vertices, which themselves are the inverse of the model + scale trasnformation.
  // See below for an example which does not involve a scale transformation, for simplicity, but motivates geometrically the needed transformation on eye_pos.
  /*
  This first diagram is a skewed volume (i.e a "shear" model matrix applied) top down with the eye marked as #, all in world space
       ^
    ___|__
    \\  |  \\
     \\ |   \\
      \\|____\\
       | 
       | 
       |
       #

  This next diagram shows the volume after the inverse model matrix has placed it back in model coordinates, but the eye still in world space. 
       ^
    ___|___
    |  |  |
    |  |  |
    |__|__|
       |
       |
       |
       #

  Finally, we apply the inverse model matrix transformation to the eye as well to bring it too into world space.
  Notice that the ray here matches the "voxels" through which the first ray also passes, as desired.
         ^
    ____/__
    |  /  |
    | /   |
    |/____|
    /
   /
  /
 #
  */
  transformed_eye = (inverse(resolution) * inverse(scale) * inverse(model) * (vec4(eye_pos, 1.))).xyz;

  // Step 3: Rays are from eye to vertices so that they get interpolated over the fragments.
  vray_dir = positions - transformed_eye;
}
`,fK=`#version 300 es
precision highp int;
precision highp float;
precision highp SAMPLER_TYPE;

uniform highp SAMPLER_TYPE volume0;
uniform highp SAMPLER_TYPE volume1;
uniform highp SAMPLER_TYPE volume2;
uniform highp SAMPLER_TYPE volume3;
uniform highp SAMPLER_TYPE volume4;
uniform highp SAMPLER_TYPE volume5;

uniform vec3 scaledDimensions;

uniform mat4 scale;

uniform vec3 normals[NUM_PLANES];
uniform float distances[NUM_PLANES];

// color
uniform vec3 colors[6];

// slices
uniform vec2 xSlice;
uniform vec2 ySlice;
uniform vec2 zSlice;

// range
uniform vec2 contrastLimits[6];

in vec3 vray_dir;
flat in vec3 transformed_eye;
out vec4 color;

vec2 intersect_box(vec3 orig, vec3 dir) {
	vec3 box_min = vec3(xSlice[0], ySlice[0], zSlice[0]);
	vec3 box_max = vec3(xSlice[1], ySlice[1], zSlice[1]);
	vec3 inv_dir = 1. / dir;
	vec3 tmin_tmp = (box_min - orig) * inv_dir;
	vec3 tmax_tmp = (box_max - orig) * inv_dir;
	vec3 tmin = min(tmin_tmp, tmax_tmp);
	vec3 tmax = max(tmin_tmp, tmax_tmp);
	float t0 = max(tmin.x, max(tmin.y, tmin.z));
  float t1 = min(tmax.x, min(tmax.y, tmax.z));
  vec2 val = vec2(t0, t1);
	return val;
}

float linear_to_srgb(float x) {
	if (x <= 0.0031308f) {
		return 12.92f * x;
	}
	return 1.055f * pow(x, 1.f / 2.4f) - 0.055f;
}

// Pseudo-random number gen from
// http://www.reedbeta.com/blog/quick-and-easy-gpu-random-numbers-in-d3d11/
// with some tweaks for the range of values
float wang_hash(int seed) {
	seed = (seed ^ 61) ^ (seed >> 16);
	seed *= 9;
	seed = seed ^ (seed >> 4);
	seed *= 0x27d4eb2d;
	seed = seed ^ (seed >> 15);
	return float(seed % 2147483647) / float(2147483647);
}


void main(void) {
	// Step 1: Normalize the view ray
	vec3 ray_dir = normalize(vray_dir);

	// Step 2: Intersect the ray with the volume bounds to find the interval
	// along the ray overlapped by the volume.
	vec2 t_hit = intersect_box(transformed_eye, ray_dir);
	if (t_hit.x > t_hit.y) {
		discard;
	}
	// We don't want to sample voxels behind the eye if it's
	// inside the volume, so keep the starting point at or in front
	// of the eye
	t_hit.x = max(t_hit.x, 0.);

	// Step 3: Compute the step size to march through the volume grid
	vec3 dt_vec = 1. / (scale * vec4(abs(ray_dir), 1.)).xyz;
	float dt = 1. * min(dt_vec.x, min(dt_vec.y, dt_vec.z));

	float offset = wang_hash(int(gl_FragCoord.x + 640. * gl_FragCoord.y));

	// Step 4: Starting from the entry point, march the ray through the volume
	// and sample it
	vec3 p = transformed_eye + (t_hit.x + offset * dt) * ray_dir;

	// TODO: Probably want to stop this process at some point to improve performance when marching down the edges.
	_BEFORE_RENDER
	for (float t = t_hit.x; t < t_hit.y; t += dt) {
		// Check if this point is on the "positive" side or "negative" side of the plane - only show positive.
		float canShow = 1.;
		for (int i = 0; i < NUM_PLANES; i += 1) {
			canShow *= max(0., sign(dot(normals[i], p) + distances[i]));
		}
		// Do not show coordinates outside 0-1 box.
		// Something about the undefined behavior outside the box causes the additive blender to 
		// render some very odd artifacts.
		float canShowXCoordinate = max(p.x - 0., 0.) * max(1. - p.x , 0.);
		float canShowYCoordinate = max(p.y - 0., 0.) * max(1. - p.y , 0.);
		float canShowZCoordinate = max(p.z - 0., 0.) * max(1. - p.z , 0.);
		float canShowCoordinate = float(ceil(canShowXCoordinate * canShowYCoordinate * canShowZCoordinate));
		canShow = canShowCoordinate * canShow;
		float intensityValue0 = float(texture(volume0, p).r);
		DECKGL_PROCESS_INTENSITY(intensityValue0, contrastLimits[0], 0);
		intensityValue0 = canShow * intensityValue0;
		float intensityValue1 = float(texture(volume1, p).r);
		DECKGL_PROCESS_INTENSITY(intensityValue1, contrastLimits[1], 1);
		intensityValue1 = canShow * intensityValue1;
		float intensityValue2 = float(texture(volume2, p).r);
  		DECKGL_PROCESS_INTENSITY(intensityValue2, contrastLimits[2], 2);
		intensityValue2 = canShow * intensityValue2;
		float intensityValue3 = float(texture(volume3, p).r);
  		DECKGL_PROCESS_INTENSITY(intensityValue3, contrastLimits[3], 3);
		intensityValue3 = canShow * intensityValue3;
    	float intensityValue4 = float(texture(volume4, p).r);
  		DECKGL_PROCESS_INTENSITY(intensityValue4, contrastLimits[4], 4);
		intensityValue4 = canShow * intensityValue4;
		float intensityValue5 = float(texture(volume5, p).r);
  		DECKGL_PROCESS_INTENSITY(intensityValue5, contrastLimits[5], 5);
		intensityValue5 = canShow * intensityValue5;

		_RENDER

		p += ray_dir * dt;
	}
	_AFTER_RENDER
  color.r = linear_to_srgb(color.r);
  color.g = linear_to_srgb(color.g);
  color.b = linear_to_srgb(color.b);
}
`,dK={name:"channel-intensity-module",fs:`    float apply_contrast_limits(float intensity, vec2 contrastLimits) {
      float contrastLimitsAppliedToIntensity = (intensity - contrastLimits[0]) / max(0.0005, (contrastLimits[1] - contrastLimits[0]));
      return max(0., contrastLimitsAppliedToIntensity);
    }
  `},hK=[1,1,0,0,1,0,1,1,1,0,1,1,0,0,1,0,1,0,0,0,0,1,1,0,1,0,0,1,1,1,1,0,1,0,0,1,1,0,0,0,0,0],RI=1,gK={pickable:!1,coordinateSystem:me.CARTESIAN,channelData:{type:"object",value:{},compare:!0},contrastLimits:{type:"array",value:[],compare:!0},dtype:{type:"string",value:"Uint8",compare:!0},xSlice:{type:"array",value:null,compare:!0},ySlice:{type:"array",value:null,compare:!0},zSlice:{type:"array",value:null,compare:!0},clippingPlanes:{type:"array",value:[],compare:!0},resolutionMatrix:{type:"object",value:new Ze,compare:!0},channelsVisible:{type:"array",value:[],compare:!0},extensions:{type:"array",value:[new W3.AdditiveBlendExtension],compare:!0}};function PI(){const t=rE("Float32");return{...t,sampler:t.sampler.replace("2D","3D"),cast:e=>new Float32Array(e)}}function AK(t){let e={};if(t.forEach(n=>{e=n.rendering}),!e._RENDER)throw new Error("XR3DLayer requires at least one extension to define opts.rendering as an object with _RENDER as a property at the minimum.");return e}const aE=class extends Fn{initializeState(){const{gl:t}=this.context;t.pixelStorei(ee.UNPACK_ALIGNMENT,1),t.pixelStorei(ee.PACK_ALIGNMENT,1);const e=wo.getDefaultProgramManager(t),n="fs:DECKGL_PROCESS_INTENSITY(inout float intensity, vec2 contrastLimits, int channelIndex)";e._hookFunctions.includes(n)||e.addShaderHook(n)}_isHookDefinedByExtensions(t){const{extensions:e}=this.props;return e==null?void 0:e.some(n=>{const r=n.getShaders();if(r){const{inject:i={},modules:s=[]}=r,o=i[t],a=s.some(l=>l.inject&&(l==null?void 0:l.inject[t]));return o||a}return!1})}getShaders(){const{clippingPlanes:t,extensions:e}=this.props,{sampler:n}=PI(),{_BEFORE_RENDER:r,_RENDER:i,_AFTER_RENDER:s}=AK(e),o=this._isHookDefinedByExtensions("fs:DECKGL_PROCESS_INTENSITY"),a={inject:{},...dK};return o||(a.inject["fs:DECKGL_PROCESS_INTENSITY"]=`
        intensity = apply_contrast_limits(intensity, contrastLimits);
      `),super.getShaders({vs:uK,fs:fK.replace("_BEFORE_RENDER",r).replace("_RENDER",i).replace("_AFTER_RENDER",s),defines:{SAMPLER_TYPE:n,NUM_PLANES:String(t.length||RI)},modules:[a]})}finalizeState(){super.finalizeState(),this.state.textures&&Object.values(this.state.textures).forEach(t=>t&&t.delete())}updateState({props:t,oldProps:e,changeFlags:n}){var r,i;if(n.extensionsChanged||t.colormap!==e.colormap||t.renderingMode!==e.renderingMode||t.clippingPlanes.length!==e.clippingPlanes.length){const{gl:s}=this.context;this.state.model&&this.state.model.delete(),this.setState({model:this._getModel(s)})}t.channelData&&((r=t==null?void 0:t.channelData)==null?void 0:r.data)!==((i=e==null?void 0:e.channelData)==null?void 0:i.data)&&this.loadTexture(t.channelData)}_getModel(t){return t?new Jn(t,{...this.getShaders(),geometry:new Wr({drawMode:t.TRIANGLE_STRIP,attributes:{positions:new Float32Array(hK)}})}):null}draw({uniforms:t}){const{textures:e,model:n,scaleMatrix:r}=this.state,{contrastLimits:i,xSlice:s,ySlice:o,zSlice:a,modelMatrix:l,channelsVisible:c,domain:u,dtype:f,clippingPlanes:d,resolutionMatrix:h}=this.props,{viewMatrix:g,viewMatrixInverse:A,projectionMatrix:E}=this.context.viewport;if(e&&n&&r){const p=$3({contrastLimits:i,channelsVisible:c,domain:u,dtype:f}),m=r.clone().invert(),y=h.clone().invert(),_=Y3(d.map(b=>b.clone().transform(m).transform(y)),new go([1,0,0]),d.length||RI),I=_.map(b=>b.normal).flat(),C=_.map(b=>b.distance);n.setUniforms({...t,...e,contrastLimits:p,xSlice:new Float32Array(s?s.map(b=>b/r[0]/h[0]):[0,1]),ySlice:new Float32Array(o?o.map(b=>b/r[5]/h[5]):[0,1]),zSlice:new Float32Array(a?a.map(b=>b/r[10]/h[10]):[0,1]),eye_pos:new Float32Array([A[12],A[13],A[14]]),view:g,proj:E,scale:r,resolution:h,model:l||new Ze,normals:I,distances:C}).draw()}}loadTexture(t){const e={volume0:null,volume1:null,volume2:null,volume3:null,volume4:null,volume5:null};if(this.state.textures&&Object.values(this.state.textures).forEach(n=>n&&n.delete()),t&&Object.keys(t).length>0&&t.data){const{height:n,width:r,depth:i}=t;t.data.forEach((s,o)=>{e[`volume${o}`]=this.dataToTexture(s,r,n,i)},this),this.setState({textures:e,scaleMatrix:new Ze().scale(this.props.physicalSizeScalingMatrix.transformPoint([r,n,i]))})}}dataToTexture(t,e,n,r){var o;const i=PI();return new Yb(this.context.gl,{width:e,height:n,depth:r,data:((o=i.cast)==null?void 0:o.call(i,t))??t,format:i.dataFormat,dataFormat:i.format,type:i.type,mipmaps:!1,parameters:{[ee.TEXTURE_MIN_FILTER]:ee.LINEAR,[ee.TEXTURE_MAG_FILTER]:ee.LINEAR,[ee.TEXTURE_WRAP_S]:ee.CLAMP_TO_EDGE,[ee.TEXTURE_WRAP_T]:ee.CLAMP_TO_EDGE,[ee.TEXTURE_WRAP_R]:ee.CLAMP_TO_EDGE}})}};aE.layerName="XR3DLayer";aE.defaultProps=gK;async function pK({source:t,selection:e,onUpdate:n=()=>{},downsampleDepth:r=1,signal:i}){const{shape:s,labels:o,dtype:a}=t,{height:l,width:c}=hu(t),u=s[o.indexOf("z")],f=Math.max(1,Math.floor(u/r)),d=l*c,h=`${a}Array`,g=globalThis[h],A=new g(d*f);return await Promise.all(new Array(f).fill(0).map(async(E,p)=>{const m={...e,z:p*r},{data:y}=await t.getRaster({selection:m,signal:i});let _=0;for(n();_<d;){const I=p*d+(d-_-1),C=(c-_-1)%c+c*Math.floor(_/c);A[I]=y[C],_+=1}n()})),{data:A,height:l,width:c,depth:f}}const LI=(t,e,n)=>new Ya({id:`text-${n}`,coordinateSystem:me.CARTESIAN,data:[{text:t,position:e.position}],getColor:[220,220,220,255],getSize:25,sizeUnits:"meters",sizeScale:2**-e.zoom,fontFamily:"Helvetica"}),mK={pickable:!1,coordinateSystem:me.CARTESIAN,contrastLimits:{type:"array",value:[],compare:!0},channelsVisible:{type:"array",value:[],compare:!0},selections:{type:"array",value:[],compare:!0},resolution:{type:"number",value:0,compare:!0},domain:{type:"array",value:[],compare:!0},loader:{type:"object",value:[{getRaster:async()=>({data:[],height:0,width:0}),dtype:"Uint16",shape:[1],labels:["z"]}],compare:!0},xSlice:{type:"array",value:null,compare:!0},ySlice:{type:"array",value:null,compare:!0},zSlice:{type:"array",value:null,compare:!0},clippingPlanes:{type:"array",value:[],compare:!0},onUpdate:{type:"function",value:()=>{},compare:!0},useProgressIndicator:{type:"boolean",value:!0,compare:!0},useWebGL1Warning:{type:"boolean",value:!0,compare:!0},extensions:{type:"array",value:[new W3.AdditiveBlendExtension],compare:!0}},Z3=class extends er{clearState(){this.setState({height:null,width:null,depth:null,data:null,physicalSizeScalingMatrix:null,resolutionMatrix:null,progress:0,abortController:null})}finalizeState(){this.state.abortController.abort()}updateState({oldProps:t,props:e}){const n=e.loader!==t.loader,r=e.resolution!==t.resolution,i=e.selections!==t.selections;if(r&&this.clearState(),n||i||r){const{loader:s,selections:o=[],resolution:a,onViewportLoad:l}=this.props,c=s[a];let u=0;const f=(c.shape[c.labels.indexOf("z")]>>a)*o.length,d=()=>{u+=.5/f,this.props.onUpdate&&this.props.onUpdate({progress:u}),this.setState({progress:u})},h=new AbortController;this.setState({abortController:h});const{signal:g}=h,A=o.map(p=>pK({selection:p,source:c,onUpdate:d,downsampleDepth:2**a,signal:g})),E=H$(s[a]);Promise.all(A).then(p=>{var y,_,I;l&&l(p);const m={data:p.map(C=>C.data),width:(y=p[0])==null?void 0:y.width,height:(_=p[0])==null?void 0:_.height,depth:(I=p[0])==null?void 0:I.depth};this.setState({...m,physicalSizeScalingMatrix:E,resolutionMatrix:new Ze().scale(2**a)})})}}renderLayers(){const{loader:t,id:e,resolution:n,useProgressIndicator:r,useWebGL1Warning:i}=this.props,{dtype:s}=t[n],{data:o,width:a,height:l,depth:c,progress:u,physicalSizeScalingMatrix:f,resolutionMatrix:d}=this.state,{gl:h}=this.context;if(!Te(h)&&i){const{viewport:g}=this.context;return LI(["Volume rendering is only available on browsers that support WebGL2. If you","are using Safari, you can turn on WebGL2 by navigating in the top menubar","to check Develop > Experimental Features > WebGL 2.0 and then refreshing","the page."].join(`
`),g,e)}if(!(a&&l)&&r){const{viewport:g}=this.context;return LI(`Loading Volume ${String((u||0)*100).slice(0,5)}%...`,g,e)}return new aE(this.props,{channelData:{data:o,width:a,height:l,depth:c},id:`XR3DLayer-0-${l}-${a}-0-${n}-${e}`,physicalSizeScalingMatrix:f,parameters:{[ee.CULL_FACE]:!0,[ee.CULL_FACE_MODE]:ee.FRONT,[ee.DEPTH_TEST]:!1,blendFunc:[ee.SRC_ALPHA,ee.ONE],blend:!0},resolutionMatrix:d,dtype:s})}};Z3.layerName="VolumeLayer";Z3.defaultProps=mK;const vK=typeof window<"u"?S.useLayoutEffect:S.useEffect,yK=vK;function hh(t,e){for(;t;){if(t===e)return!0;t=Object.getPrototypeOf(t)}return!1}const EK={position:"absolute",zIndex:-1};function J3(t,e){if(typeof t=="function")return t(e);if(Array.isArray(t))return t.map(n=>J3(n,e));if(gg(t)){if(_K(t))return e.style=EK,S.cloneElement(t,e);if(xK(t))return S.cloneElement(t,e)}return t}function gg(t){return t&&typeof t=="object"&&"type"in t||!1}function _K(t){var e;return(e=t.props)===null||e===void 0?void 0:e.mapStyle}function xK(t){const e=t.type;return e&&e.deckGLViewProps}function Lm(t){if(typeof t=="function")return S.createElement(fo,{},t);if(Array.isArray(t))return t.map(Lm);if(gg(t)){if(t.type===S.Fragment)return Lm(t.props.children);if(hh(t.type,fo))return t}return t}function CK({children:t,layers:e=[],views:n=null}){const r=[],i=[],s={};return S.Children.forEach(Lm(t),o=>{if(gg(o)){const a=o.type;if(hh(a,Fn)){const l=IK(a,o.props);i.push(l)}else r.push(o);if(hh(a,fo)&&a!==fo&&o.props.id){const l=new a(o.props);s[l.id]=l}}else o&&r.push(o)}),Object.keys(s).length>0&&(Array.isArray(n)?n.forEach(o=>{s[o.id]=o}):n&&(s[n.id]=n),n=Object.values(s)),e=i.length>0?[...i,...e]:e,{layers:e,children:r,views:n}}function IK(t,e){const n={},r=t.defaultProps||{};for(const i in e)r[i]!==e[i]&&(n[i]=e[i]);return new t(n)}function wK({children:t,deck:e,ContextProvider:n}){const{viewManager:r}=e||{};if(!r||!r.views.length)return[];const i={},s=r.views[0].id;for(const o of t){let a=s,l=o;gg(o)&&hh(o.type,fo)&&(a=o.props.id||s,l=o.props.children);const c=r.getViewport(a),u=r.getViewState(a);if(c){u.padding=c.padding;const{x:f,y:d,width:h,height:g}=c;l=J3(l,{x:f,y:d,width:h,height:g,viewport:c,viewState:u}),i[a]||(i[a]={viewport:c,children:[]}),i[a].children.push(l)}}return Object.keys(i).map(o=>{const{viewport:a,children:l}=i[o],{x:c,y:u,width:f,height:d}=a,h={position:"absolute",left:c,top:u,width:f,height:d},g="view-".concat(o),A=S.createElement("div",{key:g,id:g,style:h},...l);if(n){const E={viewport:a,container:e.canvas.offsetParent,eventManager:e.eventManager,onViewStateChange:p=>{p.viewId=o,e._onViewStateChange(p)}};return S.createElement(n,{key:g,value:E},A)}return A})}const SK={mixBlendMode:null};function bK({width:t,height:e,style:n}){const r={position:"absolute",zIndex:0,left:0,top:0,width:t,height:e},i={left:0,top:0};if(n)for(const s in n)s in SK?i[s]=n[s]:r[s]=n[s];return{containerStyle:r,canvasStyle:i}}function TK(t){return{get deck(){return t.deck},pickObject:e=>t.deck.pickObject(e),pickMultipleObjects:e=>t.deck.pickMultipleObjects(e),pickObjects:e=>t.deck.pickObjects(e)}}function eB(t){t.redrawReason&&(t.deck._drawLayers(t.redrawReason),t.redrawReason=null)}function BK(t,e,n){const r=new e({...n,_customRender:i=>{t.redrawReason=i;const s=r.getViewports();t.lastRenderedViewports!==s?t.forceUpdate():eB(t)}});return r}const tB=S.forwardRef((t,e)=>{const[n,r]=S.useState(0),s=S.useRef({control:null,version:n,forceUpdate:()=>r(I=>I+1)}).current,o=S.useRef(null),a=S.useRef(null),l=S.useMemo(()=>CK(t),[t.layers,t.views,t.children]);let c=!0;const u=I=>{var C;return c&&t.viewState?(s.viewStateUpdateRequested=I,null):(s.viewStateUpdateRequested=null,(C=t.onViewStateChange)===null||C===void 0?void 0:C.call(t,I))},f=I=>{if(c)s.interactionStateUpdateRequested=I;else{var C;s.interactionStateUpdateRequested=null,(C=t.onInteractionStateChange)===null||C===void 0||C.call(t,I)}},d=S.useMemo(()=>{const I={...t,style:null,width:"100%",height:"100%",parent:o.current,canvas:a.current,layers:l.layers,views:l.views,onViewStateChange:u,onInteractionStateChange:f};return delete I._customRender,s.deck&&s.deck.setProps(I),I},[t]);S.useEffect(()=>{const I=t.Deck||sg;return s.deck=BK(s,I,{...d,parent:o.current,canvas:a.current}),()=>{var C;return(C=s.deck)===null||C===void 0?void 0:C.finalize()}},[]),yK(()=>{eB(s);const{viewStateUpdateRequested:I,interactionStateUpdateRequested:C}=s;I&&u(I),C&&f(C)}),S.useImperativeHandle(e,()=>TK(s),[]);const h=s.deck&&s.deck.isInitialized?s.deck.getViewports():void 0,{ContextProvider:g,width:A,height:E,id:p,style:m}=t,{containerStyle:y,canvasStyle:_}=S.useMemo(()=>bK({width:A,height:E,style:m}),[A,E,m]);if(!s.viewStateUpdateRequested&&s.lastRenderedViewports===h||s.version!==n){s.lastRenderedViewports=h,s.version=n;const I=wK({children:l.children,deck:s.deck,ContextProvider:g}),C=S.createElement("canvas",{key:"canvas",id:p||"deckgl-overlay",ref:a,style:_});s.control=S.createElement("div",{id:"".concat(p||"deckgl","-wrapper"),ref:o,style:y},[C,I])}return c=!1,s.control});tB.defaultProps=sg.defaultProps;const RK=tB,Mm=new Map;function PK(t,e){Mm.set(t,e)}async function LK(t){if(!Mm.has(t.id))throw new Error(`Compression codec ${t.id} is not supported by Zarr.js yet.`);return(await Mm.get(t.id)()).fromConfig(t)}function lE(t){return new Proxy(t,{set(e,n,r,i){return e.setItem(n,r)},get(e,n,r){return e.getItem(n)},deleteProperty(e,n){return e.deleteItem(n)},has(e,n){return e.containsItem(n)}})}function MK(t){return typeof t=="object"&&t!==null&&"__zarr__"in t}function gp(t){return MK(t)&&t.__zarr__==="KeyError"}class Vr extends Error{constructor(e){super(`path ${e} contains an array`),this.__zarr__="ContainsArrayError",Object.setPrototypeOf(this,Vr.prototype)}}class fi extends Error{constructor(e){super(`path ${e} contains a group`),this.__zarr__="ContainsGroupError",Object.setPrototypeOf(this,fi.prototype)}}class cE extends Error{constructor(e){super(`array not found at path ${e}`),this.__zarr__="ArrayNotFoundError",Object.setPrototypeOf(this,cE.prototype)}}class Ag extends Error{constructor(e){super(`ground not found at path ${e}`),this.__zarr__="GroupNotFoundError",Object.setPrototypeOf(this,Ag.prototype)}}class sn extends Error{constructor(e){super(e),this.__zarr__="PermissionError",Object.setPrototypeOf(this,sn.prototype)}}class vu extends Error{constructor(e){super(`key ${e} not present`),this.__zarr__="KeyError",Object.setPrototypeOf(this,vu.prototype)}}class uE extends RangeError{constructor(e,n){super(`too many indices for array; expected ${n.length}, got ${e.length}`),this.__zarr__="TooManyIndicesError",Object.setPrototypeOf(this,uE.prototype)}}class Oc extends RangeError{constructor(e){super(e),this.__zarr__="BoundsCheckError",Object.setPrototypeOf(this,Oc.prototype)}}class gh extends RangeError{constructor(e,n,r,i){super(`slice arguments slice(${e}, ${n}, ${r}) invalid: ${i}`),this.__zarr__="InvalidSliceError",Object.setPrototypeOf(this,gh.prototype)}}class fE extends Error{constructor(){super("Negative step size is not supported when indexing."),this.__zarr__="NegativeStepError",Object.setPrototypeOf(this,fE.prototype)}}class Ut extends Error{constructor(e){super(e),this.__zarr__="ValueError",Object.setPrototypeOf(this,Ut.prototype)}}class dE extends Error{constructor(e){super(e),this.__zarr__="HTTPError",Object.setPrototypeOf(this,dE.prototype)}}function vo(t,e=void 0,n=null){if(t===void 0)throw new gh(t,e,n,"The first argument must not be undefined");if(typeof t=="string"&&t!==":"||typeof e=="string"&&e!==":")throw new gh(t,e,n,'Arguments can only be integers, ":" or null');return e===void 0&&(e=t,t=null),{start:t===":"?null:t,stop:e===":"?null:e,step:n,_slice:!0}}function NK(t,e,n,r){if(t<0?(t+=r,t<0&&(t=n<0?-1:0)):t>=r&&(t=n<0?r-1:r),e<0?(e+=r,e<0&&(e=n<0?-1:0)):e>=r&&(e=n<0?r-1:r),n<0){if(e<t){const i=Math.floor((t-e-1)/-n+1);return[t,e,n,i]}}else if(t<e){const i=Math.floor((e-t-1)/n+1);return[t,e,n,i]}return[t,e,n,0]}function nB(t,e){let n,r,i;t.step===null?i=1:i=t.step,t.start===null?n=i<0?Number.MAX_SAFE_INTEGER:0:(n=t.start,n<0&&(n+=e)),t.stop===null?r=i<0?-Number.MAX_SAFE_INTEGER:Number.MAX_SAFE_INTEGER:(r=t.stop,r<0&&(r+=e));const s=NK(n,r,i,e);if(n=s[0],r=s[1],i=s[2],e=s[3],i===0)throw new Error("Step size 0 is invalid");return[n,r,i,e]}function rB(t){return Array.isArray(t)?t:[t]}function OK(t,e){if(t.length>e.length)throw new uE(t,e)}function yo(t,e){const n=[],r=[];for(let i=0;i<t.length;i++){const s=t[i];if(typeof s=="number")n.push(s);else{const o=nB(s,e[i]),a=o[3];r.push(a),n.push(o)}}return[n,r]}function Es(t,e,n=!1){t=DK(t,e);for(let r=0;r<t.length;r++){const i=t[r];if(typeof i=="number")n?t[r]=vo(i,i+1,1):t[r]=hE(i,e[r]);else{if(iB(i))throw new TypeError("Integer array selections are not supported (yet)");(i===":"||i===null)&&(t[r]=vo(null,null,1))}}return t}function DK(t,e){t=rB(t);let n=-1,r=0;for(let i=0;i<t.length;i++)t[i]==="..."&&(n=i,r+=1);if(r>1)throw new RangeError("an index can only have a single ellipsis ('...')");if(r===1){const i=n,s=t.length-(i+1),o=t.length-1;if(o>=e.length)t=t.filter(a=>a!=="...");else{const a=e.length-o;let l=t.slice(0,i).concat(new Array(a).fill(null));s>0&&(l=l.concat(t.slice(t.length-s))),t=l}}if(t.length<e.length){const i=e.length-t.length;t=t.concat(new Array(i).fill(null))}return OK(t,e),t}function hE(t,e){if(t<0&&(t=e+t),t>=e||t<0)throw new Oc(`index out of bounds for dimension with length ${e}`);return t}function kK(t){return typeof t=="number"}function iB(t){if(!Array.isArray(t))return!1;for(const e of t)if(typeof e!="number")return!1;return!0}function gE(t){return t!==null&&t._slice===!0}function QK(t){return gE(t)&&(t.step===null||t.step===1)}function FK(t){t=rB(t);for(let e=0;e<t.length;e++){const n=t[e];if(!(iB(n)||QK(n)||n==="..."))return!1}return!0}function*UK(...t){if(t.length===0)return;const e=t.map(r=>r()),n=e.map(r=>r.next());for(let r=0;;){if(n[r].done){if(e[r]=t[r](),n[r]=e[r].next(),++r>=e.length)return}else yield n.map(({value:i})=>i),r=0;n[r]=e[r].next()}}class MI{constructor(e,n){e=Es(e,n.shape),this.dimIndexers=[];const r=n.shape;for(let i=0;i<r.length;i++){let s=e[i];const o=r[i],a=n.chunks[i];if(s===null&&(s=vo(null)),kK(s))this.dimIndexers.push(new GK(s,o,a));else if(gE(s))this.dimIndexers.push(new NI(s,o,a));else throw new RangeError(`Unspported selection item for basic indexing; expected integer or slice, got ${s}`)}this.shape=[];for(const i of this.dimIndexers)i instanceof NI&&this.shape.push(i.numItems);this.dropAxes=null}*iter(){const e=this.dimIndexers.map(r=>()=>r.iter()),n=UK(...e);for(const r of n){const i=[],s=[],o=[];for(const a of r)i.push(a.dimChunkIndex),s.push(a.dimChunkSelection),a.dimOutSelection!==null&&o.push(a.dimOutSelection);yield{chunkCoords:i,chunkSelection:s,outSelection:o}}}}class GK{constructor(e,n,r){e=hE(e,n),this.dimSelection=e,this.dimLength=n,this.dimChunkLength=r,this.numItems=1}*iter(){const e=Math.floor(this.dimSelection/this.dimChunkLength),n=e*this.dimChunkLength,r=this.dimSelection-n;yield{dimChunkIndex:e,dimChunkSelection:r,dimOutSelection:null}}}class NI{constructor(e,n,r){const[i,s,o]=nB(e,n);if(this.start=i,this.stop=s,this.step=o,this.step<1)throw new fE;this.dimLength=n,this.dimChunkLength=r,this.numItems=Math.max(0,Math.ceil((this.stop-this.start)/this.step)),this.numChunks=Math.ceil(this.dimLength/this.dimChunkLength)}*iter(){const e=Math.floor(this.start/this.dimChunkLength),n=Math.ceil(this.stop/this.dimChunkLength);for(let r=e;r<n;r++){const i=r*this.dimChunkLength,s=Math.min(this.dimLength,(r+1)*this.dimChunkLength),o=s-i;let a,l,c;if(this.start<i){a=0;const h=(i-this.start)%this.step;h>0&&(a+=this.step-h),c=Math.ceil((i-this.start)/this.step)}else a=this.start-i,c=0;this.stop>s?l=o:l=this.stop-i;const u=vo(a,l,this.step),f=Math.ceil((l-a)/this.step),d=vo(c,c+f);yield{dimChunkIndex:r,dimChunkSelection:u,dimOutSelection:d}}}}const Xa=typeof process<"u"&&process.versions&&process.versions.node;function OI(){}function Kn(t){if(t===null)return"";for(t instanceof String&&(t=t.valueOf()),t=t.replace(/\\/g,"/");t.length>0&&t[0]==="/";)t=t.slice(1);for(;t.length>0&&t[t.length-1]==="/";)t=t.slice(0,t.length-1);t=t.replace(/\/\/+/g,"/");const e=t.split("/");for(const n of e)if(n==="."||n==="..")throw Error("path containing '.' or '..' segment not allowed");return t}function AE(t){return typeof t=="number"&&(t=[t]),t.map(e=>Math.floor(e))}function zK(t,e){if(t===null||t===!0)throw new Error("Chunk guessing is not supported yet");return t===!1?e:(typeof t=="number"&&(t=[t]),t.length<e.length&&(t=t.concat(e.slice(t.length))),t.map((n,r)=>n===-1||n===null?e[r]:Math.floor(n)))}function VK(t){return t=t.toUpperCase(),t}function DI(t,e){if(t===null)return!0;Array.isArray(t)||(t=[t]);for(let n=0;n<Math.min(t.length,e.length);n++){const r=t[n];if(r!==null){if(gE(r)){const i=r,s=i.step===1||i.step===null;if(i.start===null&&i.stop===null&&s||i.stop-i.start===e[n]&&s)continue;return!1}return!1}}return!0}function jK(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}function HK(t){const e=t.length,n=Array(e);let r=1;for(let i=e-1;i>=0;i--)n[i]=r,r*=t[i];return n}function Ap(t,e){const n=typeof t=="string"?new URL(t):t;n.pathname.endsWith("/")||(n.pathname+="/");const r=new URL(e,n);return r.search=n.search,r.href}function sB(t){const e=t.BYTES_PER_ELEMENT;if(e===1)return;if(Xa){const o=Buffer.from(t.buffer,t.byteOffset,t.length*e);e===2&&o.swap16(),e===4&&o.swap32(),e===8&&o.swap64();return}const n=new Uint8Array(t.buffer,t.byteOffset,t.length*e),r=e/2,i=e-1;let s;for(let o=0;o<n.length;o+=e)for(let a=0;a<r;a++)s=n[o+a],n[o+a]=n[o+i-a],n[o+i-a]=s}function WK(t){const e=t.slice();return sB(e),e}function YK(t,e,n){let r=0;const i=n[0],s=n[1],o=s;for(let a=0;a<s;a++)for(let l=0;l<i;l++)e[l*o+a]=t[r++]}function $K(t,e,n){let r=0;const i=n[0],s=n[1],o=n[2],a=o*s,l=o;for(let c=0;c<o;c++)for(let u=0;u<s;u++)for(let f=0;f<i;f++)e[f*a+u*l+c]=t[r++]}function KK(t,e,n){let r=0;const i=n[0],s=n[1],o=n[2],a=n[3],l=a*o*s,c=a*o,u=a;for(let f=0;f<a;f++)for(let d=0;d<o;d++)for(let h=0;h<s;h++)for(let g=0;g<i;g++)e[g*l+h*c+d*u+f]=t[r++]}function qK(t,e,n){const r=n.length,i=n.reduce((a,l)=>a*l),s=n.map((a,l)=>l+1===r?1:n.slice(l+1).reduce((c,u)=>c*u,1)),o=Array(r).fill(0);for(let a=0;a<i;a++){let l=0;for(let c=0;c<r;c++)l+=o[c]*s[c];e[l]=t[a],o[0]+=1;for(let c=0;c<r;c++)if(o[c]===n[c]){if(c+1===r)return;o[c]=0,o[c+1]+=1}}}const XK={0:OI,1:OI,2:YK,3:$K,4:KK};function ZK(t,e,n){return(XK[n.length]||qK)(t,e,n)}function pE(t){return t===null?!1:t instanceof ArrayBuffer||typeof SharedArrayBuffer=="function"&&t instanceof SharedArrayBuffer?!0:Xa?t.toString().startsWith("[object ArrayBuffer]")||t.toString().startsWith("[object SharedArrayBuffer]"):!1}const Ah=".zarray",mE=".zgroup",oB=".zattrs";async function qn(t,e=null){e=Kn(e);const r=_s(e)+Ah;return t.containsItem(r)}async function Mn(t,e=null){e=Kn(e);const r=_s(e)+mE;return t.containsItem(r)}function _s(t){return t.length>0?t+"/":""}async function aB(t,e,n,r){if(e.length===0)return;const i=e.split("/");let s="";for(const o of i.slice(0,i.length-1))s+=o,await qn(t,s)?await Nm(t,s,r):await Mn(t,s)||await Nm(t,s),s+="/"}async function Nm(t,e=null,n=!1){if(e=Kn(e),n)throw Error("Group overwriting not implemented yet :(");if(await qn(t,e))throw new Vr(e);if(await Mn(t,e))throw new fi(e);const r={zarr_format:2},i=_s(e)+mE;await t.setItem(i,JSON.stringify(r))}async function ic(t,e=null,n=null,r=!1){e=Kn(e),await aB(t,e,n,r),await Nm(t,e,r)}async function JK(t,e,n,r,i,s,o,a,l,c,u,f){if(l)throw Error("Array overwriting not implemented yet :(");if(await qn(t,i))throw new Vr(i);if(await Mn(t,i))throw new fi(i);if(r=r,e=AE(e),n=zK(n,e),a=VK(a),o=o,u!==null&&u.length>0)throw Error("Filters are not supported yet");let d=o;typeof o=="number"&&(Number.isNaN(o)&&(d="NaN"),Number.POSITIVE_INFINITY===o&&(d="Infinity"),Number.NEGATIVE_INFINITY===o&&(d="-Infinity")),u=null;const h={zarr_format:2,shape:e,chunks:n,dtype:r,fill_value:d,order:a,compressor:s,filters:u};f&&(h.dimension_separator=f);const g=_s(i)+Ah;await t.setItem(g,JSON.stringify(h))}async function sd(t,e,n,r,i=null,s=null,o=null,a="C",l=!1,c=null,u=null,f){i=Kn(i),await aB(t,i,c,l),await JK(t,e,n,r,i,s,o,a,l,c,u,f)}function ph(t){if(typeof t!="string"){if(Xa&&Buffer.isBuffer(t))return JSON.parse(t.toString());if(pE(t)){const e=new TextDecoder,n=new Uint8Array(t);return JSON.parse(e.decode(n))}else return t}return JSON.parse(t)}class lB{constructor(e,n,r,i=!0){this.store=e,this.key=n,this.readOnly=r,this.cache=i,this.cachedValue=null}async asObject(){if(this.cache&&this.cachedValue!==null)return this.cachedValue;const e=await this.getNoSync();return this.cache&&(this.cachedValue=e),e}async getNoSync(){try{const e=await this.store.getItem(this.key);return ph(e)}catch{return{}}}async setNoSync(e,n){const r=await this.getNoSync();return r[e]=n,await this.putNoSync(r),!0}async putNoSync(e){await this.store.setItem(this.key,JSON.stringify(e)),this.cache&&(this.cachedValue=e)}async delNoSync(e){const n=await this.getNoSync();return delete n[e],await this.putNoSync(n),!0}async put(e){if(this.readOnly)throw new sn("attributes are read-only");return this.putNoSync(e)}async setItem(e,n){if(this.readOnly)throw new sn("attributes are read-only");return this.setNoSync(e,n)}async getItem(e){return(await this.asObject())[e]}async deleteItem(e){if(this.readOnly)throw new sn("attributes are read-only");return this.delNoSync(e)}async containsItem(e){return(await this.asObject())[e]!==void 0}proxy(){return lE(this)}}const eq={"|b":Int8Array,"|B":Uint8Array,"|u1":Uint8Array,"|i1":Int8Array,"<b":Int8Array,"<B":Uint8Array,"<u1":Uint8Array,"<i1":Int8Array,"<u2":Uint16Array,"<i2":Int16Array,"<u4":Uint32Array,"<i4":Int32Array,"<f4":Float32Array,"<f8":Float64Array,">b":Int8Array,">B":Uint8Array,">u1":Uint8Array,">i1":Int8Array,">u2":Uint16Array,">i2":Int16Array,">u4":Uint32Array,">i4":Int32Array,">f4":Float32Array,">f8":Float64Array};function Qr(t){const e=eq[t];if(!e)throw Error(`Dtype not recognized or not supported in zarr.js, got ${t}.`);return e}function cB(t){if(t instanceof Uint8Array)return"|u1";if(t instanceof Int8Array)return"|i1";if(t instanceof Uint16Array)return"<u2";if(t instanceof Int16Array)return"<i2";if(t instanceof Uint32Array)return"<u4";if(t instanceof Int32Array)return"<i4";if(t instanceof Float32Array)return"<f4";if(t instanceof Float64Array)return"<f8";throw new Ut("Mapping for TypedArray to Dtypestring not known")}function vE(t){return t.byteLength!==void 0?t.constructor:vE(t[0])}function tq(t,e,n){const r=Es(n,e),[i,s]=yo(r,e);return[Om(t,e,i),s]}function Om(t,e,n){const r=n[0];if(typeof r=="number")return e.length===1?t[r]:Om(t[r],e.slice(1),n.slice(1));const[i,s,o,a]=r;if(a===0)return new(vE(t))(0);if(e.length===1){if(o===1)return t.slice(i,s);const c=new t.constructor(a);for(let u=0;u<a;u++)c[u]=t[i+u*o];return c}let l=new Array(a);for(let c=0;c<a;c++)l[c]=Om(t[i+c*o],e.slice(1),n.slice(1));return a>0&&typeof l[0]=="number"&&(l=t[0].constructor.from(l)),l}function nq(t,e,n,r){const i=Es(r,n,!0),[s,o]=yo(i,n);yE(t,e,n,s)}function rq(t,e,n,r,i){const s=Es(i,n,!1),[o,a]=yo(s,n);if(JSON.stringify(a)!==JSON.stringify(r))throw new Ut(`Shape mismatch in target and source NestedArray: ${a} and ${r}`);Dm(t,e,n,o)}function Dm(t,e,n,r){const i=r[0];if(typeof e=="number"){yE(t,e,n,r.map(c=>typeof c=="number"?[c,c+1,1,1]:c));return}if(typeof i=="number"){Dm(t[i],e,n.slice(1),r.slice(1));return}const[s,o,a,l]=i;if(n.length===1){if(a===1)t.set(e,s);else for(let c=0;c<l;c++)t[s+c*a]=e[c];return}for(let c=0;c<l;c++)Dm(t[s+c*a],e[c],n.slice(1),r.slice(1))}function yE(t,e,n,r){const i=r[0],[s,o,a,l]=i;if(n.length===1){if(a===1)t.fill(e,s,o);else for(let c=0;c<l;c++)t[s+c*a]=e;return}for(let c=0;c<l;c++)yE(t[s+c*a],e,n.slice(1),r.slice(1))}function iq(t,e,n){n===void 0&&(n=vE(t));const r=e.reduce((s,o)=>s*o,1),i=new n(r);return uB(t,e,i,0),i}function uB(t,e,n,r){if(e.length===1){n.set(t,r);return}if(e.length===2){for(let o=0;o<e[0];o++)n.set(t[o],r+e[1]*o);return t}const i=e.slice(1),s=i.reduce((o,a)=>o*a,1);for(let o=0;o<e[0];o++)uB(t[o],i,n,r+s*o);return t}class ri{constructor(e,n,r){const i=e!==null&&!!e.BYTES_PER_ELEMENT;if(n===void 0){if(!i)throw new Ut("Shape argument is required unless you pass in a TypedArray");n=[e.length]}if(r===void 0){if(!i)throw new Ut("Dtype argument is required unless you pass in a TypedArray");r=cB(e)}if(n=AE(n),this.shape=n,this.dtype=r,i&&n.length!==1&&(e=e.buffer),this.shape.length===0)this.data=new(Qr(r))(1);else if(Xa&&Buffer.isBuffer(e)||pE(e)||e===null){const s=n.reduce((l,c)=>l*c,1);e===null&&(e=new ArrayBuffer(s*parseInt(r[r.length-1],10)));const o=e.byteLength/parseInt(r[r.length-1],10);if(s!==o)throw new Error(`Buffer has ${o} of dtype ${r}, shape is too large or small ${n} (flat=${s})`);const a=Qr(r);this.data=fB(e,a,n)}else this.data=e}get(e){const[n,r]=tq(this.data,this.shape,e);return r.length===0?n:new ri(n,r,this.dtype)}set(e=null,n){e===null&&(e=[vo(null)]),typeof n=="number"?this.shape.length===0?this.data[0]=n:nq(this.data,n,this.shape,e):rq(this.data,n.data,this.shape,n.shape,e)}flatten(){return this.shape.length===1?this.data:iq(this.data,this.shape,Qr(this.dtype))}static arange(e,n="<i4"){const r=Qr(n),i=sq([e],r);return new ri(i,[e],n)}}function sq(t,e){const n=t.reduce((i,s)=>i*s,1),r=new e(n);return r.set([...Array(n).keys()]),r}function fB(t,e,n,r=0){if(n.length===1)return new e(t.slice(r,r+n[0]*e.BYTES_PER_ELEMENT));const i=new Array(n[0]);if(n.length===2){for(let a=0;a<n[0];a++)i[a]=new e(t.slice(r+n[1]*a*e.BYTES_PER_ELEMENT,r+n[1]*(a+1)*e.BYTES_PER_ELEMENT));return i}const s=n.slice(1),o=s.reduce((a,l)=>a*l,1);for(let a=0;a<n[0];a++)i[a]=fB(t,e,s,r+o*a*e.BYTES_PER_ELEMENT);return i}function oq(t,e,n,r,i){const s=Es(r,n,!0),[o]=yo(s,n);dB(i,t,e,o)}function aq(t,e,n,r,i,s,o){const a=Es(r,n,!1),[l,c]=yo(a,n);if(JSON.stringify(c)!==JSON.stringify(o))throw new Ut(`Shape mismatch in target and source RawArray: ${c} and ${o}`);km(t,e,l,i,s)}function lq(t,e,n,r,i,s,o,a){const l=Es(r,n,!0),[c]=yo(l,n),u=Es(a,o,!1),[f]=yo(u,o);Qm(t,e,c,i,s,f)}function dB(t,e,n,r){const[i,...s]=r,[o,...a]=n,[l,c,u,f]=i;if(n.length===1){if(u===1&&o===1)e.fill(t,l,l+f);else for(let d=0;d<f;d++)e[o*(l+u*d)]=t;return}for(let d=0;d<f;d++)dB(t,e.subarray(o*(l+u*d)),a,s)}function km(t,e,n,r,i){if(n.length===0){t.set(r);return}const[s,...o]=n,[a,...l]=e;if(typeof s=="number"){km(t.subarray(s*a),l,o,r,i);return}const[c,...u]=i,[f,d,h,g]=s;if(e.length===1){if(h===1&&a===1&&c===1)t.set(r.subarray(0,g),f);else for(let A=0;A<g;A++)t[a*(f+h*A)]=r[c*A];return}for(let A=0;A<g;A++)km(t.subarray(a*(f+A*h)),l,o,r.subarray(c*A),u)}function Qm(t,e,n,r,i,s){if(s.length===0){t.set(r.subarray(0,t.length));return}const[o,...a]=n,[l,...c]=s,[u,...f]=e,[d,...h]=i;if(typeof l=="number"){Qm(t,e,n,r.subarray(d*l),h,c);return}const[g,A,E,p]=o,[m,y,_,I]=l;if(e.length===1&&i.length===1){if(E===1&&u===1&&_===1&&d===1)t.set(r.subarray(m,m+p),g);else for(let C=0;C<p;C++)t[u*(g+E*C)]=r[d*(m+_*C)];return}for(let C=0;C<p;C++)Qm(t.subarray(u*(g+C*E)),f,a,r.subarray(d*(m+C*_)),h,c)}class Vs{constructor(e,n,r,i){const s=e!==null&&!!e.BYTES_PER_ELEMENT;if(n===void 0){if(!s)throw new Ut("Shape argument is required unless you pass in a TypedArray");n=[e.length]}if(n=AE(n),r===void 0){if(!s)throw new Ut("Dtype argument is required unless you pass in a TypedArray");r=cB(e)}if(i===void 0&&(i=HK(n)),this.shape=n,this.dtype=r,this.strides=i,s&&n.length!==1&&(e=e.buffer),this.shape.length===0)this.data=new(Qr(r))(1);else if(Xa&&Buffer.isBuffer(e)||pE(e)||e===null){const o=n.reduce((c,u)=>c*u,1);e===null&&(e=new ArrayBuffer(o*parseInt(r[r.length-1],10)));const a=e.byteLength/parseInt(r[r.length-1],10);if(o!==a)throw new Error(`Buffer has ${a} of dtype ${r}, shape is too large or small ${n} (flat=${o})`);const l=Qr(r);this.data=new l(e)}else this.data=e}set(e=null,n,r){e===null&&(e=[vo(null)]),typeof n=="number"?this.shape.length===0?this.data[0]=n:oq(this.data,this.strides,this.shape,e,n):n instanceof Vs&&r?lq(this.data,this.strides,this.shape,e,n.data,n.strides,n.shape,r):aq(this.data,this.strides,this.shape,e,n.data,n.strides,n.shape)}}var hB={exports:{}};(function(t){var e=Object.prototype.hasOwnProperty,n="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(n=!1));function i(l,c,u){this.fn=l,this.context=c,this.once=u||!1}function s(l,c,u,f,d){if(typeof u!="function")throw new TypeError("The listener must be a function");var h=new i(u,f||l,d),g=n?n+c:c;return l._events[g]?l._events[g].fn?l._events[g]=[l._events[g],h]:l._events[g].push(h):(l._events[g]=h,l._eventsCount++),l}function o(l,c){--l._eventsCount===0?l._events=new r:delete l._events[c]}function a(){this._events=new r,this._eventsCount=0}a.prototype.eventNames=function(){var c=[],u,f;if(this._eventsCount===0)return c;for(f in u=this._events)e.call(u,f)&&c.push(n?f.slice(1):f);return Object.getOwnPropertySymbols?c.concat(Object.getOwnPropertySymbols(u)):c},a.prototype.listeners=function(c){var u=n?n+c:c,f=this._events[u];if(!f)return[];if(f.fn)return[f.fn];for(var d=0,h=f.length,g=new Array(h);d<h;d++)g[d]=f[d].fn;return g},a.prototype.listenerCount=function(c){var u=n?n+c:c,f=this._events[u];return f?f.fn?1:f.length:0},a.prototype.emit=function(c,u,f,d,h,g){var A=n?n+c:c;if(!this._events[A])return!1;var E=this._events[A],p=arguments.length,m,y;if(E.fn){switch(E.once&&this.removeListener(c,E.fn,void 0,!0),p){case 1:return E.fn.call(E.context),!0;case 2:return E.fn.call(E.context,u),!0;case 3:return E.fn.call(E.context,u,f),!0;case 4:return E.fn.call(E.context,u,f,d),!0;case 5:return E.fn.call(E.context,u,f,d,h),!0;case 6:return E.fn.call(E.context,u,f,d,h,g),!0}for(y=1,m=new Array(p-1);y<p;y++)m[y-1]=arguments[y];E.fn.apply(E.context,m)}else{var _=E.length,I;for(y=0;y<_;y++)switch(E[y].once&&this.removeListener(c,E[y].fn,void 0,!0),p){case 1:E[y].fn.call(E[y].context);break;case 2:E[y].fn.call(E[y].context,u);break;case 3:E[y].fn.call(E[y].context,u,f);break;case 4:E[y].fn.call(E[y].context,u,f,d);break;default:if(!m)for(I=1,m=new Array(p-1);I<p;I++)m[I-1]=arguments[I];E[y].fn.apply(E[y].context,m)}}return!0},a.prototype.on=function(c,u,f){return s(this,c,u,f,!1)},a.prototype.once=function(c,u,f){return s(this,c,u,f,!0)},a.prototype.removeListener=function(c,u,f,d){var h=n?n+c:c;if(!this._events[h])return this;if(!u)return o(this,h),this;var g=this._events[h];if(g.fn)g.fn===u&&(!d||g.once)&&(!f||g.context===f)&&o(this,h);else{for(var A=0,E=[],p=g.length;A<p;A++)(g[A].fn!==u||d&&!g[A].once||f&&g[A].context!==f)&&E.push(g[A]);E.length?this._events[h]=E.length===1?E[0]:E:o(this,h)}return this},a.prototype.removeAllListeners=function(c){var u;return c?(u=n?n+c:c,this._events[u]&&o(this,u)):(this._events=new r,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=n,a.EventEmitter=a,t.exports=a})(hB);var cq=hB.exports;class gB extends Error{constructor(e){super(e),this.name="TimeoutError"}}function uq(t,e,n,r){let i;const s=new Promise((o,a)=>{if(typeof e!="number"||e<0)throw new TypeError("Expected `milliseconds` to be a positive number");if(e===Number.POSITIVE_INFINITY){o(t);return}r={customTimers:{setTimeout,clearTimeout},...r},i=r.customTimers.setTimeout.call(void 0,()=>{if(typeof n=="function"){try{o(n())}catch(u){a(u)}return}const l=typeof n=="string"?n:`Promise timed out after ${e} milliseconds`,c=n instanceof Error?n:new gB(l);typeof t.cancel=="function"&&t.cancel(),a(c)},e),(async()=>{try{o(await t)}catch(l){a(l)}finally{r.customTimers.clearTimeout.call(void 0,i)}})()});return s.clear=()=>{clearTimeout(i),i=void 0},s}function fq(t,e,n){let r=0,i=t.length;for(;i>0;){const s=Math.trunc(i/2);let o=r+s;n(t[o],e)<=0?(r=++o,i-=s+1):i=s}return r}class dq{constructor(){Object.defineProperty(this,"_queue",{enumerable:!0,configurable:!0,writable:!0,value:[]})}enqueue(e,n){var r;n={priority:0,...n};const i={priority:n.priority,run:e};if(this.size&&((r=this._queue[this.size-1])===null||r===void 0?void 0:r.priority)>=n.priority){this._queue.push(i);return}const s=fq(this._queue,i,(o,a)=>a.priority-o.priority);this._queue.splice(s,0,i)}dequeue(){const e=this._queue.shift();return e==null?void 0:e.run}filter(e){return this._queue.filter(n=>n.priority===e.priority).map(n=>n.run)}get size(){return this._queue.length}}const Tf=()=>{},hq=new gB;class kI extends cq{constructor(e){var n,r,i,s;if(super(),Object.defineProperty(this,"_carryoverConcurrencyCount",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_isIntervalIgnored",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_intervalCount",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"_intervalCap",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_interval",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_intervalEnd",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"_intervalId",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_timeoutId",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_queue",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_queueClass",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_pendingCount",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"_concurrency",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_isPaused",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_resolveEmpty",{enumerable:!0,configurable:!0,writable:!0,value:Tf}),Object.defineProperty(this,"_resolveIdle",{enumerable:!0,configurable:!0,writable:!0,value:Tf}),Object.defineProperty(this,"_timeout",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_throwOnTimeout",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),e={carryoverConcurrencyCount:!1,intervalCap:Number.POSITIVE_INFINITY,interval:0,concurrency:Number.POSITIVE_INFINITY,autoStart:!0,queueClass:dq,...e},!(typeof e.intervalCap=="number"&&e.intervalCap>=1))throw new TypeError(`Expected \`intervalCap\` to be a number from 1 and up, got \`${(r=(n=e.intervalCap)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:""}\` (${typeof e.intervalCap})`);if(e.interval===void 0||!(Number.isFinite(e.interval)&&e.interval>=0))throw new TypeError(`Expected \`interval\` to be a finite number >= 0, got \`${(s=(i=e.interval)===null||i===void 0?void 0:i.toString())!==null&&s!==void 0?s:""}\` (${typeof e.interval})`);this._carryoverConcurrencyCount=e.carryoverConcurrencyCount,this._isIntervalIgnored=e.intervalCap===Number.POSITIVE_INFINITY||e.interval===0,this._intervalCap=e.intervalCap,this._interval=e.interval,this._queue=new e.queueClass,this._queueClass=e.queueClass,this.concurrency=e.concurrency,this._timeout=e.timeout,this._throwOnTimeout=e.throwOnTimeout===!0,this._isPaused=e.autoStart===!1}get _doesIntervalAllowAnother(){return this._isIntervalIgnored||this._intervalCount<this._intervalCap}get _doesConcurrentAllowAnother(){return this._pendingCount<this._concurrency}_next(){this._pendingCount--,this._tryToStartAnother(),this.emit("next")}_resolvePromises(){this._resolveEmpty(),this._resolveEmpty=Tf,this._pendingCount===0&&(this._resolveIdle(),this._resolveIdle=Tf,this.emit("idle"))}_onResumeInterval(){this._onInterval(),this._initializeIntervalIfNeeded(),this._timeoutId=void 0}_isIntervalPaused(){const e=Date.now();if(this._intervalId===void 0){const n=this._intervalEnd-e;if(n<0)this._intervalCount=this._carryoverConcurrencyCount?this._pendingCount:0;else return this._timeoutId===void 0&&(this._timeoutId=setTimeout(()=>{this._onResumeInterval()},n)),!0}return!1}_tryToStartAnother(){if(this._queue.size===0)return this._intervalId&&clearInterval(this._intervalId),this._intervalId=void 0,this._resolvePromises(),!1;if(!this._isPaused){const e=!this._isIntervalPaused();if(this._doesIntervalAllowAnother&&this._doesConcurrentAllowAnother){const n=this._queue.dequeue();return n?(this.emit("active"),n(),e&&this._initializeIntervalIfNeeded(),!0):!1}}return!1}_initializeIntervalIfNeeded(){this._isIntervalIgnored||this._intervalId!==void 0||(this._intervalId=setInterval(()=>{this._onInterval()},this._interval),this._intervalEnd=Date.now()+this._interval)}_onInterval(){this._intervalCount===0&&this._pendingCount===0&&this._intervalId&&(clearInterval(this._intervalId),this._intervalId=void 0),this._intervalCount=this._carryoverConcurrencyCount?this._pendingCount:0,this._processQueue()}_processQueue(){for(;this._tryToStartAnother(););}get concurrency(){return this._concurrency}set concurrency(e){if(!(typeof e=="number"&&e>=1))throw new TypeError(`Expected \`concurrency\` to be a number from 1 and up, got \`${e}\` (${typeof e})`);this._concurrency=e,this._processQueue()}async add(e,n={}){return new Promise((r,i)=>{const s=async()=>{this._pendingCount++,this._intervalCount++;try{const a=await(this._timeout===void 0&&n.timeout===void 0?e():uq(Promise.resolve(e()),n.timeout===void 0?this._timeout:n.timeout,()=>{(n.throwOnTimeout===void 0?this._throwOnTimeout:n.throwOnTimeout)&&i(hq)}));r(a),this.emit("completed",a)}catch(o){i(o),this.emit("error",o)}this._next()};this._queue.enqueue(s,n),this._tryToStartAnother(),this.emit("add")})}async addAll(e,n){return Promise.all(e.map(async r=>this.add(r,n)))}start(){return this._isPaused?(this._isPaused=!1,this._processQueue(),this):this}pause(){this._isPaused=!0}clear(){this._queue=new this._queueClass}async onEmpty(){if(this._queue.size!==0)return new Promise(e=>{const n=this._resolveEmpty;this._resolveEmpty=()=>{n(),e()}})}async onSizeLessThan(e){if(!(this._queue.size<e))return new Promise(n=>{const r=()=>{this._queue.size<e&&(this.removeListener("next",r),n())};this.on("next",r)})}async onIdle(){if(!(this._pendingCount===0&&this._queue.size===0))return new Promise(e=>{const n=this._resolveIdle;this._resolveIdle=()=>{n(),e()}})}get size(){return this._queue.size}sizeBy(e){return this._queue.filter(e).length}get pending(){return this._pendingCount}get isPaused(){return this._isPaused}get timeout(){return this._timeout}set timeout(e){this._timeout=e}}class Za{constructor(e,n=null,r,i=!1,s=null,o=!0,a=!0){this.store=e,this._chunkStore=s,this.path=Kn(n),this.keyPrefix=_s(this.path),this.readOnly=i,this.cacheMetadata=o,this.cacheAttrs=a,this.meta=r,this.meta.compressor!==null?this.compressor=LK(this.meta.compressor):this.compressor=null;const l=this.keyPrefix+oB;this.attrs=new lB(this.store,l,this.readOnly,a)}get chunkStore(){return this._chunkStore?this._chunkStore:this.store}get name(){return this.path.length>0?this.path[0]!=="/"?"/"+this.path:this.path:null}get basename(){const e=this.name;if(e===null)return null;const n=e.split("/");return n[n.length-1]}get shape(){return this.meta.shape}get chunks(){return this.meta.chunks}get chunkSize(){return this.chunks.reduce((e,n)=>e*n,1)}get dtype(){return this.meta.dtype}get fillValue(){const e=this.meta.fill_value;return e==="NaN"?NaN:e==="Infinity"?1/0:e==="-Infinity"?-1/0:this.meta.fill_value}get nDims(){return this.meta.shape.length}get size(){return this.meta.shape.reduce((e,n)=>e*n,1)}get length(){return this.shape[0]}get _chunkDataShape(){if(this.shape.length===0)return[1];{const e=[];for(let n=0;n<this.shape.length;n++)e[n]=Math.ceil(this.shape[n]/this.chunks[n]);return e}}get chunkDataShape(){return this._chunkDataShape}get numChunks(){return this.chunkDataShape.reduce((e,n)=>e*n,1)}static async create(e,n=null,r=!1,i=null,s=!0,o=!0){const a=await this.loadMetadataForConstructor(e,n);return new Za(e,n,a,r,i,s,o)}static async loadMetadataForConstructor(e,n){try{n=Kn(n);const r=_s(n),i=await e.getItem(r+Ah);return ph(i)}catch(r){throw await Mn(e,n)?new fi(n??""):new Error("Failed to load metadata for ZarrArray:"+r.toString())}}async reloadMetadata(){const e=this.keyPrefix+Ah,n=this.store.getItem(e);return this.meta=ph(await n),this.meta}async refreshMetadata(){this.cacheMetadata||await this.reloadMetadata()}get(e=null,n={}){return this.getBasicSelection(e,!1,n)}getRaw(e=null,n={}){return this.getBasicSelection(e,!0,n)}async getBasicSelection(e,n=!1,{concurrencyLimit:r=10,progressCallback:i}={}){if(this.cacheMetadata||await this.reloadMetadata(),this.shape.length===0)throw new Error("Shape [] indexing is not supported yet");return this.getBasicSelectionND(e,n,r,i)}getBasicSelectionND(e,n,r,i){const s=new MI(e,this);return this.getSelection(s,n,r,i)}async getSelection(e,n,r,i){const s=this.dtype,o=e.shape,a=e.shape.reduce((u,f)=>u*f,1);if(n&&a===this.chunkSize){const u=e.iter(),f=u.next();if(f.done===!1&&u.next().done===!0){const d=f.value;return await this.decodeDirectToRawArray(d,o,a)}}const l=n?new Vs(null,o,s):new ri(null,o,s);if(a===0)return l;const c=new kI({concurrency:r});if(i){let u=0,f=0;for(const d of e.iter())f+=1;i({progress:0,queueSize:f});for(const d of e.iter())(async()=>(await c.add(()=>this.chunkGetItem(d.chunkCoords,d.chunkSelection,l,d.outSelection,e.dropAxes)),u+=1,i({progress:u,queueSize:f})))()}else for(const u of e.iter())c.add(()=>this.chunkGetItem(u.chunkCoords,u.chunkSelection,l,u.outSelection,e.dropAxes));return await c.onIdle(),l.shape.length===0?l.data[0]:l}async chunkGetItem(e,n,r,i,s){if(e.length!==this._chunkDataShape.length)throw new Ut(`Inconsistent shapes: chunkCoordsLength: ${e.length}, cDataShapeLength: ${this.chunkDataShape.length}`);const o=this.chunkKey(e);try{const a=await this.chunkStore.getItem(o),l=await this.decodeChunk(a);if(r instanceof ri){if(FK(i)&&DI(n,this.chunks)&&!this.meta.filters){r.set(i,this.toNestedArray(l));return}const u=this.toNestedArray(l).get(n);if(s!==null)throw new Error("Drop axes is not supported yet");r.set(i,u)}else r.set(i,this.chunkBufferToRawArray(l),n)}catch(a){if(gp(a))this.fillValue!==null&&r.set(i,this.fillValue);else throw a}}async getRawChunk(e,n){if(e.length!==this.shape.length)throw new Error(`Chunk coordinates ${e.join(".")} do not correspond to shape ${this.shape}.`);try{for(let a=0;a<e.length;a++){const l=Math.ceil(this.shape[a]/this.chunks[a]);e[a]=hE(e[a],l)}}catch(a){throw a instanceof Oc?new Oc(`index ${e.join(".")} is out of bounds for shape: ${this.shape} and chunks ${this.chunks}`):a}const r=this.chunkKey(e),i=this.chunkStore.getItem(r,n==null?void 0:n.storeOptions),s=await this.decodeChunk(await i),o=this.chunks.filter(a=>a!==1);return new Vs(s,o,this.dtype)}chunkKey(e){var n;const r=(n=this.meta.dimension_separator)!==null&&n!==void 0?n:".";return this.keyPrefix+e.join(r)}ensureByteArray(e){return typeof e=="string"?new Uint8Array(Buffer.from(e).buffer):new Uint8Array(e)}toTypedArray(e){return new(Qr(this.dtype))(e)}toNestedArray(e){const n=this.ensureByteArray(e).buffer;return new ri(n,this.chunks,this.dtype)}async decodeChunk(e){let n=this.ensureByteArray(e);if(this.compressor!==null&&(n=await(await this.compressor).decode(n)),this.dtype.includes(">")&&sB(this.toTypedArray(n.buffer)),this.meta.order==="F"&&this.nDims>1){const r=this.toTypedArray(n.buffer),i=new(Qr(this.dtype))(r.length);return ZK(r,i,this.chunks),i.buffer}return n.buffer}chunkBufferToRawArray(e){return new Vs(e,this.chunks,this.dtype)}async decodeDirectToRawArray({chunkCoords:e},n,r){const i=this.chunkKey(e);try{const s=await this.chunkStore.getItem(i);return new Vs(await this.decodeChunk(s),n,this.dtype)}catch(s){if(gp(s)){const o=new(Qr(this.dtype))(r);return new Vs(o.fill(this.fillValue),n)}else throw s}}async set(e=null,n,r={}){await this.setBasicSelection(e,n,r)}async setBasicSelection(e,n,{concurrencyLimit:r=10,progressCallback:i}={}){if(this.readOnly)throw new sn("Object is read only");if(this.cacheMetadata||await this.reloadMetadata(),this.shape.length===0)throw new Error("Shape [] indexing is not supported yet");await this.setBasicSelectionND(e,n,r,i)}async setBasicSelectionND(e,n,r,i){const s=new MI(e,this);await this.setSelection(s,n,r,i)}getChunkValue(e,n,r,i){let s;if(i.length===0)s=r;else if(typeof r=="number")s=r;else if(s=r.get(e.outSelection),n.dropAxes!==null)throw new Error("Handling drop axes not supported yet");return s}async setSelection(e,n,r,i){const s=e.shape;if(s.length!==0){if(typeof n!="number")if(n instanceof ri){if(!jK(n.shape,s))throw new Ut(`Shape mismatch in source NestedArray and set selection: ${n.shape} and ${s}`)}else throw new Error("Unknown data type for setting :(")}const o=new kI({concurrency:r});if(i){let a=0;for(const c of e.iter())a+=1;let l=0;i({progress:0,queueSize:a});for(const c of e.iter()){const u=this.getChunkValue(c,e,n,s);(async()=>(await o.add(()=>this.chunkSetItem(c.chunkCoords,c.chunkSelection,u)),l+=1,i({progress:l,queueSize:a})))()}}else for(const a of e.iter()){const l=this.getChunkValue(a,e,n,s);o.add(()=>this.chunkSetItem(a.chunkCoords,a.chunkSelection,l))}await o.onIdle()}async chunkSetItem(e,n,r){if(this.meta.order==="F"&&this.nDims>1)throw new Error("Setting content for arrays in F-order is not supported.");const i=this.chunkKey(e);let s=null;const o=Qr(this.dtype),a=this.chunkSize;if(DI(n,this.chunks))typeof r=="number"?(s=new o(a),s.fill(r)):s=r.flatten();else{let c;try{const f=await this.chunkStore.getItem(i),d=await this.decodeChunk(f);c=this.toTypedArray(d)}catch(f){if(gp(f))c=new o(a),this.fillValue!==null&&c.fill(this.fillValue);else throw f}const u=new ri(c,this.chunks,this.dtype);u.set(n,r),s=u.flatten()}const l=await this.encodeChunk(s);this.chunkStore.setItem(i,l)}async encodeChunk(e){if(this.dtype.includes(">")&&(e=WK(e)),this.compressor!==null){const n=new Uint8Array(e.buffer);return(await(await this.compressor).encode(n)).buffer}return e.buffer}}class gq{constructor(e={}){this.root=e}proxy(){return lE(this)}getParent(e){let n=this.root;const r=e.split("/");for(const i of r.slice(0,r.length-1))if(n=n[i],!n)throw Error(e);return[n,r[r.length-1]]}requireParent(e){let n=this.root;const r=e.split("/");for(const i of r.slice(0,r.length-1))n[i]===void 0&&(n[i]={}),n=n[i];return[n,r[r.length-1]]}getItem(e){const[n,r]=this.getParent(e),i=n[r];if(i===void 0)throw new vu(e);return i}setItem(e,n){const[r,i]=this.requireParent(e);return r[i]=n,!0}deleteItem(e){const[n,r]=this.getParent(e);return delete n[r]}containsItem(e){try{return this.getItem(e)!==void 0}catch{return!1}}keys(){throw new Error("Method not implemented.")}}var Dr;(function(t){t.HEAD="HEAD",t.GET="GET",t.PUT="PUT"})(Dr||(Dr={}));const Aq=[Dr.HEAD,Dr.GET,Dr.PUT];class AB{constructor(e,n={}){this.url=e;const{fetchOptions:r={},supportedMethods:i=Aq}=n;this.fetchOptions=r,this.supportedMethods=new Set(i)}keys(){throw new Error("Method not implemented.")}async getItem(e,n){const r=Ap(this.url,e),i=await fetch(r,{...this.fetchOptions,...n});if(i.status===404)throw new vu(e);if(i.status!==200)throw new dE(String(i.status));return Xa?Buffer.from(await i.arrayBuffer()):i.arrayBuffer()}async setItem(e,n){if(!this.supportedMethods.has(Dr.PUT))throw new Error("HTTP PUT no a supported method for store.");const r=Ap(this.url,e);return typeof n=="string"&&(n=new TextEncoder().encode(n).buffer),(await fetch(r,{...this.fetchOptions,method:Dr.PUT,body:n})).status.toString()[0]==="2"}deleteItem(e){throw new Error("Method not implemented.")}async containsItem(e){const n=Ap(this.url,e),r=this.supportedMethods.has(Dr.HEAD)?Dr.HEAD:Dr.GET;return(await fetch(n,{...this.fetchOptions,method:r})).status===200}}async function Ja({shape:t,chunks:e=!0,dtype:n="<i4",compressor:r=null,fillValue:i=null,order:s="C",store:o,overwrite:a=!1,path:l,chunkStore:c,filters:u,cacheMetadata:f=!0,cacheAttrs:d=!0,readOnly:h=!1,dimensionSeparator:g}){return o=Dc(o),await sd(o,t,e,n,l,r,i,s,a,c,u,g),await Za.create(o,l,h,c,f,d)}async function pq(t,e={}){return e.fillValue=null,Ja({shape:t,...e})}async function mq(t,e={}){return e.fillValue=0,Ja({shape:t,...e})}async function vq(t,e={}){return e.fillValue=1,Ja({shape:t,...e})}async function yq(t,e,n={}){return n.fillValue=e,Ja({shape:t,...n})}async function QI(t,e={}){let n=null;t instanceof ri?(n=t.shape,e.dtype=e.dtype===void 0?t.dtype:e.dtype):n=t.byteLength;const r=e.readOnly===void 0?!1:e.readOnly;e.readOnly=!1;const i=await Ja({shape:n,...e});return await i.set(null,t),i.readOnly=r,i}async function Eq({shape:t,mode:e="a",chunks:n=!0,dtype:r="<i4",compressor:i=null,fillValue:s=null,order:o="C",store:a,overwrite:l=!1,path:c=null,chunkStore:u,filters:f,cacheMetadata:d=!0,cacheAttrs:h=!0,dimensionSeparator:g}={}){if(a=Dc(a),u===void 0&&(u=Dc(a)),c=Kn(c),e==="r"||e==="r+"){if(!await qn(a,c))throw await Mn(a,c)?new fi(c):new cE(c)}else if(e==="w"){if(t===void 0)throw new Ut("Shape can not be undefined when creating a new array");await sd(a,t,n,r,c,i,s,o,l,u,f,g)}else if(e==="a"){if(!await qn(a,c)){if(await Mn(a,c))throw new fi(c);if(t===void 0)throw new Ut("Shape can not be undefined when creating a new array");await sd(a,t,n,r,c,i,s,o,l,u,f,g)}}else if(e==="w-"||e==="x"){if(await qn(a,c))throw new Vr(c);if(await Mn(a,c))throw new fi(c);if(t===void 0)throw new Ut("Shape can not be undefined when creating a new array");await sd(a,t,n,r,c,i,s,o,l,u,f,g)}else throw new Ut(`Invalid mode argument: ${e}`);const A=e==="r";return Za.create(a,c,A,u,d,h)}function Dc(t){return t===void 0?new gq:typeof t=="string"?new AB(t):t}class Ks{constructor(e,n=null,r,i=!1,s=null,o=!0){this.store=e,this._chunkStore=s,this.path=Kn(n),this.keyPrefix=_s(this.path),this.readOnly=i,this.meta=r;const a=this.keyPrefix+oB;this.attrs=new lB(this.store,a,this.readOnly,o)}get name(){return this.path.length>0?this.path[0]!=="/"?"/"+this.path:this.path:"/"}get basename(){const e=this.name.split("/");return e[e.length-1]}get chunkStore(){return this._chunkStore?this._chunkStore:this.store}static async create(e,n=null,r=!1,i=null,s=!0){const o=await this.loadMetadataForConstructor(e,n);return new Ks(e,n,o,r,i,s)}static async loadMetadataForConstructor(e,n){n=Kn(n);const r=_s(n);try{const i=await e.getItem(r+mE);return ph(i)}catch{throw await qn(e,n)?new Vr(n):new Ag(n)}}itemPath(e){const n=typeof e=="string"&&e.length>0&&e[0]==="/",r=Kn(e);return!n&&this.path.length>0?this.keyPrefix+r:r}async createGroup(e,n=!1){if(this.readOnly)throw new sn("group is read only");const r=this.itemPath(e);return await ic(this.store,r,this._chunkStore,n),Ks.create(this.store,r,this.readOnly,this._chunkStore,this.attrs.cache)}async requireGroup(e,n=!1){if(this.readOnly)throw new sn("group is read only");const r=this.itemPath(e);return await Mn(this.store,r)||await ic(this.store,r,this._chunkStore,n),Ks.create(this.store,r,this.readOnly,this._chunkStore,this.attrs.cache)}getOptsForArrayCreation(e,n={}){const r=this.itemPath(e);return n.path=r,n.cacheAttrs===void 0&&(n.cacheAttrs=this.attrs.cache),n.store=this.store,n.chunkStore=this.chunkStore,n}array(e,n,r,i){if(this.readOnly)throw new sn("group is read only");return r=this.getOptsForArrayCreation(e,r),r.overwrite=i===void 0?r.overwrite:i,QI(n,r)}empty(e,n,r={}){if(this.readOnly)throw new sn("group is read only");return r=this.getOptsForArrayCreation(e,r),pq(n,r)}zeros(e,n,r={}){if(this.readOnly)throw new sn("group is read only");return r=this.getOptsForArrayCreation(e,r),mq(n,r)}ones(e,n,r={}){if(this.readOnly)throw new sn("group is read only");return r=this.getOptsForArrayCreation(e,r),vq(n,r)}full(e,n,r,i={}){if(this.readOnly)throw new sn("group is read only");return i=this.getOptsForArrayCreation(e,i),yq(n,r,i)}createDataset(e,n,r,i){if(this.readOnly)throw new sn("group is read only");i=this.getOptsForArrayCreation(e,i);let s;if(r===void 0){if(n===void 0)throw new Ut("Shape must be set if no data is passed to CreateDataset");s=Ja({shape:n,...i})}else s=QI(r,i);return s}async getItem(e){const n=this.itemPath(e);if(await qn(this.store,n))return Za.create(this.store,n,this.readOnly,this.chunkStore,void 0,this.attrs.cache);if(await Mn(this.store,n))return Ks.create(this.store,n,this.readOnly,this._chunkStore,this.attrs.cache);throw new vu(e)}async setItem(e,n){return await this.array(e,n,{},!0),!0}async deleteItem(e){throw this.readOnly?new sn("group is read only"):new Error("Method not implemented.")}async containsItem(e){const n=this.itemPath(e);return await qn(this.store,n)||Mn(this.store,n)}proxy(){return lE(this)}}async function EE(t,e=null,n="a",r,i=!0){if(t=Dc(t),r!==void 0&&(r=Dc(t)),e=Kn(e),n==="r"||n==="r+"){if(!await Mn(t,e))throw await qn(t,e)?new Vr(e):new Ag(e)}else if(n==="w")await ic(t,e,r,!0);else if(n==="a"){if(!await Mn(t,e)){if(await qn(t,e))throw new Vr(e);await ic(t,e,r)}}else if(n==="w-"||n==="x"){if(await qn(t,e))throw new Vr(e);if(await Mn(t,e))throw new fi(e);await ic(t,e,r)}else throw new Ut(`Invalid mode argument: ${n}`);const s=n==="r";return Ks.create(t,e,s,r,i)}function _q(t,e=1,n={}){const{indent:r=" ",includeEmptyLines:i=!1}=n;if(typeof t!="string")throw new TypeError(`Expected \`input\` to be a \`string\`, got \`${typeof t}\``);if(typeof e!="number")throw new TypeError(`Expected \`count\` to be a \`number\`, got \`${typeof e}\``);if(e<0)throw new RangeError(`Expected \`count\` to be at least 0, got \`${e}\``);if(typeof r!="string")throw new TypeError(`Expected \`options.indent\` to be a \`string\`, got \`${typeof r}\``);if(e===0)return t;const s=i?/^/gm:/^(?!\s*$)/gm;return t.replace(s,r.repeat(e))}function xq(t){if(typeof t!="string")throw new TypeError("Expected a string");return t.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d")}const FI=/\s+at.*[(\s](.*)\)?/,Cq=/^(?:(?:(?:node|node:[\w/]+|(?:(?:node:)?internal\/[\w/]*|.*node_modules\/(?:babel-polyfill|pirates)\/.*)?\w+)(?:\.js)?:\d+:\d+)|native)/,Iq=typeof O_.homedir>"u"?"":O_.homedir().replace(/\\/g,"/");function wq(t,{pretty:e=!1,basePath:n}={}){const r=n&&new RegExp(`(at | \\()${xq(n.replace(/\\/g,"/"))}`,"g");if(typeof t=="string")return t.replace(/\\/g,"/").split(`
`).filter(i=>{const s=i.match(FI);if(s===null||!s[1])return!0;const o=s[1];return o.includes(".app/Contents/Resources/electron.asar")||o.includes(".app/Contents/Resources/default_app.asar")||o.includes("node_modules/electron/dist/resources/electron.asar")||o.includes("node_modules/electron/dist/resources/default_app.asar")?!1:!Cq.test(o)}).filter(i=>i.trim()!=="").map(i=>(r&&(i=i.replace(r,"$1")),e&&(i=i.replace(FI,(s,o)=>s.replace(o,o.replace(Iq,"~")))),i)).join(`
`)}const Sq=t=>t.replace(/\s+at .*aggregate-error\/index.js:\d+:\d+\)?/g,"");var Qc;class bq extends Error{constructor(n){if(!Array.isArray(n))throw new TypeError(`Expected input to be an Array, got ${typeof n}`);n=n.map(i=>i instanceof Error?i:i!==null&&typeof i=="object"?Object.assign(new Error(i.message),i):new Error(i));let r=n.map(i=>typeof i.stack=="string"&&i.stack.length>0?Sq(wq(i.stack)):String(i)).join(`
`);r=`
`+_q(r,4);super(r);LE(this,Qc,void 0);Tg(this,"name","AggregateError");ME(this,Qc,n)}get errors(){return PE(this,Qc).slice()}}Qc=new WeakMap;class Tq extends Error{constructor(e){super(),this.name="AbortError",this.message=e}}const UI=t=>globalThis.DOMException===void 0?new Tq(t):new DOMException(t),GI=t=>{const e=t.reason===void 0?UI("This operation was aborted."):t.reason;return e instanceof Error?e:UI(e)};async function pB(t,e,{concurrency:n=Number.POSITIVE_INFINITY,stopOnError:r=!0,signal:i}={}){return new Promise((s,o)=>{if(t[Symbol.iterator]===void 0&&t[Symbol.asyncIterator]===void 0)throw new TypeError(`Expected \`input\` to be either an \`Iterable\` or \`AsyncIterable\`, got (${typeof t})`);if(typeof e!="function")throw new TypeError("Mapper function is required");if(!((Number.isSafeInteger(n)||n===Number.POSITIVE_INFINITY)&&n>=1))throw new TypeError(`Expected \`concurrency\` to be an integer from 1 and up or \`Infinity\`, got \`${n}\` (${typeof n})`);const a=[],l=[],c=new Map;let u=!1,f=!1,d=!1,h=0,g=0;const A=t[Symbol.iterator]===void 0?t[Symbol.asyncIterator]():t[Symbol.iterator](),E=m=>{u=!0,f=!0,o(m)};i&&(i.aborted&&E(GI(i)),i.addEventListener("abort",()=>{E(GI(i))}));const p=async()=>{if(f)return;const m=await A.next(),y=g;if(g++,m.done){if(d=!0,h===0&&!f){if(!r&&l.length>0){E(new bq(l));return}if(f=!0,c.size===0){s(a);return}const _=[];for(const[I,C]of a.entries())c.get(I)!==zI&&_.push(C);s(_)}return}h++,(async()=>{try{const _=await m.value;if(f)return;const I=await e(_,y);I===zI&&c.set(y,I),a[y]=I,h--,await p()}catch(_){if(r)E(_);else{l.push(_),h--;try{await p()}catch(I){E(I)}}}})()};(async()=>{for(let m=0;m<n;m++){try{await p()}catch(y){E(y);break}if(d||u)break}})()})}const zI=Symbol("skip"),Bq={...qa.defaultProps,loaders:{type:"array",value:[],compare:!0},spacer:{type:"number",value:5,compare:!0},rows:{type:"number",value:0,compare:!0},columns:{type:"number",value:0,compare:!0},concurrency:{type:"number",value:10,compare:!1},text:{type:"boolean",value:!1,compare:!0},onClick:{type:"function",value:null,compare:!0},onHover:{type:"function",value:null,compare:!0}};function Rq(t,e,n=[0,0],r=1){const[i,s]=n,o=t*r+i,a=e*r+s;return[i,a,o,s]}function Pq(t){const[e]=t,{width:n,height:r}=e.data;return t.forEach(({data:i})=>{if((i==null?void 0:i.width)!==n||(i==null?void 0:i.height)!==r)throw new Error("Grid data is not same shape.")}),{width:n,height:r}}function VI(t){const{loaders:e,selections:n=[]}=t;let{concurrency:r}=t;return r&&n.length>0&&(r=Math.ceil(r/n.length)),pB(e,async s=>{const o=n.map(l=>s.loader.getRaster({selection:l})),a=await Promise.all(o);return{...s,data:{data:a.map(l=>l.data),width:a[0].width,height:a[0].height}}},{concurrency:r})}class _E extends er{initializeState(){this.state={gridData:[],width:0,height:0},VI(this.props).then(e=>{const{width:n,height:r}=Pq(e);this.setState({gridData:e,width:n,height:r})})}updateState({props:e,oldProps:n,changeFlags:r}){const{propsChanged:i}=r,s=typeof i=="string"&&i.includes("props.loaders"),o=e.selections!==n.selections;(s||o)&&VI(this.props).then(a=>{this.setState({gridData:a})})}getPickingInfo({info:e}){if(!e.coordinate)return e;const n=this.props.spacer||0,{width:r,height:i}=this.state,[s,o]=e.coordinate,a=Math.floor(o/(i+n)),l=Math.floor(s/(r+n));return e.gridCoord={row:a,column:l},e}renderLayers(){const{gridData:e,width:n,height:r}=this.state;if(n===0||r===0)return null;const{rows:i,columns:s,spacer:o=0,id:a=""}=this.props,l=e.map(c=>{const u=c.row*(r+o),f=c.col*(n+o),d={channelData:c.data,bounds:Rq(n,r,[f,u]),id:`${a}-GridLayer-${c.row}-${c.col}`,dtype:c.loader.dtype||"Uint16",pickable:!1,extensions:[new $a]};return new qa({...this.props,...d})});if(this.props.pickable){const[c,u]=[0,0],f=i*(r+o),d=s*(n+o),g={data:[{polygon:[[u,c],[d,c],[d,f],[u,f]]}],getPolygon:E=>E.polygon,getFillColor:[0,0,0,0],getLineColor:[0,0,0,0],pickable:!0,id:`${a}-GridLayer-picking`},A=new du({...this.props,...g});l.push(A)}if(this.props.text){const c=new Ya({id:`${a}-GridLayer-text`,data:e,getPosition:u=>[u.col*(n+o),u.row*(r+o)],getText:u=>u.name,getColor:[255,255,255,255],getSize:16,getAngle:0,getTextAnchor:"start",getAlignmentBaseline:"top"});l.push(c)}return l}}_E.layerName="GridLayer";_E.defaultProps=Bq;class Lq{constructor(e,n=100){Tg(this,"cache");this.store=e,this.cache=new OW({maxSize:n})}getItem(...e){const[n,r]=e;if(this.cache.has(n))return this.cache.get(n);const i=this.store.getItem(n,r).catch(s=>{throw this.cache.delete(n),s});return this.cache.set(n,i),i}async containsItem(e){return this.cache.has(e)||this.store.containsItem(e)}keys(){return this.store.keys()}deleteItem(e){throw new Error("deleteItem not implemented")}setItem(e,n){throw new Error("setItem not implemented")}}const xa=6,jr={cyan:"#00FFFF",yellow:"#FFFF00",magenta:"#FF00FF",red:"#FF0000",green:"#00FF00",blue:"#0000FF",white:"#FFFFFF"},Mq=[jr.magenta,jr.green],Nq=[jr.red,jr.green,jr.blue],jI=Object.values(jr).slice(0,-2);async function Oq(t){let e;if(typeof t=="string"){let n;if(t.endsWith(".json")){const[{ReferenceStore:r},i]=await Promise.all([fn(()=>import("./index-29c9b378.js"),[],import.meta.url),fetch(t).then(s=>s.json())]);n=r.fromJSON(i)}else{const r=new URL(t);n=new AB(r.origin),e=r.pathname.slice(1)}return{store:new Lq(n),path:e}}return{store:t,path:e}}async function Dq(t){const{store:e,path:n}=await Oq(t);return EE(e,n).catch(r=>{if(r instanceof Vr)return Eq({store:e});throw r})}const kq=new TextDecoder;function HI(t,e){return t.store.getItem(qs(t.path,e,".zattrs")).then(n=>kq.decode(n)).then(n=>JSON.parse(n))}async function mB(t,e){const{datasets:n}=e[0]||[{path:"0"}],r=await Promise.all(n.map(({path:i})=>t.getItem(i)));if(r.every(i=>i instanceof Za))return r;throw Error("Multiscales metadata included a path to a group.")}function xE(t){t.startsWith("#")&&(t=t.slice(1));const e=parseInt(t.slice(0,2),16),n=parseInt(t.slice(2,4),16),r=parseInt(t.slice(4,6),16);return[e,n,r]}function kc(t){return Array.from({length:t},(e,n)=>n)}function Qq(t,e=" "){for(;t.length>0&&e.includes(t.charAt(t.length-1));)t=t.substr(0,t.length-1);return t}function qs(...t){return t.filter(Boolean).map(e=>Qq(e,"/")).join("/")}function Fq(t,e){return(!e||e.length!=t.shape.length)&&(e=t.shape.slice(0,-2).map((r,i)=>""+i).concat(["y","x"])),e}function pg(t){const e=[{type:"time",name:"t"},{type:"channel",name:"c"},{type:"space",name:"z"},{type:"space",name:"y"},{type:"space",name:"x"}];function n(i){return i==="t"?"time":i==="c"?"channel":"space"}let r=e;return t[0].axes&&(r=t[0].axes.map(i=>{if(typeof i=="string")return{name:i,type:n(i)};const{name:s,type:o}=i;return{name:s,type:o??n(s)}})),r}function mg(t){return t.map(n=>n.name)}function vB(t,e){return e||(t<=xa?e=Array(t).fill(!0):e=[...Array(xa).fill(!0),...Array(t-xa).fill(!1)]),e}function yB(t,e){let n=[];if(t==1)n=[jr.white];else if(t==2)n=Mq;else if(t===3)n=Nq;else if(t<=xa)n=jI.slice(0,t);else{n=Array(t).fill(jr.white);const r=e.flatMap((i,s)=>i?s:[]);for(const[i,s]of r.entries())n[s]=jI[i]}return n}function EB(t){const e=t[t.length-1];return e===3||e===4}function vg(t){const e=EB(t.shape),[n,r]=t.chunks.slice(e?-3:-2),i=Math.min(n,r);return 2**Math.floor(Math.log2(i))}function Uq([t,e],[n,r],i,s){const o=(n-s*2)/t,a=(r-s*2)/e;return{zoom:Math.min(i,Math.log2(Math.min(o,a))),target:[t/2,e/2]}}function Gq(t){return Array.isArray(t)?t.length===16&&t.every(e=>typeof e=="number"):!1}function yu(t){if(!t)return Ze.IDENTITY;const e=new Ze;try{const n=typeof t=="string"?JSON.parse(t):t;if(!Gq(n))throw Error("Invalid modelMatrix size. Must be 16.");e.setRowMajor(...n)}catch{const n=`Failed to parse modelMatrix. Got ${JSON.stringify(t)}, using identity.`;console.warn(n)}return e}async function CE(t,e){if(t.dtype==="Uint8")return[0,255];const{data:n}=await t.getRaster({selection:e});let r=1/0,i=-1/0;for(let s=0;s<n.length;s++)n[s]>i&&(i=n[s]),n[s]<r&&(r=n[s]);return r===i&&(r=0,i=1),[r,i]}async function _B(t,e,n,r){const i=r??t.shape.map(()=>0);if(t.shape[e]!==n.length&&e>-1)throw new Error("provided visibilities don't match number of channels");return Promise.all(n.map(async(o,a)=>{if(!o)return;const l=[...i];return e>-1&&(l[e]=a),CE(t,l)}))}function zq(){let t,e;return{promise:new Promise((r,i)=>{t=r,e=i}),resolve:t,reject:e}}function Vq(){let t=new EventTarget;return{on:(e,n)=>{t.addEventListener(e,r=>n(r.detail))},emit:(e,n)=>{t.dispatchEvent(new CustomEvent(e,{detail:n}))}}}async function jq(t,e,n){var C;const r=t.acquisition?parseInt(t.acquisition):void 0;let i=[];if(!(n!=null&&n.images))throw Error("Well .zattrs missing images");if(!e.path)throw Error("Cannot inspect zarr path to open well.");const[s,o]=e.path.split("/").filter(Boolean).slice(-2);let{images:a}=n;const l=a.flatMap(b=>b.acquisition?[b.acquisition]:[]);if(l.length>1){const b=e.path.replace(`${s}/${o}`,""),R=await(await EE(e.store,b)).attrs.asObject();i=((C=R==null?void 0:R.plate)==null?void 0:C.acquisitions)??[],r&&l.includes(r)&&(a=a.filter(M=>M.acquisition===r))}const c=a.map(b=>b.path),u=Math.ceil(Math.sqrt(c.length)),f=Math.ceil(c.length/u),d=await e.getItem(c[0]).then(b=>b.attrs.asObject());if(!("multiscales"in d))throw Error("Path for image is not valid.");let h=d.multiscales[0].datasets[0].path;const g=c.map(b=>e.getItem(qs(b,h))),A=await Promise.all(g),E=pg(d.multiscales),p=mg(E),m=vg(A[0]),y=kc(f).flatMap(b=>kc(u).filter(B=>B+b*u<A.length).map(B=>{const R=B+b*u;return{name:String(R),row:b,col:B,loader:new hg(A[R],p,m)}}));let _;"omero"in d?_=IE(d.omero,E):_=await xB(y[0].loader,p);const I={loaders:y,..._,axis_labels:p,loader:[y[0].loader],model_matrix:yu(t.model_matrix),defaults:{selection:_.defaultSelection,colormap:t.colormap??"",opacity:t.opacity??1},name:`Well ${s}${o}`};return i.length>0&&(I.acquisitions=i,I.acquisitionId=r||-1),I.rows=f,I.columns=u,I.onClick=b=>{let B=b.gridCoord;if(!B)return;const{row:R,column:M}=B;let U;if(typeof t.source=="string"&&e.path&&!isNaN(R)&&!isNaN(M)){const G=R*u+M;U=qs(t.source,c[G])}t.onClick?(delete b.layer,b.imageSource=U,t.onClick(b)):U&&window.open(window.location.origin+window.location.pathname+"?source="+U)},I}async function WI(t,e,n){if(!("columns"in n)||!("rows"in n))throw Error("Plate .zattrs missing columns or rows");const r=n.rows.map(C=>C.name),i=n.columns.map(C=>C.name),s=n.wells.map(C=>C.path),o=await HI(e,s[0]);if(!("well"in o))throw Error("Path for image is not valid, not a well.");const a=o.well.images[0].path,l=await e.getItem(qs(s[0],a)).then(C=>C.attrs.asObject());if(!("multiscales"in l))throw Error("Path for image is not valid.");const{datasets:c}=l.multiscales[0],u=c[c.length-1].path;async function f(C){const b=await HI(e,C);return qs(C,b.well.images[0].path)}const d=await Promise.all(s.map(f)),h=([C,b])=>e.getItem(b).then(B=>[C,B]),g=await pB(d.map(C=>[C,qs(C,u)]),h,{concurrency:10}),A=await Promise.all(g),E=pg(l.multiscales),p=mg(E),m=vg(A[0][1]),y=A.map(C=>{const[b,B]=C[0].split("/");return{name:`${b}${B}`,row:r.indexOf(b),col:i.indexOf(B),loader:new hg(C[1],p,m)}});let _;"omero"in l?_=IE(l.omero,E):_=await xB(y[0].loader,p);const I={loaders:y,..._,axis_labels:p,loader:[y[0].loader],model_matrix:yu(t.model_matrix),defaults:{selection:_.defaultSelection,colormap:t.colormap??"",opacity:t.opacity??1},name:n.name||"Plate",rows:r.length,columns:i.length};return I.onClick=C=>{let b=C.gridCoord;if(!b)return;const{row:B,column:R}=b;let M;typeof t.source=="string"&&e.path&&!isNaN(B)&&!isNaN(R)&&(M=qs(t.source,r[B],i[R])),t.onClick?(delete C.layer,C.imageSource=M,t.onClick(C)):M&&window.open(window.location.origin+window.location.pathname+"?source="+M)},I}async function Hq(t,e,n){const{name:r,opacity:i=1,colormap:s=""}=t,o=await mB(e,n.multiscales),a=pg(n.multiscales),l=mg(a),c=IE(n.omero,a),u=vg(o[0]);return{loader:o.map(d=>new hg(d,l,u)),axis_labels:l,model_matrix:yu(t.model_matrix),defaults:{selection:c.defaultSelection,colormap:s,opacity:i},...c,name:c.name??r}}async function xB(t,e){const n=e.indexOf("c"),r=n==-1?1:t.shape[n],i=vB(r),s=await _B(t,n,i),o=yB(r,i);return{name:"Image",names:kc(r).map(a=>`channel_${a}`),colors:o,contrast_limits:s,visibilities:i,channel_axis:e.includes("c")?e.indexOf("c"):null,defaultSelection:e.map(()=>0)}}function IE({rdefs:t,channels:e,name:n},r){const i=(t==null?void 0:t.defaultT)??0,s=(t==null?void 0:t.defaultZ)??0,o=[],a=[],l=[],c=[];e.forEach((d,h)=>{o.push(d.color),a.push([d.window.start,d.window.end]),l.push(d.active),c.push(d.label||""+h)});const u=r.map(d=>d.type=="time"?i:d.name=="z"?s:0),f=r.findIndex(d=>d.type==="channel");return{name:n,names:c,colors:o,contrast_limits:a,visibilities:l,channel_axis:f,defaultSelection:u}}async function Wq(t,e){const{color:n,contrast_limits:r,visibility:i,name:s,colormap:o="",opacity:a=1}=t,l=e[e.length-1],c=Array(e[0].shape.length).fill(0),u=r??await(()=>CE(l,c))();return{loader:e,name:s,channel_axis:null,colors:[n??jr.white],names:["channel_0"],contrast_limits:[u],visibilities:[i??!0],model_matrix:yu(t.model_matrix),defaults:{selection:c,colormap:o,opacity:a},axis_labels:e[0].labels}}async function Yq(t,e,n){const{names:r,contrast_limits:i,name:s,model_matrix:o,opacity:a=1,colormap:l=""}=t;let{visibilities:c,colors:u}=t;const f=e[0].shape[n];for(const h of[i,c,r,u])if(h&&h.length!==f){const g=Object.keys({channelProp:h})[0];throw Error(`channel_axis is length ${f} and provided channel_axis property ${g} is different size.`)}c=c||vB(f),u=u||yB(f,c);const d=i??await(()=>_B(e[e.length-1],n,c))();return{loader:e,name:s,channel_axis:n,colors:u,names:r??kc(f).map(h=>`channel_${h}`),contrast_limits:d,visibilities:c,model_matrix:yu(o),defaults:{selection:Array(e[0].shape.length).fill(0),colormap:l,opacity:a},axis_labels:e[0].labels}}async function $q(t){const e=await Dq(t.source);let n,r;if(e instanceof Ks){const u=await e.attrs.asObject();if("plate"in u)return WI(t,e,u.plate);if("well"in u)return jq(t,e,u.well);if("omero"in u)return Hq(t,e,u);if(Object.keys(u).length===0&&e.path){const f=e.path.slice(0,e.path.lastIndexOf("/")),d=await EE(e.store,f),h=await d.attrs.asObject();if("plate"in h)return WI(t,d,h.plate)}if(!("multiscales"in u))throw Error("Group is missing multiscales specification.");n=await mB(e,u.multiscales),u.multiscales[0].axes&&(r=pg(u.multiscales))}else n=[e];const{channel_axis:i,labels:s}=Kq(t,r,n[0]),o=vg(n[0]),a=n.map(u=>new hg(u,s,o)),[l]=a;if("channel_axis"in t||i>-1)return t=t,Yq(t,a,Number(t.channel_axis??i));if(l.shape.length===2||!("channel_axis"in t))return Wq(t,a);throw Error("Failed to load image.")}function Kq(t,e,n){const r=t.axis_labels,i="channel_axis"in t?Number(t.channel_axis):void 0;if(e){const a=r??mg(e),l=i??e.findIndex(c=>c.type==="channel");return{labels:a,channel_axis:l}}const s=r??Fq(n),o=i??s.indexOf("c");return{labels:s,channel_axis:o}}function CB(t){const{selection:e,opacity:n,colormap:r}=t.defaults,i=[],s=[],o=[],a=[],l=t.visibilities.flatMap((u,f)=>u?f:[]);for(const u of l.slice(0,xa)){const f=[...e];Number.isInteger(t.channel_axis)&&(f[t.channel_axis]=u),i.push(f),s.push(xE(t.colors[u])),o.push(t.contrast_limits[u]??[0,255]),a.push(!0)}const c={id:t.id,selections:i,colors:s,contrastLimits:o,contrastLimitsRange:[...o],channelsVisible:a,opacity:n,colormap:r,modelMatrix:t.model_matrix,onClick:t.onClick};return"loaders"in t?{Layer:_E,layerProps:{...c,loader:t.loader,loaders:t.loaders,columns:t.columns,rows:t.rows},on:!0}:t.loader.length===1?{Layer:mu,layerProps:{...c,loader:t.loader[0]},on:!0}:{Layer:oE,layerProps:{...c,loader:t.loader},on:!0}}const qq=Object.freeze(Object.defineProperty({__proto__:null,createSourceData:$q,initLayerStateFromSource:CB},Symbol.toStringTag,{value:"Module"}));function Xq(t,e){return Bn(r=>r(t),(r,i,s)=>{const o=typeof s=="function"?s(r(t)):s,a=i(t,o);return e(o),a})}const Fm=Bn([]),Zq=Bn(null,async(t,e,n)=>{const{createSourceData:r}=await fn(()=>Promise.resolve().then(()=>qq),void 0,import.meta.url),i=Math.random().toString(36).slice(2),s=await r(n),o=t(Fm);s.name||(s.name=`image_${Object.keys(o).length}`),e(Fm,[...o,{id:i,...s}])}),IB=x8(Fm),wB=m8(t=>Bn({...CB(t),id:t.id}),(t,e)=>t.id===e.id),Jq=Bn(t=>{const e=t(IB);if(e.length===0)return[];const n=e.map(r=>wB(t(r)));return t(w8(n))});function eX({sourceAtom:t,layerAtom:e}){const n=kn(t),[r,i]=pi(e),s=o=>{o.stopPropagation(),i(a=>{const l=!a.on;return{...a,on:l}})};return H(mi,{"aria-label":`toggle-layer-visibility-${n.id}`,onClick:s,style:{backgroundColor:"transparent",marginTop:"2px",color:`rgb(255, 255, 255, ${r.on?1:.5})`},children:r.on?H(A8,{}):H(p8,{})})}const tX=Ss({root:{borderBottom:"1px solid rgba(150, 150, 150, .125)",backgroundColor:"rgba(150, 150, 150, 0.25)",display:"block",padding:"0 3px",height:27,minHeight:27,overflow:"hidden",transition:"none","&$expanded":{minHeight:27}},content:{margin:0,"&$expanded":{margin:0}},expanded:{}})(l5);function nX({sourceAtom:t,layerAtom:e,name:n}){const i=`layer-controller-${kn(t).id}`;return H(tX,{"aria-controls":i,id:i,children:Xe("div",{style:{display:"flex",flexDirection:"row"},children:[H(eX,{sourceAtom:t,layerAtom:e}),H(hr,{style:{marginTop:"4px",marginLeft:"5px"},variant:"body2",children:n})]})})}function rX({sourceAtom:t}){const e=kn(t),{acquisitionId:n,acquisitions:r}=e;return r?H(xs,{children:H(ot,{children:Xe(ry,{fullWidth:!0,style:{fontSize:"0.7em"},onChange:s=>{let o=s.target.value;const a=new URL(window.location.href);o==="-1"?a.searchParams.delete("acquisition"):a.searchParams.set("acquisition",o),window.location.href=decodeURIComponent(a.href)},value:n,children:[H("option",{value:"-1",children:"Filter by Acquisition"},"-1"),r.map(s=>(s=s,Xe("option",{value:s.id,children:["Acquisition: ",s.name]},s.id)))]})})}):null}function iX({sourceAtom:t,layerAtom:e}){const[n,r]=pi(t),[i,s]=pi(e),[o,a]=S.useState(null),l=g=>{a(g.currentTarget)},c=()=>{a(null)},u=async g=>{c();const A=+g.target.value,E=[...n.defaults.selection];n.channel_axis&&(E[n.channel_axis]=A);let p;if(n.contrast_limits[A])p=n.contrast_limits[A];else{const{loader:m}=i.layerProps,y=Array.isArray(m)?m[m.length-1]:m;p=await CE(y,E),r(_=>{const I=[..._.contrast_limits];return I[A]=p,{..._,contrast_limits:I}})}s(m=>{const{layerProps:y}=m,_=[...y.selections,E],I=[...y.colors,xE(n.colors[A])],C=[...y.contrastLimitsRange,p],b=[...y.channelsVisible,!0];return{...m,layerProps:{...y,selections:_,colors:I,contrastLimits:C,contrastLimitsRange:[...C],channelsVisible:b}}})},{names:f}=n,d=!!o,h=d?`layer-${n.id}-add-channel`:void 0;return Xe(xs,{children:[H(mi,{onClick:l,"aria-describedby":h,style:{backgroundColor:"transparent",padding:0,zIndex:2,cursor:"pointer"},disabled:i.layerProps.selections.length===xa,children:H(ab,{})}),H(ny,{id:h,open:d,anchorEl:o,onClose:c,anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"left"},children:Xe(nu,{style:{padding:"0px 4px",marginBottom:4,width:"8em"},children:[H(hr,{variant:"caption",children:"selection: "}),H(bn,{}),Xe(ry,{fullWidth:!0,style:{fontSize:"0.7em"},id:`layer-${n.id}-channel-select`,onChange:u,children:[H("option",{"aria-label":"None",value:"",children:"None"}),f.map((g,A)=>H("option",{value:A,children:g},g))]})]})})]})}const sX=Ss({root:{color:"white",padding:"10px 0px 5px 0px",marginRight:"5px"},active:{boxshadow:"0px 0px 0px 8px rgba(158, 158, 158, 0.16)"}})(iy);function oX({layerAtom:t}){const[e,n]=pi(t),r=(i,s)=>{const o=s;n(a=>({...a,layerProps:{...a.layerProps,opacity:o}}))};return H(sX,{value:e.layerProps.opacity,onChange:r,min:0,max:1,step:.01})}const aX=Ss({root:{width:"5.5em",fontSize:"0.7em"}})(ty);function lX({sourceAtom:t,layerAtom:e,axisIndex:n,max:r}){const i=kn(t),[s,o]=pi(e),[a,l]=S.useState(null),c=A=>{l(A.currentTarget)},u=()=>{l(null)},f=A=>{let E=+A.target.value;E<0&&(E=0),E>r&&(E=r),o(p=>{let m={...p.layerProps};return m.selections=m.selections.map(y=>{let _=[...y];return _[n]=E,_}),{...p,layerProps:m}})},d=!!a,h=d?`${n}-index-${i.id}-options`:void 0,g=s.layerProps.selections[0]?s.layerProps.selections[0][n]:1;return Xe(xs,{children:[H(mi,{onClick:c,"aria-describedby":h,style:{backgroundColor:"transparent",padding:0,zIndex:2,cursor:"pointer"},children:H(lb,{})}),H(ny,{id:h,open:d,anchorEl:a,onClose:u,anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"left"},children:Xe(nu,{style:{padding:"0px 4px",marginBottom:4},children:[H(hr,{variant:"caption",children:"Index:"}),H(bn,{}),H(aX,{value:g,onChange:f,type:"number",id:"max",fullWidth:!1}),H(bn,{})]})})]})}const cX=Ss({root:{color:"white",padding:"10px 0px 5px 0px",marginRight:"5px"},active:{boxshadow:"0px 0px 0px 8px rgba(158, 158, 158, 0.16)"}})(iy);function uX({sourceAtom:t,layerAtom:e,axisIndex:n,max:r}){const[i,s]=pi(e),o=kn(t),{axis_labels:a}=o;let l=a[n];(l==="t"||l==="z")&&(l=l.toUpperCase());const[c,u]=S.useState(0);return S.useEffect(()=>{u(i.layerProps.selections[0]?i.layerProps.selections[0][n]:1)},[i.layerProps.selections]),Xe(xs,{children:[Xe(ot,{children:[Xe(ot,{container:!0,justifyContent:"space-between",children:[H(ot,{item:!0,xs:10,children:H("div",{style:{width:165,overflow:"hidden",textOverflow:"ellipsis"},children:Xe(hr,{variant:"caption",noWrap:!0,children:[l,": ",c,"/",r]})})}),H(ot,{item:!0,xs:1,children:H(lX,{sourceAtom:t,layerAtom:e,axisIndex:n,max:r})})]}),H(ot,{container:!0,justifyContent:"space-between",children:H(ot,{item:!0,xs:12,children:H(cX,{value:c,onChange:(h,g)=>{u(g)},onChangeCommitted:()=>{s(h=>{let g={...h.layerProps};return g.selections=g.selections.map(A=>{let E=[...A];return E[n]=c,E}),{...h,layerProps:g}})},min:0,max:r,step:1})})})]}),H(bn,{})]})}function fX({sourceAtom:t,layerAtom:e}){const n=kn(t),{axis_labels:r,channel_axis:i,loader:s}=n,o=r.slice(0,-2).map((a,l)=>[a,l,s[0].shape[l]]).filter(a=>a[1]===i?!1:a[2]>1).map(([a,l,c])=>H(uX,{sourceAtom:t,layerAtom:e,axisIndex:l,max:c-1},a));return o.length===0?null:Xe(xs,{children:[H(ot,{children:o}),H(bn,{})]})}const dX=jv(()=>({container:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"2px"},button:{padding:"3px",width:"16px",height:"16px"}})),hX=Object.entries(jr).map(([t,e])=>[t,xE(e)]);function gX({handleChange:t}){const e=dX();return H("div",{className:e.container,"aria-label":"color-swatch",children:hX.map(([n,r])=>H(mi,{className:e.button,onClick:()=>t(r),children:H(d8,{fontSize:"small",style:{color:`rgb(${r})`}})},n))})}const YI=Ss({root:{width:"5.5em",fontSize:"0.7em"}})(ty);function AX({sourceAtom:t,layerAtom:e,channelIndex:n}){const r=kn(t),[i,s]=pi(e),[o,a]=S.useState(null),{channel_axis:l,names:c}=r,u=_=>{a(_.currentTarget)},f=()=>{a(null)},d=_=>{s(I=>{const C=[...I.layerProps.colors];return C[n]=_,{...I,layerProps:{...I.layerProps,colors:C}}})},h=_=>{const I=_.target.id;let C=+_.target.value;C<0&&(C=0),s(b=>{const B=[...b.layerProps.contrastLimitsRange],R=[...b.layerProps.contrastLimits],[M,U]=B[n],[G,Y]=R[n],[Z,oe]=I==="min"?[C,U]:[M,C];return Z>G&&(R[n]=[Z,Y]),oe<Y&&(R[n]=[G,oe]),B[n]=[Z,oe],{...b,layerProps:{...b.layerProps,contrastLimits:R,contrastLimitsRange:B}}})},g=()=>{s(_=>{const{layerProps:I}=_,C=[...I.colors],b=[...I.contrastLimits],B=[...I.contrastLimitsRange],R=[...I.selections],M=[...I.channelsVisible];return C.splice(n,1),b.splice(n,1),B.splice(n,1),R.splice(n,1),M.splice(n,1),{..._,layerProps:{...I,colors:C,selections:R,channelsVisible:M,contrastLimits:b,contrastLimitsRange:B}}})},A=_=>{s(I=>{const C=[...I.layerProps.selections],b=[...C[n]];return Number.isInteger(l)&&(b[l]=+_.target.value,C[n]=b),{...I,layerProps:{...I.layerProps,selections:C}}})},E=!!o,p=E?`channel-${n}-${r.name}-options`:void 0,[m,y]=i.layerProps.contrastLimitsRange[n];return Xe(xs,{children:[H(mi,{onClick:u,"aria-describedby":p,style:{backgroundColor:"transparent",padding:0,zIndex:2,cursor:"pointer"},children:H(lb,{})}),H(ny,{id:p,open:E,anchorEl:o,onClose:f,anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"left"},children:Xe(nu,{style:{padding:"0px 4px",marginBottom:4},children:[Xe("div",{style:{display:"flex",justifyContent:"space-between"},children:[H(hr,{variant:"caption",children:"remove:"}),H(mi,{onClick:g,children:H(cb,{})})]}),H(bn,{}),H(hr,{variant:"caption",children:"selection:"}),H(bn,{}),H(ry,{fullWidth:!0,style:{fontSize:"0.7em"},id:`layer-${r.name}-channel-select`,onChange:A,value:i.layerProps.selections[n][l],children:c.map((_,I)=>Xe("option",{value:I,children:["(",I,") ",_]},_))}),H(bn,{}),H(hr,{variant:"caption",children:"contrast limits:"}),H(bn,{}),H(YI,{value:m,onChange:h,type:"number",id:"min",fullWidth:!1}),H(YI,{value:y,onChange:h,type:"number",id:"max",fullWidth:!1}),H(bn,{}),H(hr,{variant:"caption",children:"color:"}),H(bn,{}),H("div",{style:{display:"flex",justifyContent:"center"},children:H(gX,{handleChange:d})})]})})]})}function pX({sourceAtom:t,layerAtom:e,channelIndex:n}){const r=kn(t),[i,s]=pi(e),o=(y,_)=>{s(I=>{const C=[...I.layerProps.contrastLimits];return C[n]=_,{...I,layerProps:{...I.layerProps,contrastLimits:C}}})},a=()=>{s(y=>{const _=[...y.layerProps.channelsVisible];return _[n]=!_[n],{...y,layerProps:{...y.layerProps,channelsVisible:_}}})},l=i.layerProps,c=[...l.contrastLimits[n]],u=`rgb(${l.colormap?[255,255,255]:l.colors[n]})`,f=l.channelsVisible[n],[d,h]=l.contrastLimitsRange[n],{channel_axis:g,names:A}=r,E=l.selections[n],p=Number.isInteger(g)?E[g]:0,m=A[p];return Xe(xs,{children:[Xe(ot,{container:!0,justifyContent:"space-between",wrap:"nowrap",children:[H(ot,{item:!0,xs:10,children:H("div",{style:{width:165,overflow:"hidden",textOverflow:"ellipsis"},children:H(hr,{variant:"caption",noWrap:!0,children:m})})}),H(ot,{item:!0,xs:1,children:H(AX,{sourceAtom:t,layerAtom:e,channelIndex:n})})]}),Xe(ot,{container:!0,justifyContent:"space-between",children:[H(ot,{item:!0,xs:2,children:H(mi,{style:{color:u,backgroundColor:"transparent",padding:0,zIndex:2},onClick:a,children:f?H(h8,{}):H(g8,{})})}),H(ot,{item:!0,xs:10,children:H(iy,{value:c,onChange:o,min:d,max:h,step:.01,style:{padding:"10px 0px 5px 0px",color:u}})})]})]})}const mX=Ss({root:{padding:"2px 5px",borderLeft:"1px solid rgba(150, 150, 150, .2)",borderRight:"1px solid rgba(150, 150, 150, .2)"}})(KN);function vX({sourceAtom:t,layerAtom:e}){const r=kn(e).layerProps.selections.length;return H(mX,{children:Xe(ot,{container:!0,direction:"column",children:[H(rX,{sourceAtom:t,layerAtom:e}),H(ot,{children:Xe(ot,{container:!0,justifyContent:"space-between",children:[H(ot,{item:!0,xs:3,children:H(hr,{variant:"caption",children:"opacity:"})}),H(ot,{item:!0,xs:8,children:H(oX,{sourceAtom:t,layerAtom:e})})]})}),H(bn,{}),H(fX,{sourceAtom:t,layerAtom:e}),Xe(ot,{container:!0,justifyContent:"space-between",children:[H(ot,{item:!0,xs:3,children:H(hr,{variant:"caption",children:"channels:"})}),H(ot,{item:!0,xs:1,children:H(iX,{sourceAtom:t,layerAtom:e})})]}),H(bn,{}),H(ot,{children:kc(r).map(i=>H(pX,{sourceAtom:t,layerAtom:e,channelIndex:i},i))})]})})}const yX=Ss({root:{borderBottom:"1px solid rgba(150, 150, 150, .2)",width:200,boxshadow:"none","&:not(:last-child)":{borderBottom:0},"&:before":{display:"none"},"&$expanded":{margin:0,padding:0}},expanded:{padding:1}})(WN);function EX({sourceAtom:t}){const e=kn(t),n=wB(e),{name:r=""}=e;return Xe(yX,{defaultExpanded:!0,children:[H(nX,{sourceAtom:t,layerAtom:n,name:r}),H(vX,{sourceAtom:t,layerAtom:n})]})}const _X=jv({root:{zIndex:1,position:"absolute",backgroundColor:"rgba(0, 0, 0, 0.7)",borderRadius:"5px",left:"5px",top:"5px"},scroll:{maxHeight:500,overflowX:"hidden",overflowY:"scroll","&::-webkit-scrollbar":{display:"none",background:"transparent"},scrollbarWidth:"none",flexDirection:"column"}});function xX(){const t=kn(IB),[e,n]=S.useReducer(i=>!i,!1),r=_X();return H("div",{className:r.root,style:{padding:`0px 5px ${e?0:5}px 5px`},children:Xe(ot,{container:!0,direction:"column",alignItems:"flex-start",children:[H(mi,{style:{backgroundColor:"transparent",padding:0},onClick:n,children:e?H(ab,{}):H(cb,{})}),H("div",{className:r.scroll,style:{display:e?"none":"flex"},children:t.map(i=>H(EX,{sourceAtom:i},`${i}`))})]})})}function CX(t){const{loader:e}=t,[n,r]=Array.isArray(e)?[e[0],e.length]:[e,0],i=EB(n.shape);let[s,o]=n.shape.slice(i?-3:-2);return"loaders"in t&&t.rows&&t.columns&&(s=(s+5)*t.rows,o=(o+5)*t.columns),{height:s,width:o,maxZoom:r}}function IX(t){var s,o;const[e,n]=pi(t.viewStateAtom),r=S.useRef(null);if(r.current&&!e&&((o=(s=t.layers[0])==null?void 0:s.props)!=null&&o.loader)){const{deck:a}=r.current,{width:l,height:c,maxZoom:u}=CX(t.layers[0].props),f=a.width<400?10:a.width<600?30:50,d=Uq([l,c],[a.width,a.height],u,f);n(d)}const i={preserveDrawingBuffer:!0};return H(RK,{ref:r,layers:t.layers,viewState:e,onViewStateChange:a=>n(a.viewState),views:[new Fy({id:"ortho",controller:!0})],glOptions:i})}function wX({viewStateAtom:t}){const n=kn(Jq).map(r=>r.on?new r.Layer(r.layerProps):null);return H(IX,{viewStateAtom:t,layers:n})}const Bf=new Map;function el(t,e){PK(t,()=>{if(!Bf.has(t)){const r=e().then(i=>i.default).catch(i=>{throw Bf.delete(t),i});Bf.set(t,r)}return Bf.get(t)})}el("lz4",()=>fn(()=>import("./lz4-46a6a62b.js"),[],import.meta.url));el("gzip",()=>fn(()=>import("./gzip-19617714.js"),["./gzip-19617714.js","./pako.esm-856454b6-72a01207.js"],import.meta.url));el("zlib",()=>fn(()=>import("./zlib-3606c2d7.js"),["./zlib-3606c2d7.js","./pako.esm-856454b6-72a01207.js"],import.meta.url));el("zstd",()=>fn(()=>import("./zstd-2a9908b4.js"),[],import.meta.url));el("blosc",()=>fn(()=>import("./blosc-5eba38ca.js"),[],import.meta.url));el("jpeg2k",()=>fn(()=>import("./jpeg2k-baa1f47e.js"),[],import.meta.url));var wE={};Object.defineProperty(wE,"__esModule",{value:!0});var Um=wE.default=void 0,SX={50:"#fafafa",100:"#f5f5f5",200:"#eeeeee",300:"#e0e0e0",400:"#bdbdbd",500:"#9e9e9e",600:"#757575",700:"#616161",800:"#424242",900:"#212121",A100:"#d5d5d5",A200:"#aaaaaa",A400:"#303030",A700:"#616161"},bX=SX;Um=wE.default=bX;const TX=jS({palette:{type:"dark",primary:Um,secondary:Um},props:{MuiButton:{size:"small"},MuiButtonBase:{disableRipple:!0},MuiFilledInput:{margin:"dense"},MuiFormControl:{margin:"dense"},MuiFormHelperText:{margin:"dense"},MuiIconButton:{size:"small"},MuiInputBase:{margin:"dense"},MuiInputLabel:{margin:"dense"},MuiOutlinedInput:{margin:"dense"}},overrides:{MuiSlider:{thumb:{"&:focus, &:hover":{boxShadow:"none"},height:11,width:5,borderRadius:"15%",marginLeft:-1}},MuiInput:{underline:{"&&&&:hover:before":{borderBottom:"1px solid #fff"}}},MuiPaper:{root:{backgroundColor:"rgba(0, 0, 0, 0.8)"}},MuiSvgIcon:{root:{width:"0.7em",height:"0.7em"}}}}),HX="0.3.0";function WX(t){const e=S.createRef(),n=Vq(),r=Xq(Bn(void 0),({zoom:l,target:c})=>n.emit("viewStateChange",{zoom:l,target:c})),{promise:i,resolve:s}=zq();function o(){const l=g0(Zq),c=g0(r);return S.useImperativeHandle(e,()=>({addImage:l,setViewState:c,on:n.on.bind(n),destroy:()=>a.unmount()}),[]),S.useEffect(()=>{e.current&&s(e.current)},[]),Xe(xs,{children:[H(xX,{}),H(wX,{viewStateAtom:r})]})}let a=pp.createRoot(t);return a.render(H(jM,{theme:TX,children:H(gP,{children:H(o,{})})})),i}export{FW as BaseDecoder,FX as LercAddCompression,QX as LercParameters,fn as __vitePreload,WX as createViewer,Fc as getDefaultExportFromCjs,HX as version};
//# sourceMappingURL=vizarr-217c4e20.js.map
